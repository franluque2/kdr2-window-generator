{"version":3,"file":"js/chunk-vendors.adca4097.js","mappings":"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","sources":["webpack://webapp/./node_modules/@firebase/util/dist/index.esm2017.js","webpack://webapp/./node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js","webpack://webapp/./node_modules/core-js/internals/a-callable.js","webpack://webapp/./node_modules/core-js/internals/a-possible-prototype.js","webpack://webapp/./node_modules/core-js/internals/add-to-unscopables.js","webpack://webapp/./node_modules/core-js/internals/an-object.js","webpack://webapp/./node_modules/core-js/internals/array-includes.js","webpack://webapp/./node_modules/core-js/internals/classof-raw.js","webpack://webapp/./node_modules/core-js/internals/classof.js","webpack://webapp/./node_modules/core-js/internals/clear-error-stack.js","webpack://webapp/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://webapp/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://webapp/./node_modules/core-js/internals/create-property-descriptor.js","webpack://webapp/./node_modules/core-js/internals/define-built-in.js","webpack://webapp/./node_modules/core-js/internals/descriptors.js","webpack://webapp/./node_modules/core-js/internals/document-create-element.js","webpack://webapp/./node_modules/core-js/internals/engine-user-agent.js","webpack://webapp/./node_modules/core-js/internals/engine-v8-version.js","webpack://webapp/./node_modules/core-js/internals/enum-bug-keys.js","webpack://webapp/./node_modules/core-js/internals/error-stack-installable.js","webpack://webapp/./node_modules/core-js/internals/export.js","webpack://webapp/./node_modules/core-js/internals/fails.js","webpack://webapp/./node_modules/core-js/internals/function-apply.js","webpack://webapp/./node_modules/core-js/internals/function-bind-native.js","webpack://webapp/./node_modules/core-js/internals/function-call.js","webpack://webapp/./node_modules/core-js/internals/function-name.js","webpack://webapp/./node_modules/core-js/internals/function-uncurry-this.js","webpack://webapp/./node_modules/core-js/internals/get-built-in.js","webpack://webapp/./node_modules/core-js/internals/get-method.js","webpack://webapp/./node_modules/core-js/internals/global.js","webpack://webapp/./node_modules/core-js/internals/has-own-property.js","webpack://webapp/./node_modules/core-js/internals/hidden-keys.js","webpack://webapp/./node_modules/core-js/internals/html.js","webpack://webapp/./node_modules/core-js/internals/ie8-dom-define.js","webpack://webapp/./node_modules/core-js/internals/indexed-object.js","webpack://webapp/./node_modules/core-js/internals/inherit-if-required.js","webpack://webapp/./node_modules/core-js/internals/inspect-source.js","webpack://webapp/./node_modules/core-js/internals/install-error-cause.js","webpack://webapp/./node_modules/core-js/internals/internal-state.js","webpack://webapp/./node_modules/core-js/internals/is-callable.js","webpack://webapp/./node_modules/core-js/internals/is-forced.js","webpack://webapp/./node_modules/core-js/internals/is-object.js","webpack://webapp/./node_modules/core-js/internals/is-pure.js","webpack://webapp/./node_modules/core-js/internals/is-symbol.js","webpack://webapp/./node_modules/core-js/internals/length-of-array-like.js","webpack://webapp/./node_modules/core-js/internals/make-built-in.js","webpack://webapp/./node_modules/core-js/internals/native-symbol.js","webpack://webapp/./node_modules/core-js/internals/native-weak-map.js","webpack://webapp/./node_modules/core-js/internals/normalize-string-argument.js","webpack://webapp/./node_modules/core-js/internals/object-create.js","webpack://webapp/./node_modules/core-js/internals/object-define-properties.js","webpack://webapp/./node_modules/core-js/internals/object-define-property.js","webpack://webapp/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://webapp/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://webapp/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://webapp/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://webapp/./node_modules/core-js/internals/object-keys-internal.js","webpack://webapp/./node_modules/core-js/internals/object-keys.js","webpack://webapp/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://webapp/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://webapp/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://webapp/./node_modules/core-js/internals/own-keys.js","webpack://webapp/./node_modules/core-js/internals/proxy-accessor.js","webpack://webapp/./node_modules/core-js/internals/require-object-coercible.js","webpack://webapp/./node_modules/core-js/internals/set-global.js","webpack://webapp/./node_modules/core-js/internals/shared-key.js","webpack://webapp/./node_modules/core-js/internals/shared-store.js","webpack://webapp/./node_modules/core-js/internals/shared.js","webpack://webapp/./node_modules/core-js/internals/to-absolute-index.js","webpack://webapp/./node_modules/core-js/internals/to-indexed-object.js","webpack://webapp/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://webapp/./node_modules/core-js/internals/to-length.js","webpack://webapp/./node_modules/core-js/internals/to-object.js","webpack://webapp/./node_modules/core-js/internals/to-primitive.js","webpack://webapp/./node_modules/core-js/internals/to-property-key.js","webpack://webapp/./node_modules/core-js/internals/to-string-tag-support.js","webpack://webapp/./node_modules/core-js/internals/to-string.js","webpack://webapp/./node_modules/core-js/internals/try-to-string.js","webpack://webapp/./node_modules/core-js/internals/uid.js","webpack://webapp/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://webapp/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://webapp/./node_modules/core-js/internals/well-known-symbol.js","webpack://webapp/./node_modules/core-js/internals/wrap-error-constructor-with-cause.js","webpack://webapp/./node_modules/core-js/modules/es.array.includes.js","webpack://webapp/./node_modules/core-js/modules/es.error.cause.js","webpack://webapp/./node_modules/firebase/compat/app/dist/index.esm.js","webpack://webapp/./node_modules/@firebase/database/dist/index.esm2017.js","webpack://webapp/./node_modules/@firebase/database-compat/dist/index.esm2017.js","webpack://webapp/../../src/directives/scroll/index.ts","webpack://webapp/../../src/mixins/scrollable/index.ts","webpack://webapp/../../src/components/VAppBar/VAppBar.ts","webpack://webapp/../../src/components/VAppBar/VAppBarNavIcon.ts","webpack://webapp/../../src/components/VApp/VApp.ts","webpack://webapp/../../src/components/VProgressCircular/VProgressCircular.ts","webpack://webapp/../../src/components/VProgressCircular/index.ts","webpack://webapp/../../src/components/VBtn/VBtn.ts","webpack://webapp/../../src/components/VCard/VCard.ts","webpack://webapp/../../src/components/VCard/index.ts","webpack://webapp/../../src/mixins/rippleable/index.ts","webpack://webapp/../../src/mixins/selectable/index.ts","webpack://webapp/../../src/components/VCheckbox/VCheckbox.ts","webpack://webapp/../../src/components/VDivider/VDivider.ts","webpack://webapp/../../src/components/VGrid/VCol.ts","webpack://webapp/../../src/components/VGrid/grid.ts","webpack://webapp/../../src/components/VGrid/VContainer.ts","webpack://webapp/../../src/components/VGrid/VRow.ts","webpack://webapp/../../src/components/VIcon/VIcon.ts","webpack://webapp/../../src/components/VIcon/index.ts","webpack://webapp/../../src/components/VResponsive/VResponsive.ts","webpack://webapp/../../src/components/VResponsive/index.ts","webpack://webapp/../../src/components/VImg/VImg.ts","webpack://webapp/../../src/components/VMessages/VMessages.ts","webpack://webapp/../../src/components/VMessages/index.ts","webpack://webapp/../../src/components/VInput/VInput.ts","webpack://webapp/../../src/components/VInput/index.ts","webpack://webapp/../../src/components/VItemGroup/VItemGroup.ts","webpack://webapp/../../src/components/VLabel/VLabel.ts","webpack://webapp/../../src/components/VLabel/index.ts","webpack://webapp/../../src/components/VList/VList.ts","webpack://webapp/../../src/components/VList/VListItem.ts","webpack://webapp/../../src/components/VList/VListItemGroup.ts","webpack://webapp/../../src/components/VList/VListItemIcon.ts","webpack://webapp/../../src/components/VList/VListGroup.ts","webpack://webapp/../../src/components/VList/VListItemAction.ts","webpack://webapp/../../src/components/VAvatar/VAvatar.ts","webpack://webapp/../../src/components/VAvatar/index.ts","webpack://webapp/../../src/components/VList/VListItemAvatar.ts","webpack://webapp/../../src/components/VList/index.ts","webpack://webapp/../../src/components/VMain/VMain.ts","webpack://webapp/../../src/components/VNavigationDrawer/VNavigationDrawer.ts","webpack://webapp/../../src/components/VSheet/VSheet.ts","webpack://webapp/../../src/components/VSheet/index.ts","webpack://webapp/../../src/components/VSubheader/VSubheader.ts","webpack://webapp/../../src/components/VTabs/VTab.ts","webpack://webapp/../../src/components/VWindow/VWindowItem.ts","webpack://webapp/../../src/components/VTabs/VTabItem.ts","webpack://webapp/../../src/components/VSlideGroup/VSlideGroup.ts","webpack://webapp/../../src/components/VTabs/VTabsBar.ts","webpack://webapp/../../src/components/VTabs/VTabs.ts","webpack://webapp/../../src/components/VBtn/index.ts","webpack://webapp/../../src/components/VWindow/VWindow.ts","webpack://webapp/../../src/components/VTabs/VTabsItems.ts","webpack://webapp/../../src/components/VTabs/VTabsSlider.ts","webpack://webapp/../../src/components/VCounter/VCounter.ts","webpack://webapp/../../src/components/VCounter/index.ts","webpack://webapp/../../src/mixins/intersectable/index.ts","webpack://webapp/../../src/components/VTextField/VTextField.ts","webpack://webapp/../../src/components/VTextarea/VTextarea.ts","webpack://webapp/../../src/components/VToolbar/VToolbar.ts","webpack://webapp/../../src/components/VToolbar/index.ts","webpack://webapp/../../src/components/transitions/createTransition.ts","webpack://webapp/../../src/components/transitions/expand-transition.ts","webpack://webapp/../../src/components/transitions/index.ts","webpack://webapp/../../src/directives/click-outside/index.ts","webpack://webapp/../../src/directives/intersect/index.ts","webpack://webapp/../../src/directives/resize/index.ts","webpack://webapp/../../src/directives/ripple/index.ts","webpack://webapp/../../src/directives/touch/index.ts","webpack://webapp/../src/install.ts","webpack://webapp/../../src/locale/en.ts","webpack://webapp/../../src/presets/default/index.ts","webpack://webapp/../../src/services/service/index.ts","webpack://webapp/../../src/services/presets/index.ts","webpack://webapp/../../src/services/application/index.ts","webpack://webapp/../../src/services/breakpoint/index.ts","webpack://webapp/../../src/services/goto/easing-patterns.ts","webpack://webapp/../../src/services/goto/util.ts","webpack://webapp/../../src/services/goto/index.ts","webpack://webapp/../../src/services/icons/presets/mdi-svg.ts","webpack://webapp/../../src/services/icons/presets/md.ts","webpack://webapp/../../src/services/icons/presets/mdi.ts","webpack://webapp/../../src/services/icons/presets/fa.ts","webpack://webapp/../../src/services/icons/presets/fa4.ts","webpack://webapp/../../src/services/icons/presets/fa-svg.ts","webpack://webapp/../../src/services/icons/presets/index.ts","webpack://webapp/../../src/services/icons/index.ts","webpack://webapp/../../src/services/lang/index.ts","webpack://webapp/../../src/util/color/transformSRGB.ts","webpack://webapp/../../src/util/color/transformCIELAB.ts","webpack://webapp/../../src/services/theme/utils.ts","webpack://webapp/../../src/services/theme/index.ts","webpack://webapp/../src/framework.ts","webpack://webapp/../../src/mixins/applicationable/index.ts","webpack://webapp/../../src/mixins/binds-attrs/index.ts","webpack://webapp/../../src/mixins/bootable/index.ts","webpack://webapp/../../src/mixins/colorable/index.ts","webpack://webapp/../../src/mixins/comparable/index.ts","webpack://webapp/../../src/mixins/dependent/index.ts","webpack://webapp/../../src/mixins/elevatable/index.ts","webpack://webapp/../../src/mixins/groupable/index.ts","webpack://webapp/../../src/components/VProgressLinear/VProgressLinear.ts","webpack://webapp/../../src/components/VProgressLinear/index.ts","webpack://webapp/../../src/mixins/loadable/index.ts","webpack://webapp/../../src/mixins/measurable/index.ts","webpack://webapp/../../src/mixins/mobile/index.ts","webpack://webapp/../../src/components/VOverlay/VOverlay.ts","webpack://webapp/../../src/components/VOverlay/index.ts","webpack://webapp/../../src/mixins/overlayable/index.ts","webpack://webapp/../../src/mixins/positionable/index.ts","webpack://webapp/../../src/mixins/proxyable/index.ts","webpack://webapp/../../src/mixins/registrable/index.ts","webpack://webapp/../../src/mixins/roundable/index.ts","webpack://webapp/../../src/mixins/routable/index.ts","webpack://webapp/../../src/mixins/sizeable/index.ts","webpack://webapp/../../src/mixins/ssr-bootable/index.ts","webpack://webapp/../../src/mixins/themeable/index.ts","webpack://webapp/../../src/mixins/toggleable/index.ts","webpack://webapp/../../src/mixins/validatable/index.ts","webpack://webapp/../../src/util/colorUtils.ts","webpack://webapp/../../src/util/console.ts","webpack://webapp/../../src/util/dom.ts","webpack://webapp/../../src/util/helpers.ts","webpack://webapp/../../src/util/mergeData.ts","webpack://webapp/../../src/util/mixins.ts","webpack://webapp/./node_modules/vue-router/dist/vue-router.esm.js","webpack://webapp/./node_modules/vue/dist/vue.runtime.esm.js","webpack://webapp/./node_modules/vuefire/dist/vuefire.esm.js","webpack://webapp/./node_modules/vuetify-loader/lib/runtime/installComponents.js","webpack://webapp/./node_modules/@firebase/app-compat/dist/esm/index.esm2017.js","webpack://webapp/./node_modules/idb/build/wrap-idb-value.js","webpack://webapp/./node_modules/idb/build/index.js","webpack://webapp/./node_modules/@firebase/app/dist/esm/index.esm2017.js","webpack://webapp/./node_modules/@firebase/component/dist/esm/index.esm2017.js","webpack://webapp/./node_modules/@firebase/logger/dist/esm/index.esm2017.js"],"sourcesContent":["/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\r\n */\r\nconst CONSTANTS = {\r\n    /**\r\n     * @define {boolean} Whether this is the client Node.js SDK.\r\n     */\r\n    NODE_CLIENT: false,\r\n    /**\r\n     * @define {boolean} Whether this is the Admin Node.js SDK.\r\n     */\r\n    NODE_ADMIN: false,\r\n    /**\r\n     * Firebase SDK Version\r\n     */\r\n    SDK_VERSION: '${JSCORE_VERSION}'\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws an error if the provided assertion is falsy\r\n */\r\nconst assert = function (assertion, message) {\r\n    if (!assertion) {\r\n        throw assertionError(message);\r\n    }\r\n};\r\n/**\r\n * Returns an Error object suitable for throwing.\r\n */\r\nconst assertionError = function (message) {\r\n    return new Error('Firebase Database (' +\r\n        CONSTANTS.SDK_VERSION +\r\n        ') INTERNAL ASSERT FAILED: ' +\r\n        message);\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst stringToByteArray$1 = function (str) {\r\n    // TODO(user): Use native implementations if/when available\r\n    const out = [];\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if ((c & 0xfc00) === 0xd800 &&\r\n            i + 1 < str.length &&\r\n            (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {\r\n            // Surrogate Pair\r\n            c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Turns an array of numbers into the string given by the concatenation of the\r\n * characters to which the numbers correspond.\r\n * @param bytes Array of numbers representing characters.\r\n * @return Stringification of the array.\r\n */\r\nconst byteArrayToString = function (bytes) {\r\n    // TODO(user): Use native implementations if/when available\r\n    const out = [];\r\n    let pos = 0, c = 0;\r\n    while (pos < bytes.length) {\r\n        const c1 = bytes[pos++];\r\n        if (c1 < 128) {\r\n            out[c++] = String.fromCharCode(c1);\r\n        }\r\n        else if (c1 > 191 && c1 < 224) {\r\n            const c2 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\r\n        }\r\n        else if (c1 > 239 && c1 < 365) {\r\n            // Surrogate Pair\r\n            const c2 = bytes[pos++];\r\n            const c3 = bytes[pos++];\r\n            const c4 = bytes[pos++];\r\n            const u = (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\r\n                0x10000;\r\n            out[c++] = String.fromCharCode(0xd800 + (u >> 10));\r\n            out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\r\n        }\r\n        else {\r\n            const c2 = bytes[pos++];\r\n            const c3 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        }\r\n    }\r\n    return out.join('');\r\n};\r\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\r\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\r\n// Static lookup maps, lazily populated by init_()\r\nconst base64 = {\r\n    /**\r\n     * Maps bytes to characters.\r\n     */\r\n    byteToCharMap_: null,\r\n    /**\r\n     * Maps characters to bytes.\r\n     */\r\n    charToByteMap_: null,\r\n    /**\r\n     * Maps bytes to websafe characters.\r\n     * @private\r\n     */\r\n    byteToCharMapWebSafe_: null,\r\n    /**\r\n     * Maps websafe characters to bytes.\r\n     * @private\r\n     */\r\n    charToByteMapWebSafe_: null,\r\n    /**\r\n     * Our default alphabet, shared between\r\n     * ENCODED_VALS and ENCODED_VALS_WEBSAFE\r\n     */\r\n    ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\r\n    /**\r\n     * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\r\n     */\r\n    get ENCODED_VALS() {\r\n        return this.ENCODED_VALS_BASE + '+/=';\r\n    },\r\n    /**\r\n     * Our websafe alphabet.\r\n     */\r\n    get ENCODED_VALS_WEBSAFE() {\r\n        return this.ENCODED_VALS_BASE + '-_.';\r\n    },\r\n    /**\r\n     * Whether this browser supports the atob and btoa functions. This extension\r\n     * started at Mozilla but is now implemented by many browsers. We use the\r\n     * ASSUME_* variables to avoid pulling in the full useragent detection library\r\n     * but still allowing the standard per-browser compilations.\r\n     *\r\n     */\r\n    HAS_NATIVE_SUPPORT: typeof atob === 'function',\r\n    /**\r\n     * Base64-encode an array of bytes.\r\n     *\r\n     * @param input An array of bytes (numbers with\r\n     *     value in [0, 255]) to encode.\r\n     * @param webSafe Boolean indicating we should use the\r\n     *     alternative alphabet.\r\n     * @return The base64 encoded string.\r\n     */\r\n    encodeByteArray(input, webSafe) {\r\n        if (!Array.isArray(input)) {\r\n            throw Error('encodeByteArray takes an array as a parameter');\r\n        }\r\n        this.init_();\r\n        const byteToCharMap = webSafe\r\n            ? this.byteToCharMapWebSafe_\r\n            : this.byteToCharMap_;\r\n        const output = [];\r\n        for (let i = 0; i < input.length; i += 3) {\r\n            const byte1 = input[i];\r\n            const haveByte2 = i + 1 < input.length;\r\n            const byte2 = haveByte2 ? input[i + 1] : 0;\r\n            const haveByte3 = i + 2 < input.length;\r\n            const byte3 = haveByte3 ? input[i + 2] : 0;\r\n            const outByte1 = byte1 >> 2;\r\n            const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\r\n            let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\r\n            let outByte4 = byte3 & 0x3f;\r\n            if (!haveByte3) {\r\n                outByte4 = 64;\r\n                if (!haveByte2) {\r\n                    outByte3 = 64;\r\n                }\r\n            }\r\n            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);\r\n        }\r\n        return output.join('');\r\n    },\r\n    /**\r\n     * Base64-encode a string.\r\n     *\r\n     * @param input A string to encode.\r\n     * @param webSafe If true, we should use the\r\n     *     alternative alphabet.\r\n     * @return The base64 encoded string.\r\n     */\r\n    encodeString(input, webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\r\n            return btoa(input);\r\n        }\r\n        return this.encodeByteArray(stringToByteArray$1(input), webSafe);\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * @param input to decode.\r\n     * @param webSafe True if we should use the\r\n     *     alternative alphabet.\r\n     * @return string representing the decoded value.\r\n     */\r\n    decodeString(input, webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\r\n            return atob(input);\r\n        }\r\n        return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * In base-64 decoding, groups of four characters are converted into three\r\n     * bytes.  If the encoder did not apply padding, the input length may not\r\n     * be a multiple of 4.\r\n     *\r\n     * In this case, the last group will have fewer than 4 characters, and\r\n     * padding will be inferred.  If the group has one or two characters, it decodes\r\n     * to one byte.  If the group has three characters, it decodes to two bytes.\r\n     *\r\n     * @param input Input to decode.\r\n     * @param webSafe True if we should use the web-safe alphabet.\r\n     * @return bytes representing the decoded value.\r\n     */\r\n    decodeStringToByteArray(input, webSafe) {\r\n        this.init_();\r\n        const charToByteMap = webSafe\r\n            ? this.charToByteMapWebSafe_\r\n            : this.charToByteMap_;\r\n        const output = [];\r\n        for (let i = 0; i < input.length;) {\r\n            const byte1 = charToByteMap[input.charAt(i++)];\r\n            const haveByte2 = i < input.length;\r\n            const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\r\n            ++i;\r\n            const haveByte3 = i < input.length;\r\n            const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            const haveByte4 = i < input.length;\r\n            const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\r\n                throw Error();\r\n            }\r\n            const outByte1 = (byte1 << 2) | (byte2 >> 4);\r\n            output.push(outByte1);\r\n            if (byte3 !== 64) {\r\n                const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\r\n                output.push(outByte2);\r\n                if (byte4 !== 64) {\r\n                    const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\r\n                    output.push(outByte3);\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    },\r\n    /**\r\n     * Lazy static initialization function. Called before\r\n     * accessing any of the static map variables.\r\n     * @private\r\n     */\r\n    init_() {\r\n        if (!this.byteToCharMap_) {\r\n            this.byteToCharMap_ = {};\r\n            this.charToByteMap_ = {};\r\n            this.byteToCharMapWebSafe_ = {};\r\n            this.charToByteMapWebSafe_ = {};\r\n            // We want quick mappings back and forth, so we precompute two maps.\r\n            for (let i = 0; i < this.ENCODED_VALS.length; i++) {\r\n                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\r\n                this.charToByteMap_[this.byteToCharMap_[i]] = i;\r\n                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\r\n                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\r\n                // Be forgiving when decoding and correctly decode both encodings.\r\n                if (i >= this.ENCODED_VALS_BASE.length) {\r\n                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\r\n                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * URL-safe base64 encoding\r\n */\r\nconst base64Encode = function (str) {\r\n    const utf8Bytes = stringToByteArray$1(str);\r\n    return base64.encodeByteArray(utf8Bytes, true);\r\n};\r\n/**\r\n * URL-safe base64 encoding (without \".\" padding in the end).\r\n * e.g. Used in JSON Web Token (JWT) parts.\r\n */\r\nconst base64urlEncodeWithoutPadding = function (str) {\r\n    // Use base64url encoding and remove padding in the end (dot characters).\r\n    return base64Encode(str).replace(/\\./g, '');\r\n};\r\n/**\r\n * URL-safe base64 decoding\r\n *\r\n * NOTE: DO NOT use the global atob() function - it does NOT support the\r\n * base64Url variant encoding.\r\n *\r\n * @param str To be decoded\r\n * @return Decoded result, if possible\r\n */\r\nconst base64Decode = function (str) {\r\n    try {\r\n        return base64.decodeString(str, true);\r\n    }\r\n    catch (e) {\r\n        console.error('base64Decode failed: ', e);\r\n    }\r\n    return null;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Do a deep-copy of basic JavaScript Objects or Arrays.\r\n */\r\nfunction deepCopy(value) {\r\n    return deepExtend(undefined, value);\r\n}\r\n/**\r\n * Copy properties from source to target (recursively allows extension\r\n * of Objects and Arrays).  Scalar values in the target are over-written.\r\n * If target is undefined, an object of the appropriate type will be created\r\n * (and returned).\r\n *\r\n * We recursively copy all child properties of plain Objects in the source- so\r\n * that namespace- like dictionaries are merged.\r\n *\r\n * Note that the target can be a function, in which case the properties in\r\n * the source Object are copied onto it as static properties of the Function.\r\n *\r\n * Note: we don't merge __proto__ to prevent prototype pollution\r\n */\r\nfunction deepExtend(target, source) {\r\n    if (!(source instanceof Object)) {\r\n        return source;\r\n    }\r\n    switch (source.constructor) {\r\n        case Date:\r\n            // Treat Dates like scalars; if the target date object had any child\r\n            // properties - they will be lost!\r\n            const dateValue = source;\r\n            return new Date(dateValue.getTime());\r\n        case Object:\r\n            if (target === undefined) {\r\n                target = {};\r\n            }\r\n            break;\r\n        case Array:\r\n            // Always copy the array source and overwrite the target.\r\n            target = [];\r\n            break;\r\n        default:\r\n            // Not a plain Object - treat it as a scalar.\r\n            return source;\r\n    }\r\n    for (const prop in source) {\r\n        // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\r\n        if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\r\n            continue;\r\n        }\r\n        target[prop] = deepExtend(target[prop], source[prop]);\r\n    }\r\n    return target;\r\n}\r\nfunction isValidKey(key) {\r\n    return key !== '__proto__';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass Deferred {\r\n    constructor() {\r\n        this.reject = () => { };\r\n        this.resolve = () => { };\r\n        this.promise = new Promise((resolve, reject) => {\r\n            this.resolve = resolve;\r\n            this.reject = reject;\r\n        });\r\n    }\r\n    /**\r\n     * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\r\n     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\r\n     * and returns a node-style callback which will resolve or reject the Deferred's promise.\r\n     */\r\n    wrapCallback(callback) {\r\n        return (error, value) => {\r\n            if (error) {\r\n                this.reject(error);\r\n            }\r\n            else {\r\n                this.resolve(value);\r\n            }\r\n            if (typeof callback === 'function') {\r\n                // Attaching noop handler just in case developer wasn't expecting\r\n                // promises\r\n                this.promise.catch(() => { });\r\n                // Some of our callbacks don't expect a value and our own tests\r\n                // assert that the parameter length is 1\r\n                if (callback.length === 1) {\r\n                    callback(error);\r\n                }\r\n                else {\r\n                    callback(error, value);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction createMockUserToken(token, projectId) {\r\n    if (token.uid) {\r\n        throw new Error('The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.');\r\n    }\r\n    // Unsecured JWTs use \"none\" as the algorithm.\r\n    const header = {\r\n        alg: 'none',\r\n        type: 'JWT'\r\n    };\r\n    const project = projectId || 'demo-project';\r\n    const iat = token.iat || 0;\r\n    const sub = token.sub || token.user_id;\r\n    if (!sub) {\r\n        throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\r\n    }\r\n    const payload = Object.assign({ \r\n        // Set all required fields to decent defaults\r\n        iss: `https://securetoken.google.com/${project}`, aud: project, iat, exp: iat + 3600, auth_time: iat, sub, user_id: sub, firebase: {\r\n            sign_in_provider: 'custom',\r\n            identities: {}\r\n        } }, token);\r\n    // Unsecured JWTs use the empty string as a signature.\r\n    const signature = '';\r\n    return [\r\n        base64urlEncodeWithoutPadding(JSON.stringify(header)),\r\n        base64urlEncodeWithoutPadding(JSON.stringify(payload)),\r\n        signature\r\n    ].join('.');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns navigator.userAgent string or '' if it's not defined.\r\n * @return user agent string\r\n */\r\nfunction getUA() {\r\n    if (typeof navigator !== 'undefined' &&\r\n        typeof navigator['userAgent'] === 'string') {\r\n        return navigator['userAgent'];\r\n    }\r\n    else {\r\n        return '';\r\n    }\r\n}\r\n/**\r\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\r\n *\r\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\r\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\r\n * wait for a callback.\r\n */\r\nfunction isMobileCordova() {\r\n    return (typeof window !== 'undefined' &&\r\n        // @ts-ignore Setting up an broadly applicable index signature for Window\r\n        // just to deal with this case would probably be a bad idea.\r\n        !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\r\n        /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA()));\r\n}\r\n/**\r\n * Detect Node.js.\r\n *\r\n * @return true if Node.js environment is detected.\r\n */\r\n// Node detection logic from: https://github.com/iliakan/detect-node/\r\nfunction isNode() {\r\n    try {\r\n        return (Object.prototype.toString.call(global.process) === '[object process]');\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Detect Browser Environment\r\n */\r\nfunction isBrowser() {\r\n    return typeof self === 'object' && self.self === self;\r\n}\r\nfunction isBrowserExtension() {\r\n    const runtime = typeof chrome === 'object'\r\n        ? chrome.runtime\r\n        : typeof browser === 'object'\r\n            ? browser.runtime\r\n            : undefined;\r\n    return typeof runtime === 'object' && runtime.id !== undefined;\r\n}\r\n/**\r\n * Detect React Native.\r\n *\r\n * @return true if ReactNative environment is detected.\r\n */\r\nfunction isReactNative() {\r\n    return (typeof navigator === 'object' && navigator['product'] === 'ReactNative');\r\n}\r\n/** Detects Electron apps. */\r\nfunction isElectron() {\r\n    return getUA().indexOf('Electron/') >= 0;\r\n}\r\n/** Detects Internet Explorer. */\r\nfunction isIE() {\r\n    const ua = getUA();\r\n    return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\r\n}\r\n/** Detects Universal Windows Platform apps. */\r\nfunction isUWP() {\r\n    return getUA().indexOf('MSAppHost/') >= 0;\r\n}\r\n/**\r\n * Detect whether the current SDK build is the Node version.\r\n *\r\n * @return true if it's the Node SDK build.\r\n */\r\nfunction isNodeSdk() {\r\n    return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\r\n}\r\n/** Returns true if we are running in Safari. */\r\nfunction isSafari() {\r\n    return (!isNode() &&\r\n        navigator.userAgent.includes('Safari') &&\r\n        !navigator.userAgent.includes('Chrome'));\r\n}\r\n/**\r\n * This method checks if indexedDB is supported by current browser/service worker context\r\n * @return true if indexedDB is supported by current browser/service worker context\r\n */\r\nfunction isIndexedDBAvailable() {\r\n    return typeof indexedDB === 'object';\r\n}\r\n/**\r\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\r\n * if errors occur during the database open operation.\r\n *\r\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\r\n * private browsing)\r\n */\r\nfunction validateIndexedDBOpenable() {\r\n    return new Promise((resolve, reject) => {\r\n        try {\r\n            let preExist = true;\r\n            const DB_CHECK_NAME = 'validate-browser-context-for-indexeddb-analytics-module';\r\n            const request = self.indexedDB.open(DB_CHECK_NAME);\r\n            request.onsuccess = () => {\r\n                request.result.close();\r\n                // delete database only when it doesn't pre-exist\r\n                if (!preExist) {\r\n                    self.indexedDB.deleteDatabase(DB_CHECK_NAME);\r\n                }\r\n                resolve(true);\r\n            };\r\n            request.onupgradeneeded = () => {\r\n                preExist = false;\r\n            };\r\n            request.onerror = () => {\r\n                var _a;\r\n                reject(((_a = request.error) === null || _a === void 0 ? void 0 : _a.message) || '');\r\n            };\r\n        }\r\n        catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n}\r\n/**\r\n *\r\n * This method checks whether cookie is enabled within current browser\r\n * @return true if cookie is enabled within current browser\r\n */\r\nfunction areCookiesEnabled() {\r\n    if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Polyfill for `globalThis` object.\r\n * @returns the `globalThis` object for the given environment.\r\n */\r\nfunction getGlobal() {\r\n    if (typeof self !== 'undefined') {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined') {\r\n        return window;\r\n    }\r\n    if (typeof global !== 'undefined') {\r\n        return global;\r\n    }\r\n    throw new Error('Unable to locate global object.');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Standardized Firebase Error.\r\n *\r\n * Usage:\r\n *\r\n *   // Typescript string literals for type-safe codes\r\n *   type Err =\r\n *     'unknown' |\r\n *     'object-not-found'\r\n *     ;\r\n *\r\n *   // Closure enum for type-safe error codes\r\n *   // at-enum {string}\r\n *   var Err = {\r\n *     UNKNOWN: 'unknown',\r\n *     OBJECT_NOT_FOUND: 'object-not-found',\r\n *   }\r\n *\r\n *   let errors: Map<Err, string> = {\r\n *     'generic-error': \"Unknown error\",\r\n *     'file-not-found': \"Could not find file: {$file}\",\r\n *   };\r\n *\r\n *   // Type-safe function - must pass a valid error code as param.\r\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\r\n *\r\n *   ...\r\n *   throw error.create(Err.GENERIC);\r\n *   ...\r\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\r\n *   ...\r\n *   // Service: Could not file file: foo.txt (service/file-not-found).\r\n *\r\n *   catch (e) {\r\n *     assert(e.message === \"Could not find file: foo.txt.\");\r\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\r\n *       console.log(\"Could not read file: \" + e['file']);\r\n *     }\r\n *   }\r\n */\r\nconst ERROR_NAME = 'FirebaseError';\r\n// Based on code from:\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\r\nclass FirebaseError extends Error {\r\n    constructor(\r\n    /** The error code for this error. */\r\n    code, message, \r\n    /** Custom data for this error. */\r\n    customData) {\r\n        super(message);\r\n        this.code = code;\r\n        this.customData = customData;\r\n        /** The custom name for all FirebaseErrors. */\r\n        this.name = ERROR_NAME;\r\n        // Fix For ES5\r\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\r\n        Object.setPrototypeOf(this, FirebaseError.prototype);\r\n        // Maintains proper stack trace for where our error was thrown.\r\n        // Only available on V8.\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, ErrorFactory.prototype.create);\r\n        }\r\n    }\r\n}\r\nclass ErrorFactory {\r\n    constructor(service, serviceName, errors) {\r\n        this.service = service;\r\n        this.serviceName = serviceName;\r\n        this.errors = errors;\r\n    }\r\n    create(code, ...data) {\r\n        const customData = data[0] || {};\r\n        const fullCode = `${this.service}/${code}`;\r\n        const template = this.errors[code];\r\n        const message = template ? replaceTemplate(template, customData) : 'Error';\r\n        // Service Name: Error message (service/code).\r\n        const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\r\n        const error = new FirebaseError(fullCode, fullMessage, customData);\r\n        return error;\r\n    }\r\n}\r\nfunction replaceTemplate(template, data) {\r\n    return template.replace(PATTERN, (_, key) => {\r\n        const value = data[key];\r\n        return value != null ? String(value) : `<${key}?>`;\r\n    });\r\n}\r\nconst PATTERN = /\\{\\$([^}]+)}/g;\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Evaluates a JSON string into a javascript object.\r\n *\r\n * @param {string} str A string containing JSON.\r\n * @return {*} The javascript object representing the specified JSON.\r\n */\r\nfunction jsonEval(str) {\r\n    return JSON.parse(str);\r\n}\r\n/**\r\n * Returns JSON representing a javascript object.\r\n * @param {*} data Javascript object to be stringified.\r\n * @return {string} The JSON contents of the object.\r\n */\r\nfunction stringify(data) {\r\n    return JSON.stringify(data);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Decodes a Firebase auth. token into constituent parts.\r\n *\r\n * Notes:\r\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst decode = function (token) {\r\n    let header = {}, claims = {}, data = {}, signature = '';\r\n    try {\r\n        const parts = token.split('.');\r\n        header = jsonEval(base64Decode(parts[0]) || '');\r\n        claims = jsonEval(base64Decode(parts[1]) || '');\r\n        signature = parts[2];\r\n        data = claims['d'] || {};\r\n        delete claims['d'];\r\n    }\r\n    catch (e) { }\r\n    return {\r\n        header,\r\n        claims,\r\n        data,\r\n        signature\r\n    };\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\r\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isValidTimestamp = function (token) {\r\n    const claims = decode(token).claims;\r\n    const now = Math.floor(new Date().getTime() / 1000);\r\n    let validSince = 0, validUntil = 0;\r\n    if (typeof claims === 'object') {\r\n        if (claims.hasOwnProperty('nbf')) {\r\n            validSince = claims['nbf'];\r\n        }\r\n        else if (claims.hasOwnProperty('iat')) {\r\n            validSince = claims['iat'];\r\n        }\r\n        if (claims.hasOwnProperty('exp')) {\r\n            validUntil = claims['exp'];\r\n        }\r\n        else {\r\n            // token will expire after 24h by default\r\n            validUntil = validSince + 86400;\r\n        }\r\n    }\r\n    return (!!now &&\r\n        !!validSince &&\r\n        !!validUntil &&\r\n        now >= validSince &&\r\n        now <= validUntil);\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\r\n *\r\n * Notes:\r\n * - May return null if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst issuedAtTime = function (token) {\r\n    const claims = decode(token).claims;\r\n    if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\r\n        return claims['iat'];\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isValidFormat = function (token) {\r\n    const decoded = decode(token), claims = decoded.claims;\r\n    return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\r\n};\r\n/**\r\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isAdmin = function (token) {\r\n    const claims = decode(token).claims;\r\n    return typeof claims === 'object' && claims['admin'] === true;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction contains(obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n}\r\nfunction safeGet(obj, key) {\r\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n        return obj[key];\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nfunction isEmpty(obj) {\r\n    for (const key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction map(obj, fn, contextObj) {\r\n    const res = {};\r\n    for (const key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            res[key] = fn.call(contextObj, obj[key], key, obj);\r\n        }\r\n    }\r\n    return res;\r\n}\r\n/**\r\n * Deep equal two objects. Support Arrays and Objects.\r\n */\r\nfunction deepEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    const aKeys = Object.keys(a);\r\n    const bKeys = Object.keys(b);\r\n    for (const k of aKeys) {\r\n        if (!bKeys.includes(k)) {\r\n            return false;\r\n        }\r\n        const aProp = a[k];\r\n        const bProp = b[k];\r\n        if (isObject(aProp) && isObject(bProp)) {\r\n            if (!deepEqual(aProp, bProp)) {\r\n                return false;\r\n            }\r\n        }\r\n        else if (aProp !== bProp) {\r\n            return false;\r\n        }\r\n    }\r\n    for (const k of bKeys) {\r\n        if (!aKeys.includes(k)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction isObject(thing) {\r\n    return thing !== null && typeof thing === 'object';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Rejects if the given promise doesn't resolve in timeInMS milliseconds.\r\n * @internal\r\n */\r\nfunction promiseWithTimeout(promise, timeInMS = 2000) {\r\n    const deferredPromise = new Deferred();\r\n    setTimeout(() => deferredPromise.reject('timeout!'), timeInMS);\r\n    promise.then(deferredPromise.resolve, deferredPromise.reject);\r\n    return deferredPromise.promise;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\r\n * params object (e.g. {arg: 'val', arg2: 'val2'})\r\n * Note: You must prepend it with ? when adding it to a URL.\r\n */\r\nfunction querystring(querystringParams) {\r\n    const params = [];\r\n    for (const [key, value] of Object.entries(querystringParams)) {\r\n        if (Array.isArray(value)) {\r\n            value.forEach(arrayVal => {\r\n                params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));\r\n            });\r\n        }\r\n        else {\r\n            params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\r\n        }\r\n    }\r\n    return params.length ? '&' + params.join('&') : '';\r\n}\r\n/**\r\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\r\n * (e.g. {arg: 'val', arg2: 'val2'})\r\n */\r\nfunction querystringDecode(querystring) {\r\n    const obj = {};\r\n    const tokens = querystring.replace(/^\\?/, '').split('&');\r\n    tokens.forEach(token => {\r\n        if (token) {\r\n            const [key, value] = token.split('=');\r\n            obj[decodeURIComponent(key)] = decodeURIComponent(value);\r\n        }\r\n    });\r\n    return obj;\r\n}\r\n/**\r\n * Extract the query string part of a URL, including the leading question mark (if present).\r\n */\r\nfunction extractQuerystring(url) {\r\n    const queryStart = url.indexOf('?');\r\n    if (!queryStart) {\r\n        return '';\r\n    }\r\n    const fragmentStart = url.indexOf('#', queryStart);\r\n    return url.substring(queryStart, fragmentStart > 0 ? fragmentStart : undefined);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview SHA-1 cryptographic hash.\r\n * Variable names follow the notation in FIPS PUB 180-3:\r\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\r\n *\r\n * Usage:\r\n *   var sha1 = new sha1();\r\n *   sha1.update(bytes);\r\n *   var hash = sha1.digest();\r\n *\r\n * Performance:\r\n *   Chrome 23:   ~400 Mbit/s\r\n *   Firefox 16:  ~250 Mbit/s\r\n *\r\n */\r\n/**\r\n * SHA-1 cryptographic hash constructor.\r\n *\r\n * The properties declared here are discussed in the above algorithm document.\r\n * @constructor\r\n * @final\r\n * @struct\r\n */\r\nclass Sha1 {\r\n    constructor() {\r\n        /**\r\n         * Holds the previous values of accumulated variables a-e in the compress_\r\n         * function.\r\n         * @private\r\n         */\r\n        this.chain_ = [];\r\n        /**\r\n         * A buffer holding the partially computed hash result.\r\n         * @private\r\n         */\r\n        this.buf_ = [];\r\n        /**\r\n         * An array of 80 bytes, each a part of the message to be hashed.  Referred to\r\n         * as the message schedule in the docs.\r\n         * @private\r\n         */\r\n        this.W_ = [];\r\n        /**\r\n         * Contains data needed to pad messages less than 64 bytes.\r\n         * @private\r\n         */\r\n        this.pad_ = [];\r\n        /**\r\n         * @private {number}\r\n         */\r\n        this.inbuf_ = 0;\r\n        /**\r\n         * @private {number}\r\n         */\r\n        this.total_ = 0;\r\n        this.blockSize = 512 / 8;\r\n        this.pad_[0] = 128;\r\n        for (let i = 1; i < this.blockSize; ++i) {\r\n            this.pad_[i] = 0;\r\n        }\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        this.chain_[0] = 0x67452301;\r\n        this.chain_[1] = 0xefcdab89;\r\n        this.chain_[2] = 0x98badcfe;\r\n        this.chain_[3] = 0x10325476;\r\n        this.chain_[4] = 0xc3d2e1f0;\r\n        this.inbuf_ = 0;\r\n        this.total_ = 0;\r\n    }\r\n    /**\r\n     * Internal compress helper function.\r\n     * @param buf Block to compress.\r\n     * @param offset Offset of the block in the buffer.\r\n     * @private\r\n     */\r\n    compress_(buf, offset) {\r\n        if (!offset) {\r\n            offset = 0;\r\n        }\r\n        const W = this.W_;\r\n        // get 16 big endian words\r\n        if (typeof buf === 'string') {\r\n            for (let i = 0; i < 16; i++) {\r\n                // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\r\n                // have a bug that turns the post-increment ++ operator into pre-increment\r\n                // during JIT compilation.  We have code that depends heavily on SHA-1 for\r\n                // correctness and which is affected by this bug, so I've removed all uses\r\n                // of post-increment ++ in which the result value is used.  We can revert\r\n                // this change once the Safari bug\r\n                // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\r\n                // most clients have been updated.\r\n                W[i] =\r\n                    (buf.charCodeAt(offset) << 24) |\r\n                        (buf.charCodeAt(offset + 1) << 16) |\r\n                        (buf.charCodeAt(offset + 2) << 8) |\r\n                        buf.charCodeAt(offset + 3);\r\n                offset += 4;\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < 16; i++) {\r\n                W[i] =\r\n                    (buf[offset] << 24) |\r\n                        (buf[offset + 1] << 16) |\r\n                        (buf[offset + 2] << 8) |\r\n                        buf[offset + 3];\r\n                offset += 4;\r\n            }\r\n        }\r\n        // expand to 80 words\r\n        for (let i = 16; i < 80; i++) {\r\n            const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n            W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\r\n        }\r\n        let a = this.chain_[0];\r\n        let b = this.chain_[1];\r\n        let c = this.chain_[2];\r\n        let d = this.chain_[3];\r\n        let e = this.chain_[4];\r\n        let f, k;\r\n        // TODO(user): Try to unroll this loop to speed up the computation.\r\n        for (let i = 0; i < 80; i++) {\r\n            if (i < 40) {\r\n                if (i < 20) {\r\n                    f = d ^ (b & (c ^ d));\r\n                    k = 0x5a827999;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0x6ed9eba1;\r\n                }\r\n            }\r\n            else {\r\n                if (i < 60) {\r\n                    f = (b & c) | (d & (b | c));\r\n                    k = 0x8f1bbcdc;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0xca62c1d6;\r\n                }\r\n            }\r\n            const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\r\n            e = d;\r\n            d = c;\r\n            c = ((b << 30) | (b >>> 2)) & 0xffffffff;\r\n            b = a;\r\n            a = t;\r\n        }\r\n        this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\r\n        this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\r\n        this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\r\n        this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\r\n        this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\r\n    }\r\n    update(bytes, length) {\r\n        // TODO(johnlenz): tighten the function signature and remove this check\r\n        if (bytes == null) {\r\n            return;\r\n        }\r\n        if (length === undefined) {\r\n            length = bytes.length;\r\n        }\r\n        const lengthMinusBlock = length - this.blockSize;\r\n        let n = 0;\r\n        // Using local instead of member variables gives ~5% speedup on Firefox 16.\r\n        const buf = this.buf_;\r\n        let inbuf = this.inbuf_;\r\n        // The outer while loop should execute at most twice.\r\n        while (n < length) {\r\n            // When we have no data in the block to top up, we can directly process the\r\n            // input buffer (assuming it contains sufficient data). This gives ~25%\r\n            // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\r\n            // the data is provided in large chunks (or in multiples of 64 bytes).\r\n            if (inbuf === 0) {\r\n                while (n <= lengthMinusBlock) {\r\n                    this.compress_(bytes, n);\r\n                    n += this.blockSize;\r\n                }\r\n            }\r\n            if (typeof bytes === 'string') {\r\n                while (n < length) {\r\n                    buf[inbuf] = bytes.charCodeAt(n);\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf === this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                while (n < length) {\r\n                    buf[inbuf] = bytes[n];\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf === this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.inbuf_ = inbuf;\r\n        this.total_ += length;\r\n    }\r\n    /** @override */\r\n    digest() {\r\n        const digest = [];\r\n        let totalBits = this.total_ * 8;\r\n        // Add pad 0x80 0x00*.\r\n        if (this.inbuf_ < 56) {\r\n            this.update(this.pad_, 56 - this.inbuf_);\r\n        }\r\n        else {\r\n            this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\r\n        }\r\n        // Add # bits.\r\n        for (let i = this.blockSize - 1; i >= 56; i--) {\r\n            this.buf_[i] = totalBits & 255;\r\n            totalBits /= 256; // Don't use bit-shifting here!\r\n        }\r\n        this.compress_(this.buf_);\r\n        let n = 0;\r\n        for (let i = 0; i < 5; i++) {\r\n            for (let j = 24; j >= 0; j -= 8) {\r\n                digest[n] = (this.chain_[i] >> j) & 255;\r\n                ++n;\r\n            }\r\n        }\r\n        return digest;\r\n    }\r\n}\n\n/**\r\n * Helper to make a Subscribe function (just like Promise helps make a\r\n * Thenable).\r\n *\r\n * @param executor Function which can make calls to a single Observer\r\n *     as a proxy.\r\n * @param onNoObservers Callback when count of Observers goes to zero.\r\n */\r\nfunction createSubscribe(executor, onNoObservers) {\r\n    const proxy = new ObserverProxy(executor, onNoObservers);\r\n    return proxy.subscribe.bind(proxy);\r\n}\r\n/**\r\n * Implement fan-out for any number of Observers attached via a subscribe\r\n * function.\r\n */\r\nclass ObserverProxy {\r\n    /**\r\n     * @param executor Function which can make calls to a single Observer\r\n     *     as a proxy.\r\n     * @param onNoObservers Callback when count of Observers goes to zero.\r\n     */\r\n    constructor(executor, onNoObservers) {\r\n        this.observers = [];\r\n        this.unsubscribes = [];\r\n        this.observerCount = 0;\r\n        // Micro-task scheduling by calling task.then().\r\n        this.task = Promise.resolve();\r\n        this.finalized = false;\r\n        this.onNoObservers = onNoObservers;\r\n        // Call the executor asynchronously so subscribers that are called\r\n        // synchronously after the creation of the subscribe function\r\n        // can still receive the very first value generated in the executor.\r\n        this.task\r\n            .then(() => {\r\n            executor(this);\r\n        })\r\n            .catch(e => {\r\n            this.error(e);\r\n        });\r\n    }\r\n    next(value) {\r\n        this.forEachObserver((observer) => {\r\n            observer.next(value);\r\n        });\r\n    }\r\n    error(error) {\r\n        this.forEachObserver((observer) => {\r\n            observer.error(error);\r\n        });\r\n        this.close(error);\r\n    }\r\n    complete() {\r\n        this.forEachObserver((observer) => {\r\n            observer.complete();\r\n        });\r\n        this.close();\r\n    }\r\n    /**\r\n     * Subscribe function that can be used to add an Observer to the fan-out list.\r\n     *\r\n     * - We require that no event is sent to a subscriber sychronously to their\r\n     *   call to subscribe().\r\n     */\r\n    subscribe(nextOrObserver, error, complete) {\r\n        let observer;\r\n        if (nextOrObserver === undefined &&\r\n            error === undefined &&\r\n            complete === undefined) {\r\n            throw new Error('Missing Observer.');\r\n        }\r\n        // Assemble an Observer object when passed as callback functions.\r\n        if (implementsAnyMethods(nextOrObserver, [\r\n            'next',\r\n            'error',\r\n            'complete'\r\n        ])) {\r\n            observer = nextOrObserver;\r\n        }\r\n        else {\r\n            observer = {\r\n                next: nextOrObserver,\r\n                error,\r\n                complete\r\n            };\r\n        }\r\n        if (observer.next === undefined) {\r\n            observer.next = noop;\r\n        }\r\n        if (observer.error === undefined) {\r\n            observer.error = noop;\r\n        }\r\n        if (observer.complete === undefined) {\r\n            observer.complete = noop;\r\n        }\r\n        const unsub = this.unsubscribeOne.bind(this, this.observers.length);\r\n        // Attempt to subscribe to a terminated Observable - we\r\n        // just respond to the Observer with the final error or complete\r\n        // event.\r\n        if (this.finalized) {\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            this.task.then(() => {\r\n                try {\r\n                    if (this.finalError) {\r\n                        observer.error(this.finalError);\r\n                    }\r\n                    else {\r\n                        observer.complete();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // nothing\r\n                }\r\n                return;\r\n            });\r\n        }\r\n        this.observers.push(observer);\r\n        return unsub;\r\n    }\r\n    // Unsubscribe is synchronous - we guarantee that no events are sent to\r\n    // any unsubscribed Observer.\r\n    unsubscribeOne(i) {\r\n        if (this.observers === undefined || this.observers[i] === undefined) {\r\n            return;\r\n        }\r\n        delete this.observers[i];\r\n        this.observerCount -= 1;\r\n        if (this.observerCount === 0 && this.onNoObservers !== undefined) {\r\n            this.onNoObservers(this);\r\n        }\r\n    }\r\n    forEachObserver(fn) {\r\n        if (this.finalized) {\r\n            // Already closed by previous event....just eat the additional values.\r\n            return;\r\n        }\r\n        // Since sendOne calls asynchronously - there is no chance that\r\n        // this.observers will become undefined.\r\n        for (let i = 0; i < this.observers.length; i++) {\r\n            this.sendOne(i, fn);\r\n        }\r\n    }\r\n    // Call the Observer via one of it's callback function. We are careful to\r\n    // confirm that the observe has not been unsubscribed since this asynchronous\r\n    // function had been queued.\r\n    sendOne(i, fn) {\r\n        // Execute the callback asynchronously\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.task.then(() => {\r\n            if (this.observers !== undefined && this.observers[i] !== undefined) {\r\n                try {\r\n                    fn(this.observers[i]);\r\n                }\r\n                catch (e) {\r\n                    // Ignore exceptions raised in Observers or missing methods of an\r\n                    // Observer.\r\n                    // Log error to console. b/31404806\r\n                    if (typeof console !== 'undefined' && console.error) {\r\n                        console.error(e);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    close(err) {\r\n        if (this.finalized) {\r\n            return;\r\n        }\r\n        this.finalized = true;\r\n        if (err !== undefined) {\r\n            this.finalError = err;\r\n        }\r\n        // Proxy is no longer needed - garbage collect references\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.task.then(() => {\r\n            this.observers = undefined;\r\n            this.onNoObservers = undefined;\r\n        });\r\n    }\r\n}\r\n/** Turn synchronous function into one called asynchronously. */\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction async(fn, onError) {\r\n    return (...args) => {\r\n        Promise.resolve(true)\r\n            .then(() => {\r\n            fn(...args);\r\n        })\r\n            .catch((error) => {\r\n            if (onError) {\r\n                onError(error);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Return true if the object passed in implements any of the named methods.\r\n */\r\nfunction implementsAnyMethods(obj, methods) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return false;\r\n    }\r\n    for (const method of methods) {\r\n        if (method in obj && typeof obj[method] === 'function') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction noop() {\r\n    // do nothing\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Check to make sure the appropriate number of arguments are provided for a public function.\r\n * Throws an error if it fails.\r\n *\r\n * @param fnName The function name\r\n * @param minCount The minimum number of arguments to allow for the function call\r\n * @param maxCount The maximum number of argument to allow for the function call\r\n * @param argCount The actual number of arguments provided.\r\n */\r\nconst validateArgCount = function (fnName, minCount, maxCount, argCount) {\r\n    let argError;\r\n    if (argCount < minCount) {\r\n        argError = 'at least ' + minCount;\r\n    }\r\n    else if (argCount > maxCount) {\r\n        argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\r\n    }\r\n    if (argError) {\r\n        const error = fnName +\r\n            ' failed: Was called with ' +\r\n            argCount +\r\n            (argCount === 1 ? ' argument.' : ' arguments.') +\r\n            ' Expects ' +\r\n            argError +\r\n            '.';\r\n        throw new Error(error);\r\n    }\r\n};\r\n/**\r\n * Generates a string to prefix an error message about failed argument validation\r\n *\r\n * @param fnName The function name\r\n * @param argName The name of the argument\r\n * @return The prefix to add to the error thrown for validation.\r\n */\r\nfunction errorPrefix(fnName, argName) {\r\n    return `${fnName} failed: ${argName} argument `;\r\n}\r\n/**\r\n * @param fnName\r\n * @param argumentNumber\r\n * @param namespace\r\n * @param optional\r\n */\r\nfunction validateNamespace(fnName, namespace, optional) {\r\n    if (optional && !namespace) {\r\n        return;\r\n    }\r\n    if (typeof namespace !== 'string') {\r\n        //TODO: I should do more validation here. We only allow certain chars in namespaces.\r\n        throw new Error(errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.');\r\n    }\r\n}\r\nfunction validateCallback(fnName, argumentName, \r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\ncallback, optional) {\r\n    if (optional && !callback) {\r\n        return;\r\n    }\r\n    if (typeof callback !== 'function') {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid function.');\r\n    }\r\n}\r\nfunction validateContextObject(fnName, argumentName, context, optional) {\r\n    if (optional && !context) {\r\n        return;\r\n    }\r\n    if (typeof context !== 'object' || context === null) {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid context object.');\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\r\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\r\n// so it's been modified.\r\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\r\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\r\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\r\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\r\n// pair).\r\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\r\n/**\r\n * @param {string} str\r\n * @return {Array}\r\n */\r\nconst stringToByteArray = function (str) {\r\n    const out = [];\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str.charCodeAt(i);\r\n        // Is this the lead surrogate in a surrogate pair?\r\n        if (c >= 0xd800 && c <= 0xdbff) {\r\n            const high = c - 0xd800; // the high 10 bits.\r\n            i++;\r\n            assert(i < str.length, 'Surrogate pair missing trail surrogate.');\r\n            const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\r\n            c = 0x10000 + (high << 10) + low;\r\n        }\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if (c < 65536) {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Calculate length without actually converting; useful for doing cheaper validation.\r\n * @param {string} str\r\n * @return {number}\r\n */\r\nconst stringLength = function (str) {\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        const c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            p++;\r\n        }\r\n        else if (c < 2048) {\r\n            p += 2;\r\n        }\r\n        else if (c >= 0xd800 && c <= 0xdbff) {\r\n            // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\r\n            p += 4;\r\n            i++; // skip trail surrogate.\r\n        }\r\n        else {\r\n            p += 3;\r\n        }\r\n    }\r\n    return p;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Copied from https://stackoverflow.com/a/2117523\r\n * Generates a new uuid.\r\n * @public\r\n */\r\nconst uuidv4 = function () {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n        const r = (Math.random() * 16) | 0, v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n};\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The amount of milliseconds to exponentially increase.\r\n */\r\nconst DEFAULT_INTERVAL_MILLIS = 1000;\r\n/**\r\n * The factor to backoff by.\r\n * Should be a number greater than 1.\r\n */\r\nconst DEFAULT_BACKOFF_FACTOR = 2;\r\n/**\r\n * The maximum milliseconds to increase to.\r\n *\r\n * <p>Visible for testing\r\n */\r\nconst MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\r\n/**\r\n * The percentage of backoff time to randomize by.\r\n * See\r\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\r\n * for context.\r\n *\r\n * <p>Visible for testing\r\n */\r\nconst RANDOM_FACTOR = 0.5;\r\n/**\r\n * Based on the backoff method from\r\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\r\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\r\n */\r\nfunction calculateBackoffMillis(backoffCount, intervalMillis = DEFAULT_INTERVAL_MILLIS, backoffFactor = DEFAULT_BACKOFF_FACTOR) {\r\n    // Calculates an exponentially increasing value.\r\n    // Deviation: calculates value from count and a constant interval, so we only need to save value\r\n    // and count to restore state.\r\n    const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\r\n    // A random \"fuzz\" to avoid waves of retries.\r\n    // Deviation: randomFactor is required.\r\n    const randomWait = Math.round(\r\n    // A fraction of the backoff value to add/subtract.\r\n    // Deviation: changes multiplication order to improve readability.\r\n    RANDOM_FACTOR *\r\n        currBaseValue *\r\n        // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\r\n        // if we add or subtract.\r\n        (Math.random() - 0.5) *\r\n        2);\r\n    // Limits backoff to max to avoid effectively permanent backoff.\r\n    return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provide English ordinal letters after a number\r\n */\r\nfunction ordinal(i) {\r\n    if (!Number.isFinite(i)) {\r\n        return `${i}`;\r\n    }\r\n    return i + indicator(i);\r\n}\r\nfunction indicator(i) {\r\n    i = Math.abs(i);\r\n    const cent = i % 100;\r\n    if (cent >= 10 && cent <= 20) {\r\n        return 'th';\r\n    }\r\n    const dec = i % 10;\r\n    if (dec === 1) {\r\n        return 'st';\r\n    }\r\n    if (dec === 2) {\r\n        return 'nd';\r\n    }\r\n    if (dec === 3) {\r\n        return 'rd';\r\n    }\r\n    return 'th';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getModularInstance(service) {\r\n    if (service && service._delegate) {\r\n        return service._delegate;\r\n    }\r\n    else {\r\n        return service;\r\n    }\r\n}\n\nexport { CONSTANTS, Deferred, ErrorFactory, FirebaseError, MAX_VALUE_MILLIS, RANDOM_FACTOR, Sha1, areCookiesEnabled, assert, assertionError, async, base64, base64Decode, base64Encode, base64urlEncodeWithoutPadding, calculateBackoffMillis, contains, createMockUserToken, createSubscribe, decode, deepCopy, deepEqual, deepExtend, errorPrefix, extractQuerystring, getGlobal, getModularInstance, getUA, isAdmin, isBrowser, isBrowserExtension, isElectron, isEmpty, isIE, isIndexedDBAvailable, isMobileCordova, isNode, isNodeSdk, isReactNative, isSafari, isUWP, isValidFormat, isValidTimestamp, issuedAtTime, jsonEval, map, ordinal, promiseWithTimeout, querystring, querystringDecode, safeGet, stringLength, stringToByteArray, stringify, uuidv4, validateArgCount, validateCallback, validateContextObject, validateIndexedDBOpenable, validateNamespace };\n//# sourceMappingURL=index.esm2017.js.map\n","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar TypeError = global.TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw TypeError(tryToString(argument) + ' is not a function');\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw TypeError(\"Can't set \" + String(argument) + ' as a prototype');\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw TypeError(String(argument) + ' is not an object');\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var global = require('../internals/global');\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String($Error(arg).stack); })('zxcasd');\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar setGlobal = require('../internals/set-global');\n\nmodule.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var name = options && options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return O;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n  return O;\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es-x/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var fails = require('../internals/fails');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = !fails(function () {\n  var error = Error('a');\n  if (!('stack' in error)) return true;\n  // eslint-disable-next-line es-x/no-object-defineproperty -- safe\n  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));\n  return error.stack !== 7;\n});\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n  options.name        - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es-x/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es-x/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar bind = FunctionPrototype.bind;\nvar call = FunctionPrototype.call;\nvar uncurryThis = NATIVE_BIND && bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? function (fn) {\n  return fn && uncurryThis(fn);\n} : function (fn) {\n  return fn && function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var aCallable = require('../internals/a-callable');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return func == null ? undefined : aCallable(func);\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es-x/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es-x/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","module.exports = {};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es-x/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar Object = global.Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : Object(it);\n} : Object;\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\n// `InstallErrorCause` abstract operation\n// https://tc39.es/proposal-error-cause/#sec-errorobjects-install-error-cause\nmodule.exports = function (O, options) {\n  if (isObject(options) && 'cause' in options) {\n    createNonEnumerableProperty(O, 'cause', options.cause);\n  }\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = uncurryThis(store.get);\n  var wmhas = uncurryThis(store.has);\n  var wmset = uncurryThis(store.set);\n  set = function (it, metadata) {\n    if (wmhas(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = function (argument) {\n  return typeof argument == 'function';\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","module.exports = false;\n","var global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Object = global.Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, Object(it));\n};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\n// eslint-disable-next-line es-x/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (String(name).slice(0, 7) === 'Symbol(') {\n    name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    defineProperty(value, 'name', { value: name, configurable: true });\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  if (options && hasOwn(options, 'constructor') && options.constructor) {\n    if (DESCRIPTORS) try {\n      defineProperty(value, 'prototype', { writable: false });\n    } catch (error) { /* empty */ }\n  } else value.prototype = undefined;\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","/* eslint-disable es-x/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es-x/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(inspectSource(WeakMap));\n","var toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es-x/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es-x/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var global = require('../internals/global');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar TypeError = global.TypeError;\n// eslint-disable-next-line es-x/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es-x/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es-x/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es-x/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","/* eslint-disable no-proto -- safe */\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es-x/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es-x/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar TypeError = global.TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (Target, Source, key) {\n  key in Target || defineProperty(Target, key, {\n    configurable: true,\n    get: function () { return Source[key]; },\n    set: function (it) { Source[key] = it; }\n  });\n};\n","var global = require('../internals/global');\n\nvar TypeError = global.TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es-x/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.22.5',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.22.5/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- safe\n  return number !== number || number === 0 ? 0 : (number > 0 ? floor : ceil)(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var global = require('../internals/global');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar Object = global.Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TypeError = global.TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var global = require('../internals/global');\nvar classof = require('../internals/classof');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return String(argument);\n};\n","var global = require('../internals/global');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  try {\n    return String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","/* eslint-disable es-x/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es-x/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar hasOwn = require('../internals/has-own-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar proxyAccessor = require('../internals/proxy-accessor');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar installErrorCause = require('../internals/install-error-cause');\nvar clearErrorStack = require('../internals/clear-error-stack');\nvar ERROR_STACK_INSTALLABLE = require('../internals/error-stack-installable');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nmodule.exports = function (FULL_NAME, wrapper, FORCED, IS_AGGREGATE_ERROR) {\n  var STACK_TRACE_LIMIT = 'stackTraceLimit';\n  var OPTIONS_POSITION = IS_AGGREGATE_ERROR ? 2 : 1;\n  var path = FULL_NAME.split('.');\n  var ERROR_NAME = path[path.length - 1];\n  var OriginalError = getBuiltIn.apply(null, path);\n\n  if (!OriginalError) return;\n\n  var OriginalErrorPrototype = OriginalError.prototype;\n\n  // V8 9.3- bug https://bugs.chromium.org/p/v8/issues/detail?id=12006\n  if (!IS_PURE && hasOwn(OriginalErrorPrototype, 'cause')) delete OriginalErrorPrototype.cause;\n\n  if (!FORCED) return OriginalError;\n\n  var BaseError = getBuiltIn('Error');\n\n  var WrappedError = wrapper(function (a, b) {\n    var message = normalizeStringArgument(IS_AGGREGATE_ERROR ? b : a, undefined);\n    var result = IS_AGGREGATE_ERROR ? new OriginalError(a) : new OriginalError();\n    if (message !== undefined) createNonEnumerableProperty(result, 'message', message);\n    if (ERROR_STACK_INSTALLABLE) createNonEnumerableProperty(result, 'stack', clearErrorStack(result.stack, 2));\n    if (this && isPrototypeOf(OriginalErrorPrototype, this)) inheritIfRequired(result, this, WrappedError);\n    if (arguments.length > OPTIONS_POSITION) installErrorCause(result, arguments[OPTIONS_POSITION]);\n    return result;\n  });\n\n  WrappedError.prototype = OriginalErrorPrototype;\n\n  if (ERROR_NAME !== 'Error') {\n    if (setPrototypeOf) setPrototypeOf(WrappedError, BaseError);\n    else copyConstructorProperties(WrappedError, BaseError, { name: true });\n  } else if (DESCRIPTORS && STACK_TRACE_LIMIT in OriginalError) {\n    proxyAccessor(WrappedError, OriginalError, STACK_TRACE_LIMIT);\n    proxyAccessor(WrappedError, OriginalError, 'prepareStackTrace');\n  }\n\n  copyConstructorProperties(WrappedError, OriginalError);\n\n  if (!IS_PURE) try {\n    // Safari 13- bug: WebAssembly errors does not have a proper `.name`\n    if (OriginalErrorPrototype.name !== ERROR_NAME) {\n      createNonEnumerableProperty(OriginalErrorPrototype, 'name', ERROR_NAME);\n    }\n    OriginalErrorPrototype.constructor = WrappedError;\n  } catch (error) { /* empty */ }\n\n  return WrappedError;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar fails = require('../internals/fails');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// FF99+ bug\nvar BROKEN_ON_SPARSE = fails(function () {\n  return !Array(1).includes();\n});\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: BROKEN_ON_SPARSE }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","/* eslint-disable no-unused-vars -- required for functions `.length` */\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar wrapErrorConstructorWithCause = require('../internals/wrap-error-constructor-with-cause');\n\nvar WEB_ASSEMBLY = 'WebAssembly';\nvar WebAssembly = global[WEB_ASSEMBLY];\n\nvar FORCED = Error('e', { cause: 7 }).cause !== 7;\n\nvar exportGlobalErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  var O = {};\n  O[ERROR_NAME] = wrapErrorConstructorWithCause(ERROR_NAME, wrapper, FORCED);\n  $({ global: true, constructor: true, arity: 1, forced: FORCED }, O);\n};\n\nvar exportWebAssemblyErrorCauseWrapper = function (ERROR_NAME, wrapper) {\n  if (WebAssembly && WebAssembly[ERROR_NAME]) {\n    var O = {};\n    O[ERROR_NAME] = wrapErrorConstructorWithCause(WEB_ASSEMBLY + '.' + ERROR_NAME, wrapper, FORCED);\n    $({ target: WEB_ASSEMBLY, stat: true, constructor: true, arity: 1, forced: FORCED }, O);\n  }\n};\n\n// https://github.com/tc39/proposal-error-cause\nexportGlobalErrorCauseWrapper('Error', function (init) {\n  return function Error(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('EvalError', function (init) {\n  return function EvalError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('RangeError', function (init) {\n  return function RangeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('ReferenceError', function (init) {\n  return function ReferenceError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('SyntaxError', function (init) {\n  return function SyntaxError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('TypeError', function (init) {\n  return function TypeError(message) { return apply(init, this, arguments); };\n});\nexportGlobalErrorCauseWrapper('URIError', function (init) {\n  return function URIError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('CompileError', function (init) {\n  return function CompileError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('LinkError', function (init) {\n  return function LinkError(message) { return apply(init, this, arguments); };\n});\nexportWebAssemblyErrorCauseWrapper('RuntimeError', function (init) {\n  return function RuntimeError(message) { return apply(init, this, arguments); };\n});\n","import firebase from '@firebase/app-compat';\nexport { default } from '@firebase/app-compat';\n\nvar name = \"firebase\";\nvar version = \"9.9.3\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfirebase.registerVersion(name, version, 'app-compat');\n//# sourceMappingURL=index.esm.js.map\n","import { getApp, _getProvider, SDK_VERSION as SDK_VERSION$1, _registerComponent, registerVersion } from '@firebase/app';\nimport { Component } from '@firebase/component';\nimport { stringify, jsonEval, contains, assert, isNodeSdk, base64, stringToByteArray, Sha1, deepCopy, base64Encode, isMobileCordova, stringLength, Deferred, safeGet, isAdmin, isValidFormat, isEmpty, isReactNative, assertionError, map, querystring, errorPrefix, getModularInstance, createMockUserToken } from '@firebase/util';\nimport { Logger, LogLevel } from '@firebase/logger';\n\nconst name = \"@firebase/database\";\nconst version = \"0.13.5\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** The semver (www.semver.org) version of the SDK. */\r\nlet SDK_VERSION = '';\r\n/**\r\n * SDK_VERSION should be set before any database instance is created\r\n * @internal\r\n */\r\nfunction setSDKVersion(version) {\r\n    SDK_VERSION = version;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Wraps a DOM Storage object and:\r\n * - automatically encode objects as JSON strings before storing them to allow us to store arbitrary types.\r\n * - prefixes names with \"firebase:\" to avoid collisions with app data.\r\n *\r\n * We automatically (see storage.js) create two such wrappers, one for sessionStorage,\r\n * and one for localStorage.\r\n *\r\n */\r\nclass DOMStorageWrapper {\r\n    /**\r\n     * @param domStorage_ - The underlying storage object (e.g. localStorage or sessionStorage)\r\n     */\r\n    constructor(domStorage_) {\r\n        this.domStorage_ = domStorage_;\r\n        // Use a prefix to avoid collisions with other stuff saved by the app.\r\n        this.prefix_ = 'firebase:';\r\n    }\r\n    /**\r\n     * @param key - The key to save the value under\r\n     * @param value - The value being stored, or null to remove the key.\r\n     */\r\n    set(key, value) {\r\n        if (value == null) {\r\n            this.domStorage_.removeItem(this.prefixedName_(key));\r\n        }\r\n        else {\r\n            this.domStorage_.setItem(this.prefixedName_(key), stringify(value));\r\n        }\r\n    }\r\n    /**\r\n     * @returns The value that was stored under this key, or null\r\n     */\r\n    get(key) {\r\n        const storedVal = this.domStorage_.getItem(this.prefixedName_(key));\r\n        if (storedVal == null) {\r\n            return null;\r\n        }\r\n        else {\r\n            return jsonEval(storedVal);\r\n        }\r\n    }\r\n    remove(key) {\r\n        this.domStorage_.removeItem(this.prefixedName_(key));\r\n    }\r\n    prefixedName_(name) {\r\n        return this.prefix_ + name;\r\n    }\r\n    toString() {\r\n        return this.domStorage_.toString();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An in-memory storage implementation that matches the API of DOMStorageWrapper\r\n * (TODO: create interface for both to implement).\r\n */\r\nclass MemoryStorage {\r\n    constructor() {\r\n        this.cache_ = {};\r\n        this.isInMemoryStorage = true;\r\n    }\r\n    set(key, value) {\r\n        if (value == null) {\r\n            delete this.cache_[key];\r\n        }\r\n        else {\r\n            this.cache_[key] = value;\r\n        }\r\n    }\r\n    get(key) {\r\n        if (contains(this.cache_, key)) {\r\n            return this.cache_[key];\r\n        }\r\n        return null;\r\n    }\r\n    remove(key) {\r\n        delete this.cache_[key];\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Helper to create a DOMStorageWrapper or else fall back to MemoryStorage.\r\n * TODO: Once MemoryStorage and DOMStorageWrapper have a shared interface this method annotation should change\r\n * to reflect this type\r\n *\r\n * @param domStorageName - Name of the underlying storage object\r\n *   (e.g. 'localStorage' or 'sessionStorage').\r\n * @returns Turning off type information until a common interface is defined.\r\n */\r\nconst createStoragefor = function (domStorageName) {\r\n    try {\r\n        // NOTE: just accessing \"localStorage\" or \"window['localStorage']\" may throw a security exception,\r\n        // so it must be inside the try/catch.\r\n        if (typeof window !== 'undefined' &&\r\n            typeof window[domStorageName] !== 'undefined') {\r\n            // Need to test cache. Just because it's here doesn't mean it works\r\n            const domStorage = window[domStorageName];\r\n            domStorage.setItem('firebase:sentinel', 'cache');\r\n            domStorage.removeItem('firebase:sentinel');\r\n            return new DOMStorageWrapper(domStorage);\r\n        }\r\n    }\r\n    catch (e) { }\r\n    // Failed to create wrapper.  Just return in-memory storage.\r\n    // TODO: log?\r\n    return new MemoryStorage();\r\n};\r\n/** A storage object that lasts across sessions */\r\nconst PersistentStorage = createStoragefor('localStorage');\r\n/** A storage object that only lasts one session */\r\nconst SessionStorage = createStoragefor('sessionStorage');\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst logClient = new Logger('@firebase/database');\r\n/**\r\n * Returns a locally-unique ID (generated by just incrementing up from 0 each time its called).\r\n */\r\nconst LUIDGenerator = (function () {\r\n    let id = 1;\r\n    return function () {\r\n        return id++;\r\n    };\r\n})();\r\n/**\r\n * Sha1 hash of the input string\r\n * @param str - The string to hash\r\n * @returns {!string} The resulting hash\r\n */\r\nconst sha1 = function (str) {\r\n    const utf8Bytes = stringToByteArray(str);\r\n    const sha1 = new Sha1();\r\n    sha1.update(utf8Bytes);\r\n    const sha1Bytes = sha1.digest();\r\n    return base64.encodeByteArray(sha1Bytes);\r\n};\r\nconst buildLogMessage_ = function (...varArgs) {\r\n    let message = '';\r\n    for (let i = 0; i < varArgs.length; i++) {\r\n        const arg = varArgs[i];\r\n        if (Array.isArray(arg) ||\r\n            (arg &&\r\n                typeof arg === 'object' &&\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                typeof arg.length === 'number')) {\r\n            message += buildLogMessage_.apply(null, arg);\r\n        }\r\n        else if (typeof arg === 'object') {\r\n            message += stringify(arg);\r\n        }\r\n        else {\r\n            message += arg;\r\n        }\r\n        message += ' ';\r\n    }\r\n    return message;\r\n};\r\n/**\r\n * Use this for all debug messages in Firebase.\r\n */\r\nlet logger = null;\r\n/**\r\n * Flag to check for log availability on first log message\r\n */\r\nlet firstLog_ = true;\r\n/**\r\n * The implementation of Firebase.enableLogging (defined here to break dependencies)\r\n * @param logger_ - A flag to turn on logging, or a custom logger\r\n * @param persistent - Whether or not to persist logging settings across refreshes\r\n */\r\nconst enableLogging$1 = function (logger_, persistent) {\r\n    assert(!persistent || logger_ === true || logger_ === false, \"Can't turn on custom loggers persistently.\");\r\n    if (logger_ === true) {\r\n        logClient.logLevel = LogLevel.VERBOSE;\r\n        logger = logClient.log.bind(logClient);\r\n        if (persistent) {\r\n            SessionStorage.set('logging_enabled', true);\r\n        }\r\n    }\r\n    else if (typeof logger_ === 'function') {\r\n        logger = logger_;\r\n    }\r\n    else {\r\n        logger = null;\r\n        SessionStorage.remove('logging_enabled');\r\n    }\r\n};\r\nconst log = function (...varArgs) {\r\n    if (firstLog_ === true) {\r\n        firstLog_ = false;\r\n        if (logger === null && SessionStorage.get('logging_enabled') === true) {\r\n            enableLogging$1(true);\r\n        }\r\n    }\r\n    if (logger) {\r\n        const message = buildLogMessage_.apply(null, varArgs);\r\n        logger(message);\r\n    }\r\n};\r\nconst logWrapper = function (prefix) {\r\n    return function (...varArgs) {\r\n        log(prefix, ...varArgs);\r\n    };\r\n};\r\nconst error = function (...varArgs) {\r\n    const message = 'FIREBASE INTERNAL ERROR: ' + buildLogMessage_(...varArgs);\r\n    logClient.error(message);\r\n};\r\nconst fatal = function (...varArgs) {\r\n    const message = `FIREBASE FATAL ERROR: ${buildLogMessage_(...varArgs)}`;\r\n    logClient.error(message);\r\n    throw new Error(message);\r\n};\r\nconst warn = function (...varArgs) {\r\n    const message = 'FIREBASE WARNING: ' + buildLogMessage_(...varArgs);\r\n    logClient.warn(message);\r\n};\r\n/**\r\n * Logs a warning if the containing page uses https. Called when a call to new Firebase\r\n * does not use https.\r\n */\r\nconst warnIfPageIsSecure = function () {\r\n    // Be very careful accessing browser globals. Who knows what may or may not exist.\r\n    if (typeof window !== 'undefined' &&\r\n        window.location &&\r\n        window.location.protocol &&\r\n        window.location.protocol.indexOf('https:') !== -1) {\r\n        warn('Insecure Firebase access from a secure page. ' +\r\n            'Please use https in calls to new Firebase().');\r\n    }\r\n};\r\n/**\r\n * Returns true if data is NaN, or +/- Infinity.\r\n */\r\nconst isInvalidJSONNumber = function (data) {\r\n    return (typeof data === 'number' &&\r\n        (data !== data || // NaN\r\n            data === Number.POSITIVE_INFINITY ||\r\n            data === Number.NEGATIVE_INFINITY));\r\n};\r\nconst executeWhenDOMReady = function (fn) {\r\n    if (isNodeSdk() || document.readyState === 'complete') {\r\n        fn();\r\n    }\r\n    else {\r\n        // Modeled after jQuery. Try DOMContentLoaded and onreadystatechange (which\r\n        // fire before onload), but fall back to onload.\r\n        let called = false;\r\n        const wrappedFn = function () {\r\n            if (!document.body) {\r\n                setTimeout(wrappedFn, Math.floor(10));\r\n                return;\r\n            }\r\n            if (!called) {\r\n                called = true;\r\n                fn();\r\n            }\r\n        };\r\n        if (document.addEventListener) {\r\n            document.addEventListener('DOMContentLoaded', wrappedFn, false);\r\n            // fallback to onload.\r\n            window.addEventListener('load', wrappedFn, false);\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        }\r\n        else if (document.attachEvent) {\r\n            // IE.\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            document.attachEvent('onreadystatechange', () => {\r\n                if (document.readyState === 'complete') {\r\n                    wrappedFn();\r\n                }\r\n            });\r\n            // fallback to onload.\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            window.attachEvent('onload', wrappedFn);\r\n            // jQuery has an extra hack for IE that we could employ (based on\r\n            // http://javascript.nwbox.com/IEContentLoaded/) But it looks really old.\r\n            // I'm hoping we don't need it.\r\n        }\r\n    }\r\n};\r\n/**\r\n * Minimum key name. Invalid for actual data, used as a marker to sort before any valid names\r\n */\r\nconst MIN_NAME = '[MIN_NAME]';\r\n/**\r\n * Maximum key name. Invalid for actual data, used as a marker to sort above any valid names\r\n */\r\nconst MAX_NAME = '[MAX_NAME]';\r\n/**\r\n * Compares valid Firebase key names, plus min and max name\r\n */\r\nconst nameCompare = function (a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a === MIN_NAME || b === MAX_NAME) {\r\n        return -1;\r\n    }\r\n    else if (b === MIN_NAME || a === MAX_NAME) {\r\n        return 1;\r\n    }\r\n    else {\r\n        const aAsInt = tryParseInt(a), bAsInt = tryParseInt(b);\r\n        if (aAsInt !== null) {\r\n            if (bAsInt !== null) {\r\n                return aAsInt - bAsInt === 0 ? a.length - b.length : aAsInt - bAsInt;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        else if (bAsInt !== null) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return a < b ? -1 : 1;\r\n        }\r\n    }\r\n};\r\n/**\r\n * @returns {!number} comparison result.\r\n */\r\nconst stringCompare = function (a, b) {\r\n    if (a === b) {\r\n        return 0;\r\n    }\r\n    else if (a < b) {\r\n        return -1;\r\n    }\r\n    else {\r\n        return 1;\r\n    }\r\n};\r\nconst requireKey = function (key, obj) {\r\n    if (obj && key in obj) {\r\n        return obj[key];\r\n    }\r\n    else {\r\n        throw new Error('Missing required key (' + key + ') in object: ' + stringify(obj));\r\n    }\r\n};\r\nconst ObjectToUniqueKey = function (obj) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return stringify(obj);\r\n    }\r\n    const keys = [];\r\n    // eslint-disable-next-line guard-for-in\r\n    for (const k in obj) {\r\n        keys.push(k);\r\n    }\r\n    // Export as json, but with the keys sorted.\r\n    keys.sort();\r\n    let key = '{';\r\n    for (let i = 0; i < keys.length; i++) {\r\n        if (i !== 0) {\r\n            key += ',';\r\n        }\r\n        key += stringify(keys[i]);\r\n        key += ':';\r\n        key += ObjectToUniqueKey(obj[keys[i]]);\r\n    }\r\n    key += '}';\r\n    return key;\r\n};\r\n/**\r\n * Splits a string into a number of smaller segments of maximum size\r\n * @param str - The string\r\n * @param segsize - The maximum number of chars in the string.\r\n * @returns The string, split into appropriately-sized chunks\r\n */\r\nconst splitStringBySize = function (str, segsize) {\r\n    const len = str.length;\r\n    if (len <= segsize) {\r\n        return [str];\r\n    }\r\n    const dataSegs = [];\r\n    for (let c = 0; c < len; c += segsize) {\r\n        if (c + segsize > len) {\r\n            dataSegs.push(str.substring(c, len));\r\n        }\r\n        else {\r\n            dataSegs.push(str.substring(c, c + segsize));\r\n        }\r\n    }\r\n    return dataSegs;\r\n};\r\n/**\r\n * Apply a function to each (key, value) pair in an object or\r\n * apply a function to each (index, value) pair in an array\r\n * @param obj - The object or array to iterate over\r\n * @param fn - The function to apply\r\n */\r\nfunction each(obj, fn) {\r\n    for (const key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            fn(key, obj[key]);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Borrowed from http://hg.secondlife.com/llsd/src/tip/js/typedarray.js (MIT License)\r\n * I made one modification at the end and removed the NaN / Infinity\r\n * handling (since it seemed broken [caused an overflow] and we don't need it).  See MJL comments.\r\n * @param v - A double\r\n *\r\n */\r\nconst doubleToIEEE754String = function (v) {\r\n    assert(!isInvalidJSONNumber(v), 'Invalid JSON number'); // MJL\r\n    const ebits = 11, fbits = 52;\r\n    const bias = (1 << (ebits - 1)) - 1;\r\n    let s, e, f, ln, i;\r\n    // Compute sign, exponent, fraction\r\n    // Skip NaN / Infinity handling --MJL.\r\n    if (v === 0) {\r\n        e = 0;\r\n        f = 0;\r\n        s = 1 / v === -Infinity ? 1 : 0;\r\n    }\r\n    else {\r\n        s = v < 0;\r\n        v = Math.abs(v);\r\n        if (v >= Math.pow(2, 1 - bias)) {\r\n            // Normalized\r\n            ln = Math.min(Math.floor(Math.log(v) / Math.LN2), bias);\r\n            e = ln + bias;\r\n            f = Math.round(v * Math.pow(2, fbits - ln) - Math.pow(2, fbits));\r\n        }\r\n        else {\r\n            // Denormalized\r\n            e = 0;\r\n            f = Math.round(v / Math.pow(2, 1 - bias - fbits));\r\n        }\r\n    }\r\n    // Pack sign, exponent, fraction\r\n    const bits = [];\r\n    for (i = fbits; i; i -= 1) {\r\n        bits.push(f % 2 ? 1 : 0);\r\n        f = Math.floor(f / 2);\r\n    }\r\n    for (i = ebits; i; i -= 1) {\r\n        bits.push(e % 2 ? 1 : 0);\r\n        e = Math.floor(e / 2);\r\n    }\r\n    bits.push(s ? 1 : 0);\r\n    bits.reverse();\r\n    const str = bits.join('');\r\n    // Return the data as a hex string. --MJL\r\n    let hexByteString = '';\r\n    for (i = 0; i < 64; i += 8) {\r\n        let hexByte = parseInt(str.substr(i, 8), 2).toString(16);\r\n        if (hexByte.length === 1) {\r\n            hexByte = '0' + hexByte;\r\n        }\r\n        hexByteString = hexByteString + hexByte;\r\n    }\r\n    return hexByteString.toLowerCase();\r\n};\r\n/**\r\n * Used to detect if we're in a Chrome content script (which executes in an\r\n * isolated environment where long-polling doesn't work).\r\n */\r\nconst isChromeExtensionContentScript = function () {\r\n    return !!(typeof window === 'object' &&\r\n        window['chrome'] &&\r\n        window['chrome']['extension'] &&\r\n        !/^chrome/.test(window.location.href));\r\n};\r\n/**\r\n * Used to detect if we're in a Windows 8 Store app.\r\n */\r\nconst isWindowsStoreApp = function () {\r\n    // Check for the presence of a couple WinRT globals\r\n    return typeof Windows === 'object' && typeof Windows.UI === 'object';\r\n};\r\n/**\r\n * Converts a server error code to a Javascript Error\r\n */\r\nfunction errorForServerCode(code, query) {\r\n    let reason = 'Unknown Error';\r\n    if (code === 'too_big') {\r\n        reason =\r\n            'The data requested exceeds the maximum size ' +\r\n                'that can be accessed with a single request.';\r\n    }\r\n    else if (code === 'permission_denied') {\r\n        reason = \"Client doesn't have permission to access the desired data.\";\r\n    }\r\n    else if (code === 'unavailable') {\r\n        reason = 'The service is unavailable';\r\n    }\r\n    const error = new Error(code + ' at ' + query._path.toString() + ': ' + reason);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    error.code = code.toUpperCase();\r\n    return error;\r\n}\r\n/**\r\n * Used to test for integer-looking strings\r\n */\r\nconst INTEGER_REGEXP_ = new RegExp('^-?(0*)\\\\d{1,10}$');\r\n/**\r\n * For use in keys, the minimum possible 32-bit integer.\r\n */\r\nconst INTEGER_32_MIN = -2147483648;\r\n/**\r\n * For use in kyes, the maximum possible 32-bit integer.\r\n */\r\nconst INTEGER_32_MAX = 2147483647;\r\n/**\r\n * If the string contains a 32-bit integer, return it.  Else return null.\r\n */\r\nconst tryParseInt = function (str) {\r\n    if (INTEGER_REGEXP_.test(str)) {\r\n        const intVal = Number(str);\r\n        if (intVal >= INTEGER_32_MIN && intVal <= INTEGER_32_MAX) {\r\n            return intVal;\r\n        }\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Helper to run some code but catch any exceptions and re-throw them later.\r\n * Useful for preventing user callbacks from breaking internal code.\r\n *\r\n * Re-throwing the exception from a setTimeout is a little evil, but it's very\r\n * convenient (we don't have to try to figure out when is a safe point to\r\n * re-throw it), and the behavior seems reasonable:\r\n *\r\n * * If you aren't pausing on exceptions, you get an error in the console with\r\n *   the correct stack trace.\r\n * * If you're pausing on all exceptions, the debugger will pause on your\r\n *   exception and then again when we rethrow it.\r\n * * If you're only pausing on uncaught exceptions, the debugger will only pause\r\n *   on us re-throwing it.\r\n *\r\n * @param fn - The code to guard.\r\n */\r\nconst exceptionGuard = function (fn) {\r\n    try {\r\n        fn();\r\n    }\r\n    catch (e) {\r\n        // Re-throw exception when it's safe.\r\n        setTimeout(() => {\r\n            // It used to be that \"throw e\" would result in a good console error with\r\n            // relevant context, but as of Chrome 39, you just get the firebase.js\r\n            // file/line number where we re-throw it, which is useless. So we log\r\n            // e.stack explicitly.\r\n            const stack = e.stack || '';\r\n            warn('Exception was thrown by user callback.', stack);\r\n            throw e;\r\n        }, Math.floor(0));\r\n    }\r\n};\r\n/**\r\n * @returns {boolean} true if we think we're currently being crawled.\r\n */\r\nconst beingCrawled = function () {\r\n    const userAgent = (typeof window === 'object' &&\r\n        window['navigator'] &&\r\n        window['navigator']['userAgent']) ||\r\n        '';\r\n    // For now we whitelist the most popular crawlers.  We should refine this to be the set of crawlers we\r\n    // believe to support JavaScript/AJAX rendering.\r\n    // NOTE: Google Webmaster Tools doesn't really belong, but their \"This is how a visitor to your website\r\n    // would have seen the page\" is flaky if we don't treat it as a crawler.\r\n    return (userAgent.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i) >= 0);\r\n};\r\n/**\r\n * Same as setTimeout() except on Node.JS it will /not/ prevent the process from exiting.\r\n *\r\n * It is removed with clearTimeout() as normal.\r\n *\r\n * @param fn - Function to run.\r\n * @param time - Milliseconds to wait before running.\r\n * @returns The setTimeout() return value.\r\n */\r\nconst setTimeoutNonBlocking = function (fn, time) {\r\n    const timeout = setTimeout(fn, time);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    if (typeof timeout === 'object' && timeout['unref']) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        timeout['unref']();\r\n    }\r\n    return timeout;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Abstraction around AppCheck's token fetching capabilities.\r\n */\r\nclass AppCheckTokenProvider {\r\n    constructor(appName_, appCheckProvider) {\r\n        this.appName_ = appName_;\r\n        this.appCheckProvider = appCheckProvider;\r\n        this.appCheck = appCheckProvider === null || appCheckProvider === void 0 ? void 0 : appCheckProvider.getImmediate({ optional: true });\r\n        if (!this.appCheck) {\r\n            appCheckProvider === null || appCheckProvider === void 0 ? void 0 : appCheckProvider.get().then(appCheck => (this.appCheck = appCheck));\r\n        }\r\n    }\r\n    getToken(forceRefresh) {\r\n        if (!this.appCheck) {\r\n            return new Promise((resolve, reject) => {\r\n                // Support delayed initialization of FirebaseAppCheck. This allows our\r\n                // customers to initialize the RTDB SDK before initializing Firebase\r\n                // AppCheck and ensures that all requests are authenticated if a token\r\n                // becomes available before the timoeout below expires.\r\n                setTimeout(() => {\r\n                    if (this.appCheck) {\r\n                        this.getToken(forceRefresh).then(resolve, reject);\r\n                    }\r\n                    else {\r\n                        resolve(null);\r\n                    }\r\n                }, 0);\r\n            });\r\n        }\r\n        return this.appCheck.getToken(forceRefresh);\r\n    }\r\n    addTokenChangeListener(listener) {\r\n        var _a;\r\n        (_a = this.appCheckProvider) === null || _a === void 0 ? void 0 : _a.get().then(appCheck => appCheck.addTokenListener(listener));\r\n    }\r\n    notifyForInvalidToken() {\r\n        warn(`Provided AppCheck credentials for the app named \"${this.appName_}\" ` +\r\n            'are invalid. This usually indicates your app was not initialized correctly.');\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Abstraction around FirebaseApp's token fetching capabilities.\r\n */\r\nclass FirebaseAuthTokenProvider {\r\n    constructor(appName_, firebaseOptions_, authProvider_) {\r\n        this.appName_ = appName_;\r\n        this.firebaseOptions_ = firebaseOptions_;\r\n        this.authProvider_ = authProvider_;\r\n        this.auth_ = null;\r\n        this.auth_ = authProvider_.getImmediate({ optional: true });\r\n        if (!this.auth_) {\r\n            authProvider_.onInit(auth => (this.auth_ = auth));\r\n        }\r\n    }\r\n    getToken(forceRefresh) {\r\n        if (!this.auth_) {\r\n            return new Promise((resolve, reject) => {\r\n                // Support delayed initialization of FirebaseAuth. This allows our\r\n                // customers to initialize the RTDB SDK before initializing Firebase\r\n                // Auth and ensures that all requests are authenticated if a token\r\n                // becomes available before the timoeout below expires.\r\n                setTimeout(() => {\r\n                    if (this.auth_) {\r\n                        this.getToken(forceRefresh).then(resolve, reject);\r\n                    }\r\n                    else {\r\n                        resolve(null);\r\n                    }\r\n                }, 0);\r\n            });\r\n        }\r\n        return this.auth_.getToken(forceRefresh).catch(error => {\r\n            // TODO: Need to figure out all the cases this is raised and whether\r\n            // this makes sense.\r\n            if (error && error.code === 'auth/token-not-initialized') {\r\n                log('Got auth/token-not-initialized error.  Treating as null token.');\r\n                return null;\r\n            }\r\n            else {\r\n                return Promise.reject(error);\r\n            }\r\n        });\r\n    }\r\n    addTokenChangeListener(listener) {\r\n        // TODO: We might want to wrap the listener and call it with no args to\r\n        // avoid a leaky abstraction, but that makes removing the listener harder.\r\n        if (this.auth_) {\r\n            this.auth_.addAuthTokenListener(listener);\r\n        }\r\n        else {\r\n            this.authProvider_\r\n                .get()\r\n                .then(auth => auth.addAuthTokenListener(listener));\r\n        }\r\n    }\r\n    removeTokenChangeListener(listener) {\r\n        this.authProvider_\r\n            .get()\r\n            .then(auth => auth.removeAuthTokenListener(listener));\r\n    }\r\n    notifyForInvalidToken() {\r\n        let errorMessage = 'Provided authentication credentials for the app named \"' +\r\n            this.appName_ +\r\n            '\" are invalid. This usually indicates your app was not ' +\r\n            'initialized correctly. ';\r\n        if ('credential' in this.firebaseOptions_) {\r\n            errorMessage +=\r\n                'Make sure the \"credential\" property provided to initializeApp() ' +\r\n                    'is authorized to access the specified \"databaseURL\" and is from the correct ' +\r\n                    'project.';\r\n        }\r\n        else if ('serviceAccount' in this.firebaseOptions_) {\r\n            errorMessage +=\r\n                'Make sure the \"serviceAccount\" property provided to initializeApp() ' +\r\n                    'is authorized to access the specified \"databaseURL\" and is from the correct ' +\r\n                    'project.';\r\n        }\r\n        else {\r\n            errorMessage +=\r\n                'Make sure the \"apiKey\" and \"databaseURL\" properties provided to ' +\r\n                    'initializeApp() match the values provided for your app at ' +\r\n                    'https://console.firebase.google.com/.';\r\n        }\r\n        warn(errorMessage);\r\n    }\r\n}\r\n/* AuthTokenProvider that supplies a constant token. Used by Admin SDK or mockUserToken with emulators. */\r\nclass EmulatorTokenProvider {\r\n    constructor(accessToken) {\r\n        this.accessToken = accessToken;\r\n    }\r\n    getToken(forceRefresh) {\r\n        return Promise.resolve({\r\n            accessToken: this.accessToken\r\n        });\r\n    }\r\n    addTokenChangeListener(listener) {\r\n        // Invoke the listener immediately to match the behavior in Firebase Auth\r\n        // (see packages/auth/src/auth.js#L1807)\r\n        listener(this.accessToken);\r\n    }\r\n    removeTokenChangeListener(listener) { }\r\n    notifyForInvalidToken() { }\r\n}\r\n/** A string that is treated as an admin access token by the RTDB emulator. Used by Admin SDK. */\r\nEmulatorTokenProvider.OWNER = 'owner';\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst PROTOCOL_VERSION = '5';\r\nconst VERSION_PARAM = 'v';\r\nconst TRANSPORT_SESSION_PARAM = 's';\r\nconst REFERER_PARAM = 'r';\r\nconst FORGE_REF = 'f';\r\n// Matches console.firebase.google.com, firebase-console-*.corp.google.com and\r\n// firebase.corp.google.com\r\nconst FORGE_DOMAIN_RE = /(console\\.firebase|firebase-console-\\w+\\.corp|firebase\\.corp)\\.google\\.com/;\r\nconst LAST_SESSION_PARAM = 'ls';\r\nconst APPLICATION_ID_PARAM = 'p';\r\nconst APP_CHECK_TOKEN_PARAM = 'ac';\r\nconst WEBSOCKET = 'websocket';\r\nconst LONG_POLLING = 'long_polling';\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A class that holds metadata about a Repo object\r\n */\r\nclass RepoInfo {\r\n    /**\r\n     * @param host - Hostname portion of the url for the repo\r\n     * @param secure - Whether or not this repo is accessed over ssl\r\n     * @param namespace - The namespace represented by the repo\r\n     * @param webSocketOnly - Whether to prefer websockets over all other transports (used by Nest).\r\n     * @param nodeAdmin - Whether this instance uses Admin SDK credentials\r\n     * @param persistenceKey - Override the default session persistence storage key\r\n     */\r\n    constructor(host, secure, namespace, webSocketOnly, nodeAdmin = false, persistenceKey = '', includeNamespaceInQueryParams = false) {\r\n        this.secure = secure;\r\n        this.namespace = namespace;\r\n        this.webSocketOnly = webSocketOnly;\r\n        this.nodeAdmin = nodeAdmin;\r\n        this.persistenceKey = persistenceKey;\r\n        this.includeNamespaceInQueryParams = includeNamespaceInQueryParams;\r\n        this._host = host.toLowerCase();\r\n        this._domain = this._host.substr(this._host.indexOf('.') + 1);\r\n        this.internalHost =\r\n            PersistentStorage.get('host:' + host) || this._host;\r\n    }\r\n    isCacheableHost() {\r\n        return this.internalHost.substr(0, 2) === 's-';\r\n    }\r\n    isCustomHost() {\r\n        return (this._domain !== 'firebaseio.com' &&\r\n            this._domain !== 'firebaseio-demo.com');\r\n    }\r\n    get host() {\r\n        return this._host;\r\n    }\r\n    set host(newHost) {\r\n        if (newHost !== this.internalHost) {\r\n            this.internalHost = newHost;\r\n            if (this.isCacheableHost()) {\r\n                PersistentStorage.set('host:' + this._host, this.internalHost);\r\n            }\r\n        }\r\n    }\r\n    toString() {\r\n        let str = this.toURLString();\r\n        if (this.persistenceKey) {\r\n            str += '<' + this.persistenceKey + '>';\r\n        }\r\n        return str;\r\n    }\r\n    toURLString() {\r\n        const protocol = this.secure ? 'https://' : 'http://';\r\n        const query = this.includeNamespaceInQueryParams\r\n            ? `?ns=${this.namespace}`\r\n            : '';\r\n        return `${protocol}${this.host}/${query}`;\r\n    }\r\n}\r\nfunction repoInfoNeedsQueryParam(repoInfo) {\r\n    return (repoInfo.host !== repoInfo.internalHost ||\r\n        repoInfo.isCustomHost() ||\r\n        repoInfo.includeNamespaceInQueryParams);\r\n}\r\n/**\r\n * Returns the websocket URL for this repo\r\n * @param repoInfo - RepoInfo object\r\n * @param type - of connection\r\n * @param params - list\r\n * @returns The URL for this repo\r\n */\r\nfunction repoInfoConnectionURL(repoInfo, type, params) {\r\n    assert(typeof type === 'string', 'typeof type must == string');\r\n    assert(typeof params === 'object', 'typeof params must == object');\r\n    let connURL;\r\n    if (type === WEBSOCKET) {\r\n        connURL =\r\n            (repoInfo.secure ? 'wss://' : 'ws://') + repoInfo.internalHost + '/.ws?';\r\n    }\r\n    else if (type === LONG_POLLING) {\r\n        connURL =\r\n            (repoInfo.secure ? 'https://' : 'http://') +\r\n                repoInfo.internalHost +\r\n                '/.lp?';\r\n    }\r\n    else {\r\n        throw new Error('Unknown connection type: ' + type);\r\n    }\r\n    if (repoInfoNeedsQueryParam(repoInfo)) {\r\n        params['ns'] = repoInfo.namespace;\r\n    }\r\n    const pairs = [];\r\n    each(params, (key, value) => {\r\n        pairs.push(key + '=' + value);\r\n    });\r\n    return connURL + pairs.join('&');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Tracks a collection of stats.\r\n */\r\nclass StatsCollection {\r\n    constructor() {\r\n        this.counters_ = {};\r\n    }\r\n    incrementCounter(name, amount = 1) {\r\n        if (!contains(this.counters_, name)) {\r\n            this.counters_[name] = 0;\r\n        }\r\n        this.counters_[name] += amount;\r\n    }\r\n    get() {\r\n        return deepCopy(this.counters_);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst collections = {};\r\nconst reporters = {};\r\nfunction statsManagerGetCollection(repoInfo) {\r\n    const hashString = repoInfo.toString();\r\n    if (!collections[hashString]) {\r\n        collections[hashString] = new StatsCollection();\r\n    }\r\n    return collections[hashString];\r\n}\r\nfunction statsManagerGetOrCreateReporter(repoInfo, creatorFunction) {\r\n    const hashString = repoInfo.toString();\r\n    if (!reporters[hashString]) {\r\n        reporters[hashString] = creatorFunction();\r\n    }\r\n    return reporters[hashString];\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class ensures the packets from the server arrive in order\r\n * This class takes data from the server and ensures it gets passed into the callbacks in order.\r\n */\r\nclass PacketReceiver {\r\n    /**\r\n     * @param onMessage_\r\n     */\r\n    constructor(onMessage_) {\r\n        this.onMessage_ = onMessage_;\r\n        this.pendingResponses = [];\r\n        this.currentResponseNum = 0;\r\n        this.closeAfterResponse = -1;\r\n        this.onClose = null;\r\n    }\r\n    closeAfter(responseNum, callback) {\r\n        this.closeAfterResponse = responseNum;\r\n        this.onClose = callback;\r\n        if (this.closeAfterResponse < this.currentResponseNum) {\r\n            this.onClose();\r\n            this.onClose = null;\r\n        }\r\n    }\r\n    /**\r\n     * Each message from the server comes with a response number, and an array of data. The responseNumber\r\n     * allows us to ensure that we process them in the right order, since we can't be guaranteed that all\r\n     * browsers will respond in the same order as the requests we sent\r\n     */\r\n    handleResponse(requestNum, data) {\r\n        this.pendingResponses[requestNum] = data;\r\n        while (this.pendingResponses[this.currentResponseNum]) {\r\n            const toProcess = this.pendingResponses[this.currentResponseNum];\r\n            delete this.pendingResponses[this.currentResponseNum];\r\n            for (let i = 0; i < toProcess.length; ++i) {\r\n                if (toProcess[i]) {\r\n                    exceptionGuard(() => {\r\n                        this.onMessage_(toProcess[i]);\r\n                    });\r\n                }\r\n            }\r\n            if (this.currentResponseNum === this.closeAfterResponse) {\r\n                if (this.onClose) {\r\n                    this.onClose();\r\n                    this.onClose = null;\r\n                }\r\n                break;\r\n            }\r\n            this.currentResponseNum++;\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// URL query parameters associated with longpolling\r\nconst FIREBASE_LONGPOLL_START_PARAM = 'start';\r\nconst FIREBASE_LONGPOLL_CLOSE_COMMAND = 'close';\r\nconst FIREBASE_LONGPOLL_COMMAND_CB_NAME = 'pLPCommand';\r\nconst FIREBASE_LONGPOLL_DATA_CB_NAME = 'pRTLPCB';\r\nconst FIREBASE_LONGPOLL_ID_PARAM = 'id';\r\nconst FIREBASE_LONGPOLL_PW_PARAM = 'pw';\r\nconst FIREBASE_LONGPOLL_SERIAL_PARAM = 'ser';\r\nconst FIREBASE_LONGPOLL_CALLBACK_ID_PARAM = 'cb';\r\nconst FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM = 'seg';\r\nconst FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET = 'ts';\r\nconst FIREBASE_LONGPOLL_DATA_PARAM = 'd';\r\nconst FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM = 'dframe';\r\n//Data size constants.\r\n//TODO: Perf: the maximum length actually differs from browser to browser.\r\n// We should check what browser we're on and set accordingly.\r\nconst MAX_URL_DATA_SIZE = 1870;\r\nconst SEG_HEADER_SIZE = 30; //ie: &seg=8299234&ts=982389123&d=\r\nconst MAX_PAYLOAD_SIZE = MAX_URL_DATA_SIZE - SEG_HEADER_SIZE;\r\n/**\r\n * Keepalive period\r\n * send a fresh request at minimum every 25 seconds. Opera has a maximum request\r\n * length of 30 seconds that we can't exceed.\r\n */\r\nconst KEEPALIVE_REQUEST_INTERVAL = 25000;\r\n/**\r\n * How long to wait before aborting a long-polling connection attempt.\r\n */\r\nconst LP_CONNECT_TIMEOUT = 30000;\r\n/**\r\n * This class manages a single long-polling connection.\r\n */\r\nclass BrowserPollConnection {\r\n    /**\r\n     * @param connId An identifier for this connection, used for logging\r\n     * @param repoInfo The info for the endpoint to send data to.\r\n     * @param applicationId The Firebase App ID for this project.\r\n     * @param appCheckToken The AppCheck token for this client.\r\n     * @param authToken The AuthToken to use for this connection.\r\n     * @param transportSessionId Optional transportSessionid if we are\r\n     * reconnecting for an existing transport session\r\n     * @param lastSessionId Optional lastSessionId if the PersistentConnection has\r\n     * already created a connection previously\r\n     */\r\n    constructor(connId, repoInfo, applicationId, appCheckToken, authToken, transportSessionId, lastSessionId) {\r\n        this.connId = connId;\r\n        this.repoInfo = repoInfo;\r\n        this.applicationId = applicationId;\r\n        this.appCheckToken = appCheckToken;\r\n        this.authToken = authToken;\r\n        this.transportSessionId = transportSessionId;\r\n        this.lastSessionId = lastSessionId;\r\n        this.bytesSent = 0;\r\n        this.bytesReceived = 0;\r\n        this.everConnected_ = false;\r\n        this.log_ = logWrapper(connId);\r\n        this.stats_ = statsManagerGetCollection(repoInfo);\r\n        this.urlFn = (params) => {\r\n            // Always add the token if we have one.\r\n            if (this.appCheckToken) {\r\n                params[APP_CHECK_TOKEN_PARAM] = this.appCheckToken;\r\n            }\r\n            return repoInfoConnectionURL(repoInfo, LONG_POLLING, params);\r\n        };\r\n    }\r\n    /**\r\n     * @param onMessage - Callback when messages arrive\r\n     * @param onDisconnect - Callback with connection lost.\r\n     */\r\n    open(onMessage, onDisconnect) {\r\n        this.curSegmentNum = 0;\r\n        this.onDisconnect_ = onDisconnect;\r\n        this.myPacketOrderer = new PacketReceiver(onMessage);\r\n        this.isClosed_ = false;\r\n        this.connectTimeoutTimer_ = setTimeout(() => {\r\n            this.log_('Timed out trying to connect.');\r\n            // Make sure we clear the host cache\r\n            this.onClosed_();\r\n            this.connectTimeoutTimer_ = null;\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        }, Math.floor(LP_CONNECT_TIMEOUT));\r\n        // Ensure we delay the creation of the iframe until the DOM is loaded.\r\n        executeWhenDOMReady(() => {\r\n            if (this.isClosed_) {\r\n                return;\r\n            }\r\n            //Set up a callback that gets triggered once a connection is set up.\r\n            this.scriptTagHolder = new FirebaseIFrameScriptHolder((...args) => {\r\n                const [command, arg1, arg2, arg3, arg4] = args;\r\n                this.incrementIncomingBytes_(args);\r\n                if (!this.scriptTagHolder) {\r\n                    return; // we closed the connection.\r\n                }\r\n                if (this.connectTimeoutTimer_) {\r\n                    clearTimeout(this.connectTimeoutTimer_);\r\n                    this.connectTimeoutTimer_ = null;\r\n                }\r\n                this.everConnected_ = true;\r\n                if (command === FIREBASE_LONGPOLL_START_PARAM) {\r\n                    this.id = arg1;\r\n                    this.password = arg2;\r\n                }\r\n                else if (command === FIREBASE_LONGPOLL_CLOSE_COMMAND) {\r\n                    // Don't clear the host cache. We got a response from the server, so we know it's reachable\r\n                    if (arg1) {\r\n                        // We aren't expecting any more data (other than what the server's already in the process of sending us\r\n                        // through our already open polls), so don't send any more.\r\n                        this.scriptTagHolder.sendNewPolls = false;\r\n                        // arg1 in this case is the last response number sent by the server. We should try to receive\r\n                        // all of the responses up to this one before closing\r\n                        this.myPacketOrderer.closeAfter(arg1, () => {\r\n                            this.onClosed_();\r\n                        });\r\n                    }\r\n                    else {\r\n                        this.onClosed_();\r\n                    }\r\n                }\r\n                else {\r\n                    throw new Error('Unrecognized command received: ' + command);\r\n                }\r\n            }, (...args) => {\r\n                const [pN, data] = args;\r\n                this.incrementIncomingBytes_(args);\r\n                this.myPacketOrderer.handleResponse(pN, data);\r\n            }, () => {\r\n                this.onClosed_();\r\n            }, this.urlFn);\r\n            //Send the initial request to connect. The serial number is simply to keep the browser from pulling previous results\r\n            //from cache.\r\n            const urlParams = {};\r\n            urlParams[FIREBASE_LONGPOLL_START_PARAM] = 't';\r\n            urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = Math.floor(Math.random() * 100000000);\r\n            if (this.scriptTagHolder.uniqueCallbackIdentifier) {\r\n                urlParams[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM] =\r\n                    this.scriptTagHolder.uniqueCallbackIdentifier;\r\n            }\r\n            urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\r\n            if (this.transportSessionId) {\r\n                urlParams[TRANSPORT_SESSION_PARAM] = this.transportSessionId;\r\n            }\r\n            if (this.lastSessionId) {\r\n                urlParams[LAST_SESSION_PARAM] = this.lastSessionId;\r\n            }\r\n            if (this.applicationId) {\r\n                urlParams[APPLICATION_ID_PARAM] = this.applicationId;\r\n            }\r\n            if (this.appCheckToken) {\r\n                urlParams[APP_CHECK_TOKEN_PARAM] = this.appCheckToken;\r\n            }\r\n            if (typeof location !== 'undefined' &&\r\n                location.hostname &&\r\n                FORGE_DOMAIN_RE.test(location.hostname)) {\r\n                urlParams[REFERER_PARAM] = FORGE_REF;\r\n            }\r\n            const connectURL = this.urlFn(urlParams);\r\n            this.log_('Connecting via long-poll to ' + connectURL);\r\n            this.scriptTagHolder.addTag(connectURL, () => {\r\n                /* do nothing */\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Call this when a handshake has completed successfully and we want to consider the connection established\r\n     */\r\n    start() {\r\n        this.scriptTagHolder.startLongPoll(this.id, this.password);\r\n        this.addDisconnectPingFrame(this.id, this.password);\r\n    }\r\n    /**\r\n     * Forces long polling to be considered as a potential transport\r\n     */\r\n    static forceAllow() {\r\n        BrowserPollConnection.forceAllow_ = true;\r\n    }\r\n    /**\r\n     * Forces longpolling to not be considered as a potential transport\r\n     */\r\n    static forceDisallow() {\r\n        BrowserPollConnection.forceDisallow_ = true;\r\n    }\r\n    // Static method, use string literal so it can be accessed in a generic way\r\n    static isAvailable() {\r\n        if (isNodeSdk()) {\r\n            return false;\r\n        }\r\n        else if (BrowserPollConnection.forceAllow_) {\r\n            return true;\r\n        }\r\n        else {\r\n            // NOTE: In React-Native there's normally no 'document', but if you debug a React-Native app in\r\n            // the Chrome debugger, 'document' is defined, but document.createElement is null (2015/06/08).\r\n            return (!BrowserPollConnection.forceDisallow_ &&\r\n                typeof document !== 'undefined' &&\r\n                document.createElement != null &&\r\n                !isChromeExtensionContentScript() &&\r\n                !isWindowsStoreApp());\r\n        }\r\n    }\r\n    /**\r\n     * No-op for polling\r\n     */\r\n    markConnectionHealthy() { }\r\n    /**\r\n     * Stops polling and cleans up the iframe\r\n     */\r\n    shutdown_() {\r\n        this.isClosed_ = true;\r\n        if (this.scriptTagHolder) {\r\n            this.scriptTagHolder.close();\r\n            this.scriptTagHolder = null;\r\n        }\r\n        //remove the disconnect frame, which will trigger an XHR call to the server to tell it we're leaving.\r\n        if (this.myDisconnFrame) {\r\n            document.body.removeChild(this.myDisconnFrame);\r\n            this.myDisconnFrame = null;\r\n        }\r\n        if (this.connectTimeoutTimer_) {\r\n            clearTimeout(this.connectTimeoutTimer_);\r\n            this.connectTimeoutTimer_ = null;\r\n        }\r\n    }\r\n    /**\r\n     * Triggered when this transport is closed\r\n     */\r\n    onClosed_() {\r\n        if (!this.isClosed_) {\r\n            this.log_('Longpoll is closing itself');\r\n            this.shutdown_();\r\n            if (this.onDisconnect_) {\r\n                this.onDisconnect_(this.everConnected_);\r\n                this.onDisconnect_ = null;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * External-facing close handler. RealTime has requested we shut down. Kill our connection and tell the server\r\n     * that we've left.\r\n     */\r\n    close() {\r\n        if (!this.isClosed_) {\r\n            this.log_('Longpoll is being closed.');\r\n            this.shutdown_();\r\n        }\r\n    }\r\n    /**\r\n     * Send the JSON object down to the server. It will need to be stringified, base64 encoded, and then\r\n     * broken into chunks (since URLs have a small maximum length).\r\n     * @param data - The JSON data to transmit.\r\n     */\r\n    send(data) {\r\n        const dataStr = stringify(data);\r\n        this.bytesSent += dataStr.length;\r\n        this.stats_.incrementCounter('bytes_sent', dataStr.length);\r\n        //first, lets get the base64-encoded data\r\n        const base64data = base64Encode(dataStr);\r\n        //We can only fit a certain amount in each URL, so we need to split this request\r\n        //up into multiple pieces if it doesn't fit in one request.\r\n        const dataSegs = splitStringBySize(base64data, MAX_PAYLOAD_SIZE);\r\n        //Enqueue each segment for transmission. We assign each chunk a sequential ID and a total number\r\n        //of segments so that we can reassemble the packet on the server.\r\n        for (let i = 0; i < dataSegs.length; i++) {\r\n            this.scriptTagHolder.enqueueSegment(this.curSegmentNum, dataSegs.length, dataSegs[i]);\r\n            this.curSegmentNum++;\r\n        }\r\n    }\r\n    /**\r\n     * This is how we notify the server that we're leaving.\r\n     * We aren't able to send requests with DHTML on a window close event, but we can\r\n     * trigger XHR requests in some browsers (everything but Opera basically).\r\n     */\r\n    addDisconnectPingFrame(id, pw) {\r\n        if (isNodeSdk()) {\r\n            return;\r\n        }\r\n        this.myDisconnFrame = document.createElement('iframe');\r\n        const urlParams = {};\r\n        urlParams[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM] = 't';\r\n        urlParams[FIREBASE_LONGPOLL_ID_PARAM] = id;\r\n        urlParams[FIREBASE_LONGPOLL_PW_PARAM] = pw;\r\n        this.myDisconnFrame.src = this.urlFn(urlParams);\r\n        this.myDisconnFrame.style.display = 'none';\r\n        document.body.appendChild(this.myDisconnFrame);\r\n    }\r\n    /**\r\n     * Used to track the bytes received by this client\r\n     */\r\n    incrementIncomingBytes_(args) {\r\n        // TODO: This is an annoying perf hit just to track the number of incoming bytes.  Maybe it should be opt-in.\r\n        const bytesReceived = stringify(args).length;\r\n        this.bytesReceived += bytesReceived;\r\n        this.stats_.incrementCounter('bytes_received', bytesReceived);\r\n    }\r\n}\r\n/*********************************************************************************************\r\n * A wrapper around an iframe that is used as a long-polling script holder.\r\n *********************************************************************************************/\r\nclass FirebaseIFrameScriptHolder {\r\n    /**\r\n     * @param commandCB - The callback to be called when control commands are recevied from the server.\r\n     * @param onMessageCB - The callback to be triggered when responses arrive from the server.\r\n     * @param onDisconnect - The callback to be triggered when this tag holder is closed\r\n     * @param urlFn - A function that provides the URL of the endpoint to send data to.\r\n     */\r\n    constructor(commandCB, onMessageCB, onDisconnect, urlFn) {\r\n        this.onDisconnect = onDisconnect;\r\n        this.urlFn = urlFn;\r\n        //We maintain a count of all of the outstanding requests, because if we have too many active at once it can cause\r\n        //problems in some browsers.\r\n        this.outstandingRequests = new Set();\r\n        //A queue of the pending segments waiting for transmission to the server.\r\n        this.pendingSegs = [];\r\n        //A serial number. We use this for two things:\r\n        // 1) A way to ensure the browser doesn't cache responses to polls\r\n        // 2) A way to make the server aware when long-polls arrive in a different order than we started them. The\r\n        //    server needs to release both polls in this case or it will cause problems in Opera since Opera can only execute\r\n        //    JSONP code in the order it was added to the iframe.\r\n        this.currentSerial = Math.floor(Math.random() * 100000000);\r\n        // This gets set to false when we're \"closing down\" the connection (e.g. we're switching transports but there's still\r\n        // incoming data from the server that we're waiting for).\r\n        this.sendNewPolls = true;\r\n        if (!isNodeSdk()) {\r\n            //Each script holder registers a couple of uniquely named callbacks with the window. These are called from the\r\n            //iframes where we put the long-polling script tags. We have two callbacks:\r\n            //   1) Command Callback - Triggered for control issues, like starting a connection.\r\n            //   2) Message Callback - Triggered when new data arrives.\r\n            this.uniqueCallbackIdentifier = LUIDGenerator();\r\n            window[FIREBASE_LONGPOLL_COMMAND_CB_NAME + this.uniqueCallbackIdentifier] = commandCB;\r\n            window[FIREBASE_LONGPOLL_DATA_CB_NAME + this.uniqueCallbackIdentifier] =\r\n                onMessageCB;\r\n            //Create an iframe for us to add script tags to.\r\n            this.myIFrame = FirebaseIFrameScriptHolder.createIFrame_();\r\n            // Set the iframe's contents.\r\n            let script = '';\r\n            // if we set a javascript url, it's IE and we need to set the document domain. The javascript url is sufficient\r\n            // for ie9, but ie8 needs to do it again in the document itself.\r\n            if (this.myIFrame.src &&\r\n                this.myIFrame.src.substr(0, 'javascript:'.length) === 'javascript:') {\r\n                const currentDomain = document.domain;\r\n                script = '<script>document.domain=\"' + currentDomain + '\";</script>';\r\n            }\r\n            const iframeContents = '<html><body>' + script + '</body></html>';\r\n            try {\r\n                this.myIFrame.doc.open();\r\n                this.myIFrame.doc.write(iframeContents);\r\n                this.myIFrame.doc.close();\r\n            }\r\n            catch (e) {\r\n                log('frame writing exception');\r\n                if (e.stack) {\r\n                    log(e.stack);\r\n                }\r\n                log(e);\r\n            }\r\n        }\r\n        else {\r\n            this.commandCB = commandCB;\r\n            this.onMessageCB = onMessageCB;\r\n        }\r\n    }\r\n    /**\r\n     * Each browser has its own funny way to handle iframes. Here we mush them all together into one object that I can\r\n     * actually use.\r\n     */\r\n    static createIFrame_() {\r\n        const iframe = document.createElement('iframe');\r\n        iframe.style.display = 'none';\r\n        // This is necessary in order to initialize the document inside the iframe\r\n        if (document.body) {\r\n            document.body.appendChild(iframe);\r\n            try {\r\n                // If document.domain has been modified in IE, this will throw an error, and we need to set the\r\n                // domain of the iframe's document manually. We can do this via a javascript: url as the src attribute\r\n                // Also note that we must do this *after* the iframe has been appended to the page. Otherwise it doesn't work.\r\n                const a = iframe.contentWindow.document;\r\n                if (!a) {\r\n                    // Apologies for the log-spam, I need to do something to keep closure from optimizing out the assignment above.\r\n                    log('No IE domain setting required');\r\n                }\r\n            }\r\n            catch (e) {\r\n                const domain = document.domain;\r\n                iframe.src =\r\n                    \"javascript:void((function(){document.open();document.domain='\" +\r\n                        domain +\r\n                        \"';document.close();})())\";\r\n            }\r\n        }\r\n        else {\r\n            // LongPollConnection attempts to delay initialization until the document is ready, so hopefully this\r\n            // never gets hit.\r\n            throw 'Document body has not initialized. Wait to initialize Firebase until after the document is ready.';\r\n        }\r\n        // Get the document of the iframe in a browser-specific way.\r\n        if (iframe.contentDocument) {\r\n            iframe.doc = iframe.contentDocument; // Firefox, Opera, Safari\r\n        }\r\n        else if (iframe.contentWindow) {\r\n            iframe.doc = iframe.contentWindow.document; // Internet Explorer\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        }\r\n        else if (iframe.document) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            iframe.doc = iframe.document; //others?\r\n        }\r\n        return iframe;\r\n    }\r\n    /**\r\n     * Cancel all outstanding queries and remove the frame.\r\n     */\r\n    close() {\r\n        //Mark this iframe as dead, so no new requests are sent.\r\n        this.alive = false;\r\n        if (this.myIFrame) {\r\n            //We have to actually remove all of the html inside this iframe before removing it from the\r\n            //window, or IE will continue loading and executing the script tags we've already added, which\r\n            //can lead to some errors being thrown. Setting innerHTML seems to be the easiest way to do this.\r\n            this.myIFrame.doc.body.innerHTML = '';\r\n            setTimeout(() => {\r\n                if (this.myIFrame !== null) {\r\n                    document.body.removeChild(this.myIFrame);\r\n                    this.myIFrame = null;\r\n                }\r\n            }, Math.floor(0));\r\n        }\r\n        // Protect from being called recursively.\r\n        const onDisconnect = this.onDisconnect;\r\n        if (onDisconnect) {\r\n            this.onDisconnect = null;\r\n            onDisconnect();\r\n        }\r\n    }\r\n    /**\r\n     * Actually start the long-polling session by adding the first script tag(s) to the iframe.\r\n     * @param id - The ID of this connection\r\n     * @param pw - The password for this connection\r\n     */\r\n    startLongPoll(id, pw) {\r\n        this.myID = id;\r\n        this.myPW = pw;\r\n        this.alive = true;\r\n        //send the initial request. If there are requests queued, make sure that we transmit as many as we are currently able to.\r\n        while (this.newRequest_()) { }\r\n    }\r\n    /**\r\n     * This is called any time someone might want a script tag to be added. It adds a script tag when there aren't\r\n     * too many outstanding requests and we are still alive.\r\n     *\r\n     * If there are outstanding packet segments to send, it sends one. If there aren't, it sends a long-poll anyways if\r\n     * needed.\r\n     */\r\n    newRequest_() {\r\n        // We keep one outstanding request open all the time to receive data, but if we need to send data\r\n        // (pendingSegs.length > 0) then we create a new request to send the data.  The server will automatically\r\n        // close the old request.\r\n        if (this.alive &&\r\n            this.sendNewPolls &&\r\n            this.outstandingRequests.size < (this.pendingSegs.length > 0 ? 2 : 1)) {\r\n            //construct our url\r\n            this.currentSerial++;\r\n            const urlParams = {};\r\n            urlParams[FIREBASE_LONGPOLL_ID_PARAM] = this.myID;\r\n            urlParams[FIREBASE_LONGPOLL_PW_PARAM] = this.myPW;\r\n            urlParams[FIREBASE_LONGPOLL_SERIAL_PARAM] = this.currentSerial;\r\n            let theURL = this.urlFn(urlParams);\r\n            //Now add as much data as we can.\r\n            let curDataString = '';\r\n            let i = 0;\r\n            while (this.pendingSegs.length > 0) {\r\n                //first, lets see if the next segment will fit.\r\n                const nextSeg = this.pendingSegs[0];\r\n                if (nextSeg.d.length +\r\n                    SEG_HEADER_SIZE +\r\n                    curDataString.length <=\r\n                    MAX_URL_DATA_SIZE) {\r\n                    //great, the segment will fit. Lets append it.\r\n                    const theSeg = this.pendingSegs.shift();\r\n                    curDataString =\r\n                        curDataString +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.seg +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.ts +\r\n                            '&' +\r\n                            FIREBASE_LONGPOLL_DATA_PARAM +\r\n                            i +\r\n                            '=' +\r\n                            theSeg.d;\r\n                    i++;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            theURL = theURL + curDataString;\r\n            this.addLongPollTag_(theURL, this.currentSerial);\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Queue a packet for transmission to the server.\r\n     * @param segnum - A sequential id for this packet segment used for reassembly\r\n     * @param totalsegs - The total number of segments in this packet\r\n     * @param data - The data for this segment.\r\n     */\r\n    enqueueSegment(segnum, totalsegs, data) {\r\n        //add this to the queue of segments to send.\r\n        this.pendingSegs.push({ seg: segnum, ts: totalsegs, d: data });\r\n        //send the data immediately if there isn't already data being transmitted, unless\r\n        //startLongPoll hasn't been called yet.\r\n        if (this.alive) {\r\n            this.newRequest_();\r\n        }\r\n    }\r\n    /**\r\n     * Add a script tag for a regular long-poll request.\r\n     * @param url - The URL of the script tag.\r\n     * @param serial - The serial number of the request.\r\n     */\r\n    addLongPollTag_(url, serial) {\r\n        //remember that we sent this request.\r\n        this.outstandingRequests.add(serial);\r\n        const doNewRequest = () => {\r\n            this.outstandingRequests.delete(serial);\r\n            this.newRequest_();\r\n        };\r\n        // If this request doesn't return on its own accord (by the server sending us some data), we'll\r\n        // create a new one after the KEEPALIVE interval to make sure we always keep a fresh request open.\r\n        const keepaliveTimeout = setTimeout(doNewRequest, Math.floor(KEEPALIVE_REQUEST_INTERVAL));\r\n        const readyStateCB = () => {\r\n            // Request completed.  Cancel the keepalive.\r\n            clearTimeout(keepaliveTimeout);\r\n            // Trigger a new request so we can continue receiving data.\r\n            doNewRequest();\r\n        };\r\n        this.addTag(url, readyStateCB);\r\n    }\r\n    /**\r\n     * Add an arbitrary script tag to the iframe.\r\n     * @param url - The URL for the script tag source.\r\n     * @param loadCB - A callback to be triggered once the script has loaded.\r\n     */\r\n    addTag(url, loadCB) {\r\n        if (isNodeSdk()) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            this.doNodeLongPoll(url, loadCB);\r\n        }\r\n        else {\r\n            setTimeout(() => {\r\n                try {\r\n                    // if we're already closed, don't add this poll\r\n                    if (!this.sendNewPolls) {\r\n                        return;\r\n                    }\r\n                    const newScript = this.myIFrame.doc.createElement('script');\r\n                    newScript.type = 'text/javascript';\r\n                    newScript.async = true;\r\n                    newScript.src = url;\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    newScript.onload = newScript.onreadystatechange =\r\n                        function () {\r\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                            const rstate = newScript.readyState;\r\n                            if (!rstate || rstate === 'loaded' || rstate === 'complete') {\r\n                                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                                newScript.onload = newScript.onreadystatechange = null;\r\n                                if (newScript.parentNode) {\r\n                                    newScript.parentNode.removeChild(newScript);\r\n                                }\r\n                                loadCB();\r\n                            }\r\n                        };\r\n                    newScript.onerror = () => {\r\n                        log('Long-poll script failed to load: ' + url);\r\n                        this.sendNewPolls = false;\r\n                        this.close();\r\n                    };\r\n                    this.myIFrame.doc.body.appendChild(newScript);\r\n                }\r\n                catch (e) {\r\n                    // TODO: we should make this error visible somehow\r\n                }\r\n            }, Math.floor(1));\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst WEBSOCKET_MAX_FRAME_SIZE = 16384;\r\nconst WEBSOCKET_KEEPALIVE_INTERVAL = 45000;\r\nlet WebSocketImpl = null;\r\nif (typeof MozWebSocket !== 'undefined') {\r\n    WebSocketImpl = MozWebSocket;\r\n}\r\nelse if (typeof WebSocket !== 'undefined') {\r\n    WebSocketImpl = WebSocket;\r\n}\r\n/**\r\n * Create a new websocket connection with the given callbacks.\r\n */\r\nclass WebSocketConnection {\r\n    /**\r\n     * @param connId identifier for this transport\r\n     * @param repoInfo The info for the websocket endpoint.\r\n     * @param applicationId The Firebase App ID for this project.\r\n     * @param appCheckToken The App Check Token for this client.\r\n     * @param authToken The Auth Token for this client.\r\n     * @param transportSessionId Optional transportSessionId if this is connecting\r\n     * to an existing transport session\r\n     * @param lastSessionId Optional lastSessionId if there was a previous\r\n     * connection\r\n     */\r\n    constructor(connId, repoInfo, applicationId, appCheckToken, authToken, transportSessionId, lastSessionId) {\r\n        this.connId = connId;\r\n        this.applicationId = applicationId;\r\n        this.appCheckToken = appCheckToken;\r\n        this.authToken = authToken;\r\n        this.keepaliveTimer = null;\r\n        this.frames = null;\r\n        this.totalFrames = 0;\r\n        this.bytesSent = 0;\r\n        this.bytesReceived = 0;\r\n        this.log_ = logWrapper(this.connId);\r\n        this.stats_ = statsManagerGetCollection(repoInfo);\r\n        this.connURL = WebSocketConnection.connectionURL_(repoInfo, transportSessionId, lastSessionId, appCheckToken, applicationId);\r\n        this.nodeAdmin = repoInfo.nodeAdmin;\r\n    }\r\n    /**\r\n     * @param repoInfo - The info for the websocket endpoint.\r\n     * @param transportSessionId - Optional transportSessionId if this is connecting to an existing transport\r\n     *                                         session\r\n     * @param lastSessionId - Optional lastSessionId if there was a previous connection\r\n     * @returns connection url\r\n     */\r\n    static connectionURL_(repoInfo, transportSessionId, lastSessionId, appCheckToken, applicationId) {\r\n        const urlParams = {};\r\n        urlParams[VERSION_PARAM] = PROTOCOL_VERSION;\r\n        if (!isNodeSdk() &&\r\n            typeof location !== 'undefined' &&\r\n            location.hostname &&\r\n            FORGE_DOMAIN_RE.test(location.hostname)) {\r\n            urlParams[REFERER_PARAM] = FORGE_REF;\r\n        }\r\n        if (transportSessionId) {\r\n            urlParams[TRANSPORT_SESSION_PARAM] = transportSessionId;\r\n        }\r\n        if (lastSessionId) {\r\n            urlParams[LAST_SESSION_PARAM] = lastSessionId;\r\n        }\r\n        if (appCheckToken) {\r\n            urlParams[APP_CHECK_TOKEN_PARAM] = appCheckToken;\r\n        }\r\n        if (applicationId) {\r\n            urlParams[APPLICATION_ID_PARAM] = applicationId;\r\n        }\r\n        return repoInfoConnectionURL(repoInfo, WEBSOCKET, urlParams);\r\n    }\r\n    /**\r\n     * @param onMessage - Callback when messages arrive\r\n     * @param onDisconnect - Callback with connection lost.\r\n     */\r\n    open(onMessage, onDisconnect) {\r\n        this.onDisconnect = onDisconnect;\r\n        this.onMessage = onMessage;\r\n        this.log_('Websocket connecting to ' + this.connURL);\r\n        this.everConnected_ = false;\r\n        // Assume failure until proven otherwise.\r\n        PersistentStorage.set('previous_websocket_failure', true);\r\n        try {\r\n            let options;\r\n            if (isNodeSdk()) {\r\n                const device = this.nodeAdmin ? 'AdminNode' : 'Node';\r\n                // UA Format: Firebase/<wire_protocol>/<sdk_version>/<platform>/<device>\r\n                options = {\r\n                    headers: {\r\n                        'User-Agent': `Firebase/${PROTOCOL_VERSION}/${SDK_VERSION}/${process.platform}/${device}`,\r\n                        'X-Firebase-GMPID': this.applicationId || ''\r\n                    }\r\n                };\r\n                // If using Node with admin creds, AppCheck-related checks are unnecessary.\r\n                // Note that we send the credentials here even if they aren't admin credentials, which is\r\n                // not a problem.\r\n                // Note that this header is just used to bypass appcheck, and the token should still be sent\r\n                // through the websocket connection once it is established.\r\n                if (this.authToken) {\r\n                    options.headers['Authorization'] = `Bearer ${this.authToken}`;\r\n                }\r\n                if (this.appCheckToken) {\r\n                    options.headers['X-Firebase-AppCheck'] = this.appCheckToken;\r\n                }\r\n                // Plumb appropriate http_proxy environment variable into faye-websocket if it exists.\r\n                const env = process['env'];\r\n                const proxy = this.connURL.indexOf('wss://') === 0\r\n                    ? env['HTTPS_PROXY'] || env['https_proxy']\r\n                    : env['HTTP_PROXY'] || env['http_proxy'];\r\n                if (proxy) {\r\n                    options['proxy'] = { origin: proxy };\r\n                }\r\n            }\r\n            this.mySock = new WebSocketImpl(this.connURL, [], options);\r\n        }\r\n        catch (e) {\r\n            this.log_('Error instantiating WebSocket.');\r\n            const error = e.message || e.data;\r\n            if (error) {\r\n                this.log_(error);\r\n            }\r\n            this.onClosed_();\r\n            return;\r\n        }\r\n        this.mySock.onopen = () => {\r\n            this.log_('Websocket connected.');\r\n            this.everConnected_ = true;\r\n        };\r\n        this.mySock.onclose = () => {\r\n            this.log_('Websocket connection was disconnected.');\r\n            this.mySock = null;\r\n            this.onClosed_();\r\n        };\r\n        this.mySock.onmessage = m => {\r\n            this.handleIncomingFrame(m);\r\n        };\r\n        this.mySock.onerror = e => {\r\n            this.log_('WebSocket error.  Closing connection.');\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const error = e.message || e.data;\r\n            if (error) {\r\n                this.log_(error);\r\n            }\r\n            this.onClosed_();\r\n        };\r\n    }\r\n    /**\r\n     * No-op for websockets, we don't need to do anything once the connection is confirmed as open\r\n     */\r\n    start() { }\r\n    static forceDisallow() {\r\n        WebSocketConnection.forceDisallow_ = true;\r\n    }\r\n    static isAvailable() {\r\n        let isOldAndroid = false;\r\n        if (typeof navigator !== 'undefined' && navigator.userAgent) {\r\n            const oldAndroidRegex = /Android ([0-9]{0,}\\.[0-9]{0,})/;\r\n            const oldAndroidMatch = navigator.userAgent.match(oldAndroidRegex);\r\n            if (oldAndroidMatch && oldAndroidMatch.length > 1) {\r\n                if (parseFloat(oldAndroidMatch[1]) < 4.4) {\r\n                    isOldAndroid = true;\r\n                }\r\n            }\r\n        }\r\n        return (!isOldAndroid &&\r\n            WebSocketImpl !== null &&\r\n            !WebSocketConnection.forceDisallow_);\r\n    }\r\n    /**\r\n     * Returns true if we previously failed to connect with this transport.\r\n     */\r\n    static previouslyFailed() {\r\n        // If our persistent storage is actually only in-memory storage,\r\n        // we default to assuming that it previously failed to be safe.\r\n        return (PersistentStorage.isInMemoryStorage ||\r\n            PersistentStorage.get('previous_websocket_failure') === true);\r\n    }\r\n    markConnectionHealthy() {\r\n        PersistentStorage.remove('previous_websocket_failure');\r\n    }\r\n    appendFrame_(data) {\r\n        this.frames.push(data);\r\n        if (this.frames.length === this.totalFrames) {\r\n            const fullMess = this.frames.join('');\r\n            this.frames = null;\r\n            const jsonMess = jsonEval(fullMess);\r\n            //handle the message\r\n            this.onMessage(jsonMess);\r\n        }\r\n    }\r\n    /**\r\n     * @param frameCount - The number of frames we are expecting from the server\r\n     */\r\n    handleNewFrameCount_(frameCount) {\r\n        this.totalFrames = frameCount;\r\n        this.frames = [];\r\n    }\r\n    /**\r\n     * Attempts to parse a frame count out of some text. If it can't, assumes a value of 1\r\n     * @returns Any remaining data to be process, or null if there is none\r\n     */\r\n    extractFrameCount_(data) {\r\n        assert(this.frames === null, 'We already have a frame buffer');\r\n        // TODO: The server is only supposed to send up to 9999 frames (i.e. length <= 4), but that isn't being enforced\r\n        // currently.  So allowing larger frame counts (length <= 6).  See https://app.asana.com/0/search/8688598998380/8237608042508\r\n        if (data.length <= 6) {\r\n            const frameCount = Number(data);\r\n            if (!isNaN(frameCount)) {\r\n                this.handleNewFrameCount_(frameCount);\r\n                return null;\r\n            }\r\n        }\r\n        this.handleNewFrameCount_(1);\r\n        return data;\r\n    }\r\n    /**\r\n     * Process a websocket frame that has arrived from the server.\r\n     * @param mess - The frame data\r\n     */\r\n    handleIncomingFrame(mess) {\r\n        if (this.mySock === null) {\r\n            return; // Chrome apparently delivers incoming packets even after we .close() the connection sometimes.\r\n        }\r\n        const data = mess['data'];\r\n        this.bytesReceived += data.length;\r\n        this.stats_.incrementCounter('bytes_received', data.length);\r\n        this.resetKeepAlive();\r\n        if (this.frames !== null) {\r\n            // we're buffering\r\n            this.appendFrame_(data);\r\n        }\r\n        else {\r\n            // try to parse out a frame count, otherwise, assume 1 and process it\r\n            const remainingData = this.extractFrameCount_(data);\r\n            if (remainingData !== null) {\r\n                this.appendFrame_(remainingData);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Send a message to the server\r\n     * @param data - The JSON object to transmit\r\n     */\r\n    send(data) {\r\n        this.resetKeepAlive();\r\n        const dataStr = stringify(data);\r\n        this.bytesSent += dataStr.length;\r\n        this.stats_.incrementCounter('bytes_sent', dataStr.length);\r\n        //We can only fit a certain amount in each websocket frame, so we need to split this request\r\n        //up into multiple pieces if it doesn't fit in one request.\r\n        const dataSegs = splitStringBySize(dataStr, WEBSOCKET_MAX_FRAME_SIZE);\r\n        //Send the length header\r\n        if (dataSegs.length > 1) {\r\n            this.sendString_(String(dataSegs.length));\r\n        }\r\n        //Send the actual data in segments.\r\n        for (let i = 0; i < dataSegs.length; i++) {\r\n            this.sendString_(dataSegs[i]);\r\n        }\r\n    }\r\n    shutdown_() {\r\n        this.isClosed_ = true;\r\n        if (this.keepaliveTimer) {\r\n            clearInterval(this.keepaliveTimer);\r\n            this.keepaliveTimer = null;\r\n        }\r\n        if (this.mySock) {\r\n            this.mySock.close();\r\n            this.mySock = null;\r\n        }\r\n    }\r\n    onClosed_() {\r\n        if (!this.isClosed_) {\r\n            this.log_('WebSocket is closing itself');\r\n            this.shutdown_();\r\n            // since this is an internal close, trigger the close listener\r\n            if (this.onDisconnect) {\r\n                this.onDisconnect(this.everConnected_);\r\n                this.onDisconnect = null;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * External-facing close handler.\r\n     * Close the websocket and kill the connection.\r\n     */\r\n    close() {\r\n        if (!this.isClosed_) {\r\n            this.log_('WebSocket is being closed');\r\n            this.shutdown_();\r\n        }\r\n    }\r\n    /**\r\n     * Kill the current keepalive timer and start a new one, to ensure that it always fires N seconds after\r\n     * the last activity.\r\n     */\r\n    resetKeepAlive() {\r\n        clearInterval(this.keepaliveTimer);\r\n        this.keepaliveTimer = setInterval(() => {\r\n            //If there has been no websocket activity for a while, send a no-op\r\n            if (this.mySock) {\r\n                this.sendString_('0');\r\n            }\r\n            this.resetKeepAlive();\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        }, Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL));\r\n    }\r\n    /**\r\n     * Send a string over the websocket.\r\n     *\r\n     * @param str - String to send.\r\n     */\r\n    sendString_(str) {\r\n        // Firefox seems to sometimes throw exceptions (NS_ERROR_UNEXPECTED) from websocket .send()\r\n        // calls for some unknown reason.  We treat these as an error and disconnect.\r\n        // See https://app.asana.com/0/58926111402292/68021340250410\r\n        try {\r\n            this.mySock.send(str);\r\n        }\r\n        catch (e) {\r\n            this.log_('Exception thrown from WebSocket.send():', e.message || e.data, 'Closing connection.');\r\n            setTimeout(this.onClosed_.bind(this), 0);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Number of response before we consider the connection \"healthy.\"\r\n */\r\nWebSocketConnection.responsesRequiredToBeHealthy = 2;\r\n/**\r\n * Time to wait for the connection te become healthy before giving up.\r\n */\r\nWebSocketConnection.healthyTimeout = 30000;\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Currently simplistic, this class manages what transport a Connection should use at various stages of its\r\n * lifecycle.\r\n *\r\n * It starts with longpolling in a browser, and httppolling on node. It then upgrades to websockets if\r\n * they are available.\r\n */\r\nclass TransportManager {\r\n    /**\r\n     * @param repoInfo - Metadata around the namespace we're connecting to\r\n     */\r\n    constructor(repoInfo) {\r\n        this.initTransports_(repoInfo);\r\n    }\r\n    static get ALL_TRANSPORTS() {\r\n        return [BrowserPollConnection, WebSocketConnection];\r\n    }\r\n    /**\r\n     * Returns whether transport has been selected to ensure WebSocketConnection or BrowserPollConnection are not called after\r\n     * TransportManager has already set up transports_\r\n     */\r\n    static get IS_TRANSPORT_INITIALIZED() {\r\n        return this.globalTransportInitialized_;\r\n    }\r\n    initTransports_(repoInfo) {\r\n        const isWebSocketsAvailable = WebSocketConnection && WebSocketConnection['isAvailable']();\r\n        let isSkipPollConnection = isWebSocketsAvailable && !WebSocketConnection.previouslyFailed();\r\n        if (repoInfo.webSocketOnly) {\r\n            if (!isWebSocketsAvailable) {\r\n                warn(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\");\r\n            }\r\n            isSkipPollConnection = true;\r\n        }\r\n        if (isSkipPollConnection) {\r\n            this.transports_ = [WebSocketConnection];\r\n        }\r\n        else {\r\n            const transports = (this.transports_ = []);\r\n            for (const transport of TransportManager.ALL_TRANSPORTS) {\r\n                if (transport && transport['isAvailable']()) {\r\n                    transports.push(transport);\r\n                }\r\n            }\r\n            TransportManager.globalTransportInitialized_ = true;\r\n        }\r\n    }\r\n    /**\r\n     * @returns The constructor for the initial transport to use\r\n     */\r\n    initialTransport() {\r\n        if (this.transports_.length > 0) {\r\n            return this.transports_[0];\r\n        }\r\n        else {\r\n            throw new Error('No transports available');\r\n        }\r\n    }\r\n    /**\r\n     * @returns The constructor for the next transport, or null\r\n     */\r\n    upgradeTransport() {\r\n        if (this.transports_.length > 1) {\r\n            return this.transports_[1];\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n// Keeps track of whether the TransportManager has already chosen a transport to use\r\nTransportManager.globalTransportInitialized_ = false;\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Abort upgrade attempt if it takes longer than 60s.\r\nconst UPGRADE_TIMEOUT = 60000;\r\n// For some transports (WebSockets), we need to \"validate\" the transport by exchanging a few requests and responses.\r\n// If we haven't sent enough requests within 5s, we'll start sending noop ping requests.\r\nconst DELAY_BEFORE_SENDING_EXTRA_REQUESTS = 5000;\r\n// If the initial data sent triggers a lot of bandwidth (i.e. it's a large put or a listen for a large amount of data)\r\n// then we may not be able to exchange our ping/pong requests within the healthy timeout.  So if we reach the timeout\r\n// but we've sent/received enough bytes, we don't cancel the connection.\r\nconst BYTES_SENT_HEALTHY_OVERRIDE = 10 * 1024;\r\nconst BYTES_RECEIVED_HEALTHY_OVERRIDE = 100 * 1024;\r\nconst MESSAGE_TYPE = 't';\r\nconst MESSAGE_DATA = 'd';\r\nconst CONTROL_SHUTDOWN = 's';\r\nconst CONTROL_RESET = 'r';\r\nconst CONTROL_ERROR = 'e';\r\nconst CONTROL_PONG = 'o';\r\nconst SWITCH_ACK = 'a';\r\nconst END_TRANSMISSION = 'n';\r\nconst PING = 'p';\r\nconst SERVER_HELLO = 'h';\r\n/**\r\n * Creates a new real-time connection to the server using whichever method works\r\n * best in the current browser.\r\n */\r\nclass Connection {\r\n    /**\r\n     * @param id - an id for this connection\r\n     * @param repoInfo_ - the info for the endpoint to connect to\r\n     * @param applicationId_ - the Firebase App ID for this project\r\n     * @param appCheckToken_ - The App Check Token for this device.\r\n     * @param authToken_ - The auth token for this session.\r\n     * @param onMessage_ - the callback to be triggered when a server-push message arrives\r\n     * @param onReady_ - the callback to be triggered when this connection is ready to send messages.\r\n     * @param onDisconnect_ - the callback to be triggered when a connection was lost\r\n     * @param onKill_ - the callback to be triggered when this connection has permanently shut down.\r\n     * @param lastSessionId - last session id in persistent connection. is used to clean up old session in real-time server\r\n     */\r\n    constructor(id, repoInfo_, applicationId_, appCheckToken_, authToken_, onMessage_, onReady_, onDisconnect_, onKill_, lastSessionId) {\r\n        this.id = id;\r\n        this.repoInfo_ = repoInfo_;\r\n        this.applicationId_ = applicationId_;\r\n        this.appCheckToken_ = appCheckToken_;\r\n        this.authToken_ = authToken_;\r\n        this.onMessage_ = onMessage_;\r\n        this.onReady_ = onReady_;\r\n        this.onDisconnect_ = onDisconnect_;\r\n        this.onKill_ = onKill_;\r\n        this.lastSessionId = lastSessionId;\r\n        this.connectionCount = 0;\r\n        this.pendingDataMessages = [];\r\n        this.state_ = 0 /* CONNECTING */;\r\n        this.log_ = logWrapper('c:' + this.id + ':');\r\n        this.transportManager_ = new TransportManager(repoInfo_);\r\n        this.log_('Connection created');\r\n        this.start_();\r\n    }\r\n    /**\r\n     * Starts a connection attempt\r\n     */\r\n    start_() {\r\n        const conn = this.transportManager_.initialTransport();\r\n        this.conn_ = new conn(this.nextTransportId_(), this.repoInfo_, this.applicationId_, this.appCheckToken_, this.authToken_, null, this.lastSessionId);\r\n        // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\r\n        // can consider the transport healthy.\r\n        this.primaryResponsesRequired_ = conn['responsesRequiredToBeHealthy'] || 0;\r\n        const onMessageReceived = this.connReceiver_(this.conn_);\r\n        const onConnectionLost = this.disconnReceiver_(this.conn_);\r\n        this.tx_ = this.conn_;\r\n        this.rx_ = this.conn_;\r\n        this.secondaryConn_ = null;\r\n        this.isHealthy_ = false;\r\n        /*\r\n         * Firefox doesn't like when code from one iframe tries to create another iframe by way of the parent frame.\r\n         * This can occur in the case of a redirect, i.e. we guessed wrong on what server to connect to and received a reset.\r\n         * Somehow, setTimeout seems to make this ok. That doesn't make sense from a security perspective, since you should\r\n         * still have the context of your originating frame.\r\n         */\r\n        setTimeout(() => {\r\n            // this.conn_ gets set to null in some of the tests. Check to make sure it still exists before using it\r\n            this.conn_ && this.conn_.open(onMessageReceived, onConnectionLost);\r\n        }, Math.floor(0));\r\n        const healthyTimeoutMS = conn['healthyTimeout'] || 0;\r\n        if (healthyTimeoutMS > 0) {\r\n            this.healthyTimeout_ = setTimeoutNonBlocking(() => {\r\n                this.healthyTimeout_ = null;\r\n                if (!this.isHealthy_) {\r\n                    if (this.conn_ &&\r\n                        this.conn_.bytesReceived > BYTES_RECEIVED_HEALTHY_OVERRIDE) {\r\n                        this.log_('Connection exceeded healthy timeout but has received ' +\r\n                            this.conn_.bytesReceived +\r\n                            ' bytes.  Marking connection healthy.');\r\n                        this.isHealthy_ = true;\r\n                        this.conn_.markConnectionHealthy();\r\n                    }\r\n                    else if (this.conn_ &&\r\n                        this.conn_.bytesSent > BYTES_SENT_HEALTHY_OVERRIDE) {\r\n                        this.log_('Connection exceeded healthy timeout but has sent ' +\r\n                            this.conn_.bytesSent +\r\n                            ' bytes.  Leaving connection alive.');\r\n                        // NOTE: We don't want to mark it healthy, since we have no guarantee that the bytes have made it to\r\n                        // the server.\r\n                    }\r\n                    else {\r\n                        this.log_('Closing unhealthy connection after timeout.');\r\n                        this.close();\r\n                    }\r\n                }\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            }, Math.floor(healthyTimeoutMS));\r\n        }\r\n    }\r\n    nextTransportId_() {\r\n        return 'c:' + this.id + ':' + this.connectionCount++;\r\n    }\r\n    disconnReceiver_(conn) {\r\n        return everConnected => {\r\n            if (conn === this.conn_) {\r\n                this.onConnectionLost_(everConnected);\r\n            }\r\n            else if (conn === this.secondaryConn_) {\r\n                this.log_('Secondary connection lost.');\r\n                this.onSecondaryConnectionLost_();\r\n            }\r\n            else {\r\n                this.log_('closing an old connection');\r\n            }\r\n        };\r\n    }\r\n    connReceiver_(conn) {\r\n        return (message) => {\r\n            if (this.state_ !== 2 /* DISCONNECTED */) {\r\n                if (conn === this.rx_) {\r\n                    this.onPrimaryMessageReceived_(message);\r\n                }\r\n                else if (conn === this.secondaryConn_) {\r\n                    this.onSecondaryMessageReceived_(message);\r\n                }\r\n                else {\r\n                    this.log_('message on old connection');\r\n                }\r\n            }\r\n        };\r\n    }\r\n    /**\r\n     * @param dataMsg - An arbitrary data message to be sent to the server\r\n     */\r\n    sendRequest(dataMsg) {\r\n        // wrap in a data message envelope and send it on\r\n        const msg = { t: 'd', d: dataMsg };\r\n        this.sendData_(msg);\r\n    }\r\n    tryCleanupConnection() {\r\n        if (this.tx_ === this.secondaryConn_ && this.rx_ === this.secondaryConn_) {\r\n            this.log_('cleaning up and promoting a connection: ' + this.secondaryConn_.connId);\r\n            this.conn_ = this.secondaryConn_;\r\n            this.secondaryConn_ = null;\r\n            // the server will shutdown the old connection\r\n        }\r\n    }\r\n    onSecondaryControl_(controlData) {\r\n        if (MESSAGE_TYPE in controlData) {\r\n            const cmd = controlData[MESSAGE_TYPE];\r\n            if (cmd === SWITCH_ACK) {\r\n                this.upgradeIfSecondaryHealthy_();\r\n            }\r\n            else if (cmd === CONTROL_RESET) {\r\n                // Most likely the session wasn't valid. Abandon the switch attempt\r\n                this.log_('Got a reset on secondary, closing it');\r\n                this.secondaryConn_.close();\r\n                // If we were already using this connection for something, than we need to fully close\r\n                if (this.tx_ === this.secondaryConn_ ||\r\n                    this.rx_ === this.secondaryConn_) {\r\n                    this.close();\r\n                }\r\n            }\r\n            else if (cmd === CONTROL_PONG) {\r\n                this.log_('got pong on secondary.');\r\n                this.secondaryResponsesRequired_--;\r\n                this.upgradeIfSecondaryHealthy_();\r\n            }\r\n        }\r\n    }\r\n    onSecondaryMessageReceived_(parsedData) {\r\n        const layer = requireKey('t', parsedData);\r\n        const data = requireKey('d', parsedData);\r\n        if (layer === 'c') {\r\n            this.onSecondaryControl_(data);\r\n        }\r\n        else if (layer === 'd') {\r\n            // got a data message, but we're still second connection. Need to buffer it up\r\n            this.pendingDataMessages.push(data);\r\n        }\r\n        else {\r\n            throw new Error('Unknown protocol layer: ' + layer);\r\n        }\r\n    }\r\n    upgradeIfSecondaryHealthy_() {\r\n        if (this.secondaryResponsesRequired_ <= 0) {\r\n            this.log_('Secondary connection is healthy.');\r\n            this.isHealthy_ = true;\r\n            this.secondaryConn_.markConnectionHealthy();\r\n            this.proceedWithUpgrade_();\r\n        }\r\n        else {\r\n            // Send a ping to make sure the connection is healthy.\r\n            this.log_('sending ping on secondary.');\r\n            this.secondaryConn_.send({ t: 'c', d: { t: PING, d: {} } });\r\n        }\r\n    }\r\n    proceedWithUpgrade_() {\r\n        // tell this connection to consider itself open\r\n        this.secondaryConn_.start();\r\n        // send ack\r\n        this.log_('sending client ack on secondary');\r\n        this.secondaryConn_.send({ t: 'c', d: { t: SWITCH_ACK, d: {} } });\r\n        // send end packet on primary transport, switch to sending on this one\r\n        // can receive on this one, buffer responses until end received on primary transport\r\n        this.log_('Ending transmission on primary');\r\n        this.conn_.send({ t: 'c', d: { t: END_TRANSMISSION, d: {} } });\r\n        this.tx_ = this.secondaryConn_;\r\n        this.tryCleanupConnection();\r\n    }\r\n    onPrimaryMessageReceived_(parsedData) {\r\n        // Must refer to parsedData properties in quotes, so closure doesn't touch them.\r\n        const layer = requireKey('t', parsedData);\r\n        const data = requireKey('d', parsedData);\r\n        if (layer === 'c') {\r\n            this.onControl_(data);\r\n        }\r\n        else if (layer === 'd') {\r\n            this.onDataMessage_(data);\r\n        }\r\n    }\r\n    onDataMessage_(message) {\r\n        this.onPrimaryResponse_();\r\n        // We don't do anything with data messages, just kick them up a level\r\n        this.onMessage_(message);\r\n    }\r\n    onPrimaryResponse_() {\r\n        if (!this.isHealthy_) {\r\n            this.primaryResponsesRequired_--;\r\n            if (this.primaryResponsesRequired_ <= 0) {\r\n                this.log_('Primary connection is healthy.');\r\n                this.isHealthy_ = true;\r\n                this.conn_.markConnectionHealthy();\r\n            }\r\n        }\r\n    }\r\n    onControl_(controlData) {\r\n        const cmd = requireKey(MESSAGE_TYPE, controlData);\r\n        if (MESSAGE_DATA in controlData) {\r\n            const payload = controlData[MESSAGE_DATA];\r\n            if (cmd === SERVER_HELLO) {\r\n                this.onHandshake_(payload);\r\n            }\r\n            else if (cmd === END_TRANSMISSION) {\r\n                this.log_('recvd end transmission on primary');\r\n                this.rx_ = this.secondaryConn_;\r\n                for (let i = 0; i < this.pendingDataMessages.length; ++i) {\r\n                    this.onDataMessage_(this.pendingDataMessages[i]);\r\n                }\r\n                this.pendingDataMessages = [];\r\n                this.tryCleanupConnection();\r\n            }\r\n            else if (cmd === CONTROL_SHUTDOWN) {\r\n                // This was previously the 'onKill' callback passed to the lower-level connection\r\n                // payload in this case is the reason for the shutdown. Generally a human-readable error\r\n                this.onConnectionShutdown_(payload);\r\n            }\r\n            else if (cmd === CONTROL_RESET) {\r\n                // payload in this case is the host we should contact\r\n                this.onReset_(payload);\r\n            }\r\n            else if (cmd === CONTROL_ERROR) {\r\n                error('Server Error: ' + payload);\r\n            }\r\n            else if (cmd === CONTROL_PONG) {\r\n                this.log_('got pong on primary.');\r\n                this.onPrimaryResponse_();\r\n                this.sendPingOnPrimaryIfNecessary_();\r\n            }\r\n            else {\r\n                error('Unknown control packet command: ' + cmd);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @param handshake - The handshake data returned from the server\r\n     */\r\n    onHandshake_(handshake) {\r\n        const timestamp = handshake.ts;\r\n        const version = handshake.v;\r\n        const host = handshake.h;\r\n        this.sessionId = handshake.s;\r\n        this.repoInfo_.host = host;\r\n        // if we've already closed the connection, then don't bother trying to progress further\r\n        if (this.state_ === 0 /* CONNECTING */) {\r\n            this.conn_.start();\r\n            this.onConnectionEstablished_(this.conn_, timestamp);\r\n            if (PROTOCOL_VERSION !== version) {\r\n                warn('Protocol version mismatch detected');\r\n            }\r\n            // TODO: do we want to upgrade? when? maybe a delay?\r\n            this.tryStartUpgrade_();\r\n        }\r\n    }\r\n    tryStartUpgrade_() {\r\n        const conn = this.transportManager_.upgradeTransport();\r\n        if (conn) {\r\n            this.startUpgrade_(conn);\r\n        }\r\n    }\r\n    startUpgrade_(conn) {\r\n        this.secondaryConn_ = new conn(this.nextTransportId_(), this.repoInfo_, this.applicationId_, this.appCheckToken_, this.authToken_, this.sessionId);\r\n        // For certain transports (WebSockets), we need to send and receive several messages back and forth before we\r\n        // can consider the transport healthy.\r\n        this.secondaryResponsesRequired_ =\r\n            conn['responsesRequiredToBeHealthy'] || 0;\r\n        const onMessage = this.connReceiver_(this.secondaryConn_);\r\n        const onDisconnect = this.disconnReceiver_(this.secondaryConn_);\r\n        this.secondaryConn_.open(onMessage, onDisconnect);\r\n        // If we haven't successfully upgraded after UPGRADE_TIMEOUT, give up and kill the secondary.\r\n        setTimeoutNonBlocking(() => {\r\n            if (this.secondaryConn_) {\r\n                this.log_('Timed out trying to upgrade.');\r\n                this.secondaryConn_.close();\r\n            }\r\n        }, Math.floor(UPGRADE_TIMEOUT));\r\n    }\r\n    onReset_(host) {\r\n        this.log_('Reset packet received.  New host: ' + host);\r\n        this.repoInfo_.host = host;\r\n        // TODO: if we're already \"connected\", we need to trigger a disconnect at the next layer up.\r\n        // We don't currently support resets after the connection has already been established\r\n        if (this.state_ === 1 /* CONNECTED */) {\r\n            this.close();\r\n        }\r\n        else {\r\n            // Close whatever connections we have open and start again.\r\n            this.closeConnections_();\r\n            this.start_();\r\n        }\r\n    }\r\n    onConnectionEstablished_(conn, timestamp) {\r\n        this.log_('Realtime connection established.');\r\n        this.conn_ = conn;\r\n        this.state_ = 1 /* CONNECTED */;\r\n        if (this.onReady_) {\r\n            this.onReady_(timestamp, this.sessionId);\r\n            this.onReady_ = null;\r\n        }\r\n        // If after 5 seconds we haven't sent enough requests to the server to get the connection healthy,\r\n        // send some pings.\r\n        if (this.primaryResponsesRequired_ === 0) {\r\n            this.log_('Primary connection is healthy.');\r\n            this.isHealthy_ = true;\r\n        }\r\n        else {\r\n            setTimeoutNonBlocking(() => {\r\n                this.sendPingOnPrimaryIfNecessary_();\r\n            }, Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS));\r\n        }\r\n    }\r\n    sendPingOnPrimaryIfNecessary_() {\r\n        // If the connection isn't considered healthy yet, we'll send a noop ping packet request.\r\n        if (!this.isHealthy_ && this.state_ === 1 /* CONNECTED */) {\r\n            this.log_('sending ping on primary.');\r\n            this.sendData_({ t: 'c', d: { t: PING, d: {} } });\r\n        }\r\n    }\r\n    onSecondaryConnectionLost_() {\r\n        const conn = this.secondaryConn_;\r\n        this.secondaryConn_ = null;\r\n        if (this.tx_ === conn || this.rx_ === conn) {\r\n            // we are relying on this connection already in some capacity. Therefore, a failure is real\r\n            this.close();\r\n        }\r\n    }\r\n    /**\r\n     * @param everConnected - Whether or not the connection ever reached a server. Used to determine if\r\n     * we should flush the host cache\r\n     */\r\n    onConnectionLost_(everConnected) {\r\n        this.conn_ = null;\r\n        // NOTE: IF you're seeing a Firefox error for this line, I think it might be because it's getting\r\n        // called on window close and RealtimeState.CONNECTING is no longer defined.  Just a guess.\r\n        if (!everConnected && this.state_ === 0 /* CONNECTING */) {\r\n            this.log_('Realtime connection failed.');\r\n            // Since we failed to connect at all, clear any cached entry for this namespace in case the machine went away\r\n            if (this.repoInfo_.isCacheableHost()) {\r\n                PersistentStorage.remove('host:' + this.repoInfo_.host);\r\n                // reset the internal host to what we would show the user, i.e. <ns>.firebaseio.com\r\n                this.repoInfo_.internalHost = this.repoInfo_.host;\r\n            }\r\n        }\r\n        else if (this.state_ === 1 /* CONNECTED */) {\r\n            this.log_('Realtime connection lost.');\r\n        }\r\n        this.close();\r\n    }\r\n    onConnectionShutdown_(reason) {\r\n        this.log_('Connection shutdown command received. Shutting down...');\r\n        if (this.onKill_) {\r\n            this.onKill_(reason);\r\n            this.onKill_ = null;\r\n        }\r\n        // We intentionally don't want to fire onDisconnect (kill is a different case),\r\n        // so clear the callback.\r\n        this.onDisconnect_ = null;\r\n        this.close();\r\n    }\r\n    sendData_(data) {\r\n        if (this.state_ !== 1 /* CONNECTED */) {\r\n            throw 'Connection is not connected';\r\n        }\r\n        else {\r\n            this.tx_.send(data);\r\n        }\r\n    }\r\n    /**\r\n     * Cleans up this connection, calling the appropriate callbacks\r\n     */\r\n    close() {\r\n        if (this.state_ !== 2 /* DISCONNECTED */) {\r\n            this.log_('Closing realtime connection.');\r\n            this.state_ = 2 /* DISCONNECTED */;\r\n            this.closeConnections_();\r\n            if (this.onDisconnect_) {\r\n                this.onDisconnect_();\r\n                this.onDisconnect_ = null;\r\n            }\r\n        }\r\n    }\r\n    closeConnections_() {\r\n        this.log_('Shutting down all connections');\r\n        if (this.conn_) {\r\n            this.conn_.close();\r\n            this.conn_ = null;\r\n        }\r\n        if (this.secondaryConn_) {\r\n            this.secondaryConn_.close();\r\n            this.secondaryConn_ = null;\r\n        }\r\n        if (this.healthyTimeout_) {\r\n            clearTimeout(this.healthyTimeout_);\r\n            this.healthyTimeout_ = null;\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Interface defining the set of actions that can be performed against the Firebase server\r\n * (basically corresponds to our wire protocol).\r\n *\r\n * @interface\r\n */\r\nclass ServerActions {\r\n    put(pathString, data, onComplete, hash) { }\r\n    merge(pathString, data, onComplete, hash) { }\r\n    /**\r\n     * Refreshes the auth token for the current connection.\r\n     * @param token - The authentication token\r\n     */\r\n    refreshAuthToken(token) { }\r\n    /**\r\n     * Refreshes the app check token for the current connection.\r\n     * @param token The app check token\r\n     */\r\n    refreshAppCheckToken(token) { }\r\n    onDisconnectPut(pathString, data, onComplete) { }\r\n    onDisconnectMerge(pathString, data, onComplete) { }\r\n    onDisconnectCancel(pathString, onComplete) { }\r\n    reportStats(stats) { }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Base class to be used if you want to emit events. Call the constructor with\r\n * the set of allowed event names.\r\n */\r\nclass EventEmitter {\r\n    constructor(allowedEvents_) {\r\n        this.allowedEvents_ = allowedEvents_;\r\n        this.listeners_ = {};\r\n        assert(Array.isArray(allowedEvents_) && allowedEvents_.length > 0, 'Requires a non-empty array');\r\n    }\r\n    /**\r\n     * To be called by derived classes to trigger events.\r\n     */\r\n    trigger(eventType, ...varArgs) {\r\n        if (Array.isArray(this.listeners_[eventType])) {\r\n            // Clone the list, since callbacks could add/remove listeners.\r\n            const listeners = [...this.listeners_[eventType]];\r\n            for (let i = 0; i < listeners.length; i++) {\r\n                listeners[i].callback.apply(listeners[i].context, varArgs);\r\n            }\r\n        }\r\n    }\r\n    on(eventType, callback, context) {\r\n        this.validateEventType_(eventType);\r\n        this.listeners_[eventType] = this.listeners_[eventType] || [];\r\n        this.listeners_[eventType].push({ callback, context });\r\n        const eventData = this.getInitialEvent(eventType);\r\n        if (eventData) {\r\n            callback.apply(context, eventData);\r\n        }\r\n    }\r\n    off(eventType, callback, context) {\r\n        this.validateEventType_(eventType);\r\n        const listeners = this.listeners_[eventType] || [];\r\n        for (let i = 0; i < listeners.length; i++) {\r\n            if (listeners[i].callback === callback &&\r\n                (!context || context === listeners[i].context)) {\r\n                listeners.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    validateEventType_(eventType) {\r\n        assert(this.allowedEvents_.find(et => {\r\n            return et === eventType;\r\n        }), 'Unknown event: ' + eventType);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Monitors online state (as reported by window.online/offline events).\r\n *\r\n * The expectation is that this could have many false positives (thinks we are online\r\n * when we're not), but no false negatives.  So we can safely use it to determine when\r\n * we definitely cannot reach the internet.\r\n */\r\nclass OnlineMonitor extends EventEmitter {\r\n    constructor() {\r\n        super(['online']);\r\n        this.online_ = true;\r\n        // We've had repeated complaints that Cordova apps can get stuck \"offline\", e.g.\r\n        // https://forum.ionicframework.com/t/firebase-connection-is-lost-and-never-come-back/43810\r\n        // It would seem that the 'online' event does not always fire consistently. So we disable it\r\n        // for Cordova.\r\n        if (typeof window !== 'undefined' &&\r\n            typeof window.addEventListener !== 'undefined' &&\r\n            !isMobileCordova()) {\r\n            window.addEventListener('online', () => {\r\n                if (!this.online_) {\r\n                    this.online_ = true;\r\n                    this.trigger('online', true);\r\n                }\r\n            }, false);\r\n            window.addEventListener('offline', () => {\r\n                if (this.online_) {\r\n                    this.online_ = false;\r\n                    this.trigger('online', false);\r\n                }\r\n            }, false);\r\n        }\r\n    }\r\n    static getInstance() {\r\n        return new OnlineMonitor();\r\n    }\r\n    getInitialEvent(eventType) {\r\n        assert(eventType === 'online', 'Unknown event type: ' + eventType);\r\n        return [this.online_];\r\n    }\r\n    currentlyOnline() {\r\n        return this.online_;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Maximum key depth. */\r\nconst MAX_PATH_DEPTH = 32;\r\n/** Maximum number of (UTF8) bytes in a Firebase path. */\r\nconst MAX_PATH_LENGTH_BYTES = 768;\r\n/**\r\n * An immutable object representing a parsed path.  It's immutable so that you\r\n * can pass them around to other functions without worrying about them changing\r\n * it.\r\n */\r\nclass Path {\r\n    /**\r\n     * @param pathOrString - Path string to parse, or another path, or the raw\r\n     * tokens array\r\n     */\r\n    constructor(pathOrString, pieceNum) {\r\n        if (pieceNum === void 0) {\r\n            this.pieces_ = pathOrString.split('/');\r\n            // Remove empty pieces.\r\n            let copyTo = 0;\r\n            for (let i = 0; i < this.pieces_.length; i++) {\r\n                if (this.pieces_[i].length > 0) {\r\n                    this.pieces_[copyTo] = this.pieces_[i];\r\n                    copyTo++;\r\n                }\r\n            }\r\n            this.pieces_.length = copyTo;\r\n            this.pieceNum_ = 0;\r\n        }\r\n        else {\r\n            this.pieces_ = pathOrString;\r\n            this.pieceNum_ = pieceNum;\r\n        }\r\n    }\r\n    toString() {\r\n        let pathString = '';\r\n        for (let i = this.pieceNum_; i < this.pieces_.length; i++) {\r\n            if (this.pieces_[i] !== '') {\r\n                pathString += '/' + this.pieces_[i];\r\n            }\r\n        }\r\n        return pathString || '/';\r\n    }\r\n}\r\nfunction newEmptyPath() {\r\n    return new Path('');\r\n}\r\nfunction pathGetFront(path) {\r\n    if (path.pieceNum_ >= path.pieces_.length) {\r\n        return null;\r\n    }\r\n    return path.pieces_[path.pieceNum_];\r\n}\r\n/**\r\n * @returns The number of segments in this path\r\n */\r\nfunction pathGetLength(path) {\r\n    return path.pieces_.length - path.pieceNum_;\r\n}\r\nfunction pathPopFront(path) {\r\n    let pieceNum = path.pieceNum_;\r\n    if (pieceNum < path.pieces_.length) {\r\n        pieceNum++;\r\n    }\r\n    return new Path(path.pieces_, pieceNum);\r\n}\r\nfunction pathGetBack(path) {\r\n    if (path.pieceNum_ < path.pieces_.length) {\r\n        return path.pieces_[path.pieces_.length - 1];\r\n    }\r\n    return null;\r\n}\r\nfunction pathToUrlEncodedString(path) {\r\n    let pathString = '';\r\n    for (let i = path.pieceNum_; i < path.pieces_.length; i++) {\r\n        if (path.pieces_[i] !== '') {\r\n            pathString += '/' + encodeURIComponent(String(path.pieces_[i]));\r\n        }\r\n    }\r\n    return pathString || '/';\r\n}\r\n/**\r\n * Shallow copy of the parts of the path.\r\n *\r\n */\r\nfunction pathSlice(path, begin = 0) {\r\n    return path.pieces_.slice(path.pieceNum_ + begin);\r\n}\r\nfunction pathParent(path) {\r\n    if (path.pieceNum_ >= path.pieces_.length) {\r\n        return null;\r\n    }\r\n    const pieces = [];\r\n    for (let i = path.pieceNum_; i < path.pieces_.length - 1; i++) {\r\n        pieces.push(path.pieces_[i]);\r\n    }\r\n    return new Path(pieces, 0);\r\n}\r\nfunction pathChild(path, childPathObj) {\r\n    const pieces = [];\r\n    for (let i = path.pieceNum_; i < path.pieces_.length; i++) {\r\n        pieces.push(path.pieces_[i]);\r\n    }\r\n    if (childPathObj instanceof Path) {\r\n        for (let i = childPathObj.pieceNum_; i < childPathObj.pieces_.length; i++) {\r\n            pieces.push(childPathObj.pieces_[i]);\r\n        }\r\n    }\r\n    else {\r\n        const childPieces = childPathObj.split('/');\r\n        for (let i = 0; i < childPieces.length; i++) {\r\n            if (childPieces[i].length > 0) {\r\n                pieces.push(childPieces[i]);\r\n            }\r\n        }\r\n    }\r\n    return new Path(pieces, 0);\r\n}\r\n/**\r\n * @returns True if there are no segments in this path\r\n */\r\nfunction pathIsEmpty(path) {\r\n    return path.pieceNum_ >= path.pieces_.length;\r\n}\r\n/**\r\n * @returns The path from outerPath to innerPath\r\n */\r\nfunction newRelativePath(outerPath, innerPath) {\r\n    const outer = pathGetFront(outerPath), inner = pathGetFront(innerPath);\r\n    if (outer === null) {\r\n        return innerPath;\r\n    }\r\n    else if (outer === inner) {\r\n        return newRelativePath(pathPopFront(outerPath), pathPopFront(innerPath));\r\n    }\r\n    else {\r\n        throw new Error('INTERNAL ERROR: innerPath (' +\r\n            innerPath +\r\n            ') is not within ' +\r\n            'outerPath (' +\r\n            outerPath +\r\n            ')');\r\n    }\r\n}\r\n/**\r\n * @returns -1, 0, 1 if left is less, equal, or greater than the right.\r\n */\r\nfunction pathCompare(left, right) {\r\n    const leftKeys = pathSlice(left, 0);\r\n    const rightKeys = pathSlice(right, 0);\r\n    for (let i = 0; i < leftKeys.length && i < rightKeys.length; i++) {\r\n        const cmp = nameCompare(leftKeys[i], rightKeys[i]);\r\n        if (cmp !== 0) {\r\n            return cmp;\r\n        }\r\n    }\r\n    if (leftKeys.length === rightKeys.length) {\r\n        return 0;\r\n    }\r\n    return leftKeys.length < rightKeys.length ? -1 : 1;\r\n}\r\n/**\r\n * @returns true if paths are the same.\r\n */\r\nfunction pathEquals(path, other) {\r\n    if (pathGetLength(path) !== pathGetLength(other)) {\r\n        return false;\r\n    }\r\n    for (let i = path.pieceNum_, j = other.pieceNum_; i <= path.pieces_.length; i++, j++) {\r\n        if (path.pieces_[i] !== other.pieces_[j]) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * @returns True if this path is a parent of (or the same as) other\r\n */\r\nfunction pathContains(path, other) {\r\n    let i = path.pieceNum_;\r\n    let j = other.pieceNum_;\r\n    if (pathGetLength(path) > pathGetLength(other)) {\r\n        return false;\r\n    }\r\n    while (i < path.pieces_.length) {\r\n        if (path.pieces_[i] !== other.pieces_[j]) {\r\n            return false;\r\n        }\r\n        ++i;\r\n        ++j;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Dynamic (mutable) path used to count path lengths.\r\n *\r\n * This class is used to efficiently check paths for valid\r\n * length (in UTF8 bytes) and depth (used in path validation).\r\n *\r\n * Throws Error exception if path is ever invalid.\r\n *\r\n * The definition of a path always begins with '/'.\r\n */\r\nclass ValidationPath {\r\n    /**\r\n     * @param path - Initial Path.\r\n     * @param errorPrefix_ - Prefix for any error messages.\r\n     */\r\n    constructor(path, errorPrefix_) {\r\n        this.errorPrefix_ = errorPrefix_;\r\n        this.parts_ = pathSlice(path, 0);\r\n        /** Initialize to number of '/' chars needed in path. */\r\n        this.byteLength_ = Math.max(1, this.parts_.length);\r\n        for (let i = 0; i < this.parts_.length; i++) {\r\n            this.byteLength_ += stringLength(this.parts_[i]);\r\n        }\r\n        validationPathCheckValid(this);\r\n    }\r\n}\r\nfunction validationPathPush(validationPath, child) {\r\n    // Count the needed '/'\r\n    if (validationPath.parts_.length > 0) {\r\n        validationPath.byteLength_ += 1;\r\n    }\r\n    validationPath.parts_.push(child);\r\n    validationPath.byteLength_ += stringLength(child);\r\n    validationPathCheckValid(validationPath);\r\n}\r\nfunction validationPathPop(validationPath) {\r\n    const last = validationPath.parts_.pop();\r\n    validationPath.byteLength_ -= stringLength(last);\r\n    // Un-count the previous '/'\r\n    if (validationPath.parts_.length > 0) {\r\n        validationPath.byteLength_ -= 1;\r\n    }\r\n}\r\nfunction validationPathCheckValid(validationPath) {\r\n    if (validationPath.byteLength_ > MAX_PATH_LENGTH_BYTES) {\r\n        throw new Error(validationPath.errorPrefix_ +\r\n            'has a key path longer than ' +\r\n            MAX_PATH_LENGTH_BYTES +\r\n            ' bytes (' +\r\n            validationPath.byteLength_ +\r\n            ').');\r\n    }\r\n    if (validationPath.parts_.length > MAX_PATH_DEPTH) {\r\n        throw new Error(validationPath.errorPrefix_ +\r\n            'path specified exceeds the maximum depth that can be written (' +\r\n            MAX_PATH_DEPTH +\r\n            ') or object contains a cycle ' +\r\n            validationPathToErrorString(validationPath));\r\n    }\r\n}\r\n/**\r\n * String for use in error messages - uses '.' notation for path.\r\n */\r\nfunction validationPathToErrorString(validationPath) {\r\n    if (validationPath.parts_.length === 0) {\r\n        return '';\r\n    }\r\n    return \"in property '\" + validationPath.parts_.join('.') + \"'\";\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass VisibilityMonitor extends EventEmitter {\r\n    constructor() {\r\n        super(['visible']);\r\n        let hidden;\r\n        let visibilityChange;\r\n        if (typeof document !== 'undefined' &&\r\n            typeof document.addEventListener !== 'undefined') {\r\n            if (typeof document['hidden'] !== 'undefined') {\r\n                // Opera 12.10 and Firefox 18 and later support\r\n                visibilityChange = 'visibilitychange';\r\n                hidden = 'hidden';\r\n            }\r\n            else if (typeof document['mozHidden'] !== 'undefined') {\r\n                visibilityChange = 'mozvisibilitychange';\r\n                hidden = 'mozHidden';\r\n            }\r\n            else if (typeof document['msHidden'] !== 'undefined') {\r\n                visibilityChange = 'msvisibilitychange';\r\n                hidden = 'msHidden';\r\n            }\r\n            else if (typeof document['webkitHidden'] !== 'undefined') {\r\n                visibilityChange = 'webkitvisibilitychange';\r\n                hidden = 'webkitHidden';\r\n            }\r\n        }\r\n        // Initially, we always assume we are visible. This ensures that in browsers\r\n        // without page visibility support or in cases where we are never visible\r\n        // (e.g. chrome extension), we act as if we are visible, i.e. don't delay\r\n        // reconnects\r\n        this.visible_ = true;\r\n        if (visibilityChange) {\r\n            document.addEventListener(visibilityChange, () => {\r\n                const visible = !document[hidden];\r\n                if (visible !== this.visible_) {\r\n                    this.visible_ = visible;\r\n                    this.trigger('visible', visible);\r\n                }\r\n            }, false);\r\n        }\r\n    }\r\n    static getInstance() {\r\n        return new VisibilityMonitor();\r\n    }\r\n    getInitialEvent(eventType) {\r\n        assert(eventType === 'visible', 'Unknown event type: ' + eventType);\r\n        return [this.visible_];\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst RECONNECT_MIN_DELAY = 1000;\r\nconst RECONNECT_MAX_DELAY_DEFAULT = 60 * 5 * 1000; // 5 minutes in milliseconds (Case: 1858)\r\nconst RECONNECT_MAX_DELAY_FOR_ADMINS = 30 * 1000; // 30 seconds for admin clients (likely to be a backend server)\r\nconst RECONNECT_DELAY_MULTIPLIER = 1.3;\r\nconst RECONNECT_DELAY_RESET_TIMEOUT = 30000; // Reset delay back to MIN_DELAY after being connected for 30sec.\r\nconst SERVER_KILL_INTERRUPT_REASON = 'server_kill';\r\n// If auth fails repeatedly, we'll assume something is wrong and log a warning / back off.\r\nconst INVALID_TOKEN_THRESHOLD = 3;\r\n/**\r\n * Firebase connection.  Abstracts wire protocol and handles reconnecting.\r\n *\r\n * NOTE: All JSON objects sent to the realtime connection must have property names enclosed\r\n * in quotes to make sure the closure compiler does not minify them.\r\n */\r\nclass PersistentConnection extends ServerActions {\r\n    /**\r\n     * @param repoInfo_ - Data about the namespace we are connecting to\r\n     * @param applicationId_ - The Firebase App ID for this project\r\n     * @param onDataUpdate_ - A callback for new data from the server\r\n     */\r\n    constructor(repoInfo_, applicationId_, onDataUpdate_, onConnectStatus_, onServerInfoUpdate_, authTokenProvider_, appCheckTokenProvider_, authOverride_) {\r\n        super();\r\n        this.repoInfo_ = repoInfo_;\r\n        this.applicationId_ = applicationId_;\r\n        this.onDataUpdate_ = onDataUpdate_;\r\n        this.onConnectStatus_ = onConnectStatus_;\r\n        this.onServerInfoUpdate_ = onServerInfoUpdate_;\r\n        this.authTokenProvider_ = authTokenProvider_;\r\n        this.appCheckTokenProvider_ = appCheckTokenProvider_;\r\n        this.authOverride_ = authOverride_;\r\n        // Used for diagnostic logging.\r\n        this.id = PersistentConnection.nextPersistentConnectionId_++;\r\n        this.log_ = logWrapper('p:' + this.id + ':');\r\n        this.interruptReasons_ = {};\r\n        this.listens = new Map();\r\n        this.outstandingPuts_ = [];\r\n        this.outstandingGets_ = [];\r\n        this.outstandingPutCount_ = 0;\r\n        this.outstandingGetCount_ = 0;\r\n        this.onDisconnectRequestQueue_ = [];\r\n        this.connected_ = false;\r\n        this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n        this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_DEFAULT;\r\n        this.securityDebugCallback_ = null;\r\n        this.lastSessionId = null;\r\n        this.establishConnectionTimer_ = null;\r\n        this.visible_ = false;\r\n        // Before we get connected, we keep a queue of pending messages to send.\r\n        this.requestCBHash_ = {};\r\n        this.requestNumber_ = 0;\r\n        this.realtime_ = null;\r\n        this.authToken_ = null;\r\n        this.appCheckToken_ = null;\r\n        this.forceTokenRefresh_ = false;\r\n        this.invalidAuthTokenCount_ = 0;\r\n        this.invalidAppCheckTokenCount_ = 0;\r\n        this.firstConnection_ = true;\r\n        this.lastConnectionAttemptTime_ = null;\r\n        this.lastConnectionEstablishedTime_ = null;\r\n        if (authOverride_ && !isNodeSdk()) {\r\n            throw new Error('Auth override specified in options, but not supported on non Node.js platforms');\r\n        }\r\n        VisibilityMonitor.getInstance().on('visible', this.onVisible_, this);\r\n        if (repoInfo_.host.indexOf('fblocal') === -1) {\r\n            OnlineMonitor.getInstance().on('online', this.onOnline_, this);\r\n        }\r\n    }\r\n    sendRequest(action, body, onResponse) {\r\n        const curReqNum = ++this.requestNumber_;\r\n        const msg = { r: curReqNum, a: action, b: body };\r\n        this.log_(stringify(msg));\r\n        assert(this.connected_, \"sendRequest call when we're not connected not allowed.\");\r\n        this.realtime_.sendRequest(msg);\r\n        if (onResponse) {\r\n            this.requestCBHash_[curReqNum] = onResponse;\r\n        }\r\n    }\r\n    get(query) {\r\n        this.initConnection_();\r\n        const deferred = new Deferred();\r\n        const request = {\r\n            p: query._path.toString(),\r\n            q: query._queryObject\r\n        };\r\n        const outstandingGet = {\r\n            action: 'g',\r\n            request,\r\n            onComplete: (message) => {\r\n                const payload = message['d'];\r\n                if (message['s'] === 'ok') {\r\n                    deferred.resolve(payload);\r\n                }\r\n                else {\r\n                    deferred.reject(payload);\r\n                }\r\n            }\r\n        };\r\n        this.outstandingGets_.push(outstandingGet);\r\n        this.outstandingGetCount_++;\r\n        const index = this.outstandingGets_.length - 1;\r\n        if (this.connected_) {\r\n            this.sendGet_(index);\r\n        }\r\n        return deferred.promise;\r\n    }\r\n    listen(query, currentHashFn, tag, onComplete) {\r\n        this.initConnection_();\r\n        const queryId = query._queryIdentifier;\r\n        const pathString = query._path.toString();\r\n        this.log_('Listen called for ' + pathString + ' ' + queryId);\r\n        if (!this.listens.has(pathString)) {\r\n            this.listens.set(pathString, new Map());\r\n        }\r\n        assert(query._queryParams.isDefault() || !query._queryParams.loadsAllData(), 'listen() called for non-default but complete query');\r\n        assert(!this.listens.get(pathString).has(queryId), `listen() called twice for same path/queryId.`);\r\n        const listenSpec = {\r\n            onComplete,\r\n            hashFn: currentHashFn,\r\n            query,\r\n            tag\r\n        };\r\n        this.listens.get(pathString).set(queryId, listenSpec);\r\n        if (this.connected_) {\r\n            this.sendListen_(listenSpec);\r\n        }\r\n    }\r\n    sendGet_(index) {\r\n        const get = this.outstandingGets_[index];\r\n        this.sendRequest('g', get.request, (message) => {\r\n            delete this.outstandingGets_[index];\r\n            this.outstandingGetCount_--;\r\n            if (this.outstandingGetCount_ === 0) {\r\n                this.outstandingGets_ = [];\r\n            }\r\n            if (get.onComplete) {\r\n                get.onComplete(message);\r\n            }\r\n        });\r\n    }\r\n    sendListen_(listenSpec) {\r\n        const query = listenSpec.query;\r\n        const pathString = query._path.toString();\r\n        const queryId = query._queryIdentifier;\r\n        this.log_('Listen on ' + pathString + ' for ' + queryId);\r\n        const req = { /*path*/ p: pathString };\r\n        const action = 'q';\r\n        // Only bother to send query if it's non-default.\r\n        if (listenSpec.tag) {\r\n            req['q'] = query._queryObject;\r\n            req['t'] = listenSpec.tag;\r\n        }\r\n        req[ /*hash*/'h'] = listenSpec.hashFn();\r\n        this.sendRequest(action, req, (message) => {\r\n            const payload = message[ /*data*/'d'];\r\n            const status = message[ /*status*/'s'];\r\n            // print warnings in any case...\r\n            PersistentConnection.warnOnListenWarnings_(payload, query);\r\n            const currentListenSpec = this.listens.get(pathString) &&\r\n                this.listens.get(pathString).get(queryId);\r\n            // only trigger actions if the listen hasn't been removed and readded\r\n            if (currentListenSpec === listenSpec) {\r\n                this.log_('listen response', message);\r\n                if (status !== 'ok') {\r\n                    this.removeListen_(pathString, queryId);\r\n                }\r\n                if (listenSpec.onComplete) {\r\n                    listenSpec.onComplete(status, payload);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static warnOnListenWarnings_(payload, query) {\r\n        if (payload && typeof payload === 'object' && contains(payload, 'w')) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const warnings = safeGet(payload, 'w');\r\n            if (Array.isArray(warnings) && ~warnings.indexOf('no_index')) {\r\n                const indexSpec = '\".indexOn\": \"' + query._queryParams.getIndex().toString() + '\"';\r\n                const indexPath = query._path.toString();\r\n                warn(`Using an unspecified index. Your data will be downloaded and ` +\r\n                    `filtered on the client. Consider adding ${indexSpec} at ` +\r\n                    `${indexPath} to your security rules for better performance.`);\r\n            }\r\n        }\r\n    }\r\n    refreshAuthToken(token) {\r\n        this.authToken_ = token;\r\n        this.log_('Auth token refreshed');\r\n        if (this.authToken_) {\r\n            this.tryAuth();\r\n        }\r\n        else {\r\n            //If we're connected we want to let the server know to unauthenticate us. If we're not connected, simply delete\r\n            //the credential so we dont become authenticated next time we connect.\r\n            if (this.connected_) {\r\n                this.sendRequest('unauth', {}, () => { });\r\n            }\r\n        }\r\n        this.reduceReconnectDelayIfAdminCredential_(token);\r\n    }\r\n    reduceReconnectDelayIfAdminCredential_(credential) {\r\n        // NOTE: This isn't intended to be bulletproof (a malicious developer can always just modify the client).\r\n        // Additionally, we don't bother resetting the max delay back to the default if auth fails / expires.\r\n        const isFirebaseSecret = credential && credential.length === 40;\r\n        if (isFirebaseSecret || isAdmin(credential)) {\r\n            this.log_('Admin auth credential detected.  Reducing max reconnect time.');\r\n            this.maxReconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\r\n        }\r\n    }\r\n    refreshAppCheckToken(token) {\r\n        this.appCheckToken_ = token;\r\n        this.log_('App check token refreshed');\r\n        if (this.appCheckToken_) {\r\n            this.tryAppCheck();\r\n        }\r\n        else {\r\n            //If we're connected we want to let the server know to unauthenticate us.\r\n            //If we're not connected, simply delete the credential so we dont become\r\n            // authenticated next time we connect.\r\n            if (this.connected_) {\r\n                this.sendRequest('unappeck', {}, () => { });\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Attempts to authenticate with the given credentials. If the authentication attempt fails, it's triggered like\r\n     * a auth revoked (the connection is closed).\r\n     */\r\n    tryAuth() {\r\n        if (this.connected_ && this.authToken_) {\r\n            const token = this.authToken_;\r\n            const authMethod = isValidFormat(token) ? 'auth' : 'gauth';\r\n            const requestData = { cred: token };\r\n            if (this.authOverride_ === null) {\r\n                requestData['noauth'] = true;\r\n            }\r\n            else if (typeof this.authOverride_ === 'object') {\r\n                requestData['authvar'] = this.authOverride_;\r\n            }\r\n            this.sendRequest(authMethod, requestData, (res) => {\r\n                const status = res[ /*status*/'s'];\r\n                const data = res[ /*data*/'d'] || 'error';\r\n                if (this.authToken_ === token) {\r\n                    if (status === 'ok') {\r\n                        this.invalidAuthTokenCount_ = 0;\r\n                    }\r\n                    else {\r\n                        // Triggers reconnect and force refresh for auth token\r\n                        this.onAuthRevoked_(status, data);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Attempts to authenticate with the given token. If the authentication\r\n     * attempt fails, it's triggered like the token was revoked (the connection is\r\n     * closed).\r\n     */\r\n    tryAppCheck() {\r\n        if (this.connected_ && this.appCheckToken_) {\r\n            this.sendRequest('appcheck', { 'token': this.appCheckToken_ }, (res) => {\r\n                const status = res[ /*status*/'s'];\r\n                const data = res[ /*data*/'d'] || 'error';\r\n                if (status === 'ok') {\r\n                    this.invalidAppCheckTokenCount_ = 0;\r\n                }\r\n                else {\r\n                    this.onAppCheckRevoked_(status, data);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    unlisten(query, tag) {\r\n        const pathString = query._path.toString();\r\n        const queryId = query._queryIdentifier;\r\n        this.log_('Unlisten called for ' + pathString + ' ' + queryId);\r\n        assert(query._queryParams.isDefault() || !query._queryParams.loadsAllData(), 'unlisten() called for non-default but complete query');\r\n        const listen = this.removeListen_(pathString, queryId);\r\n        if (listen && this.connected_) {\r\n            this.sendUnlisten_(pathString, queryId, query._queryObject, tag);\r\n        }\r\n    }\r\n    sendUnlisten_(pathString, queryId, queryObj, tag) {\r\n        this.log_('Unlisten on ' + pathString + ' for ' + queryId);\r\n        const req = { /*path*/ p: pathString };\r\n        const action = 'n';\r\n        // Only bother sending queryId if it's non-default.\r\n        if (tag) {\r\n            req['q'] = queryObj;\r\n            req['t'] = tag;\r\n        }\r\n        this.sendRequest(action, req);\r\n    }\r\n    onDisconnectPut(pathString, data, onComplete) {\r\n        this.initConnection_();\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('o', pathString, data, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString,\r\n                action: 'o',\r\n                data,\r\n                onComplete\r\n            });\r\n        }\r\n    }\r\n    onDisconnectMerge(pathString, data, onComplete) {\r\n        this.initConnection_();\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('om', pathString, data, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString,\r\n                action: 'om',\r\n                data,\r\n                onComplete\r\n            });\r\n        }\r\n    }\r\n    onDisconnectCancel(pathString, onComplete) {\r\n        this.initConnection_();\r\n        if (this.connected_) {\r\n            this.sendOnDisconnect_('oc', pathString, null, onComplete);\r\n        }\r\n        else {\r\n            this.onDisconnectRequestQueue_.push({\r\n                pathString,\r\n                action: 'oc',\r\n                data: null,\r\n                onComplete\r\n            });\r\n        }\r\n    }\r\n    sendOnDisconnect_(action, pathString, data, onComplete) {\r\n        const request = { /*path*/ p: pathString, /*data*/ d: data };\r\n        this.log_('onDisconnect ' + action, request);\r\n        this.sendRequest(action, request, (response) => {\r\n            if (onComplete) {\r\n                setTimeout(() => {\r\n                    onComplete(response[ /*status*/'s'], response[ /* data */'d']);\r\n                }, Math.floor(0));\r\n            }\r\n        });\r\n    }\r\n    put(pathString, data, onComplete, hash) {\r\n        this.putInternal('p', pathString, data, onComplete, hash);\r\n    }\r\n    merge(pathString, data, onComplete, hash) {\r\n        this.putInternal('m', pathString, data, onComplete, hash);\r\n    }\r\n    putInternal(action, pathString, data, onComplete, hash) {\r\n        this.initConnection_();\r\n        const request = {\r\n            /*path*/ p: pathString,\r\n            /*data*/ d: data\r\n        };\r\n        if (hash !== undefined) {\r\n            request[ /*hash*/'h'] = hash;\r\n        }\r\n        // TODO: Only keep track of the most recent put for a given path?\r\n        this.outstandingPuts_.push({\r\n            action,\r\n            request,\r\n            onComplete\r\n        });\r\n        this.outstandingPutCount_++;\r\n        const index = this.outstandingPuts_.length - 1;\r\n        if (this.connected_) {\r\n            this.sendPut_(index);\r\n        }\r\n        else {\r\n            this.log_('Buffering put: ' + pathString);\r\n        }\r\n    }\r\n    sendPut_(index) {\r\n        const action = this.outstandingPuts_[index].action;\r\n        const request = this.outstandingPuts_[index].request;\r\n        const onComplete = this.outstandingPuts_[index].onComplete;\r\n        this.outstandingPuts_[index].queued = this.connected_;\r\n        this.sendRequest(action, request, (message) => {\r\n            this.log_(action + ' response', message);\r\n            delete this.outstandingPuts_[index];\r\n            this.outstandingPutCount_--;\r\n            // Clean up array occasionally.\r\n            if (this.outstandingPutCount_ === 0) {\r\n                this.outstandingPuts_ = [];\r\n            }\r\n            if (onComplete) {\r\n                onComplete(message[ /*status*/'s'], message[ /* data */'d']);\r\n            }\r\n        });\r\n    }\r\n    reportStats(stats) {\r\n        // If we're not connected, we just drop the stats.\r\n        if (this.connected_) {\r\n            const request = { /*counters*/ c: stats };\r\n            this.log_('reportStats', request);\r\n            this.sendRequest(/*stats*/ 's', request, result => {\r\n                const status = result[ /*status*/'s'];\r\n                if (status !== 'ok') {\r\n                    const errorReason = result[ /* data */'d'];\r\n                    this.log_('reportStats', 'Error sending stats: ' + errorReason);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    onDataMessage_(message) {\r\n        if ('r' in message) {\r\n            // this is a response\r\n            this.log_('from server: ' + stringify(message));\r\n            const reqNum = message['r'];\r\n            const onResponse = this.requestCBHash_[reqNum];\r\n            if (onResponse) {\r\n                delete this.requestCBHash_[reqNum];\r\n                onResponse(message[ /*body*/'b']);\r\n            }\r\n        }\r\n        else if ('error' in message) {\r\n            throw 'A server-side error has occurred: ' + message['error'];\r\n        }\r\n        else if ('a' in message) {\r\n            // a and b are action and body, respectively\r\n            this.onDataPush_(message['a'], message['b']);\r\n        }\r\n    }\r\n    onDataPush_(action, body) {\r\n        this.log_('handleServerMessage', action, body);\r\n        if (action === 'd') {\r\n            this.onDataUpdate_(body[ /*path*/'p'], body[ /*data*/'d'], \r\n            /*isMerge*/ false, body['t']);\r\n        }\r\n        else if (action === 'm') {\r\n            this.onDataUpdate_(body[ /*path*/'p'], body[ /*data*/'d'], \r\n            /*isMerge=*/ true, body['t']);\r\n        }\r\n        else if (action === 'c') {\r\n            this.onListenRevoked_(body[ /*path*/'p'], body[ /*query*/'q']);\r\n        }\r\n        else if (action === 'ac') {\r\n            this.onAuthRevoked_(body[ /*status code*/'s'], body[ /* explanation */'d']);\r\n        }\r\n        else if (action === 'apc') {\r\n            this.onAppCheckRevoked_(body[ /*status code*/'s'], body[ /* explanation */'d']);\r\n        }\r\n        else if (action === 'sd') {\r\n            this.onSecurityDebugPacket_(body);\r\n        }\r\n        else {\r\n            error('Unrecognized action received from server: ' +\r\n                stringify(action) +\r\n                '\\nAre you using the latest client?');\r\n        }\r\n    }\r\n    onReady_(timestamp, sessionId) {\r\n        this.log_('connection ready');\r\n        this.connected_ = true;\r\n        this.lastConnectionEstablishedTime_ = new Date().getTime();\r\n        this.handleTimestamp_(timestamp);\r\n        this.lastSessionId = sessionId;\r\n        if (this.firstConnection_) {\r\n            this.sendConnectStats_();\r\n        }\r\n        this.restoreState_();\r\n        this.firstConnection_ = false;\r\n        this.onConnectStatus_(true);\r\n    }\r\n    scheduleConnect_(timeout) {\r\n        assert(!this.realtime_, \"Scheduling a connect when we're already connected/ing?\");\r\n        if (this.establishConnectionTimer_) {\r\n            clearTimeout(this.establishConnectionTimer_);\r\n        }\r\n        // NOTE: Even when timeout is 0, it's important to do a setTimeout to work around an infuriating \"Security Error\" in\r\n        // Firefox when trying to write to our long-polling iframe in some scenarios (e.g. Forge or our unit tests).\r\n        this.establishConnectionTimer_ = setTimeout(() => {\r\n            this.establishConnectionTimer_ = null;\r\n            this.establishConnection_();\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        }, Math.floor(timeout));\r\n    }\r\n    initConnection_() {\r\n        if (!this.realtime_ && this.firstConnection_) {\r\n            this.scheduleConnect_(0);\r\n        }\r\n    }\r\n    onVisible_(visible) {\r\n        // NOTE: Tabbing away and back to a window will defeat our reconnect backoff, but I think that's fine.\r\n        if (visible &&\r\n            !this.visible_ &&\r\n            this.reconnectDelay_ === this.maxReconnectDelay_) {\r\n            this.log_('Window became visible.  Reducing delay.');\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n        this.visible_ = visible;\r\n    }\r\n    onOnline_(online) {\r\n        if (online) {\r\n            this.log_('Browser went online.');\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n        else {\r\n            this.log_('Browser went offline.  Killing connection.');\r\n            if (this.realtime_) {\r\n                this.realtime_.close();\r\n            }\r\n        }\r\n    }\r\n    onRealtimeDisconnect_() {\r\n        this.log_('data client disconnected');\r\n        this.connected_ = false;\r\n        this.realtime_ = null;\r\n        // Since we don't know if our sent transactions succeeded or not, we need to cancel them.\r\n        this.cancelSentTransactions_();\r\n        // Clear out the pending requests.\r\n        this.requestCBHash_ = {};\r\n        if (this.shouldReconnect_()) {\r\n            if (!this.visible_) {\r\n                this.log_(\"Window isn't visible.  Delaying reconnect.\");\r\n                this.reconnectDelay_ = this.maxReconnectDelay_;\r\n                this.lastConnectionAttemptTime_ = new Date().getTime();\r\n            }\r\n            else if (this.lastConnectionEstablishedTime_) {\r\n                // If we've been connected long enough, reset reconnect delay to minimum.\r\n                const timeSinceLastConnectSucceeded = new Date().getTime() - this.lastConnectionEstablishedTime_;\r\n                if (timeSinceLastConnectSucceeded > RECONNECT_DELAY_RESET_TIMEOUT) {\r\n                    this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n                }\r\n                this.lastConnectionEstablishedTime_ = null;\r\n            }\r\n            const timeSinceLastConnectAttempt = new Date().getTime() - this.lastConnectionAttemptTime_;\r\n            let reconnectDelay = Math.max(0, this.reconnectDelay_ - timeSinceLastConnectAttempt);\r\n            reconnectDelay = Math.random() * reconnectDelay;\r\n            this.log_('Trying to reconnect in ' + reconnectDelay + 'ms');\r\n            this.scheduleConnect_(reconnectDelay);\r\n            // Adjust reconnect delay for next time.\r\n            this.reconnectDelay_ = Math.min(this.maxReconnectDelay_, this.reconnectDelay_ * RECONNECT_DELAY_MULTIPLIER);\r\n        }\r\n        this.onConnectStatus_(false);\r\n    }\r\n    async establishConnection_() {\r\n        if (this.shouldReconnect_()) {\r\n            this.log_('Making a connection attempt');\r\n            this.lastConnectionAttemptTime_ = new Date().getTime();\r\n            this.lastConnectionEstablishedTime_ = null;\r\n            const onDataMessage = this.onDataMessage_.bind(this);\r\n            const onReady = this.onReady_.bind(this);\r\n            const onDisconnect = this.onRealtimeDisconnect_.bind(this);\r\n            const connId = this.id + ':' + PersistentConnection.nextConnectionId_++;\r\n            const lastSessionId = this.lastSessionId;\r\n            let canceled = false;\r\n            let connection = null;\r\n            const closeFn = function () {\r\n                if (connection) {\r\n                    connection.close();\r\n                }\r\n                else {\r\n                    canceled = true;\r\n                    onDisconnect();\r\n                }\r\n            };\r\n            const sendRequestFn = function (msg) {\r\n                assert(connection, \"sendRequest call when we're not connected not allowed.\");\r\n                connection.sendRequest(msg);\r\n            };\r\n            this.realtime_ = {\r\n                close: closeFn,\r\n                sendRequest: sendRequestFn\r\n            };\r\n            const forceRefresh = this.forceTokenRefresh_;\r\n            this.forceTokenRefresh_ = false;\r\n            try {\r\n                // First fetch auth and app check token, and establish connection after\r\n                // fetching the token was successful\r\n                const [authToken, appCheckToken] = await Promise.all([\r\n                    this.authTokenProvider_.getToken(forceRefresh),\r\n                    this.appCheckTokenProvider_.getToken(forceRefresh)\r\n                ]);\r\n                if (!canceled) {\r\n                    log('getToken() completed. Creating connection.');\r\n                    this.authToken_ = authToken && authToken.accessToken;\r\n                    this.appCheckToken_ = appCheckToken && appCheckToken.token;\r\n                    connection = new Connection(connId, this.repoInfo_, this.applicationId_, this.appCheckToken_, this.authToken_, onDataMessage, onReady, onDisconnect, \r\n                    /* onKill= */ reason => {\r\n                        warn(reason + ' (' + this.repoInfo_.toString() + ')');\r\n                        this.interrupt(SERVER_KILL_INTERRUPT_REASON);\r\n                    }, lastSessionId);\r\n                }\r\n                else {\r\n                    log('getToken() completed but was canceled');\r\n                }\r\n            }\r\n            catch (error) {\r\n                this.log_('Failed to get token: ' + error);\r\n                if (!canceled) {\r\n                    if (this.repoInfo_.nodeAdmin) {\r\n                        // This may be a critical error for the Admin Node.js SDK, so log a warning.\r\n                        // But getToken() may also just have temporarily failed, so we still want to\r\n                        // continue retrying.\r\n                        warn(error);\r\n                    }\r\n                    closeFn();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    interrupt(reason) {\r\n        log('Interrupting connection for reason: ' + reason);\r\n        this.interruptReasons_[reason] = true;\r\n        if (this.realtime_) {\r\n            this.realtime_.close();\r\n        }\r\n        else {\r\n            if (this.establishConnectionTimer_) {\r\n                clearTimeout(this.establishConnectionTimer_);\r\n                this.establishConnectionTimer_ = null;\r\n            }\r\n            if (this.connected_) {\r\n                this.onRealtimeDisconnect_();\r\n            }\r\n        }\r\n    }\r\n    resume(reason) {\r\n        log('Resuming connection for reason: ' + reason);\r\n        delete this.interruptReasons_[reason];\r\n        if (isEmpty(this.interruptReasons_)) {\r\n            this.reconnectDelay_ = RECONNECT_MIN_DELAY;\r\n            if (!this.realtime_) {\r\n                this.scheduleConnect_(0);\r\n            }\r\n        }\r\n    }\r\n    handleTimestamp_(timestamp) {\r\n        const delta = timestamp - new Date().getTime();\r\n        this.onServerInfoUpdate_({ serverTimeOffset: delta });\r\n    }\r\n    cancelSentTransactions_() {\r\n        for (let i = 0; i < this.outstandingPuts_.length; i++) {\r\n            const put = this.outstandingPuts_[i];\r\n            if (put && /*hash*/ 'h' in put.request && put.queued) {\r\n                if (put.onComplete) {\r\n                    put.onComplete('disconnect');\r\n                }\r\n                delete this.outstandingPuts_[i];\r\n                this.outstandingPutCount_--;\r\n            }\r\n        }\r\n        // Clean up array occasionally.\r\n        if (this.outstandingPutCount_ === 0) {\r\n            this.outstandingPuts_ = [];\r\n        }\r\n    }\r\n    onListenRevoked_(pathString, query) {\r\n        // Remove the listen and manufacture a \"permission_denied\" error for the failed listen.\r\n        let queryId;\r\n        if (!query) {\r\n            queryId = 'default';\r\n        }\r\n        else {\r\n            queryId = query.map(q => ObjectToUniqueKey(q)).join('$');\r\n        }\r\n        const listen = this.removeListen_(pathString, queryId);\r\n        if (listen && listen.onComplete) {\r\n            listen.onComplete('permission_denied');\r\n        }\r\n    }\r\n    removeListen_(pathString, queryId) {\r\n        const normalizedPathString = new Path(pathString).toString(); // normalize path.\r\n        let listen;\r\n        if (this.listens.has(normalizedPathString)) {\r\n            const map = this.listens.get(normalizedPathString);\r\n            listen = map.get(queryId);\r\n            map.delete(queryId);\r\n            if (map.size === 0) {\r\n                this.listens.delete(normalizedPathString);\r\n            }\r\n        }\r\n        else {\r\n            // all listens for this path has already been removed\r\n            listen = undefined;\r\n        }\r\n        return listen;\r\n    }\r\n    onAuthRevoked_(statusCode, explanation) {\r\n        log('Auth token revoked: ' + statusCode + '/' + explanation);\r\n        this.authToken_ = null;\r\n        this.forceTokenRefresh_ = true;\r\n        this.realtime_.close();\r\n        if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\r\n            // We'll wait a couple times before logging the warning / increasing the\r\n            // retry period since oauth tokens will report as \"invalid\" if they're\r\n            // just expired. Plus there may be transient issues that resolve themselves.\r\n            this.invalidAuthTokenCount_++;\r\n            if (this.invalidAuthTokenCount_ >= INVALID_TOKEN_THRESHOLD) {\r\n                // Set a long reconnect delay because recovery is unlikely\r\n                this.reconnectDelay_ = RECONNECT_MAX_DELAY_FOR_ADMINS;\r\n                // Notify the auth token provider that the token is invalid, which will log\r\n                // a warning\r\n                this.authTokenProvider_.notifyForInvalidToken();\r\n            }\r\n        }\r\n    }\r\n    onAppCheckRevoked_(statusCode, explanation) {\r\n        log('App check token revoked: ' + statusCode + '/' + explanation);\r\n        this.appCheckToken_ = null;\r\n        this.forceTokenRefresh_ = true;\r\n        // Note: We don't close the connection as the developer may not have\r\n        // enforcement enabled. The backend closes connections with enforcements.\r\n        if (statusCode === 'invalid_token' || statusCode === 'permission_denied') {\r\n            // We'll wait a couple times before logging the warning / increasing the\r\n            // retry period since oauth tokens will report as \"invalid\" if they're\r\n            // just expired. Plus there may be transient issues that resolve themselves.\r\n            this.invalidAppCheckTokenCount_++;\r\n            if (this.invalidAppCheckTokenCount_ >= INVALID_TOKEN_THRESHOLD) {\r\n                this.appCheckTokenProvider_.notifyForInvalidToken();\r\n            }\r\n        }\r\n    }\r\n    onSecurityDebugPacket_(body) {\r\n        if (this.securityDebugCallback_) {\r\n            this.securityDebugCallback_(body);\r\n        }\r\n        else {\r\n            if ('msg' in body) {\r\n                console.log('FIREBASE: ' + body['msg'].replace('\\n', '\\nFIREBASE: '));\r\n            }\r\n        }\r\n    }\r\n    restoreState_() {\r\n        //Re-authenticate ourselves if we have a credential stored.\r\n        this.tryAuth();\r\n        this.tryAppCheck();\r\n        // Puts depend on having received the corresponding data update from the server before they complete, so we must\r\n        // make sure to send listens before puts.\r\n        for (const queries of this.listens.values()) {\r\n            for (const listenSpec of queries.values()) {\r\n                this.sendListen_(listenSpec);\r\n            }\r\n        }\r\n        for (let i = 0; i < this.outstandingPuts_.length; i++) {\r\n            if (this.outstandingPuts_[i]) {\r\n                this.sendPut_(i);\r\n            }\r\n        }\r\n        while (this.onDisconnectRequestQueue_.length) {\r\n            const request = this.onDisconnectRequestQueue_.shift();\r\n            this.sendOnDisconnect_(request.action, request.pathString, request.data, request.onComplete);\r\n        }\r\n        for (let i = 0; i < this.outstandingGets_.length; i++) {\r\n            if (this.outstandingGets_[i]) {\r\n                this.sendGet_(i);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Sends client stats for first connection\r\n     */\r\n    sendConnectStats_() {\r\n        const stats = {};\r\n        let clientName = 'js';\r\n        if (isNodeSdk()) {\r\n            if (this.repoInfo_.nodeAdmin) {\r\n                clientName = 'admin_node';\r\n            }\r\n            else {\r\n                clientName = 'node';\r\n            }\r\n        }\r\n        stats['sdk.' + clientName + '.' + SDK_VERSION.replace(/\\./g, '-')] = 1;\r\n        if (isMobileCordova()) {\r\n            stats['framework.cordova'] = 1;\r\n        }\r\n        else if (isReactNative()) {\r\n            stats['framework.reactnative'] = 1;\r\n        }\r\n        this.reportStats(stats);\r\n    }\r\n    shouldReconnect_() {\r\n        const online = OnlineMonitor.getInstance().currentlyOnline();\r\n        return isEmpty(this.interruptReasons_) && online;\r\n    }\r\n}\r\nPersistentConnection.nextPersistentConnectionId_ = 0;\r\n/**\r\n * Counter for number of connections created. Mainly used for tagging in the logs\r\n */\r\nPersistentConnection.nextConnectionId_ = 0;\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass NamedNode {\r\n    constructor(name, node) {\r\n        this.name = name;\r\n        this.node = node;\r\n    }\r\n    static Wrap(name, node) {\r\n        return new NamedNode(name, node);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass Index {\r\n    /**\r\n     * @returns A standalone comparison function for\r\n     * this index\r\n     */\r\n    getCompare() {\r\n        return this.compare.bind(this);\r\n    }\r\n    /**\r\n     * Given a before and after value for a node, determine if the indexed value has changed. Even if they are different,\r\n     * it's possible that the changes are isolated to parts of the snapshot that are not indexed.\r\n     *\r\n     *\r\n     * @returns True if the portion of the snapshot being indexed changed between oldNode and newNode\r\n     */\r\n    indexedValueChanged(oldNode, newNode) {\r\n        const oldWrapped = new NamedNode(MIN_NAME, oldNode);\r\n        const newWrapped = new NamedNode(MIN_NAME, newNode);\r\n        return this.compare(oldWrapped, newWrapped) !== 0;\r\n    }\r\n    /**\r\n     * @returns a node wrapper that will sort equal to or less than\r\n     * any other node wrapper, using this index\r\n     */\r\n    minPost() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return NamedNode.MIN;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nlet __EMPTY_NODE;\r\nclass KeyIndex extends Index {\r\n    static get __EMPTY_NODE() {\r\n        return __EMPTY_NODE;\r\n    }\r\n    static set __EMPTY_NODE(val) {\r\n        __EMPTY_NODE = val;\r\n    }\r\n    compare(a, b) {\r\n        return nameCompare(a.name, b.name);\r\n    }\r\n    isDefinedOn(node) {\r\n        // We could probably return true here (since every node has a key), but it's never called\r\n        // so just leaving unimplemented for now.\r\n        throw assertionError('KeyIndex.isDefinedOn not expected to be called.');\r\n    }\r\n    indexedValueChanged(oldNode, newNode) {\r\n        return false; // The key for a node never changes.\r\n    }\r\n    minPost() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return NamedNode.MIN;\r\n    }\r\n    maxPost() {\r\n        // TODO: This should really be created once and cached in a static property, but\r\n        // NamedNode isn't defined yet, so I can't use it in a static.  Bleh.\r\n        return new NamedNode(MAX_NAME, __EMPTY_NODE);\r\n    }\r\n    makePost(indexValue, name) {\r\n        assert(typeof indexValue === 'string', 'KeyIndex indexValue must always be a string.');\r\n        // We just use empty node, but it'll never be compared, since our comparator only looks at name.\r\n        return new NamedNode(indexValue, __EMPTY_NODE);\r\n    }\r\n    /**\r\n     * @returns String representation for inclusion in a query spec\r\n     */\r\n    toString() {\r\n        return '.key';\r\n    }\r\n}\r\nconst KEY_INDEX = new KeyIndex();\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An iterator over an LLRBNode.\r\n */\r\nclass SortedMapIterator {\r\n    /**\r\n     * @param node - Node to iterate.\r\n     * @param isReverse_ - Whether or not to iterate in reverse\r\n     */\r\n    constructor(node, startKey, comparator, isReverse_, resultGenerator_ = null) {\r\n        this.isReverse_ = isReverse_;\r\n        this.resultGenerator_ = resultGenerator_;\r\n        this.nodeStack_ = [];\r\n        let cmp = 1;\r\n        while (!node.isEmpty()) {\r\n            node = node;\r\n            cmp = startKey ? comparator(node.key, startKey) : 1;\r\n            // flip the comparison if we're going in reverse\r\n            if (isReverse_) {\r\n                cmp *= -1;\r\n            }\r\n            if (cmp < 0) {\r\n                // This node is less than our start key. ignore it\r\n                if (this.isReverse_) {\r\n                    node = node.left;\r\n                }\r\n                else {\r\n                    node = node.right;\r\n                }\r\n            }\r\n            else if (cmp === 0) {\r\n                // This node is exactly equal to our start key. Push it on the stack, but stop iterating;\r\n                this.nodeStack_.push(node);\r\n                break;\r\n            }\r\n            else {\r\n                // This node is greater than our start key, add it to the stack and move to the next one\r\n                this.nodeStack_.push(node);\r\n                if (this.isReverse_) {\r\n                    node = node.right;\r\n                }\r\n                else {\r\n                    node = node.left;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    getNext() {\r\n        if (this.nodeStack_.length === 0) {\r\n            return null;\r\n        }\r\n        let node = this.nodeStack_.pop();\r\n        let result;\r\n        if (this.resultGenerator_) {\r\n            result = this.resultGenerator_(node.key, node.value);\r\n        }\r\n        else {\r\n            result = { key: node.key, value: node.value };\r\n        }\r\n        if (this.isReverse_) {\r\n            node = node.left;\r\n            while (!node.isEmpty()) {\r\n                this.nodeStack_.push(node);\r\n                node = node.right;\r\n            }\r\n        }\r\n        else {\r\n            node = node.right;\r\n            while (!node.isEmpty()) {\r\n                this.nodeStack_.push(node);\r\n                node = node.left;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    hasNext() {\r\n        return this.nodeStack_.length > 0;\r\n    }\r\n    peek() {\r\n        if (this.nodeStack_.length === 0) {\r\n            return null;\r\n        }\r\n        const node = this.nodeStack_[this.nodeStack_.length - 1];\r\n        if (this.resultGenerator_) {\r\n            return this.resultGenerator_(node.key, node.value);\r\n        }\r\n        else {\r\n            return { key: node.key, value: node.value };\r\n        }\r\n    }\r\n}\r\n/**\r\n * Represents a node in a Left-leaning Red-Black tree.\r\n */\r\nclass LLRBNode {\r\n    /**\r\n     * @param key - Key associated with this node.\r\n     * @param value - Value associated with this node.\r\n     * @param color - Whether this node is red.\r\n     * @param left - Left child.\r\n     * @param right - Right child.\r\n     */\r\n    constructor(key, value, color, left, right) {\r\n        this.key = key;\r\n        this.value = value;\r\n        this.color = color != null ? color : LLRBNode.RED;\r\n        this.left =\r\n            left != null ? left : SortedMap.EMPTY_NODE;\r\n        this.right =\r\n            right != null ? right : SortedMap.EMPTY_NODE;\r\n    }\r\n    /**\r\n     * Returns a copy of the current node, optionally replacing pieces of it.\r\n     *\r\n     * @param key - New key for the node, or null.\r\n     * @param value - New value for the node, or null.\r\n     * @param color - New color for the node, or null.\r\n     * @param left - New left child for the node, or null.\r\n     * @param right - New right child for the node, or null.\r\n     * @returns The node copy.\r\n     */\r\n    copy(key, value, color, left, right) {\r\n        return new LLRBNode(key != null ? key : this.key, value != null ? value : this.value, color != null ? color : this.color, left != null ? left : this.left, right != null ? right : this.right);\r\n    }\r\n    /**\r\n     * @returns The total number of nodes in the tree.\r\n     */\r\n    count() {\r\n        return this.left.count() + 1 + this.right.count();\r\n    }\r\n    /**\r\n     * @returns True if the tree is empty.\r\n     */\r\n    isEmpty() {\r\n        return false;\r\n    }\r\n    /**\r\n     * Traverses the tree in key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param action - Callback function to be called for each\r\n     *   node.  If it returns true, traversal is aborted.\r\n     * @returns The first truthy value returned by action, or the last falsey\r\n     *   value returned by action\r\n     */\r\n    inorderTraversal(action) {\r\n        return (this.left.inorderTraversal(action) ||\r\n            !!action(this.key, this.value) ||\r\n            this.right.inorderTraversal(action));\r\n    }\r\n    /**\r\n     * Traverses the tree in reverse key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param action - Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @returns True if traversal was aborted.\r\n     */\r\n    reverseTraversal(action) {\r\n        return (this.right.reverseTraversal(action) ||\r\n            action(this.key, this.value) ||\r\n            this.left.reverseTraversal(action));\r\n    }\r\n    /**\r\n     * @returns The minimum node in the tree.\r\n     */\r\n    min_() {\r\n        if (this.left.isEmpty()) {\r\n            return this;\r\n        }\r\n        else {\r\n            return this.left.min_();\r\n        }\r\n    }\r\n    /**\r\n     * @returns The maximum key in the tree.\r\n     */\r\n    minKey() {\r\n        return this.min_().key;\r\n    }\r\n    /**\r\n     * @returns The maximum key in the tree.\r\n     */\r\n    maxKey() {\r\n        if (this.right.isEmpty()) {\r\n            return this.key;\r\n        }\r\n        else {\r\n            return this.right.maxKey();\r\n        }\r\n    }\r\n    /**\r\n     * @param key - Key to insert.\r\n     * @param value - Value to insert.\r\n     * @param comparator - Comparator.\r\n     * @returns New tree, with the key/value added.\r\n     */\r\n    insert(key, value, comparator) {\r\n        let n = this;\r\n        const cmp = comparator(key, n.key);\r\n        if (cmp < 0) {\r\n            n = n.copy(null, null, null, n.left.insert(key, value, comparator), null);\r\n        }\r\n        else if (cmp === 0) {\r\n            n = n.copy(null, value, null, null, null);\r\n        }\r\n        else {\r\n            n = n.copy(null, null, null, null, n.right.insert(key, value, comparator));\r\n        }\r\n        return n.fixUp_();\r\n    }\r\n    /**\r\n     * @returns New tree, with the minimum key removed.\r\n     */\r\n    removeMin_() {\r\n        if (this.left.isEmpty()) {\r\n            return SortedMap.EMPTY_NODE;\r\n        }\r\n        let n = this;\r\n        if (!n.left.isRed_() && !n.left.left.isRed_()) {\r\n            n = n.moveRedLeft_();\r\n        }\r\n        n = n.copy(null, null, null, n.left.removeMin_(), null);\r\n        return n.fixUp_();\r\n    }\r\n    /**\r\n     * @param key - The key of the item to remove.\r\n     * @param comparator - Comparator.\r\n     * @returns New tree, with the specified item removed.\r\n     */\r\n    remove(key, comparator) {\r\n        let n, smallest;\r\n        n = this;\r\n        if (comparator(key, n.key) < 0) {\r\n            if (!n.left.isEmpty() && !n.left.isRed_() && !n.left.left.isRed_()) {\r\n                n = n.moveRedLeft_();\r\n            }\r\n            n = n.copy(null, null, null, n.left.remove(key, comparator), null);\r\n        }\r\n        else {\r\n            if (n.left.isRed_()) {\r\n                n = n.rotateRight_();\r\n            }\r\n            if (!n.right.isEmpty() && !n.right.isRed_() && !n.right.left.isRed_()) {\r\n                n = n.moveRedRight_();\r\n            }\r\n            if (comparator(key, n.key) === 0) {\r\n                if (n.right.isEmpty()) {\r\n                    return SortedMap.EMPTY_NODE;\r\n                }\r\n                else {\r\n                    smallest = n.right.min_();\r\n                    n = n.copy(smallest.key, smallest.value, null, null, n.right.removeMin_());\r\n                }\r\n            }\r\n            n = n.copy(null, null, null, null, n.right.remove(key, comparator));\r\n        }\r\n        return n.fixUp_();\r\n    }\r\n    /**\r\n     * @returns Whether this is a RED node.\r\n     */\r\n    isRed_() {\r\n        return this.color;\r\n    }\r\n    /**\r\n     * @returns New tree after performing any needed rotations.\r\n     */\r\n    fixUp_() {\r\n        let n = this;\r\n        if (n.right.isRed_() && !n.left.isRed_()) {\r\n            n = n.rotateLeft_();\r\n        }\r\n        if (n.left.isRed_() && n.left.left.isRed_()) {\r\n            n = n.rotateRight_();\r\n        }\r\n        if (n.left.isRed_() && n.right.isRed_()) {\r\n            n = n.colorFlip_();\r\n        }\r\n        return n;\r\n    }\r\n    /**\r\n     * @returns New tree, after moveRedLeft.\r\n     */\r\n    moveRedLeft_() {\r\n        let n = this.colorFlip_();\r\n        if (n.right.left.isRed_()) {\r\n            n = n.copy(null, null, null, null, n.right.rotateRight_());\r\n            n = n.rotateLeft_();\r\n            n = n.colorFlip_();\r\n        }\r\n        return n;\r\n    }\r\n    /**\r\n     * @returns New tree, after moveRedRight.\r\n     */\r\n    moveRedRight_() {\r\n        let n = this.colorFlip_();\r\n        if (n.left.left.isRed_()) {\r\n            n = n.rotateRight_();\r\n            n = n.colorFlip_();\r\n        }\r\n        return n;\r\n    }\r\n    /**\r\n     * @returns New tree, after rotateLeft.\r\n     */\r\n    rotateLeft_() {\r\n        const nl = this.copy(null, null, LLRBNode.RED, null, this.right.left);\r\n        return this.right.copy(null, null, this.color, nl, null);\r\n    }\r\n    /**\r\n     * @returns New tree, after rotateRight.\r\n     */\r\n    rotateRight_() {\r\n        const nr = this.copy(null, null, LLRBNode.RED, this.left.right, null);\r\n        return this.left.copy(null, null, this.color, null, nr);\r\n    }\r\n    /**\r\n     * @returns Newt ree, after colorFlip.\r\n     */\r\n    colorFlip_() {\r\n        const left = this.left.copy(null, null, !this.left.color, null, null);\r\n        const right = this.right.copy(null, null, !this.right.color, null, null);\r\n        return this.copy(null, null, !this.color, left, right);\r\n    }\r\n    /**\r\n     * For testing.\r\n     *\r\n     * @returns True if all is well.\r\n     */\r\n    checkMaxDepth_() {\r\n        const blackDepth = this.check_();\r\n        return Math.pow(2.0, blackDepth) <= this.count() + 1;\r\n    }\r\n    check_() {\r\n        if (this.isRed_() && this.left.isRed_()) {\r\n            throw new Error('Red node has red child(' + this.key + ',' + this.value + ')');\r\n        }\r\n        if (this.right.isRed_()) {\r\n            throw new Error('Right child of (' + this.key + ',' + this.value + ') is red');\r\n        }\r\n        const blackDepth = this.left.check_();\r\n        if (blackDepth !== this.right.check_()) {\r\n            throw new Error('Black depths differ');\r\n        }\r\n        else {\r\n            return blackDepth + (this.isRed_() ? 0 : 1);\r\n        }\r\n    }\r\n}\r\nLLRBNode.RED = true;\r\nLLRBNode.BLACK = false;\r\n/**\r\n * Represents an empty node (a leaf node in the Red-Black Tree).\r\n */\r\nclass LLRBEmptyNode {\r\n    /**\r\n     * Returns a copy of the current node.\r\n     *\r\n     * @returns The node copy.\r\n     */\r\n    copy(key, value, color, left, right) {\r\n        return this;\r\n    }\r\n    /**\r\n     * Returns a copy of the tree, with the specified key/value added.\r\n     *\r\n     * @param key - Key to be added.\r\n     * @param value - Value to be added.\r\n     * @param comparator - Comparator.\r\n     * @returns New tree, with item added.\r\n     */\r\n    insert(key, value, comparator) {\r\n        return new LLRBNode(key, value, null);\r\n    }\r\n    /**\r\n     * Returns a copy of the tree, with the specified key removed.\r\n     *\r\n     * @param key - The key to remove.\r\n     * @param comparator - Comparator.\r\n     * @returns New tree, with item removed.\r\n     */\r\n    remove(key, comparator) {\r\n        return this;\r\n    }\r\n    /**\r\n     * @returns The total number of nodes in the tree.\r\n     */\r\n    count() {\r\n        return 0;\r\n    }\r\n    /**\r\n     * @returns True if the tree is empty.\r\n     */\r\n    isEmpty() {\r\n        return true;\r\n    }\r\n    /**\r\n     * Traverses the tree in key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param action - Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @returns True if traversal was aborted.\r\n     */\r\n    inorderTraversal(action) {\r\n        return false;\r\n    }\r\n    /**\r\n     * Traverses the tree in reverse key order and calls the specified action function\r\n     * for each node.\r\n     *\r\n     * @param action - Callback function to be called for each\r\n     * node.  If it returns true, traversal is aborted.\r\n     * @returns True if traversal was aborted.\r\n     */\r\n    reverseTraversal(action) {\r\n        return false;\r\n    }\r\n    minKey() {\r\n        return null;\r\n    }\r\n    maxKey() {\r\n        return null;\r\n    }\r\n    check_() {\r\n        return 0;\r\n    }\r\n    /**\r\n     * @returns Whether this node is red.\r\n     */\r\n    isRed_() {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * An immutable sorted map implementation, based on a Left-leaning Red-Black\r\n * tree.\r\n */\r\nclass SortedMap {\r\n    /**\r\n     * @param comparator_ - Key comparator.\r\n     * @param root_ - Optional root node for the map.\r\n     */\r\n    constructor(comparator_, root_ = SortedMap.EMPTY_NODE) {\r\n        this.comparator_ = comparator_;\r\n        this.root_ = root_;\r\n    }\r\n    /**\r\n     * Returns a copy of the map, with the specified key/value added or replaced.\r\n     * (TODO: We should perhaps rename this method to 'put')\r\n     *\r\n     * @param key - Key to be added.\r\n     * @param value - Value to be added.\r\n     * @returns New map, with item added.\r\n     */\r\n    insert(key, value) {\r\n        return new SortedMap(this.comparator_, this.root_\r\n            .insert(key, value, this.comparator_)\r\n            .copy(null, null, LLRBNode.BLACK, null, null));\r\n    }\r\n    /**\r\n     * Returns a copy of the map, with the specified key removed.\r\n     *\r\n     * @param key - The key to remove.\r\n     * @returns New map, with item removed.\r\n     */\r\n    remove(key) {\r\n        return new SortedMap(this.comparator_, this.root_\r\n            .remove(key, this.comparator_)\r\n            .copy(null, null, LLRBNode.BLACK, null, null));\r\n    }\r\n    /**\r\n     * Returns the value of the node with the given key, or null.\r\n     *\r\n     * @param key - The key to look up.\r\n     * @returns The value of the node with the given key, or null if the\r\n     * key doesn't exist.\r\n     */\r\n    get(key) {\r\n        let cmp;\r\n        let node = this.root_;\r\n        while (!node.isEmpty()) {\r\n            cmp = this.comparator_(key, node.key);\r\n            if (cmp === 0) {\r\n                return node.value;\r\n            }\r\n            else if (cmp < 0) {\r\n                node = node.left;\r\n            }\r\n            else if (cmp > 0) {\r\n                node = node.right;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns the key of the item *before* the specified key, or null if key is the first item.\r\n     * @param key - The key to find the predecessor of\r\n     * @returns The predecessor key.\r\n     */\r\n    getPredecessorKey(key) {\r\n        let cmp, node = this.root_, rightParent = null;\r\n        while (!node.isEmpty()) {\r\n            cmp = this.comparator_(key, node.key);\r\n            if (cmp === 0) {\r\n                if (!node.left.isEmpty()) {\r\n                    node = node.left;\r\n                    while (!node.right.isEmpty()) {\r\n                        node = node.right;\r\n                    }\r\n                    return node.key;\r\n                }\r\n                else if (rightParent) {\r\n                    return rightParent.key;\r\n                }\r\n                else {\r\n                    return null; // first item.\r\n                }\r\n            }\r\n            else if (cmp < 0) {\r\n                node = node.left;\r\n            }\r\n            else if (cmp > 0) {\r\n                rightParent = node;\r\n                node = node.right;\r\n            }\r\n        }\r\n        throw new Error('Attempted to find predecessor key for a nonexistent key.  What gives?');\r\n    }\r\n    /**\r\n     * @returns True if the map is empty.\r\n     */\r\n    isEmpty() {\r\n        return this.root_.isEmpty();\r\n    }\r\n    /**\r\n     * @returns The total number of nodes in the map.\r\n     */\r\n    count() {\r\n        return this.root_.count();\r\n    }\r\n    /**\r\n     * @returns The minimum key in the map.\r\n     */\r\n    minKey() {\r\n        return this.root_.minKey();\r\n    }\r\n    /**\r\n     * @returns The maximum key in the map.\r\n     */\r\n    maxKey() {\r\n        return this.root_.maxKey();\r\n    }\r\n    /**\r\n     * Traverses the map in key order and calls the specified action function\r\n     * for each key/value pair.\r\n     *\r\n     * @param action - Callback function to be called\r\n     * for each key/value pair.  If action returns true, traversal is aborted.\r\n     * @returns The first truthy value returned by action, or the last falsey\r\n     *   value returned by action\r\n     */\r\n    inorderTraversal(action) {\r\n        return this.root_.inorderTraversal(action);\r\n    }\r\n    /**\r\n     * Traverses the map in reverse key order and calls the specified action function\r\n     * for each key/value pair.\r\n     *\r\n     * @param action - Callback function to be called\r\n     * for each key/value pair.  If action returns true, traversal is aborted.\r\n     * @returns True if the traversal was aborted.\r\n     */\r\n    reverseTraversal(action) {\r\n        return this.root_.reverseTraversal(action);\r\n    }\r\n    /**\r\n     * Returns an iterator over the SortedMap.\r\n     * @returns The iterator.\r\n     */\r\n    getIterator(resultGenerator) {\r\n        return new SortedMapIterator(this.root_, null, this.comparator_, false, resultGenerator);\r\n    }\r\n    getIteratorFrom(key, resultGenerator) {\r\n        return new SortedMapIterator(this.root_, key, this.comparator_, false, resultGenerator);\r\n    }\r\n    getReverseIteratorFrom(key, resultGenerator) {\r\n        return new SortedMapIterator(this.root_, key, this.comparator_, true, resultGenerator);\r\n    }\r\n    getReverseIterator(resultGenerator) {\r\n        return new SortedMapIterator(this.root_, null, this.comparator_, true, resultGenerator);\r\n    }\r\n}\r\n/**\r\n * Always use the same empty node, to reduce memory.\r\n */\r\nSortedMap.EMPTY_NODE = new LLRBEmptyNode();\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction NAME_ONLY_COMPARATOR(left, right) {\r\n    return nameCompare(left.name, right.name);\r\n}\r\nfunction NAME_COMPARATOR(left, right) {\r\n    return nameCompare(left, right);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nlet MAX_NODE$2;\r\nfunction setMaxNode$1(val) {\r\n    MAX_NODE$2 = val;\r\n}\r\nconst priorityHashText = function (priority) {\r\n    if (typeof priority === 'number') {\r\n        return 'number:' + doubleToIEEE754String(priority);\r\n    }\r\n    else {\r\n        return 'string:' + priority;\r\n    }\r\n};\r\n/**\r\n * Validates that a priority snapshot Node is valid.\r\n */\r\nconst validatePriorityNode = function (priorityNode) {\r\n    if (priorityNode.isLeafNode()) {\r\n        const val = priorityNode.val();\r\n        assert(typeof val === 'string' ||\r\n            typeof val === 'number' ||\r\n            (typeof val === 'object' && contains(val, '.sv')), 'Priority must be a string or number.');\r\n    }\r\n    else {\r\n        assert(priorityNode === MAX_NODE$2 || priorityNode.isEmpty(), 'priority of unexpected type.');\r\n    }\r\n    // Don't call getPriority() on MAX_NODE to avoid hitting assertion.\r\n    assert(priorityNode === MAX_NODE$2 || priorityNode.getPriority().isEmpty(), \"Priority nodes can't have a priority of their own.\");\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nlet __childrenNodeConstructor;\r\n/**\r\n * LeafNode is a class for storing leaf nodes in a DataSnapshot.  It\r\n * implements Node and stores the value of the node (a string,\r\n * number, or boolean) accessible via getValue().\r\n */\r\nclass LeafNode {\r\n    /**\r\n     * @param value_ - The value to store in this leaf node. The object type is\r\n     * possible in the event of a deferred value\r\n     * @param priorityNode_ - The priority of this node.\r\n     */\r\n    constructor(value_, priorityNode_ = LeafNode.__childrenNodeConstructor.EMPTY_NODE) {\r\n        this.value_ = value_;\r\n        this.priorityNode_ = priorityNode_;\r\n        this.lazyHash_ = null;\r\n        assert(this.value_ !== undefined && this.value_ !== null, \"LeafNode shouldn't be created with null/undefined value.\");\r\n        validatePriorityNode(this.priorityNode_);\r\n    }\r\n    static set __childrenNodeConstructor(val) {\r\n        __childrenNodeConstructor = val;\r\n    }\r\n    static get __childrenNodeConstructor() {\r\n        return __childrenNodeConstructor;\r\n    }\r\n    /** @inheritDoc */\r\n    isLeafNode() {\r\n        return true;\r\n    }\r\n    /** @inheritDoc */\r\n    getPriority() {\r\n        return this.priorityNode_;\r\n    }\r\n    /** @inheritDoc */\r\n    updatePriority(newPriorityNode) {\r\n        return new LeafNode(this.value_, newPriorityNode);\r\n    }\r\n    /** @inheritDoc */\r\n    getImmediateChild(childName) {\r\n        // Hack to treat priority as a regular child\r\n        if (childName === '.priority') {\r\n            return this.priorityNode_;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    getChild(path) {\r\n        if (pathIsEmpty(path)) {\r\n            return this;\r\n        }\r\n        else if (pathGetFront(path) === '.priority') {\r\n            return this.priorityNode_;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE;\r\n        }\r\n    }\r\n    hasChild() {\r\n        return false;\r\n    }\r\n    /** @inheritDoc */\r\n    getPredecessorChildName(childName, childNode) {\r\n        return null;\r\n    }\r\n    /** @inheritDoc */\r\n    updateImmediateChild(childName, newChildNode) {\r\n        if (childName === '.priority') {\r\n            return this.updatePriority(newChildNode);\r\n        }\r\n        else if (newChildNode.isEmpty() && childName !== '.priority') {\r\n            return this;\r\n        }\r\n        else {\r\n            return LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(childName, newChildNode).updatePriority(this.priorityNode_);\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    updateChild(path, newChildNode) {\r\n        const front = pathGetFront(path);\r\n        if (front === null) {\r\n            return newChildNode;\r\n        }\r\n        else if (newChildNode.isEmpty() && front !== '.priority') {\r\n            return this;\r\n        }\r\n        else {\r\n            assert(front !== '.priority' || pathGetLength(path) === 1, '.priority must be the last token in a path');\r\n            return this.updateImmediateChild(front, LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(path), newChildNode));\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    isEmpty() {\r\n        return false;\r\n    }\r\n    /** @inheritDoc */\r\n    numChildren() {\r\n        return 0;\r\n    }\r\n    /** @inheritDoc */\r\n    forEachChild(index, action) {\r\n        return false;\r\n    }\r\n    val(exportFormat) {\r\n        if (exportFormat && !this.getPriority().isEmpty()) {\r\n            return {\r\n                '.value': this.getValue(),\r\n                '.priority': this.getPriority().val()\r\n            };\r\n        }\r\n        else {\r\n            return this.getValue();\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    hash() {\r\n        if (this.lazyHash_ === null) {\r\n            let toHash = '';\r\n            if (!this.priorityNode_.isEmpty()) {\r\n                toHash +=\r\n                    'priority:' +\r\n                        priorityHashText(this.priorityNode_.val()) +\r\n                        ':';\r\n            }\r\n            const type = typeof this.value_;\r\n            toHash += type + ':';\r\n            if (type === 'number') {\r\n                toHash += doubleToIEEE754String(this.value_);\r\n            }\r\n            else {\r\n                toHash += this.value_;\r\n            }\r\n            this.lazyHash_ = sha1(toHash);\r\n        }\r\n        return this.lazyHash_;\r\n    }\r\n    /**\r\n     * Returns the value of the leaf node.\r\n     * @returns The value of the node.\r\n     */\r\n    getValue() {\r\n        return this.value_;\r\n    }\r\n    compareTo(other) {\r\n        if (other === LeafNode.__childrenNodeConstructor.EMPTY_NODE) {\r\n            return 1;\r\n        }\r\n        else if (other instanceof LeafNode.__childrenNodeConstructor) {\r\n            return -1;\r\n        }\r\n        else {\r\n            assert(other.isLeafNode(), 'Unknown node type');\r\n            return this.compareToLeafNode_(other);\r\n        }\r\n    }\r\n    /**\r\n     * Comparison specifically for two leaf nodes\r\n     */\r\n    compareToLeafNode_(otherLeaf) {\r\n        const otherLeafType = typeof otherLeaf.value_;\r\n        const thisLeafType = typeof this.value_;\r\n        const otherIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType);\r\n        const thisIndex = LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);\r\n        assert(otherIndex >= 0, 'Unknown leaf type: ' + otherLeafType);\r\n        assert(thisIndex >= 0, 'Unknown leaf type: ' + thisLeafType);\r\n        if (otherIndex === thisIndex) {\r\n            // Same type, compare values\r\n            if (thisLeafType === 'object') {\r\n                // Deferred value nodes are all equal, but we should also never get to this point...\r\n                return 0;\r\n            }\r\n            else {\r\n                // Note that this works because true > false, all others are number or string comparisons\r\n                if (this.value_ < otherLeaf.value_) {\r\n                    return -1;\r\n                }\r\n                else if (this.value_ === otherLeaf.value_) {\r\n                    return 0;\r\n                }\r\n                else {\r\n                    return 1;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return thisIndex - otherIndex;\r\n        }\r\n    }\r\n    withIndex() {\r\n        return this;\r\n    }\r\n    isIndexed() {\r\n        return true;\r\n    }\r\n    equals(other) {\r\n        if (other === this) {\r\n            return true;\r\n        }\r\n        else if (other.isLeafNode()) {\r\n            const otherLeaf = other;\r\n            return (this.value_ === otherLeaf.value_ &&\r\n                this.priorityNode_.equals(otherLeaf.priorityNode_));\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n}\r\n/**\r\n * The sort order for comparing leaf nodes of different types. If two leaf nodes have\r\n * the same type, the comparison falls back to their value\r\n */\r\nLeafNode.VALUE_TYPE_ORDER = ['object', 'boolean', 'number', 'string'];\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nlet nodeFromJSON$1;\r\nlet MAX_NODE$1;\r\nfunction setNodeFromJSON(val) {\r\n    nodeFromJSON$1 = val;\r\n}\r\nfunction setMaxNode(val) {\r\n    MAX_NODE$1 = val;\r\n}\r\nclass PriorityIndex extends Index {\r\n    compare(a, b) {\r\n        const aPriority = a.node.getPriority();\r\n        const bPriority = b.node.getPriority();\r\n        const indexCmp = aPriority.compareTo(bPriority);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    }\r\n    isDefinedOn(node) {\r\n        return !node.getPriority().isEmpty();\r\n    }\r\n    indexedValueChanged(oldNode, newNode) {\r\n        return !oldNode.getPriority().equals(newNode.getPriority());\r\n    }\r\n    minPost() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return NamedNode.MIN;\r\n    }\r\n    maxPost() {\r\n        return new NamedNode(MAX_NAME, new LeafNode('[PRIORITY-POST]', MAX_NODE$1));\r\n    }\r\n    makePost(indexValue, name) {\r\n        const priorityNode = nodeFromJSON$1(indexValue);\r\n        return new NamedNode(name, new LeafNode('[PRIORITY-POST]', priorityNode));\r\n    }\r\n    /**\r\n     * @returns String representation for inclusion in a query spec\r\n     */\r\n    toString() {\r\n        return '.priority';\r\n    }\r\n}\r\nconst PRIORITY_INDEX = new PriorityIndex();\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst LOG_2 = Math.log(2);\r\nclass Base12Num {\r\n    constructor(length) {\r\n        const logBase2 = (num) => \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        parseInt((Math.log(num) / LOG_2), 10);\r\n        const bitMask = (bits) => parseInt(Array(bits + 1).join('1'), 2);\r\n        this.count = logBase2(length + 1);\r\n        this.current_ = this.count - 1;\r\n        const mask = bitMask(this.count);\r\n        this.bits_ = (length + 1) & mask;\r\n    }\r\n    nextBitIsOne() {\r\n        //noinspection JSBitwiseOperatorUsage\r\n        const result = !(this.bits_ & (0x1 << this.current_));\r\n        this.current_--;\r\n        return result;\r\n    }\r\n}\r\n/**\r\n * Takes a list of child nodes and constructs a SortedSet using the given comparison\r\n * function\r\n *\r\n * Uses the algorithm described in the paper linked here:\r\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.1458\r\n *\r\n * @param childList - Unsorted list of children\r\n * @param cmp - The comparison method to be used\r\n * @param keyFn - An optional function to extract K from a node wrapper, if K's\r\n * type is not NamedNode\r\n * @param mapSortFn - An optional override for comparator used by the generated sorted map\r\n */\r\nconst buildChildSet = function (childList, cmp, keyFn, mapSortFn) {\r\n    childList.sort(cmp);\r\n    const buildBalancedTree = function (low, high) {\r\n        const length = high - low;\r\n        let namedNode;\r\n        let key;\r\n        if (length === 0) {\r\n            return null;\r\n        }\r\n        else if (length === 1) {\r\n            namedNode = childList[low];\r\n            key = keyFn ? keyFn(namedNode) : namedNode;\r\n            return new LLRBNode(key, namedNode.node, LLRBNode.BLACK, null, null);\r\n        }\r\n        else {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            const middle = parseInt((length / 2), 10) + low;\r\n            const left = buildBalancedTree(low, middle);\r\n            const right = buildBalancedTree(middle + 1, high);\r\n            namedNode = childList[middle];\r\n            key = keyFn ? keyFn(namedNode) : namedNode;\r\n            return new LLRBNode(key, namedNode.node, LLRBNode.BLACK, left, right);\r\n        }\r\n    };\r\n    const buildFrom12Array = function (base12) {\r\n        let node = null;\r\n        let root = null;\r\n        let index = childList.length;\r\n        const buildPennant = function (chunkSize, color) {\r\n            const low = index - chunkSize;\r\n            const high = index;\r\n            index -= chunkSize;\r\n            const childTree = buildBalancedTree(low + 1, high);\r\n            const namedNode = childList[low];\r\n            const key = keyFn ? keyFn(namedNode) : namedNode;\r\n            attachPennant(new LLRBNode(key, namedNode.node, color, null, childTree));\r\n        };\r\n        const attachPennant = function (pennant) {\r\n            if (node) {\r\n                node.left = pennant;\r\n                node = pennant;\r\n            }\r\n            else {\r\n                root = pennant;\r\n                node = pennant;\r\n            }\r\n        };\r\n        for (let i = 0; i < base12.count; ++i) {\r\n            const isOne = base12.nextBitIsOne();\r\n            // The number of nodes taken in each slice is 2^(arr.length - (i + 1))\r\n            const chunkSize = Math.pow(2, base12.count - (i + 1));\r\n            if (isOne) {\r\n                buildPennant(chunkSize, LLRBNode.BLACK);\r\n            }\r\n            else {\r\n                // current == 2\r\n                buildPennant(chunkSize, LLRBNode.BLACK);\r\n                buildPennant(chunkSize, LLRBNode.RED);\r\n            }\r\n        }\r\n        return root;\r\n    };\r\n    const base12 = new Base12Num(childList.length);\r\n    const root = buildFrom12Array(base12);\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    return new SortedMap(mapSortFn || cmp, root);\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nlet _defaultIndexMap;\r\nconst fallbackObject = {};\r\nclass IndexMap {\r\n    constructor(indexes_, indexSet_) {\r\n        this.indexes_ = indexes_;\r\n        this.indexSet_ = indexSet_;\r\n    }\r\n    /**\r\n     * The default IndexMap for nodes without a priority\r\n     */\r\n    static get Default() {\r\n        assert(fallbackObject && PRIORITY_INDEX, 'ChildrenNode.ts has not been loaded');\r\n        _defaultIndexMap =\r\n            _defaultIndexMap ||\r\n                new IndexMap({ '.priority': fallbackObject }, { '.priority': PRIORITY_INDEX });\r\n        return _defaultIndexMap;\r\n    }\r\n    get(indexKey) {\r\n        const sortedMap = safeGet(this.indexes_, indexKey);\r\n        if (!sortedMap) {\r\n            throw new Error('No index defined for ' + indexKey);\r\n        }\r\n        if (sortedMap instanceof SortedMap) {\r\n            return sortedMap;\r\n        }\r\n        else {\r\n            // The index exists, but it falls back to just name comparison. Return null so that the calling code uses the\r\n            // regular child map\r\n            return null;\r\n        }\r\n    }\r\n    hasIndex(indexDefinition) {\r\n        return contains(this.indexSet_, indexDefinition.toString());\r\n    }\r\n    addIndex(indexDefinition, existingChildren) {\r\n        assert(indexDefinition !== KEY_INDEX, \"KeyIndex always exists and isn't meant to be added to the IndexMap.\");\r\n        const childList = [];\r\n        let sawIndexedValue = false;\r\n        const iter = existingChildren.getIterator(NamedNode.Wrap);\r\n        let next = iter.getNext();\r\n        while (next) {\r\n            sawIndexedValue =\r\n                sawIndexedValue || indexDefinition.isDefinedOn(next.node);\r\n            childList.push(next);\r\n            next = iter.getNext();\r\n        }\r\n        let newIndex;\r\n        if (sawIndexedValue) {\r\n            newIndex = buildChildSet(childList, indexDefinition.getCompare());\r\n        }\r\n        else {\r\n            newIndex = fallbackObject;\r\n        }\r\n        const indexName = indexDefinition.toString();\r\n        const newIndexSet = Object.assign({}, this.indexSet_);\r\n        newIndexSet[indexName] = indexDefinition;\r\n        const newIndexes = Object.assign({}, this.indexes_);\r\n        newIndexes[indexName] = newIndex;\r\n        return new IndexMap(newIndexes, newIndexSet);\r\n    }\r\n    /**\r\n     * Ensure that this node is properly tracked in any indexes that we're maintaining\r\n     */\r\n    addToIndexes(namedNode, existingChildren) {\r\n        const newIndexes = map(this.indexes_, (indexedChildren, indexName) => {\r\n            const index = safeGet(this.indexSet_, indexName);\r\n            assert(index, 'Missing index implementation for ' + indexName);\r\n            if (indexedChildren === fallbackObject) {\r\n                // Check to see if we need to index everything\r\n                if (index.isDefinedOn(namedNode.node)) {\r\n                    // We need to build this index\r\n                    const childList = [];\r\n                    const iter = existingChildren.getIterator(NamedNode.Wrap);\r\n                    let next = iter.getNext();\r\n                    while (next) {\r\n                        if (next.name !== namedNode.name) {\r\n                            childList.push(next);\r\n                        }\r\n                        next = iter.getNext();\r\n                    }\r\n                    childList.push(namedNode);\r\n                    return buildChildSet(childList, index.getCompare());\r\n                }\r\n                else {\r\n                    // No change, this remains a fallback\r\n                    return fallbackObject;\r\n                }\r\n            }\r\n            else {\r\n                const existingSnap = existingChildren.get(namedNode.name);\r\n                let newChildren = indexedChildren;\r\n                if (existingSnap) {\r\n                    newChildren = newChildren.remove(new NamedNode(namedNode.name, existingSnap));\r\n                }\r\n                return newChildren.insert(namedNode, namedNode.node);\r\n            }\r\n        });\r\n        return new IndexMap(newIndexes, this.indexSet_);\r\n    }\r\n    /**\r\n     * Create a new IndexMap instance with the given value removed\r\n     */\r\n    removeFromIndexes(namedNode, existingChildren) {\r\n        const newIndexes = map(this.indexes_, (indexedChildren) => {\r\n            if (indexedChildren === fallbackObject) {\r\n                // This is the fallback. Just return it, nothing to do in this case\r\n                return indexedChildren;\r\n            }\r\n            else {\r\n                const existingSnap = existingChildren.get(namedNode.name);\r\n                if (existingSnap) {\r\n                    return indexedChildren.remove(new NamedNode(namedNode.name, existingSnap));\r\n                }\r\n                else {\r\n                    // No record of this child\r\n                    return indexedChildren;\r\n                }\r\n            }\r\n        });\r\n        return new IndexMap(newIndexes, this.indexSet_);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// TODO: For memory savings, don't store priorityNode_ if it's empty.\r\nlet EMPTY_NODE;\r\n/**\r\n * ChildrenNode is a class for storing internal nodes in a DataSnapshot\r\n * (i.e. nodes with children).  It implements Node and stores the\r\n * list of children in the children property, sorted by child name.\r\n */\r\nclass ChildrenNode {\r\n    /**\r\n     * @param children_ - List of children of this node..\r\n     * @param priorityNode_ - The priority of this node (as a snapshot node).\r\n     */\r\n    constructor(children_, priorityNode_, indexMap_) {\r\n        this.children_ = children_;\r\n        this.priorityNode_ = priorityNode_;\r\n        this.indexMap_ = indexMap_;\r\n        this.lazyHash_ = null;\r\n        /**\r\n         * Note: The only reason we allow null priority is for EMPTY_NODE, since we can't use\r\n         * EMPTY_NODE as the priority of EMPTY_NODE.  We might want to consider making EMPTY_NODE its own\r\n         * class instead of an empty ChildrenNode.\r\n         */\r\n        if (this.priorityNode_) {\r\n            validatePriorityNode(this.priorityNode_);\r\n        }\r\n        if (this.children_.isEmpty()) {\r\n            assert(!this.priorityNode_ || this.priorityNode_.isEmpty(), 'An empty node cannot have a priority');\r\n        }\r\n    }\r\n    static get EMPTY_NODE() {\r\n        return (EMPTY_NODE ||\r\n            (EMPTY_NODE = new ChildrenNode(new SortedMap(NAME_COMPARATOR), null, IndexMap.Default)));\r\n    }\r\n    /** @inheritDoc */\r\n    isLeafNode() {\r\n        return false;\r\n    }\r\n    /** @inheritDoc */\r\n    getPriority() {\r\n        return this.priorityNode_ || EMPTY_NODE;\r\n    }\r\n    /** @inheritDoc */\r\n    updatePriority(newPriorityNode) {\r\n        if (this.children_.isEmpty()) {\r\n            // Don't allow priorities on empty nodes\r\n            return this;\r\n        }\r\n        else {\r\n            return new ChildrenNode(this.children_, newPriorityNode, this.indexMap_);\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    getImmediateChild(childName) {\r\n        // Hack to treat priority as a regular child\r\n        if (childName === '.priority') {\r\n            return this.getPriority();\r\n        }\r\n        else {\r\n            const child = this.children_.get(childName);\r\n            return child === null ? EMPTY_NODE : child;\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    getChild(path) {\r\n        const front = pathGetFront(path);\r\n        if (front === null) {\r\n            return this;\r\n        }\r\n        return this.getImmediateChild(front).getChild(pathPopFront(path));\r\n    }\r\n    /** @inheritDoc */\r\n    hasChild(childName) {\r\n        return this.children_.get(childName) !== null;\r\n    }\r\n    /** @inheritDoc */\r\n    updateImmediateChild(childName, newChildNode) {\r\n        assert(newChildNode, 'We should always be passing snapshot nodes');\r\n        if (childName === '.priority') {\r\n            return this.updatePriority(newChildNode);\r\n        }\r\n        else {\r\n            const namedNode = new NamedNode(childName, newChildNode);\r\n            let newChildren, newIndexMap;\r\n            if (newChildNode.isEmpty()) {\r\n                newChildren = this.children_.remove(childName);\r\n                newIndexMap = this.indexMap_.removeFromIndexes(namedNode, this.children_);\r\n            }\r\n            else {\r\n                newChildren = this.children_.insert(childName, newChildNode);\r\n                newIndexMap = this.indexMap_.addToIndexes(namedNode, this.children_);\r\n            }\r\n            const newPriority = newChildren.isEmpty()\r\n                ? EMPTY_NODE\r\n                : this.priorityNode_;\r\n            return new ChildrenNode(newChildren, newPriority, newIndexMap);\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    updateChild(path, newChildNode) {\r\n        const front = pathGetFront(path);\r\n        if (front === null) {\r\n            return newChildNode;\r\n        }\r\n        else {\r\n            assert(pathGetFront(path) !== '.priority' || pathGetLength(path) === 1, '.priority must be the last token in a path');\r\n            const newImmediateChild = this.getImmediateChild(front).updateChild(pathPopFront(path), newChildNode);\r\n            return this.updateImmediateChild(front, newImmediateChild);\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    isEmpty() {\r\n        return this.children_.isEmpty();\r\n    }\r\n    /** @inheritDoc */\r\n    numChildren() {\r\n        return this.children_.count();\r\n    }\r\n    /** @inheritDoc */\r\n    val(exportFormat) {\r\n        if (this.isEmpty()) {\r\n            return null;\r\n        }\r\n        const obj = {};\r\n        let numKeys = 0, maxKey = 0, allIntegerKeys = true;\r\n        this.forEachChild(PRIORITY_INDEX, (key, childNode) => {\r\n            obj[key] = childNode.val(exportFormat);\r\n            numKeys++;\r\n            if (allIntegerKeys && ChildrenNode.INTEGER_REGEXP_.test(key)) {\r\n                maxKey = Math.max(maxKey, Number(key));\r\n            }\r\n            else {\r\n                allIntegerKeys = false;\r\n            }\r\n        });\r\n        if (!exportFormat && allIntegerKeys && maxKey < 2 * numKeys) {\r\n            // convert to array.\r\n            const array = [];\r\n            // eslint-disable-next-line guard-for-in\r\n            for (const key in obj) {\r\n                array[key] = obj[key];\r\n            }\r\n            return array;\r\n        }\r\n        else {\r\n            if (exportFormat && !this.getPriority().isEmpty()) {\r\n                obj['.priority'] = this.getPriority().val();\r\n            }\r\n            return obj;\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    hash() {\r\n        if (this.lazyHash_ === null) {\r\n            let toHash = '';\r\n            if (!this.getPriority().isEmpty()) {\r\n                toHash +=\r\n                    'priority:' +\r\n                        priorityHashText(this.getPriority().val()) +\r\n                        ':';\r\n            }\r\n            this.forEachChild(PRIORITY_INDEX, (key, childNode) => {\r\n                const childHash = childNode.hash();\r\n                if (childHash !== '') {\r\n                    toHash += ':' + key + ':' + childHash;\r\n                }\r\n            });\r\n            this.lazyHash_ = toHash === '' ? '' : sha1(toHash);\r\n        }\r\n        return this.lazyHash_;\r\n    }\r\n    /** @inheritDoc */\r\n    getPredecessorChildName(childName, childNode, index) {\r\n        const idx = this.resolveIndex_(index);\r\n        if (idx) {\r\n            const predecessor = idx.getPredecessorKey(new NamedNode(childName, childNode));\r\n            return predecessor ? predecessor.name : null;\r\n        }\r\n        else {\r\n            return this.children_.getPredecessorKey(childName);\r\n        }\r\n    }\r\n    getFirstChildName(indexDefinition) {\r\n        const idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            const minKey = idx.minKey();\r\n            return minKey && minKey.name;\r\n        }\r\n        else {\r\n            return this.children_.minKey();\r\n        }\r\n    }\r\n    getFirstChild(indexDefinition) {\r\n        const minKey = this.getFirstChildName(indexDefinition);\r\n        if (minKey) {\r\n            return new NamedNode(minKey, this.children_.get(minKey));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Given an index, return the key name of the largest value we have, according to that index\r\n     */\r\n    getLastChildName(indexDefinition) {\r\n        const idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            const maxKey = idx.maxKey();\r\n            return maxKey && maxKey.name;\r\n        }\r\n        else {\r\n            return this.children_.maxKey();\r\n        }\r\n    }\r\n    getLastChild(indexDefinition) {\r\n        const maxKey = this.getLastChildName(indexDefinition);\r\n        if (maxKey) {\r\n            return new NamedNode(maxKey, this.children_.get(maxKey));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    forEachChild(index, action) {\r\n        const idx = this.resolveIndex_(index);\r\n        if (idx) {\r\n            return idx.inorderTraversal(wrappedNode => {\r\n                return action(wrappedNode.name, wrappedNode.node);\r\n            });\r\n        }\r\n        else {\r\n            return this.children_.inorderTraversal(action);\r\n        }\r\n    }\r\n    getIterator(indexDefinition) {\r\n        return this.getIteratorFrom(indexDefinition.minPost(), indexDefinition);\r\n    }\r\n    getIteratorFrom(startPost, indexDefinition) {\r\n        const idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            return idx.getIteratorFrom(startPost, key => key);\r\n        }\r\n        else {\r\n            const iterator = this.children_.getIteratorFrom(startPost.name, NamedNode.Wrap);\r\n            let next = iterator.peek();\r\n            while (next != null && indexDefinition.compare(next, startPost) < 0) {\r\n                iterator.getNext();\r\n                next = iterator.peek();\r\n            }\r\n            return iterator;\r\n        }\r\n    }\r\n    getReverseIterator(indexDefinition) {\r\n        return this.getReverseIteratorFrom(indexDefinition.maxPost(), indexDefinition);\r\n    }\r\n    getReverseIteratorFrom(endPost, indexDefinition) {\r\n        const idx = this.resolveIndex_(indexDefinition);\r\n        if (idx) {\r\n            return idx.getReverseIteratorFrom(endPost, key => {\r\n                return key;\r\n            });\r\n        }\r\n        else {\r\n            const iterator = this.children_.getReverseIteratorFrom(endPost.name, NamedNode.Wrap);\r\n            let next = iterator.peek();\r\n            while (next != null && indexDefinition.compare(next, endPost) > 0) {\r\n                iterator.getNext();\r\n                next = iterator.peek();\r\n            }\r\n            return iterator;\r\n        }\r\n    }\r\n    compareTo(other) {\r\n        if (this.isEmpty()) {\r\n            if (other.isEmpty()) {\r\n                return 0;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        else if (other.isLeafNode() || other.isEmpty()) {\r\n            return 1;\r\n        }\r\n        else if (other === MAX_NODE) {\r\n            return -1;\r\n        }\r\n        else {\r\n            // Must be another node with children.\r\n            return 0;\r\n        }\r\n    }\r\n    withIndex(indexDefinition) {\r\n        if (indexDefinition === KEY_INDEX ||\r\n            this.indexMap_.hasIndex(indexDefinition)) {\r\n            return this;\r\n        }\r\n        else {\r\n            const newIndexMap = this.indexMap_.addIndex(indexDefinition, this.children_);\r\n            return new ChildrenNode(this.children_, this.priorityNode_, newIndexMap);\r\n        }\r\n    }\r\n    isIndexed(index) {\r\n        return index === KEY_INDEX || this.indexMap_.hasIndex(index);\r\n    }\r\n    equals(other) {\r\n        if (other === this) {\r\n            return true;\r\n        }\r\n        else if (other.isLeafNode()) {\r\n            return false;\r\n        }\r\n        else {\r\n            const otherChildrenNode = other;\r\n            if (!this.getPriority().equals(otherChildrenNode.getPriority())) {\r\n                return false;\r\n            }\r\n            else if (this.children_.count() === otherChildrenNode.children_.count()) {\r\n                const thisIter = this.getIterator(PRIORITY_INDEX);\r\n                const otherIter = otherChildrenNode.getIterator(PRIORITY_INDEX);\r\n                let thisCurrent = thisIter.getNext();\r\n                let otherCurrent = otherIter.getNext();\r\n                while (thisCurrent && otherCurrent) {\r\n                    if (thisCurrent.name !== otherCurrent.name ||\r\n                        !thisCurrent.node.equals(otherCurrent.node)) {\r\n                        return false;\r\n                    }\r\n                    thisCurrent = thisIter.getNext();\r\n                    otherCurrent = otherIter.getNext();\r\n                }\r\n                return thisCurrent === null && otherCurrent === null;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns a SortedMap ordered by index, or null if the default (by-key) ordering can be used\r\n     * instead.\r\n     *\r\n     */\r\n    resolveIndex_(indexDefinition) {\r\n        if (indexDefinition === KEY_INDEX) {\r\n            return null;\r\n        }\r\n        else {\r\n            return this.indexMap_.get(indexDefinition.toString());\r\n        }\r\n    }\r\n}\r\nChildrenNode.INTEGER_REGEXP_ = /^(0|[1-9]\\d*)$/;\r\nclass MaxNode extends ChildrenNode {\r\n    constructor() {\r\n        super(new SortedMap(NAME_COMPARATOR), ChildrenNode.EMPTY_NODE, IndexMap.Default);\r\n    }\r\n    compareTo(other) {\r\n        if (other === this) {\r\n            return 0;\r\n        }\r\n        else {\r\n            return 1;\r\n        }\r\n    }\r\n    equals(other) {\r\n        // Not that we every compare it, but MAX_NODE is only ever equal to itself\r\n        return other === this;\r\n    }\r\n    getPriority() {\r\n        return this;\r\n    }\r\n    getImmediateChild(childName) {\r\n        return ChildrenNode.EMPTY_NODE;\r\n    }\r\n    isEmpty() {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Marker that will sort higher than any other snapshot.\r\n */\r\nconst MAX_NODE = new MaxNode();\r\nObject.defineProperties(NamedNode, {\r\n    MIN: {\r\n        value: new NamedNode(MIN_NAME, ChildrenNode.EMPTY_NODE)\r\n    },\r\n    MAX: {\r\n        value: new NamedNode(MAX_NAME, MAX_NODE)\r\n    }\r\n});\r\n/**\r\n * Reference Extensions\r\n */\r\nKeyIndex.__EMPTY_NODE = ChildrenNode.EMPTY_NODE;\r\nLeafNode.__childrenNodeConstructor = ChildrenNode;\r\nsetMaxNode$1(MAX_NODE);\r\nsetMaxNode(MAX_NODE);\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst USE_HINZE = true;\r\n/**\r\n * Constructs a snapshot node representing the passed JSON and returns it.\r\n * @param json - JSON to create a node for.\r\n * @param priority - Optional priority to use.  This will be ignored if the\r\n * passed JSON contains a .priority property.\r\n */\r\nfunction nodeFromJSON(json, priority = null) {\r\n    if (json === null) {\r\n        return ChildrenNode.EMPTY_NODE;\r\n    }\r\n    if (typeof json === 'object' && '.priority' in json) {\r\n        priority = json['.priority'];\r\n    }\r\n    assert(priority === null ||\r\n        typeof priority === 'string' ||\r\n        typeof priority === 'number' ||\r\n        (typeof priority === 'object' && '.sv' in priority), 'Invalid priority type found: ' + typeof priority);\r\n    if (typeof json === 'object' && '.value' in json && json['.value'] !== null) {\r\n        json = json['.value'];\r\n    }\r\n    // Valid leaf nodes include non-objects or server-value wrapper objects\r\n    if (typeof json !== 'object' || '.sv' in json) {\r\n        const jsonLeaf = json;\r\n        return new LeafNode(jsonLeaf, nodeFromJSON(priority));\r\n    }\r\n    if (!(json instanceof Array) && USE_HINZE) {\r\n        const children = [];\r\n        let childrenHavePriority = false;\r\n        const hinzeJsonObj = json;\r\n        each(hinzeJsonObj, (key, child) => {\r\n            if (key.substring(0, 1) !== '.') {\r\n                // Ignore metadata nodes\r\n                const childNode = nodeFromJSON(child);\r\n                if (!childNode.isEmpty()) {\r\n                    childrenHavePriority =\r\n                        childrenHavePriority || !childNode.getPriority().isEmpty();\r\n                    children.push(new NamedNode(key, childNode));\r\n                }\r\n            }\r\n        });\r\n        if (children.length === 0) {\r\n            return ChildrenNode.EMPTY_NODE;\r\n        }\r\n        const childSet = buildChildSet(children, NAME_ONLY_COMPARATOR, namedNode => namedNode.name, NAME_COMPARATOR);\r\n        if (childrenHavePriority) {\r\n            const sortedChildSet = buildChildSet(children, PRIORITY_INDEX.getCompare());\r\n            return new ChildrenNode(childSet, nodeFromJSON(priority), new IndexMap({ '.priority': sortedChildSet }, { '.priority': PRIORITY_INDEX }));\r\n        }\r\n        else {\r\n            return new ChildrenNode(childSet, nodeFromJSON(priority), IndexMap.Default);\r\n        }\r\n    }\r\n    else {\r\n        let node = ChildrenNode.EMPTY_NODE;\r\n        each(json, (key, childData) => {\r\n            if (contains(json, key)) {\r\n                if (key.substring(0, 1) !== '.') {\r\n                    // ignore metadata nodes.\r\n                    const childNode = nodeFromJSON(childData);\r\n                    if (childNode.isLeafNode() || !childNode.isEmpty()) {\r\n                        node = node.updateImmediateChild(key, childNode);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return node.updatePriority(nodeFromJSON(priority));\r\n    }\r\n}\r\nsetNodeFromJSON(nodeFromJSON);\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass PathIndex extends Index {\r\n    constructor(indexPath_) {\r\n        super();\r\n        this.indexPath_ = indexPath_;\r\n        assert(!pathIsEmpty(indexPath_) && pathGetFront(indexPath_) !== '.priority', \"Can't create PathIndex with empty path or .priority key\");\r\n    }\r\n    extractChild(snap) {\r\n        return snap.getChild(this.indexPath_);\r\n    }\r\n    isDefinedOn(node) {\r\n        return !node.getChild(this.indexPath_).isEmpty();\r\n    }\r\n    compare(a, b) {\r\n        const aChild = this.extractChild(a.node);\r\n        const bChild = this.extractChild(b.node);\r\n        const indexCmp = aChild.compareTo(bChild);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    }\r\n    makePost(indexValue, name) {\r\n        const valueNode = nodeFromJSON(indexValue);\r\n        const node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, valueNode);\r\n        return new NamedNode(name, node);\r\n    }\r\n    maxPost() {\r\n        const node = ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_, MAX_NODE);\r\n        return new NamedNode(MAX_NAME, node);\r\n    }\r\n    toString() {\r\n        return pathSlice(this.indexPath_, 0).join('/');\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass ValueIndex extends Index {\r\n    compare(a, b) {\r\n        const indexCmp = a.node.compareTo(b.node);\r\n        if (indexCmp === 0) {\r\n            return nameCompare(a.name, b.name);\r\n        }\r\n        else {\r\n            return indexCmp;\r\n        }\r\n    }\r\n    isDefinedOn(node) {\r\n        return true;\r\n    }\r\n    indexedValueChanged(oldNode, newNode) {\r\n        return !oldNode.equals(newNode);\r\n    }\r\n    minPost() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return NamedNode.MIN;\r\n    }\r\n    maxPost() {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        return NamedNode.MAX;\r\n    }\r\n    makePost(indexValue, name) {\r\n        const valueNode = nodeFromJSON(indexValue);\r\n        return new NamedNode(name, valueNode);\r\n    }\r\n    /**\r\n     * @returns String representation for inclusion in a query spec\r\n     */\r\n    toString() {\r\n        return '.value';\r\n    }\r\n}\r\nconst VALUE_INDEX = new ValueIndex();\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Modeled after base64 web-safe chars, but ordered by ASCII.\r\nconst PUSH_CHARS = '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\r\nconst MIN_PUSH_CHAR = '-';\r\nconst MAX_PUSH_CHAR = 'z';\r\nconst MAX_KEY_LEN = 786;\r\n/**\r\n * Fancy ID generator that creates 20-character string identifiers with the\r\n * following properties:\r\n *\r\n * 1. They're based on timestamp so that they sort *after* any existing ids.\r\n * 2. They contain 72-bits of random data after the timestamp so that IDs won't\r\n *    collide with other clients' IDs.\r\n * 3. They sort *lexicographically* (so the timestamp is converted to characters\r\n *    that will sort properly).\r\n * 4. They're monotonically increasing. Even if you generate more than one in\r\n *    the same timestamp, the latter ones will sort after the former ones. We do\r\n *    this by using the previous random bits but \"incrementing\" them by 1 (only\r\n *    in the case of a timestamp collision).\r\n */\r\nconst nextPushId = (function () {\r\n    // Timestamp of last push, used to prevent local collisions if you push twice\r\n    // in one ms.\r\n    let lastPushTime = 0;\r\n    // We generate 72-bits of randomness which get turned into 12 characters and\r\n    // appended to the timestamp to prevent collisions with other clients. We\r\n    // store the last characters we generated because in the event of a collision,\r\n    // we'll use those same characters except \"incremented\" by one.\r\n    const lastRandChars = [];\r\n    return function (now) {\r\n        const duplicateTime = now === lastPushTime;\r\n        lastPushTime = now;\r\n        let i;\r\n        const timeStampChars = new Array(8);\r\n        for (i = 7; i >= 0; i--) {\r\n            timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\r\n            // NOTE: Can't use << here because javascript will convert to int and lose\r\n            // the upper bits.\r\n            now = Math.floor(now / 64);\r\n        }\r\n        assert(now === 0, 'Cannot push at time == 0');\r\n        let id = timeStampChars.join('');\r\n        if (!duplicateTime) {\r\n            for (i = 0; i < 12; i++) {\r\n                lastRandChars[i] = Math.floor(Math.random() * 64);\r\n            }\r\n        }\r\n        else {\r\n            // If the timestamp hasn't changed since last push, use the same random\r\n            // number, except incremented by 1.\r\n            for (i = 11; i >= 0 && lastRandChars[i] === 63; i--) {\r\n                lastRandChars[i] = 0;\r\n            }\r\n            lastRandChars[i]++;\r\n        }\r\n        for (i = 0; i < 12; i++) {\r\n            id += PUSH_CHARS.charAt(lastRandChars[i]);\r\n        }\r\n        assert(id.length === 20, 'nextPushId: Length should be 20.');\r\n        return id;\r\n    };\r\n})();\r\nconst successor = function (key) {\r\n    if (key === '' + INTEGER_32_MAX) {\r\n        // See https://firebase.google.com/docs/database/web/lists-of-data#data-order\r\n        return MIN_PUSH_CHAR;\r\n    }\r\n    const keyAsInt = tryParseInt(key);\r\n    if (keyAsInt != null) {\r\n        return '' + (keyAsInt + 1);\r\n    }\r\n    const next = new Array(key.length);\r\n    for (let i = 0; i < next.length; i++) {\r\n        next[i] = key.charAt(i);\r\n    }\r\n    if (next.length < MAX_KEY_LEN) {\r\n        next.push(MIN_PUSH_CHAR);\r\n        return next.join('');\r\n    }\r\n    let i = next.length - 1;\r\n    while (i >= 0 && next[i] === MAX_PUSH_CHAR) {\r\n        i--;\r\n    }\r\n    // `successor` was called on the largest possible key, so return the\r\n    // MAX_NAME, which sorts larger than all keys.\r\n    if (i === -1) {\r\n        return MAX_NAME;\r\n    }\r\n    const source = next[i];\r\n    const sourcePlusOne = PUSH_CHARS.charAt(PUSH_CHARS.indexOf(source) + 1);\r\n    next[i] = sourcePlusOne;\r\n    return next.slice(0, i + 1).join('');\r\n};\r\n// `key` is assumed to be non-empty.\r\nconst predecessor = function (key) {\r\n    if (key === '' + INTEGER_32_MIN) {\r\n        return MIN_NAME;\r\n    }\r\n    const keyAsInt = tryParseInt(key);\r\n    if (keyAsInt != null) {\r\n        return '' + (keyAsInt - 1);\r\n    }\r\n    const next = new Array(key.length);\r\n    for (let i = 0; i < next.length; i++) {\r\n        next[i] = key.charAt(i);\r\n    }\r\n    // If `key` ends in `MIN_PUSH_CHAR`, the largest key lexicographically\r\n    // smaller than `key`, is `key[0:key.length - 1]`. The next key smaller\r\n    // than that, `predecessor(predecessor(key))`, is\r\n    //\r\n    // `key[0:key.length - 2] + (key[key.length - 1] - 1) + \\\r\n    //   { MAX_PUSH_CHAR repeated MAX_KEY_LEN - (key.length - 1) times }\r\n    //\r\n    // analogous to increment/decrement for base-10 integers.\r\n    //\r\n    // This works because lexigographic comparison works character-by-character,\r\n    // using length as a tie-breaker if one key is a prefix of the other.\r\n    if (next[next.length - 1] === MIN_PUSH_CHAR) {\r\n        if (next.length === 1) {\r\n            // See https://firebase.google.com/docs/database/web/lists-of-data#orderbykey\r\n            return '' + INTEGER_32_MAX;\r\n        }\r\n        delete next[next.length - 1];\r\n        return next.join('');\r\n    }\r\n    // Replace the last character with it's immediate predecessor, and\r\n    // fill the suffix of the key with MAX_PUSH_CHAR. This is the\r\n    // lexicographically largest possible key smaller than `key`.\r\n    next[next.length - 1] = PUSH_CHARS.charAt(PUSH_CHARS.indexOf(next[next.length - 1]) - 1);\r\n    return next.join('') + MAX_PUSH_CHAR.repeat(MAX_KEY_LEN - next.length);\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction changeValue(snapshotNode) {\r\n    return { type: \"value\" /* VALUE */, snapshotNode };\r\n}\r\nfunction changeChildAdded(childName, snapshotNode) {\r\n    return { type: \"child_added\" /* CHILD_ADDED */, snapshotNode, childName };\r\n}\r\nfunction changeChildRemoved(childName, snapshotNode) {\r\n    return { type: \"child_removed\" /* CHILD_REMOVED */, snapshotNode, childName };\r\n}\r\nfunction changeChildChanged(childName, snapshotNode, oldSnap) {\r\n    return {\r\n        type: \"child_changed\" /* CHILD_CHANGED */,\r\n        snapshotNode,\r\n        childName,\r\n        oldSnap\r\n    };\r\n}\r\nfunction changeChildMoved(childName, snapshotNode) {\r\n    return { type: \"child_moved\" /* CHILD_MOVED */, snapshotNode, childName };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Doesn't really filter nodes but applies an index to the node and keeps track of any changes\r\n */\r\nclass IndexedFilter {\r\n    constructor(index_) {\r\n        this.index_ = index_;\r\n    }\r\n    updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        assert(snap.isIndexed(this.index_), 'A node must be indexed if only a child is updated');\r\n        const oldChild = snap.getImmediateChild(key);\r\n        // Check if anything actually changed.\r\n        if (oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))) {\r\n            // There's an edge case where a child can enter or leave the view because affectedPath was set to null.\r\n            // In this case, affectedPath will appear null in both the old and new snapshots.  So we need\r\n            // to avoid treating these cases as \"nothing changed.\"\r\n            if (oldChild.isEmpty() === newChild.isEmpty()) {\r\n                // Nothing changed.\r\n                // This assert should be valid, but it's expensive (can dominate perf testing) so don't actually do it.\r\n                //assert(oldChild.equals(newChild), 'Old and new snapshots should be equal.');\r\n                return snap;\r\n            }\r\n        }\r\n        if (optChangeAccumulator != null) {\r\n            if (newChild.isEmpty()) {\r\n                if (snap.hasChild(key)) {\r\n                    optChangeAccumulator.trackChildChange(changeChildRemoved(key, oldChild));\r\n                }\r\n                else {\r\n                    assert(snap.isLeafNode(), 'A child remove without an old child only makes sense on a leaf node');\r\n                }\r\n            }\r\n            else if (oldChild.isEmpty()) {\r\n                optChangeAccumulator.trackChildChange(changeChildAdded(key, newChild));\r\n            }\r\n            else {\r\n                optChangeAccumulator.trackChildChange(changeChildChanged(key, newChild, oldChild));\r\n            }\r\n        }\r\n        if (snap.isLeafNode() && newChild.isEmpty()) {\r\n            return snap;\r\n        }\r\n        else {\r\n            // Make sure the node is indexed\r\n            return snap.updateImmediateChild(key, newChild).withIndex(this.index_);\r\n        }\r\n    }\r\n    updateFullNode(oldSnap, newSnap, optChangeAccumulator) {\r\n        if (optChangeAccumulator != null) {\r\n            if (!oldSnap.isLeafNode()) {\r\n                oldSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\r\n                    if (!newSnap.hasChild(key)) {\r\n                        optChangeAccumulator.trackChildChange(changeChildRemoved(key, childNode));\r\n                    }\r\n                });\r\n            }\r\n            if (!newSnap.isLeafNode()) {\r\n                newSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\r\n                    if (oldSnap.hasChild(key)) {\r\n                        const oldChild = oldSnap.getImmediateChild(key);\r\n                        if (!oldChild.equals(childNode)) {\r\n                            optChangeAccumulator.trackChildChange(changeChildChanged(key, childNode, oldChild));\r\n                        }\r\n                    }\r\n                    else {\r\n                        optChangeAccumulator.trackChildChange(changeChildAdded(key, childNode));\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        return newSnap.withIndex(this.index_);\r\n    }\r\n    updatePriority(oldSnap, newPriority) {\r\n        if (oldSnap.isEmpty()) {\r\n            return ChildrenNode.EMPTY_NODE;\r\n        }\r\n        else {\r\n            return oldSnap.updatePriority(newPriority);\r\n        }\r\n    }\r\n    filtersNodes() {\r\n        return false;\r\n    }\r\n    getIndexedFilter() {\r\n        return this;\r\n    }\r\n    getIndex() {\r\n        return this.index_;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Filters nodes by range and uses an IndexFilter to track any changes after filtering the node\r\n */\r\nclass RangedFilter {\r\n    constructor(params) {\r\n        this.indexedFilter_ = new IndexedFilter(params.getIndex());\r\n        this.index_ = params.getIndex();\r\n        this.startPost_ = RangedFilter.getStartPost_(params);\r\n        this.endPost_ = RangedFilter.getEndPost_(params);\r\n    }\r\n    getStartPost() {\r\n        return this.startPost_;\r\n    }\r\n    getEndPost() {\r\n        return this.endPost_;\r\n    }\r\n    matches(node) {\r\n        return (this.index_.compare(this.getStartPost(), node) <= 0 &&\r\n            this.index_.compare(node, this.getEndPost()) <= 0);\r\n    }\r\n    updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        if (!this.matches(new NamedNode(key, newChild))) {\r\n            newChild = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        return this.indexedFilter_.updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator);\r\n    }\r\n    updateFullNode(oldSnap, newSnap, optChangeAccumulator) {\r\n        if (newSnap.isLeafNode()) {\r\n            // Make sure we have a children node with the correct index, not a leaf node;\r\n            newSnap = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        let filtered = newSnap.withIndex(this.index_);\r\n        // Don't support priorities on queries\r\n        filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\r\n        const self = this;\r\n        newSnap.forEachChild(PRIORITY_INDEX, (key, childNode) => {\r\n            if (!self.matches(new NamedNode(key, childNode))) {\r\n                filtered = filtered.updateImmediateChild(key, ChildrenNode.EMPTY_NODE);\r\n            }\r\n        });\r\n        return this.indexedFilter_.updateFullNode(oldSnap, filtered, optChangeAccumulator);\r\n    }\r\n    updatePriority(oldSnap, newPriority) {\r\n        // Don't support priorities on queries\r\n        return oldSnap;\r\n    }\r\n    filtersNodes() {\r\n        return true;\r\n    }\r\n    getIndexedFilter() {\r\n        return this.indexedFilter_;\r\n    }\r\n    getIndex() {\r\n        return this.index_;\r\n    }\r\n    static getStartPost_(params) {\r\n        if (params.hasStart()) {\r\n            const startName = params.getIndexStartName();\r\n            return params.getIndex().makePost(params.getIndexStartValue(), startName);\r\n        }\r\n        else {\r\n            return params.getIndex().minPost();\r\n        }\r\n    }\r\n    static getEndPost_(params) {\r\n        if (params.hasEnd()) {\r\n            const endName = params.getIndexEndName();\r\n            return params.getIndex().makePost(params.getIndexEndValue(), endName);\r\n        }\r\n        else {\r\n            return params.getIndex().maxPost();\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Applies a limit and a range to a node and uses RangedFilter to do the heavy lifting where possible\r\n */\r\nclass LimitedFilter {\r\n    constructor(params) {\r\n        this.rangedFilter_ = new RangedFilter(params);\r\n        this.index_ = params.getIndex();\r\n        this.limit_ = params.getLimit();\r\n        this.reverse_ = !params.isViewFromLeft();\r\n    }\r\n    updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator) {\r\n        if (!this.rangedFilter_.matches(new NamedNode(key, newChild))) {\r\n            newChild = ChildrenNode.EMPTY_NODE;\r\n        }\r\n        if (snap.getImmediateChild(key).equals(newChild)) {\r\n            // No change\r\n            return snap;\r\n        }\r\n        else if (snap.numChildren() < this.limit_) {\r\n            return this.rangedFilter_\r\n                .getIndexedFilter()\r\n                .updateChild(snap, key, newChild, affectedPath, source, optChangeAccumulator);\r\n        }\r\n        else {\r\n            return this.fullLimitUpdateChild_(snap, key, newChild, source, optChangeAccumulator);\r\n        }\r\n    }\r\n    updateFullNode(oldSnap, newSnap, optChangeAccumulator) {\r\n        let filtered;\r\n        if (newSnap.isLeafNode() || newSnap.isEmpty()) {\r\n            // Make sure we have a children node with the correct index, not a leaf node;\r\n            filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\r\n        }\r\n        else {\r\n            if (this.limit_ * 2 < newSnap.numChildren() &&\r\n                newSnap.isIndexed(this.index_)) {\r\n                // Easier to build up a snapshot, since what we're given has more than twice the elements we want\r\n                filtered = ChildrenNode.EMPTY_NODE.withIndex(this.index_);\r\n                // anchor to the startPost, endPost, or last element as appropriate\r\n                let iterator;\r\n                if (this.reverse_) {\r\n                    iterator = newSnap.getReverseIteratorFrom(this.rangedFilter_.getEndPost(), this.index_);\r\n                }\r\n                else {\r\n                    iterator = newSnap.getIteratorFrom(this.rangedFilter_.getStartPost(), this.index_);\r\n                }\r\n                let count = 0;\r\n                while (iterator.hasNext() && count < this.limit_) {\r\n                    const next = iterator.getNext();\r\n                    let inRange;\r\n                    if (this.reverse_) {\r\n                        inRange =\r\n                            this.index_.compare(this.rangedFilter_.getStartPost(), next) <= 0;\r\n                    }\r\n                    else {\r\n                        inRange =\r\n                            this.index_.compare(next, this.rangedFilter_.getEndPost()) <= 0;\r\n                    }\r\n                    if (inRange) {\r\n                        filtered = filtered.updateImmediateChild(next.name, next.node);\r\n                        count++;\r\n                    }\r\n                    else {\r\n                        // if we have reached the end post, we cannot keep adding elemments\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                // The snap contains less than twice the limit. Faster to delete from the snap than build up a new one\r\n                filtered = newSnap.withIndex(this.index_);\r\n                // Don't support priorities on queries\r\n                filtered = filtered.updatePriority(ChildrenNode.EMPTY_NODE);\r\n                let startPost;\r\n                let endPost;\r\n                let cmp;\r\n                let iterator;\r\n                if (this.reverse_) {\r\n                    iterator = filtered.getReverseIterator(this.index_);\r\n                    startPost = this.rangedFilter_.getEndPost();\r\n                    endPost = this.rangedFilter_.getStartPost();\r\n                    const indexCompare = this.index_.getCompare();\r\n                    cmp = (a, b) => indexCompare(b, a);\r\n                }\r\n                else {\r\n                    iterator = filtered.getIterator(this.index_);\r\n                    startPost = this.rangedFilter_.getStartPost();\r\n                    endPost = this.rangedFilter_.getEndPost();\r\n                    cmp = this.index_.getCompare();\r\n                }\r\n                let count = 0;\r\n                let foundStartPost = false;\r\n                while (iterator.hasNext()) {\r\n                    const next = iterator.getNext();\r\n                    if (!foundStartPost && cmp(startPost, next) <= 0) {\r\n                        // start adding\r\n                        foundStartPost = true;\r\n                    }\r\n                    const inRange = foundStartPost && count < this.limit_ && cmp(next, endPost) <= 0;\r\n                    if (inRange) {\r\n                        count++;\r\n                    }\r\n                    else {\r\n                        filtered = filtered.updateImmediateChild(next.name, ChildrenNode.EMPTY_NODE);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return this.rangedFilter_\r\n            .getIndexedFilter()\r\n            .updateFullNode(oldSnap, filtered, optChangeAccumulator);\r\n    }\r\n    updatePriority(oldSnap, newPriority) {\r\n        // Don't support priorities on queries\r\n        return oldSnap;\r\n    }\r\n    filtersNodes() {\r\n        return true;\r\n    }\r\n    getIndexedFilter() {\r\n        return this.rangedFilter_.getIndexedFilter();\r\n    }\r\n    getIndex() {\r\n        return this.index_;\r\n    }\r\n    fullLimitUpdateChild_(snap, childKey, childSnap, source, changeAccumulator) {\r\n        // TODO: rename all cache stuff etc to general snap terminology\r\n        let cmp;\r\n        if (this.reverse_) {\r\n            const indexCmp = this.index_.getCompare();\r\n            cmp = (a, b) => indexCmp(b, a);\r\n        }\r\n        else {\r\n            cmp = this.index_.getCompare();\r\n        }\r\n        const oldEventCache = snap;\r\n        assert(oldEventCache.numChildren() === this.limit_, '');\r\n        const newChildNamedNode = new NamedNode(childKey, childSnap);\r\n        const windowBoundary = this.reverse_\r\n            ? oldEventCache.getFirstChild(this.index_)\r\n            : oldEventCache.getLastChild(this.index_);\r\n        const inRange = this.rangedFilter_.matches(newChildNamedNode);\r\n        if (oldEventCache.hasChild(childKey)) {\r\n            const oldChildSnap = oldEventCache.getImmediateChild(childKey);\r\n            let nextChild = source.getChildAfterChild(this.index_, windowBoundary, this.reverse_);\r\n            while (nextChild != null &&\r\n                (nextChild.name === childKey || oldEventCache.hasChild(nextChild.name))) {\r\n                // There is a weird edge case where a node is updated as part of a merge in the write tree, but hasn't\r\n                // been applied to the limited filter yet. Ignore this next child which will be updated later in\r\n                // the limited filter...\r\n                nextChild = source.getChildAfterChild(this.index_, nextChild, this.reverse_);\r\n            }\r\n            const compareNext = nextChild == null ? 1 : cmp(nextChild, newChildNamedNode);\r\n            const remainsInWindow = inRange && !childSnap.isEmpty() && compareNext >= 0;\r\n            if (remainsInWindow) {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(changeChildChanged(childKey, childSnap, oldChildSnap));\r\n                }\r\n                return oldEventCache.updateImmediateChild(childKey, childSnap);\r\n            }\r\n            else {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(changeChildRemoved(childKey, oldChildSnap));\r\n                }\r\n                const newEventCache = oldEventCache.updateImmediateChild(childKey, ChildrenNode.EMPTY_NODE);\r\n                const nextChildInRange = nextChild != null && this.rangedFilter_.matches(nextChild);\r\n                if (nextChildInRange) {\r\n                    if (changeAccumulator != null) {\r\n                        changeAccumulator.trackChildChange(changeChildAdded(nextChild.name, nextChild.node));\r\n                    }\r\n                    return newEventCache.updateImmediateChild(nextChild.name, nextChild.node);\r\n                }\r\n                else {\r\n                    return newEventCache;\r\n                }\r\n            }\r\n        }\r\n        else if (childSnap.isEmpty()) {\r\n            // we're deleting a node, but it was not in the window, so ignore it\r\n            return snap;\r\n        }\r\n        else if (inRange) {\r\n            if (cmp(windowBoundary, newChildNamedNode) >= 0) {\r\n                if (changeAccumulator != null) {\r\n                    changeAccumulator.trackChildChange(changeChildRemoved(windowBoundary.name, windowBoundary.node));\r\n                    changeAccumulator.trackChildChange(changeChildAdded(childKey, childSnap));\r\n                }\r\n                return oldEventCache\r\n                    .updateImmediateChild(childKey, childSnap)\r\n                    .updateImmediateChild(windowBoundary.name, ChildrenNode.EMPTY_NODE);\r\n            }\r\n            else {\r\n                return snap;\r\n            }\r\n        }\r\n        else {\r\n            return snap;\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class is an immutable-from-the-public-api struct containing a set of query parameters defining a\r\n * range to be returned for a particular location. It is assumed that validation of parameters is done at the\r\n * user-facing API level, so it is not done here.\r\n *\r\n * @internal\r\n */\r\nclass QueryParams {\r\n    constructor() {\r\n        this.limitSet_ = false;\r\n        this.startSet_ = false;\r\n        this.startNameSet_ = false;\r\n        this.startAfterSet_ = false;\r\n        this.endSet_ = false;\r\n        this.endNameSet_ = false;\r\n        this.endBeforeSet_ = false;\r\n        this.limit_ = 0;\r\n        this.viewFrom_ = '';\r\n        this.indexStartValue_ = null;\r\n        this.indexStartName_ = '';\r\n        this.indexEndValue_ = null;\r\n        this.indexEndName_ = '';\r\n        this.index_ = PRIORITY_INDEX;\r\n    }\r\n    hasStart() {\r\n        return this.startSet_;\r\n    }\r\n    hasStartAfter() {\r\n        return this.startAfterSet_;\r\n    }\r\n    hasEndBefore() {\r\n        return this.endBeforeSet_;\r\n    }\r\n    /**\r\n     * @returns True if it would return from left.\r\n     */\r\n    isViewFromLeft() {\r\n        if (this.viewFrom_ === '') {\r\n            // limit(), rather than limitToFirst or limitToLast was called.\r\n            // This means that only one of startSet_ and endSet_ is true. Use them\r\n            // to calculate which side of the view to anchor to. If neither is set,\r\n            // anchor to the end.\r\n            return this.startSet_;\r\n        }\r\n        else {\r\n            return this.viewFrom_ === \"l\" /* VIEW_FROM_LEFT */;\r\n        }\r\n    }\r\n    /**\r\n     * Only valid to call if hasStart() returns true\r\n     */\r\n    getIndexStartValue() {\r\n        assert(this.startSet_, 'Only valid if start has been set');\r\n        return this.indexStartValue_;\r\n    }\r\n    /**\r\n     * Only valid to call if hasStart() returns true.\r\n     * Returns the starting key name for the range defined by these query parameters\r\n     */\r\n    getIndexStartName() {\r\n        assert(this.startSet_, 'Only valid if start has been set');\r\n        if (this.startNameSet_) {\r\n            return this.indexStartName_;\r\n        }\r\n        else {\r\n            return MIN_NAME;\r\n        }\r\n    }\r\n    hasEnd() {\r\n        return this.endSet_;\r\n    }\r\n    /**\r\n     * Only valid to call if hasEnd() returns true.\r\n     */\r\n    getIndexEndValue() {\r\n        assert(this.endSet_, 'Only valid if end has been set');\r\n        return this.indexEndValue_;\r\n    }\r\n    /**\r\n     * Only valid to call if hasEnd() returns true.\r\n     * Returns the end key name for the range defined by these query parameters\r\n     */\r\n    getIndexEndName() {\r\n        assert(this.endSet_, 'Only valid if end has been set');\r\n        if (this.endNameSet_) {\r\n            return this.indexEndName_;\r\n        }\r\n        else {\r\n            return MAX_NAME;\r\n        }\r\n    }\r\n    hasLimit() {\r\n        return this.limitSet_;\r\n    }\r\n    /**\r\n     * @returns True if a limit has been set and it has been explicitly anchored\r\n     */\r\n    hasAnchoredLimit() {\r\n        return this.limitSet_ && this.viewFrom_ !== '';\r\n    }\r\n    /**\r\n     * Only valid to call if hasLimit() returns true\r\n     */\r\n    getLimit() {\r\n        assert(this.limitSet_, 'Only valid if limit has been set');\r\n        return this.limit_;\r\n    }\r\n    getIndex() {\r\n        return this.index_;\r\n    }\r\n    loadsAllData() {\r\n        return !(this.startSet_ || this.endSet_ || this.limitSet_);\r\n    }\r\n    isDefault() {\r\n        return this.loadsAllData() && this.index_ === PRIORITY_INDEX;\r\n    }\r\n    copy() {\r\n        const copy = new QueryParams();\r\n        copy.limitSet_ = this.limitSet_;\r\n        copy.limit_ = this.limit_;\r\n        copy.startSet_ = this.startSet_;\r\n        copy.indexStartValue_ = this.indexStartValue_;\r\n        copy.startNameSet_ = this.startNameSet_;\r\n        copy.indexStartName_ = this.indexStartName_;\r\n        copy.endSet_ = this.endSet_;\r\n        copy.indexEndValue_ = this.indexEndValue_;\r\n        copy.endNameSet_ = this.endNameSet_;\r\n        copy.indexEndName_ = this.indexEndName_;\r\n        copy.index_ = this.index_;\r\n        copy.viewFrom_ = this.viewFrom_;\r\n        return copy;\r\n    }\r\n}\r\nfunction queryParamsGetNodeFilter(queryParams) {\r\n    if (queryParams.loadsAllData()) {\r\n        return new IndexedFilter(queryParams.getIndex());\r\n    }\r\n    else if (queryParams.hasLimit()) {\r\n        return new LimitedFilter(queryParams);\r\n    }\r\n    else {\r\n        return new RangedFilter(queryParams);\r\n    }\r\n}\r\nfunction queryParamsLimitToFirst(queryParams, newLimit) {\r\n    const newParams = queryParams.copy();\r\n    newParams.limitSet_ = true;\r\n    newParams.limit_ = newLimit;\r\n    newParams.viewFrom_ = \"l\" /* VIEW_FROM_LEFT */;\r\n    return newParams;\r\n}\r\nfunction queryParamsLimitToLast(queryParams, newLimit) {\r\n    const newParams = queryParams.copy();\r\n    newParams.limitSet_ = true;\r\n    newParams.limit_ = newLimit;\r\n    newParams.viewFrom_ = \"r\" /* VIEW_FROM_RIGHT */;\r\n    return newParams;\r\n}\r\nfunction queryParamsStartAt(queryParams, indexValue, key) {\r\n    const newParams = queryParams.copy();\r\n    newParams.startSet_ = true;\r\n    if (indexValue === undefined) {\r\n        indexValue = null;\r\n    }\r\n    newParams.indexStartValue_ = indexValue;\r\n    if (key != null) {\r\n        newParams.startNameSet_ = true;\r\n        newParams.indexStartName_ = key;\r\n    }\r\n    else {\r\n        newParams.startNameSet_ = false;\r\n        newParams.indexStartName_ = '';\r\n    }\r\n    return newParams;\r\n}\r\nfunction queryParamsStartAfter(queryParams, indexValue, key) {\r\n    let params;\r\n    if (queryParams.index_ === KEY_INDEX) {\r\n        if (typeof indexValue === 'string') {\r\n            indexValue = successor(indexValue);\r\n        }\r\n        params = queryParamsStartAt(queryParams, indexValue, key);\r\n    }\r\n    else {\r\n        let childKey;\r\n        if (key == null) {\r\n            childKey = MAX_NAME;\r\n        }\r\n        else {\r\n            childKey = successor(key);\r\n        }\r\n        params = queryParamsStartAt(queryParams, indexValue, childKey);\r\n    }\r\n    params.startAfterSet_ = true;\r\n    return params;\r\n}\r\nfunction queryParamsEndAt(queryParams, indexValue, key) {\r\n    const newParams = queryParams.copy();\r\n    newParams.endSet_ = true;\r\n    if (indexValue === undefined) {\r\n        indexValue = null;\r\n    }\r\n    newParams.indexEndValue_ = indexValue;\r\n    if (key !== undefined) {\r\n        newParams.endNameSet_ = true;\r\n        newParams.indexEndName_ = key;\r\n    }\r\n    else {\r\n        newParams.endNameSet_ = false;\r\n        newParams.indexEndName_ = '';\r\n    }\r\n    return newParams;\r\n}\r\nfunction queryParamsEndBefore(queryParams, indexValue, key) {\r\n    let childKey;\r\n    let params;\r\n    if (queryParams.index_ === KEY_INDEX) {\r\n        if (typeof indexValue === 'string') {\r\n            indexValue = predecessor(indexValue);\r\n        }\r\n        params = queryParamsEndAt(queryParams, indexValue, key);\r\n    }\r\n    else {\r\n        if (key == null) {\r\n            childKey = MIN_NAME;\r\n        }\r\n        else {\r\n            childKey = predecessor(key);\r\n        }\r\n        params = queryParamsEndAt(queryParams, indexValue, childKey);\r\n    }\r\n    params.endBeforeSet_ = true;\r\n    return params;\r\n}\r\nfunction queryParamsOrderBy(queryParams, index) {\r\n    const newParams = queryParams.copy();\r\n    newParams.index_ = index;\r\n    return newParams;\r\n}\r\n/**\r\n * Returns a set of REST query string parameters representing this query.\r\n *\r\n * @returns query string parameters\r\n */\r\nfunction queryParamsToRestQueryStringParameters(queryParams) {\r\n    const qs = {};\r\n    if (queryParams.isDefault()) {\r\n        return qs;\r\n    }\r\n    let orderBy;\r\n    if (queryParams.index_ === PRIORITY_INDEX) {\r\n        orderBy = \"$priority\" /* PRIORITY_INDEX */;\r\n    }\r\n    else if (queryParams.index_ === VALUE_INDEX) {\r\n        orderBy = \"$value\" /* VALUE_INDEX */;\r\n    }\r\n    else if (queryParams.index_ === KEY_INDEX) {\r\n        orderBy = \"$key\" /* KEY_INDEX */;\r\n    }\r\n    else {\r\n        assert(queryParams.index_ instanceof PathIndex, 'Unrecognized index type!');\r\n        orderBy = queryParams.index_.toString();\r\n    }\r\n    qs[\"orderBy\" /* ORDER_BY */] = stringify(orderBy);\r\n    if (queryParams.startSet_) {\r\n        qs[\"startAt\" /* START_AT */] = stringify(queryParams.indexStartValue_);\r\n        if (queryParams.startNameSet_) {\r\n            qs[\"startAt\" /* START_AT */] +=\r\n                ',' + stringify(queryParams.indexStartName_);\r\n        }\r\n    }\r\n    if (queryParams.endSet_) {\r\n        qs[\"endAt\" /* END_AT */] = stringify(queryParams.indexEndValue_);\r\n        if (queryParams.endNameSet_) {\r\n            qs[\"endAt\" /* END_AT */] +=\r\n                ',' + stringify(queryParams.indexEndName_);\r\n        }\r\n    }\r\n    if (queryParams.limitSet_) {\r\n        if (queryParams.isViewFromLeft()) {\r\n            qs[\"limitToFirst\" /* LIMIT_TO_FIRST */] = queryParams.limit_;\r\n        }\r\n        else {\r\n            qs[\"limitToLast\" /* LIMIT_TO_LAST */] = queryParams.limit_;\r\n        }\r\n    }\r\n    return qs;\r\n}\r\nfunction queryParamsGetQueryObject(queryParams) {\r\n    const obj = {};\r\n    if (queryParams.startSet_) {\r\n        obj[\"sp\" /* INDEX_START_VALUE */] =\r\n            queryParams.indexStartValue_;\r\n        if (queryParams.startNameSet_) {\r\n            obj[\"sn\" /* INDEX_START_NAME */] =\r\n                queryParams.indexStartName_;\r\n        }\r\n    }\r\n    if (queryParams.endSet_) {\r\n        obj[\"ep\" /* INDEX_END_VALUE */] = queryParams.indexEndValue_;\r\n        if (queryParams.endNameSet_) {\r\n            obj[\"en\" /* INDEX_END_NAME */] = queryParams.indexEndName_;\r\n        }\r\n    }\r\n    if (queryParams.limitSet_) {\r\n        obj[\"l\" /* LIMIT */] = queryParams.limit_;\r\n        let viewFrom = queryParams.viewFrom_;\r\n        if (viewFrom === '') {\r\n            if (queryParams.isViewFromLeft()) {\r\n                viewFrom = \"l\" /* VIEW_FROM_LEFT */;\r\n            }\r\n            else {\r\n                viewFrom = \"r\" /* VIEW_FROM_RIGHT */;\r\n            }\r\n        }\r\n        obj[\"vf\" /* VIEW_FROM */] = viewFrom;\r\n    }\r\n    // For now, priority index is the default, so we only specify if it's some other index\r\n    if (queryParams.index_ !== PRIORITY_INDEX) {\r\n        obj[\"i\" /* INDEX */] = queryParams.index_.toString();\r\n    }\r\n    return obj;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An implementation of ServerActions that communicates with the server via REST requests.\r\n * This is mostly useful for compatibility with crawlers, where we don't want to spin up a full\r\n * persistent connection (using WebSockets or long-polling)\r\n */\r\nclass ReadonlyRestClient extends ServerActions {\r\n    /**\r\n     * @param repoInfo_ - Data about the namespace we are connecting to\r\n     * @param onDataUpdate_ - A callback for new data from the server\r\n     */\r\n    constructor(repoInfo_, onDataUpdate_, authTokenProvider_, appCheckTokenProvider_) {\r\n        super();\r\n        this.repoInfo_ = repoInfo_;\r\n        this.onDataUpdate_ = onDataUpdate_;\r\n        this.authTokenProvider_ = authTokenProvider_;\r\n        this.appCheckTokenProvider_ = appCheckTokenProvider_;\r\n        /** @private {function(...[*])} */\r\n        this.log_ = logWrapper('p:rest:');\r\n        /**\r\n         * We don't actually need to track listens, except to prevent us calling an onComplete for a listen\r\n         * that's been removed. :-/\r\n         */\r\n        this.listens_ = {};\r\n    }\r\n    reportStats(stats) {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    static getListenId_(query, tag) {\r\n        if (tag !== undefined) {\r\n            return 'tag$' + tag;\r\n        }\r\n        else {\r\n            assert(query._queryParams.isDefault(), \"should have a tag if it's not a default query.\");\r\n            return query._path.toString();\r\n        }\r\n    }\r\n    /** @inheritDoc */\r\n    listen(query, currentHashFn, tag, onComplete) {\r\n        const pathString = query._path.toString();\r\n        this.log_('Listen called for ' + pathString + ' ' + query._queryIdentifier);\r\n        // Mark this listener so we can tell if it's removed.\r\n        const listenId = ReadonlyRestClient.getListenId_(query, tag);\r\n        const thisListen = {};\r\n        this.listens_[listenId] = thisListen;\r\n        const queryStringParameters = queryParamsToRestQueryStringParameters(query._queryParams);\r\n        this.restRequest_(pathString + '.json', queryStringParameters, (error, result) => {\r\n            let data = result;\r\n            if (error === 404) {\r\n                data = null;\r\n                error = null;\r\n            }\r\n            if (error === null) {\r\n                this.onDataUpdate_(pathString, data, /*isMerge=*/ false, tag);\r\n            }\r\n            if (safeGet(this.listens_, listenId) === thisListen) {\r\n                let status;\r\n                if (!error) {\r\n                    status = 'ok';\r\n                }\r\n                else if (error === 401) {\r\n                    status = 'permission_denied';\r\n                }\r\n                else {\r\n                    status = 'rest_error:' + error;\r\n                }\r\n                onComplete(status, null);\r\n            }\r\n        });\r\n    }\r\n    /** @inheritDoc */\r\n    unlisten(query, tag) {\r\n        const listenId = ReadonlyRestClient.getListenId_(query, tag);\r\n        delete this.listens_[listenId];\r\n    }\r\n    get(query) {\r\n        const queryStringParameters = queryParamsToRestQueryStringParameters(query._queryParams);\r\n        const pathString = query._path.toString();\r\n        const deferred = new Deferred();\r\n        this.restRequest_(pathString + '.json', queryStringParameters, (error, result) => {\r\n            let data = result;\r\n            if (error === 404) {\r\n                data = null;\r\n                error = null;\r\n            }\r\n            if (error === null) {\r\n                this.onDataUpdate_(pathString, data, \r\n                /*isMerge=*/ false, \r\n                /*tag=*/ null);\r\n                deferred.resolve(data);\r\n            }\r\n            else {\r\n                deferred.reject(new Error(data));\r\n            }\r\n        });\r\n        return deferred.promise;\r\n    }\r\n    /** @inheritDoc */\r\n    refreshAuthToken(token) {\r\n        // no-op since we just always call getToken.\r\n    }\r\n    /**\r\n     * Performs a REST request to the given path, with the provided query string parameters,\r\n     * and any auth credentials we have.\r\n     */\r\n    restRequest_(pathString, queryStringParameters = {}, callback) {\r\n        queryStringParameters['format'] = 'export';\r\n        return Promise.all([\r\n            this.authTokenProvider_.getToken(/*forceRefresh=*/ false),\r\n            this.appCheckTokenProvider_.getToken(/*forceRefresh=*/ false)\r\n        ]).then(([authToken, appCheckToken]) => {\r\n            if (authToken && authToken.accessToken) {\r\n                queryStringParameters['auth'] = authToken.accessToken;\r\n            }\r\n            if (appCheckToken && appCheckToken.token) {\r\n                queryStringParameters['ac'] = appCheckToken.token;\r\n            }\r\n            const url = (this.repoInfo_.secure ? 'https://' : 'http://') +\r\n                this.repoInfo_.host +\r\n                pathString +\r\n                '?' +\r\n                'ns=' +\r\n                this.repoInfo_.namespace +\r\n                querystring(queryStringParameters);\r\n            this.log_('Sending REST request for ' + url);\r\n            const xhr = new XMLHttpRequest();\r\n            xhr.onreadystatechange = () => {\r\n                if (callback && xhr.readyState === 4) {\r\n                    this.log_('REST Response for ' + url + ' received. status:', xhr.status, 'response:', xhr.responseText);\r\n                    let res = null;\r\n                    if (xhr.status >= 200 && xhr.status < 300) {\r\n                        try {\r\n                            res = jsonEval(xhr.responseText);\r\n                        }\r\n                        catch (e) {\r\n                            warn('Failed to parse JSON response for ' +\r\n                                url +\r\n                                ': ' +\r\n                                xhr.responseText);\r\n                        }\r\n                        callback(null, res);\r\n                    }\r\n                    else {\r\n                        // 401 and 404 are expected.\r\n                        if (xhr.status !== 401 && xhr.status !== 404) {\r\n                            warn('Got unsuccessful REST response for ' +\r\n                                url +\r\n                                ' Status: ' +\r\n                                xhr.status);\r\n                        }\r\n                        callback(xhr.status);\r\n                    }\r\n                    callback = null;\r\n                }\r\n            };\r\n            xhr.open('GET', url, /*asynchronous=*/ true);\r\n            xhr.send();\r\n        });\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Mutable object which basically just stores a reference to the \"latest\" immutable snapshot.\r\n */\r\nclass SnapshotHolder {\r\n    constructor() {\r\n        this.rootNode_ = ChildrenNode.EMPTY_NODE;\r\n    }\r\n    getNode(path) {\r\n        return this.rootNode_.getChild(path);\r\n    }\r\n    updateSnapshot(path, newSnapshotNode) {\r\n        this.rootNode_ = this.rootNode_.updateChild(path, newSnapshotNode);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction newSparseSnapshotTree() {\r\n    return {\r\n        value: null,\r\n        children: new Map()\r\n    };\r\n}\r\n/**\r\n * Stores the given node at the specified path. If there is already a node\r\n * at a shallower path, it merges the new data into that snapshot node.\r\n *\r\n * @param path - Path to look up snapshot for.\r\n * @param data - The new data, or null.\r\n */\r\nfunction sparseSnapshotTreeRemember(sparseSnapshotTree, path, data) {\r\n    if (pathIsEmpty(path)) {\r\n        sparseSnapshotTree.value = data;\r\n        sparseSnapshotTree.children.clear();\r\n    }\r\n    else if (sparseSnapshotTree.value !== null) {\r\n        sparseSnapshotTree.value = sparseSnapshotTree.value.updateChild(path, data);\r\n    }\r\n    else {\r\n        const childKey = pathGetFront(path);\r\n        if (!sparseSnapshotTree.children.has(childKey)) {\r\n            sparseSnapshotTree.children.set(childKey, newSparseSnapshotTree());\r\n        }\r\n        const child = sparseSnapshotTree.children.get(childKey);\r\n        path = pathPopFront(path);\r\n        sparseSnapshotTreeRemember(child, path, data);\r\n    }\r\n}\r\n/**\r\n * Purge the data at path from the cache.\r\n *\r\n * @param path - Path to look up snapshot for.\r\n * @returns True if this node should now be removed.\r\n */\r\nfunction sparseSnapshotTreeForget(sparseSnapshotTree, path) {\r\n    if (pathIsEmpty(path)) {\r\n        sparseSnapshotTree.value = null;\r\n        sparseSnapshotTree.children.clear();\r\n        return true;\r\n    }\r\n    else {\r\n        if (sparseSnapshotTree.value !== null) {\r\n            if (sparseSnapshotTree.value.isLeafNode()) {\r\n                // We're trying to forget a node that doesn't exist\r\n                return false;\r\n            }\r\n            else {\r\n                const value = sparseSnapshotTree.value;\r\n                sparseSnapshotTree.value = null;\r\n                value.forEachChild(PRIORITY_INDEX, (key, tree) => {\r\n                    sparseSnapshotTreeRemember(sparseSnapshotTree, new Path(key), tree);\r\n                });\r\n                return sparseSnapshotTreeForget(sparseSnapshotTree, path);\r\n            }\r\n        }\r\n        else if (sparseSnapshotTree.children.size > 0) {\r\n            const childKey = pathGetFront(path);\r\n            path = pathPopFront(path);\r\n            if (sparseSnapshotTree.children.has(childKey)) {\r\n                const safeToRemove = sparseSnapshotTreeForget(sparseSnapshotTree.children.get(childKey), path);\r\n                if (safeToRemove) {\r\n                    sparseSnapshotTree.children.delete(childKey);\r\n                }\r\n            }\r\n            return sparseSnapshotTree.children.size === 0;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Recursively iterates through all of the stored tree and calls the\r\n * callback on each one.\r\n *\r\n * @param prefixPath - Path to look up node for.\r\n * @param func - The function to invoke for each tree.\r\n */\r\nfunction sparseSnapshotTreeForEachTree(sparseSnapshotTree, prefixPath, func) {\r\n    if (sparseSnapshotTree.value !== null) {\r\n        func(prefixPath, sparseSnapshotTree.value);\r\n    }\r\n    else {\r\n        sparseSnapshotTreeForEachChild(sparseSnapshotTree, (key, tree) => {\r\n            const path = new Path(prefixPath.toString() + '/' + key);\r\n            sparseSnapshotTreeForEachTree(tree, path, func);\r\n        });\r\n    }\r\n}\r\n/**\r\n * Iterates through each immediate child and triggers the callback.\r\n * Only seems to be used in tests.\r\n *\r\n * @param func - The function to invoke for each child.\r\n */\r\nfunction sparseSnapshotTreeForEachChild(sparseSnapshotTree, func) {\r\n    sparseSnapshotTree.children.forEach((tree, key) => {\r\n        func(key, tree);\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns the delta from the previous call to get stats.\r\n *\r\n * @param collection_ - The collection to \"listen\" to.\r\n */\r\nclass StatsListener {\r\n    constructor(collection_) {\r\n        this.collection_ = collection_;\r\n        this.last_ = null;\r\n    }\r\n    get() {\r\n        const newStats = this.collection_.get();\r\n        const delta = Object.assign({}, newStats);\r\n        if (this.last_) {\r\n            each(this.last_, (stat, value) => {\r\n                delta[stat] = delta[stat] - value;\r\n            });\r\n        }\r\n        this.last_ = newStats;\r\n        return delta;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Assuming some apps may have a short amount of time on page, and a bulk of firebase operations probably\r\n// happen on page load, we try to report our first set of stats pretty quickly, but we wait at least 10\r\n// seconds to try to ensure the Firebase connection is established / settled.\r\nconst FIRST_STATS_MIN_TIME = 10 * 1000;\r\nconst FIRST_STATS_MAX_TIME = 30 * 1000;\r\n// We'll continue to report stats on average every 5 minutes.\r\nconst REPORT_STATS_INTERVAL = 5 * 60 * 1000;\r\nclass StatsReporter {\r\n    constructor(collection, server_) {\r\n        this.server_ = server_;\r\n        this.statsToReport_ = {};\r\n        this.statsListener_ = new StatsListener(collection);\r\n        const timeout = FIRST_STATS_MIN_TIME +\r\n            (FIRST_STATS_MAX_TIME - FIRST_STATS_MIN_TIME) * Math.random();\r\n        setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(timeout));\r\n    }\r\n    reportStats_() {\r\n        const stats = this.statsListener_.get();\r\n        const reportedStats = {};\r\n        let haveStatsToReport = false;\r\n        each(stats, (stat, value) => {\r\n            if (value > 0 && contains(this.statsToReport_, stat)) {\r\n                reportedStats[stat] = value;\r\n                haveStatsToReport = true;\r\n            }\r\n        });\r\n        if (haveStatsToReport) {\r\n            this.server_.reportStats(reportedStats);\r\n        }\r\n        // queue our next run.\r\n        setTimeoutNonBlocking(this.reportStats_.bind(this), Math.floor(Math.random() * 2 * REPORT_STATS_INTERVAL));\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n *\r\n * @enum\r\n */\r\nvar OperationType;\r\n(function (OperationType) {\r\n    OperationType[OperationType[\"OVERWRITE\"] = 0] = \"OVERWRITE\";\r\n    OperationType[OperationType[\"MERGE\"] = 1] = \"MERGE\";\r\n    OperationType[OperationType[\"ACK_USER_WRITE\"] = 2] = \"ACK_USER_WRITE\";\r\n    OperationType[OperationType[\"LISTEN_COMPLETE\"] = 3] = \"LISTEN_COMPLETE\";\r\n})(OperationType || (OperationType = {}));\r\nfunction newOperationSourceUser() {\r\n    return {\r\n        fromUser: true,\r\n        fromServer: false,\r\n        queryId: null,\r\n        tagged: false\r\n    };\r\n}\r\nfunction newOperationSourceServer() {\r\n    return {\r\n        fromUser: false,\r\n        fromServer: true,\r\n        queryId: null,\r\n        tagged: false\r\n    };\r\n}\r\nfunction newOperationSourceServerTaggedQuery(queryId) {\r\n    return {\r\n        fromUser: false,\r\n        fromServer: true,\r\n        queryId,\r\n        tagged: true\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass AckUserWrite {\r\n    /**\r\n     * @param affectedTree - A tree containing true for each affected path. Affected paths can't overlap.\r\n     */\r\n    constructor(\r\n    /** @inheritDoc */ path, \r\n    /** @inheritDoc */ affectedTree, \r\n    /** @inheritDoc */ revert) {\r\n        this.path = path;\r\n        this.affectedTree = affectedTree;\r\n        this.revert = revert;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.ACK_USER_WRITE;\r\n        /** @inheritDoc */\r\n        this.source = newOperationSourceUser();\r\n    }\r\n    operationForChild(childName) {\r\n        if (!pathIsEmpty(this.path)) {\r\n            assert(pathGetFront(this.path) === childName, 'operationForChild called for unrelated child.');\r\n            return new AckUserWrite(pathPopFront(this.path), this.affectedTree, this.revert);\r\n        }\r\n        else if (this.affectedTree.value != null) {\r\n            assert(this.affectedTree.children.isEmpty(), 'affectedTree should not have overlapping affected paths.');\r\n            // All child locations are affected as well; just return same operation.\r\n            return this;\r\n        }\r\n        else {\r\n            const childTree = this.affectedTree.subtree(new Path(childName));\r\n            return new AckUserWrite(newEmptyPath(), childTree, this.revert);\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass ListenComplete {\r\n    constructor(source, path) {\r\n        this.source = source;\r\n        this.path = path;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.LISTEN_COMPLETE;\r\n    }\r\n    operationForChild(childName) {\r\n        if (pathIsEmpty(this.path)) {\r\n            return new ListenComplete(this.source, newEmptyPath());\r\n        }\r\n        else {\r\n            return new ListenComplete(this.source, pathPopFront(this.path));\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass Overwrite {\r\n    constructor(source, path, snap) {\r\n        this.source = source;\r\n        this.path = path;\r\n        this.snap = snap;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.OVERWRITE;\r\n    }\r\n    operationForChild(childName) {\r\n        if (pathIsEmpty(this.path)) {\r\n            return new Overwrite(this.source, newEmptyPath(), this.snap.getImmediateChild(childName));\r\n        }\r\n        else {\r\n            return new Overwrite(this.source, pathPopFront(this.path), this.snap);\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass Merge {\r\n    constructor(\r\n    /** @inheritDoc */ source, \r\n    /** @inheritDoc */ path, \r\n    /** @inheritDoc */ children) {\r\n        this.source = source;\r\n        this.path = path;\r\n        this.children = children;\r\n        /** @inheritDoc */\r\n        this.type = OperationType.MERGE;\r\n    }\r\n    operationForChild(childName) {\r\n        if (pathIsEmpty(this.path)) {\r\n            const childTree = this.children.subtree(new Path(childName));\r\n            if (childTree.isEmpty()) {\r\n                // This child is unaffected\r\n                return null;\r\n            }\r\n            else if (childTree.value) {\r\n                // We have a snapshot for the child in question.  This becomes an overwrite of the child.\r\n                return new Overwrite(this.source, newEmptyPath(), childTree.value);\r\n            }\r\n            else {\r\n                // This is a merge at a deeper level\r\n                return new Merge(this.source, newEmptyPath(), childTree);\r\n            }\r\n        }\r\n        else {\r\n            assert(pathGetFront(this.path) === childName, \"Can't get a merge for a child not on the path of the operation\");\r\n            return new Merge(this.source, pathPopFront(this.path), this.children);\r\n        }\r\n    }\r\n    toString() {\r\n        return ('Operation(' +\r\n            this.path +\r\n            ': ' +\r\n            this.source.toString() +\r\n            ' merge: ' +\r\n            this.children.toString() +\r\n            ')');\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A cache node only stores complete children. Additionally it holds a flag whether the node can be considered fully\r\n * initialized in the sense that we know at one point in time this represented a valid state of the world, e.g.\r\n * initialized with data from the server, or a complete overwrite by the client. The filtered flag also tracks\r\n * whether a node potentially had children removed due to a filter.\r\n */\r\nclass CacheNode {\r\n    constructor(node_, fullyInitialized_, filtered_) {\r\n        this.node_ = node_;\r\n        this.fullyInitialized_ = fullyInitialized_;\r\n        this.filtered_ = filtered_;\r\n    }\r\n    /**\r\n     * Returns whether this node was fully initialized with either server data or a complete overwrite by the client\r\n     */\r\n    isFullyInitialized() {\r\n        return this.fullyInitialized_;\r\n    }\r\n    /**\r\n     * Returns whether this node is potentially missing children due to a filter applied to the node\r\n     */\r\n    isFiltered() {\r\n        return this.filtered_;\r\n    }\r\n    isCompleteForPath(path) {\r\n        if (pathIsEmpty(path)) {\r\n            return this.isFullyInitialized() && !this.filtered_;\r\n        }\r\n        const childKey = pathGetFront(path);\r\n        return this.isCompleteForChild(childKey);\r\n    }\r\n    isCompleteForChild(key) {\r\n        return ((this.isFullyInitialized() && !this.filtered_) || this.node_.hasChild(key));\r\n    }\r\n    getNode() {\r\n        return this.node_;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An EventGenerator is used to convert \"raw\" changes (Change) as computed by the\r\n * CacheDiffer into actual events (Event) that can be raised.  See generateEventsForChanges()\r\n * for details.\r\n *\r\n */\r\nclass EventGenerator {\r\n    constructor(query_) {\r\n        this.query_ = query_;\r\n        this.index_ = this.query_._queryParams.getIndex();\r\n    }\r\n}\r\n/**\r\n * Given a set of raw changes (no moved events and prevName not specified yet), and a set of\r\n * EventRegistrations that should be notified of these changes, generate the actual events to be raised.\r\n *\r\n * Notes:\r\n *  - child_moved events will be synthesized at this time for any child_changed events that affect\r\n *    our index.\r\n *  - prevName will be calculated based on the index ordering.\r\n */\r\nfunction eventGeneratorGenerateEventsForChanges(eventGenerator, changes, eventCache, eventRegistrations) {\r\n    const events = [];\r\n    const moves = [];\r\n    changes.forEach(change => {\r\n        if (change.type === \"child_changed\" /* CHILD_CHANGED */ &&\r\n            eventGenerator.index_.indexedValueChanged(change.oldSnap, change.snapshotNode)) {\r\n            moves.push(changeChildMoved(change.childName, change.snapshotNode));\r\n        }\r\n    });\r\n    eventGeneratorGenerateEventsForType(eventGenerator, events, \"child_removed\" /* CHILD_REMOVED */, changes, eventRegistrations, eventCache);\r\n    eventGeneratorGenerateEventsForType(eventGenerator, events, \"child_added\" /* CHILD_ADDED */, changes, eventRegistrations, eventCache);\r\n    eventGeneratorGenerateEventsForType(eventGenerator, events, \"child_moved\" /* CHILD_MOVED */, moves, eventRegistrations, eventCache);\r\n    eventGeneratorGenerateEventsForType(eventGenerator, events, \"child_changed\" /* CHILD_CHANGED */, changes, eventRegistrations, eventCache);\r\n    eventGeneratorGenerateEventsForType(eventGenerator, events, \"value\" /* VALUE */, changes, eventRegistrations, eventCache);\r\n    return events;\r\n}\r\n/**\r\n * Given changes of a single change type, generate the corresponding events.\r\n */\r\nfunction eventGeneratorGenerateEventsForType(eventGenerator, events, eventType, changes, registrations, eventCache) {\r\n    const filteredChanges = changes.filter(change => change.type === eventType);\r\n    filteredChanges.sort((a, b) => eventGeneratorCompareChanges(eventGenerator, a, b));\r\n    filteredChanges.forEach(change => {\r\n        const materializedChange = eventGeneratorMaterializeSingleChange(eventGenerator, change, eventCache);\r\n        registrations.forEach(registration => {\r\n            if (registration.respondsTo(change.type)) {\r\n                events.push(registration.createEvent(materializedChange, eventGenerator.query_));\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction eventGeneratorMaterializeSingleChange(eventGenerator, change, eventCache) {\r\n    if (change.type === 'value' || change.type === 'child_removed') {\r\n        return change;\r\n    }\r\n    else {\r\n        change.prevName = eventCache.getPredecessorChildName(change.childName, change.snapshotNode, eventGenerator.index_);\r\n        return change;\r\n    }\r\n}\r\nfunction eventGeneratorCompareChanges(eventGenerator, a, b) {\r\n    if (a.childName == null || b.childName == null) {\r\n        throw assertionError('Should only compare child_ events.');\r\n    }\r\n    const aWrapped = new NamedNode(a.childName, a.snapshotNode);\r\n    const bWrapped = new NamedNode(b.childName, b.snapshotNode);\r\n    return eventGenerator.index_.compare(aWrapped, bWrapped);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction newViewCache(eventCache, serverCache) {\r\n    return { eventCache, serverCache };\r\n}\r\nfunction viewCacheUpdateEventSnap(viewCache, eventSnap, complete, filtered) {\r\n    return newViewCache(new CacheNode(eventSnap, complete, filtered), viewCache.serverCache);\r\n}\r\nfunction viewCacheUpdateServerSnap(viewCache, serverSnap, complete, filtered) {\r\n    return newViewCache(viewCache.eventCache, new CacheNode(serverSnap, complete, filtered));\r\n}\r\nfunction viewCacheGetCompleteEventSnap(viewCache) {\r\n    return viewCache.eventCache.isFullyInitialized()\r\n        ? viewCache.eventCache.getNode()\r\n        : null;\r\n}\r\nfunction viewCacheGetCompleteServerSnap(viewCache) {\r\n    return viewCache.serverCache.isFullyInitialized()\r\n        ? viewCache.serverCache.getNode()\r\n        : null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nlet emptyChildrenSingleton;\r\n/**\r\n * Singleton empty children collection.\r\n *\r\n */\r\nconst EmptyChildren = () => {\r\n    if (!emptyChildrenSingleton) {\r\n        emptyChildrenSingleton = new SortedMap(stringCompare);\r\n    }\r\n    return emptyChildrenSingleton;\r\n};\r\n/**\r\n * A tree with immutable elements.\r\n */\r\nclass ImmutableTree {\r\n    constructor(value, children = EmptyChildren()) {\r\n        this.value = value;\r\n        this.children = children;\r\n    }\r\n    static fromObject(obj) {\r\n        let tree = new ImmutableTree(null);\r\n        each(obj, (childPath, childSnap) => {\r\n            tree = tree.set(new Path(childPath), childSnap);\r\n        });\r\n        return tree;\r\n    }\r\n    /**\r\n     * True if the value is empty and there are no children\r\n     */\r\n    isEmpty() {\r\n        return this.value === null && this.children.isEmpty();\r\n    }\r\n    /**\r\n     * Given a path and predicate, return the first node and the path to that node\r\n     * where the predicate returns true.\r\n     *\r\n     * TODO Do a perf test -- If we're creating a bunch of `{path: value:}`\r\n     * objects on the way back out, it may be better to pass down a pathSoFar obj.\r\n     *\r\n     * @param relativePath - The remainder of the path\r\n     * @param predicate - The predicate to satisfy to return a node\r\n     */\r\n    findRootMostMatchingPathAndValue(relativePath, predicate) {\r\n        if (this.value != null && predicate(this.value)) {\r\n            return { path: newEmptyPath(), value: this.value };\r\n        }\r\n        else {\r\n            if (pathIsEmpty(relativePath)) {\r\n                return null;\r\n            }\r\n            else {\r\n                const front = pathGetFront(relativePath);\r\n                const child = this.children.get(front);\r\n                if (child !== null) {\r\n                    const childExistingPathAndValue = child.findRootMostMatchingPathAndValue(pathPopFront(relativePath), predicate);\r\n                    if (childExistingPathAndValue != null) {\r\n                        const fullPath = pathChild(new Path(front), childExistingPathAndValue.path);\r\n                        return { path: fullPath, value: childExistingPathAndValue.value };\r\n                    }\r\n                    else {\r\n                        return null;\r\n                    }\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Find, if it exists, the shortest subpath of the given path that points a defined\r\n     * value in the tree\r\n     */\r\n    findRootMostValueAndPath(relativePath) {\r\n        return this.findRootMostMatchingPathAndValue(relativePath, () => true);\r\n    }\r\n    /**\r\n     * @returns The subtree at the given path\r\n     */\r\n    subtree(relativePath) {\r\n        if (pathIsEmpty(relativePath)) {\r\n            return this;\r\n        }\r\n        else {\r\n            const front = pathGetFront(relativePath);\r\n            const childTree = this.children.get(front);\r\n            if (childTree !== null) {\r\n                return childTree.subtree(pathPopFront(relativePath));\r\n            }\r\n            else {\r\n                return new ImmutableTree(null);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Sets a value at the specified path.\r\n     *\r\n     * @param relativePath - Path to set value at.\r\n     * @param toSet - Value to set.\r\n     * @returns Resulting tree.\r\n     */\r\n    set(relativePath, toSet) {\r\n        if (pathIsEmpty(relativePath)) {\r\n            return new ImmutableTree(toSet, this.children);\r\n        }\r\n        else {\r\n            const front = pathGetFront(relativePath);\r\n            const child = this.children.get(front) || new ImmutableTree(null);\r\n            const newChild = child.set(pathPopFront(relativePath), toSet);\r\n            const newChildren = this.children.insert(front, newChild);\r\n            return new ImmutableTree(this.value, newChildren);\r\n        }\r\n    }\r\n    /**\r\n     * Removes the value at the specified path.\r\n     *\r\n     * @param relativePath - Path to value to remove.\r\n     * @returns Resulting tree.\r\n     */\r\n    remove(relativePath) {\r\n        if (pathIsEmpty(relativePath)) {\r\n            if (this.children.isEmpty()) {\r\n                return new ImmutableTree(null);\r\n            }\r\n            else {\r\n                return new ImmutableTree(null, this.children);\r\n            }\r\n        }\r\n        else {\r\n            const front = pathGetFront(relativePath);\r\n            const child = this.children.get(front);\r\n            if (child) {\r\n                const newChild = child.remove(pathPopFront(relativePath));\r\n                let newChildren;\r\n                if (newChild.isEmpty()) {\r\n                    newChildren = this.children.remove(front);\r\n                }\r\n                else {\r\n                    newChildren = this.children.insert(front, newChild);\r\n                }\r\n                if (this.value === null && newChildren.isEmpty()) {\r\n                    return new ImmutableTree(null);\r\n                }\r\n                else {\r\n                    return new ImmutableTree(this.value, newChildren);\r\n                }\r\n            }\r\n            else {\r\n                return this;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Gets a value from the tree.\r\n     *\r\n     * @param relativePath - Path to get value for.\r\n     * @returns Value at path, or null.\r\n     */\r\n    get(relativePath) {\r\n        if (pathIsEmpty(relativePath)) {\r\n            return this.value;\r\n        }\r\n        else {\r\n            const front = pathGetFront(relativePath);\r\n            const child = this.children.get(front);\r\n            if (child) {\r\n                return child.get(pathPopFront(relativePath));\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Replace the subtree at the specified path with the given new tree.\r\n     *\r\n     * @param relativePath - Path to replace subtree for.\r\n     * @param newTree - New tree.\r\n     * @returns Resulting tree.\r\n     */\r\n    setTree(relativePath, newTree) {\r\n        if (pathIsEmpty(relativePath)) {\r\n            return newTree;\r\n        }\r\n        else {\r\n            const front = pathGetFront(relativePath);\r\n            const child = this.children.get(front) || new ImmutableTree(null);\r\n            const newChild = child.setTree(pathPopFront(relativePath), newTree);\r\n            let newChildren;\r\n            if (newChild.isEmpty()) {\r\n                newChildren = this.children.remove(front);\r\n            }\r\n            else {\r\n                newChildren = this.children.insert(front, newChild);\r\n            }\r\n            return new ImmutableTree(this.value, newChildren);\r\n        }\r\n    }\r\n    /**\r\n     * Performs a depth first fold on this tree. Transforms a tree into a single\r\n     * value, given a function that operates on the path to a node, an optional\r\n     * current value, and a map of child names to folded subtrees\r\n     */\r\n    fold(fn) {\r\n        return this.fold_(newEmptyPath(), fn);\r\n    }\r\n    /**\r\n     * Recursive helper for public-facing fold() method\r\n     */\r\n    fold_(pathSoFar, fn) {\r\n        const accum = {};\r\n        this.children.inorderTraversal((childKey, childTree) => {\r\n            accum[childKey] = childTree.fold_(pathChild(pathSoFar, childKey), fn);\r\n        });\r\n        return fn(pathSoFar, this.value, accum);\r\n    }\r\n    /**\r\n     * Find the first matching value on the given path. Return the result of applying f to it.\r\n     */\r\n    findOnPath(path, f) {\r\n        return this.findOnPath_(path, newEmptyPath(), f);\r\n    }\r\n    findOnPath_(pathToFollow, pathSoFar, f) {\r\n        const result = this.value ? f(pathSoFar, this.value) : false;\r\n        if (result) {\r\n            return result;\r\n        }\r\n        else {\r\n            if (pathIsEmpty(pathToFollow)) {\r\n                return null;\r\n            }\r\n            else {\r\n                const front = pathGetFront(pathToFollow);\r\n                const nextChild = this.children.get(front);\r\n                if (nextChild) {\r\n                    return nextChild.findOnPath_(pathPopFront(pathToFollow), pathChild(pathSoFar, front), f);\r\n                }\r\n                else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    foreachOnPath(path, f) {\r\n        return this.foreachOnPath_(path, newEmptyPath(), f);\r\n    }\r\n    foreachOnPath_(pathToFollow, currentRelativePath, f) {\r\n        if (pathIsEmpty(pathToFollow)) {\r\n            return this;\r\n        }\r\n        else {\r\n            if (this.value) {\r\n                f(currentRelativePath, this.value);\r\n            }\r\n            const front = pathGetFront(pathToFollow);\r\n            const nextChild = this.children.get(front);\r\n            if (nextChild) {\r\n                return nextChild.foreachOnPath_(pathPopFront(pathToFollow), pathChild(currentRelativePath, front), f);\r\n            }\r\n            else {\r\n                return new ImmutableTree(null);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Calls the given function for each node in the tree that has a value.\r\n     *\r\n     * @param f - A function to be called with the path from the root of the tree to\r\n     * a node, and the value at that node. Called in depth-first order.\r\n     */\r\n    foreach(f) {\r\n        this.foreach_(newEmptyPath(), f);\r\n    }\r\n    foreach_(currentRelativePath, f) {\r\n        this.children.inorderTraversal((childName, childTree) => {\r\n            childTree.foreach_(pathChild(currentRelativePath, childName), f);\r\n        });\r\n        if (this.value) {\r\n            f(currentRelativePath, this.value);\r\n        }\r\n    }\r\n    foreachChild(f) {\r\n        this.children.inorderTraversal((childName, childTree) => {\r\n            if (childTree.value) {\r\n                f(childName, childTree.value);\r\n            }\r\n        });\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This class holds a collection of writes that can be applied to nodes in unison. It abstracts away the logic with\r\n * dealing with priority writes and multiple nested writes. At any given path there is only allowed to be one write\r\n * modifying that path. Any write to an existing path or shadowing an existing path will modify that existing write\r\n * to reflect the write added.\r\n */\r\nclass CompoundWrite {\r\n    constructor(writeTree_) {\r\n        this.writeTree_ = writeTree_;\r\n    }\r\n    static empty() {\r\n        return new CompoundWrite(new ImmutableTree(null));\r\n    }\r\n}\r\nfunction compoundWriteAddWrite(compoundWrite, path, node) {\r\n    if (pathIsEmpty(path)) {\r\n        return new CompoundWrite(new ImmutableTree(node));\r\n    }\r\n    else {\r\n        const rootmost = compoundWrite.writeTree_.findRootMostValueAndPath(path);\r\n        if (rootmost != null) {\r\n            const rootMostPath = rootmost.path;\r\n            let value = rootmost.value;\r\n            const relativePath = newRelativePath(rootMostPath, path);\r\n            value = value.updateChild(relativePath, node);\r\n            return new CompoundWrite(compoundWrite.writeTree_.set(rootMostPath, value));\r\n        }\r\n        else {\r\n            const subtree = new ImmutableTree(node);\r\n            const newWriteTree = compoundWrite.writeTree_.setTree(path, subtree);\r\n            return new CompoundWrite(newWriteTree);\r\n        }\r\n    }\r\n}\r\nfunction compoundWriteAddWrites(compoundWrite, path, updates) {\r\n    let newWrite = compoundWrite;\r\n    each(updates, (childKey, node) => {\r\n        newWrite = compoundWriteAddWrite(newWrite, pathChild(path, childKey), node);\r\n    });\r\n    return newWrite;\r\n}\r\n/**\r\n * Will remove a write at the given path and deeper paths. This will <em>not</em> modify a write at a higher\r\n * location, which must be removed by calling this method with that path.\r\n *\r\n * @param compoundWrite - The CompoundWrite to remove.\r\n * @param path - The path at which a write and all deeper writes should be removed\r\n * @returns The new CompoundWrite with the removed path\r\n */\r\nfunction compoundWriteRemoveWrite(compoundWrite, path) {\r\n    if (pathIsEmpty(path)) {\r\n        return CompoundWrite.empty();\r\n    }\r\n    else {\r\n        const newWriteTree = compoundWrite.writeTree_.setTree(path, new ImmutableTree(null));\r\n        return new CompoundWrite(newWriteTree);\r\n    }\r\n}\r\n/**\r\n * Returns whether this CompoundWrite will fully overwrite a node at a given location and can therefore be\r\n * considered \"complete\".\r\n *\r\n * @param compoundWrite - The CompoundWrite to check.\r\n * @param path - The path to check for\r\n * @returns Whether there is a complete write at that path\r\n */\r\nfunction compoundWriteHasCompleteWrite(compoundWrite, path) {\r\n    return compoundWriteGetCompleteNode(compoundWrite, path) != null;\r\n}\r\n/**\r\n * Returns a node for a path if and only if the node is a \"complete\" overwrite at that path. This will not aggregate\r\n * writes from deeper paths, but will return child nodes from a more shallow path.\r\n *\r\n * @param compoundWrite - The CompoundWrite to get the node from.\r\n * @param path - The path to get a complete write\r\n * @returns The node if complete at that path, or null otherwise.\r\n */\r\nfunction compoundWriteGetCompleteNode(compoundWrite, path) {\r\n    const rootmost = compoundWrite.writeTree_.findRootMostValueAndPath(path);\r\n    if (rootmost != null) {\r\n        return compoundWrite.writeTree_\r\n            .get(rootmost.path)\r\n            .getChild(newRelativePath(rootmost.path, path));\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * Returns all children that are guaranteed to be a complete overwrite.\r\n *\r\n * @param compoundWrite - The CompoundWrite to get children from.\r\n * @returns A list of all complete children.\r\n */\r\nfunction compoundWriteGetCompleteChildren(compoundWrite) {\r\n    const children = [];\r\n    const node = compoundWrite.writeTree_.value;\r\n    if (node != null) {\r\n        // If it's a leaf node, it has no children; so nothing to do.\r\n        if (!node.isLeafNode()) {\r\n            node.forEachChild(PRIORITY_INDEX, (childName, childNode) => {\r\n                children.push(new NamedNode(childName, childNode));\r\n            });\r\n        }\r\n    }\r\n    else {\r\n        compoundWrite.writeTree_.children.inorderTraversal((childName, childTree) => {\r\n            if (childTree.value != null) {\r\n                children.push(new NamedNode(childName, childTree.value));\r\n            }\r\n        });\r\n    }\r\n    return children;\r\n}\r\nfunction compoundWriteChildCompoundWrite(compoundWrite, path) {\r\n    if (pathIsEmpty(path)) {\r\n        return compoundWrite;\r\n    }\r\n    else {\r\n        const shadowingNode = compoundWriteGetCompleteNode(compoundWrite, path);\r\n        if (shadowingNode != null) {\r\n            return new CompoundWrite(new ImmutableTree(shadowingNode));\r\n        }\r\n        else {\r\n            return new CompoundWrite(compoundWrite.writeTree_.subtree(path));\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns true if this CompoundWrite is empty and therefore does not modify any nodes.\r\n * @returns Whether this CompoundWrite is empty\r\n */\r\nfunction compoundWriteIsEmpty(compoundWrite) {\r\n    return compoundWrite.writeTree_.isEmpty();\r\n}\r\n/**\r\n * Applies this CompoundWrite to a node. The node is returned with all writes from this CompoundWrite applied to the\r\n * node\r\n * @param node - The node to apply this CompoundWrite to\r\n * @returns The node with all writes applied\r\n */\r\nfunction compoundWriteApply(compoundWrite, node) {\r\n    return applySubtreeWrite(newEmptyPath(), compoundWrite.writeTree_, node);\r\n}\r\nfunction applySubtreeWrite(relativePath, writeTree, node) {\r\n    if (writeTree.value != null) {\r\n        // Since there a write is always a leaf, we're done here\r\n        return node.updateChild(relativePath, writeTree.value);\r\n    }\r\n    else {\r\n        let priorityWrite = null;\r\n        writeTree.children.inorderTraversal((childKey, childTree) => {\r\n            if (childKey === '.priority') {\r\n                // Apply priorities at the end so we don't update priorities for either empty nodes or forget\r\n                // to apply priorities to empty nodes that are later filled\r\n                assert(childTree.value !== null, 'Priority writes must always be leaf nodes');\r\n                priorityWrite = childTree.value;\r\n            }\r\n            else {\r\n                node = applySubtreeWrite(pathChild(relativePath, childKey), childTree, node);\r\n            }\r\n        });\r\n        // If there was a priority write, we only apply it if the node is not empty\r\n        if (!node.getChild(relativePath).isEmpty() && priorityWrite !== null) {\r\n            node = node.updateChild(pathChild(relativePath, '.priority'), priorityWrite);\r\n        }\r\n        return node;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Create a new WriteTreeRef for the given path. For use with a new sync point at the given path.\r\n *\r\n */\r\nfunction writeTreeChildWrites(writeTree, path) {\r\n    return newWriteTreeRef(path, writeTree);\r\n}\r\n/**\r\n * Record a new overwrite from user code.\r\n *\r\n * @param visible - This is set to false by some transactions. It should be excluded from event caches\r\n */\r\nfunction writeTreeAddOverwrite(writeTree, path, snap, writeId, visible) {\r\n    assert(writeId > writeTree.lastWriteId, 'Stacking an older write on top of newer ones');\r\n    if (visible === undefined) {\r\n        visible = true;\r\n    }\r\n    writeTree.allWrites.push({\r\n        path,\r\n        snap,\r\n        writeId,\r\n        visible\r\n    });\r\n    if (visible) {\r\n        writeTree.visibleWrites = compoundWriteAddWrite(writeTree.visibleWrites, path, snap);\r\n    }\r\n    writeTree.lastWriteId = writeId;\r\n}\r\n/**\r\n * Record a new merge from user code.\r\n */\r\nfunction writeTreeAddMerge(writeTree, path, changedChildren, writeId) {\r\n    assert(writeId > writeTree.lastWriteId, 'Stacking an older merge on top of newer ones');\r\n    writeTree.allWrites.push({\r\n        path,\r\n        children: changedChildren,\r\n        writeId,\r\n        visible: true\r\n    });\r\n    writeTree.visibleWrites = compoundWriteAddWrites(writeTree.visibleWrites, path, changedChildren);\r\n    writeTree.lastWriteId = writeId;\r\n}\r\nfunction writeTreeGetWrite(writeTree, writeId) {\r\n    for (let i = 0; i < writeTree.allWrites.length; i++) {\r\n        const record = writeTree.allWrites[i];\r\n        if (record.writeId === writeId) {\r\n            return record;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Remove a write (either an overwrite or merge) that has been successfully acknowledge by the server. Recalculates\r\n * the tree if necessary.  We return true if it may have been visible, meaning views need to reevaluate.\r\n *\r\n * @returns true if the write may have been visible (meaning we'll need to reevaluate / raise\r\n * events as a result).\r\n */\r\nfunction writeTreeRemoveWrite(writeTree, writeId) {\r\n    // Note: disabling this check. It could be a transaction that preempted another transaction, and thus was applied\r\n    // out of order.\r\n    //const validClear = revert || this.allWrites_.length === 0 || writeId <= this.allWrites_[0].writeId;\r\n    //assert(validClear, \"Either we don't have this write, or it's the first one in the queue\");\r\n    const idx = writeTree.allWrites.findIndex(s => {\r\n        return s.writeId === writeId;\r\n    });\r\n    assert(idx >= 0, 'removeWrite called with nonexistent writeId.');\r\n    const writeToRemove = writeTree.allWrites[idx];\r\n    writeTree.allWrites.splice(idx, 1);\r\n    let removedWriteWasVisible = writeToRemove.visible;\r\n    let removedWriteOverlapsWithOtherWrites = false;\r\n    let i = writeTree.allWrites.length - 1;\r\n    while (removedWriteWasVisible && i >= 0) {\r\n        const currentWrite = writeTree.allWrites[i];\r\n        if (currentWrite.visible) {\r\n            if (i >= idx &&\r\n                writeTreeRecordContainsPath_(currentWrite, writeToRemove.path)) {\r\n                // The removed write was completely shadowed by a subsequent write.\r\n                removedWriteWasVisible = false;\r\n            }\r\n            else if (pathContains(writeToRemove.path, currentWrite.path)) {\r\n                // Either we're covering some writes or they're covering part of us (depending on which came first).\r\n                removedWriteOverlapsWithOtherWrites = true;\r\n            }\r\n        }\r\n        i--;\r\n    }\r\n    if (!removedWriteWasVisible) {\r\n        return false;\r\n    }\r\n    else if (removedWriteOverlapsWithOtherWrites) {\r\n        // There's some shadowing going on. Just rebuild the visible writes from scratch.\r\n        writeTreeResetTree_(writeTree);\r\n        return true;\r\n    }\r\n    else {\r\n        // There's no shadowing.  We can safely just remove the write(s) from visibleWrites.\r\n        if (writeToRemove.snap) {\r\n            writeTree.visibleWrites = compoundWriteRemoveWrite(writeTree.visibleWrites, writeToRemove.path);\r\n        }\r\n        else {\r\n            const children = writeToRemove.children;\r\n            each(children, (childName) => {\r\n                writeTree.visibleWrites = compoundWriteRemoveWrite(writeTree.visibleWrites, pathChild(writeToRemove.path, childName));\r\n            });\r\n        }\r\n        return true;\r\n    }\r\n}\r\nfunction writeTreeRecordContainsPath_(writeRecord, path) {\r\n    if (writeRecord.snap) {\r\n        return pathContains(writeRecord.path, path);\r\n    }\r\n    else {\r\n        for (const childName in writeRecord.children) {\r\n            if (writeRecord.children.hasOwnProperty(childName) &&\r\n                pathContains(pathChild(writeRecord.path, childName), path)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Re-layer the writes and merges into a tree so we can efficiently calculate event snapshots\r\n */\r\nfunction writeTreeResetTree_(writeTree) {\r\n    writeTree.visibleWrites = writeTreeLayerTree_(writeTree.allWrites, writeTreeDefaultFilter_, newEmptyPath());\r\n    if (writeTree.allWrites.length > 0) {\r\n        writeTree.lastWriteId =\r\n            writeTree.allWrites[writeTree.allWrites.length - 1].writeId;\r\n    }\r\n    else {\r\n        writeTree.lastWriteId = -1;\r\n    }\r\n}\r\n/**\r\n * The default filter used when constructing the tree. Keep everything that's visible.\r\n */\r\nfunction writeTreeDefaultFilter_(write) {\r\n    return write.visible;\r\n}\r\n/**\r\n * Static method. Given an array of WriteRecords, a filter for which ones to include, and a path, construct the tree of\r\n * event data at that path.\r\n */\r\nfunction writeTreeLayerTree_(writes, filter, treeRoot) {\r\n    let compoundWrite = CompoundWrite.empty();\r\n    for (let i = 0; i < writes.length; ++i) {\r\n        const write = writes[i];\r\n        // Theory, a later set will either:\r\n        // a) abort a relevant transaction, so no need to worry about excluding it from calculating that transaction\r\n        // b) not be relevant to a transaction (separate branch), so again will not affect the data for that transaction\r\n        if (filter(write)) {\r\n            const writePath = write.path;\r\n            let relativePath;\r\n            if (write.snap) {\r\n                if (pathContains(treeRoot, writePath)) {\r\n                    relativePath = newRelativePath(treeRoot, writePath);\r\n                    compoundWrite = compoundWriteAddWrite(compoundWrite, relativePath, write.snap);\r\n                }\r\n                else if (pathContains(writePath, treeRoot)) {\r\n                    relativePath = newRelativePath(writePath, treeRoot);\r\n                    compoundWrite = compoundWriteAddWrite(compoundWrite, newEmptyPath(), write.snap.getChild(relativePath));\r\n                }\r\n                else ;\r\n            }\r\n            else if (write.children) {\r\n                if (pathContains(treeRoot, writePath)) {\r\n                    relativePath = newRelativePath(treeRoot, writePath);\r\n                    compoundWrite = compoundWriteAddWrites(compoundWrite, relativePath, write.children);\r\n                }\r\n                else if (pathContains(writePath, treeRoot)) {\r\n                    relativePath = newRelativePath(writePath, treeRoot);\r\n                    if (pathIsEmpty(relativePath)) {\r\n                        compoundWrite = compoundWriteAddWrites(compoundWrite, newEmptyPath(), write.children);\r\n                    }\r\n                    else {\r\n                        const child = safeGet(write.children, pathGetFront(relativePath));\r\n                        if (child) {\r\n                            // There exists a child in this node that matches the root path\r\n                            const deepNode = child.getChild(pathPopFront(relativePath));\r\n                            compoundWrite = compoundWriteAddWrite(compoundWrite, newEmptyPath(), deepNode);\r\n                        }\r\n                    }\r\n                }\r\n                else ;\r\n            }\r\n            else {\r\n                throw assertionError('WriteRecord should have .snap or .children');\r\n            }\r\n        }\r\n    }\r\n    return compoundWrite;\r\n}\r\n/**\r\n * Given optional, underlying server data, and an optional set of constraints (exclude some sets, include hidden\r\n * writes), attempt to calculate a complete snapshot for the given path\r\n *\r\n * @param writeIdsToExclude - An optional set to be excluded\r\n * @param includeHiddenWrites - Defaults to false, whether or not to layer on writes with visible set to false\r\n */\r\nfunction writeTreeCalcCompleteEventCache(writeTree, treePath, completeServerCache, writeIdsToExclude, includeHiddenWrites) {\r\n    if (!writeIdsToExclude && !includeHiddenWrites) {\r\n        const shadowingNode = compoundWriteGetCompleteNode(writeTree.visibleWrites, treePath);\r\n        if (shadowingNode != null) {\r\n            return shadowingNode;\r\n        }\r\n        else {\r\n            const subMerge = compoundWriteChildCompoundWrite(writeTree.visibleWrites, treePath);\r\n            if (compoundWriteIsEmpty(subMerge)) {\r\n                return completeServerCache;\r\n            }\r\n            else if (completeServerCache == null &&\r\n                !compoundWriteHasCompleteWrite(subMerge, newEmptyPath())) {\r\n                // We wouldn't have a complete snapshot, since there's no underlying data and no complete shadow\r\n                return null;\r\n            }\r\n            else {\r\n                const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\r\n                return compoundWriteApply(subMerge, layeredCache);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        const merge = compoundWriteChildCompoundWrite(writeTree.visibleWrites, treePath);\r\n        if (!includeHiddenWrites && compoundWriteIsEmpty(merge)) {\r\n            return completeServerCache;\r\n        }\r\n        else {\r\n            // If the server cache is null, and we don't have a complete cache, we need to return null\r\n            if (!includeHiddenWrites &&\r\n                completeServerCache == null &&\r\n                !compoundWriteHasCompleteWrite(merge, newEmptyPath())) {\r\n                return null;\r\n            }\r\n            else {\r\n                const filter = function (write) {\r\n                    return ((write.visible || includeHiddenWrites) &&\r\n                        (!writeIdsToExclude ||\r\n                            !~writeIdsToExclude.indexOf(write.writeId)) &&\r\n                        (pathContains(write.path, treePath) ||\r\n                            pathContains(treePath, write.path)));\r\n                };\r\n                const mergeAtPath = writeTreeLayerTree_(writeTree.allWrites, filter, treePath);\r\n                const layeredCache = completeServerCache || ChildrenNode.EMPTY_NODE;\r\n                return compoundWriteApply(mergeAtPath, layeredCache);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * With optional, underlying server data, attempt to return a children node of children that we have complete data for.\r\n * Used when creating new views, to pre-fill their complete event children snapshot.\r\n */\r\nfunction writeTreeCalcCompleteEventChildren(writeTree, treePath, completeServerChildren) {\r\n    let completeChildren = ChildrenNode.EMPTY_NODE;\r\n    const topLevelSet = compoundWriteGetCompleteNode(writeTree.visibleWrites, treePath);\r\n    if (topLevelSet) {\r\n        if (!topLevelSet.isLeafNode()) {\r\n            // we're shadowing everything. Return the children.\r\n            topLevelSet.forEachChild(PRIORITY_INDEX, (childName, childSnap) => {\r\n                completeChildren = completeChildren.updateImmediateChild(childName, childSnap);\r\n            });\r\n        }\r\n        return completeChildren;\r\n    }\r\n    else if (completeServerChildren) {\r\n        // Layer any children we have on top of this\r\n        // We know we don't have a top-level set, so just enumerate existing children\r\n        const merge = compoundWriteChildCompoundWrite(writeTree.visibleWrites, treePath);\r\n        completeServerChildren.forEachChild(PRIORITY_INDEX, (childName, childNode) => {\r\n            const node = compoundWriteApply(compoundWriteChildCompoundWrite(merge, new Path(childName)), childNode);\r\n            completeChildren = completeChildren.updateImmediateChild(childName, node);\r\n        });\r\n        // Add any complete children we have from the set\r\n        compoundWriteGetCompleteChildren(merge).forEach(namedNode => {\r\n            completeChildren = completeChildren.updateImmediateChild(namedNode.name, namedNode.node);\r\n        });\r\n        return completeChildren;\r\n    }\r\n    else {\r\n        // We don't have anything to layer on top of. Layer on any children we have\r\n        // Note that we can return an empty snap if we have a defined delete\r\n        const merge = compoundWriteChildCompoundWrite(writeTree.visibleWrites, treePath);\r\n        compoundWriteGetCompleteChildren(merge).forEach(namedNode => {\r\n            completeChildren = completeChildren.updateImmediateChild(namedNode.name, namedNode.node);\r\n        });\r\n        return completeChildren;\r\n    }\r\n}\r\n/**\r\n * Given that the underlying server data has updated, determine what, if anything, needs to be\r\n * applied to the event cache.\r\n *\r\n * Possibilities:\r\n *\r\n * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\r\n *\r\n * 2. Some write is completely shadowing. No events to be raised\r\n *\r\n * 3. Is partially shadowed. Events\r\n *\r\n * Either existingEventSnap or existingServerSnap must exist\r\n */\r\nfunction writeTreeCalcEventCacheAfterServerOverwrite(writeTree, treePath, childPath, existingEventSnap, existingServerSnap) {\r\n    assert(existingEventSnap || existingServerSnap, 'Either existingEventSnap or existingServerSnap must exist');\r\n    const path = pathChild(treePath, childPath);\r\n    if (compoundWriteHasCompleteWrite(writeTree.visibleWrites, path)) {\r\n        // At this point we can probably guarantee that we're in case 2, meaning no events\r\n        // May need to check visibility while doing the findRootMostValueAndPath call\r\n        return null;\r\n    }\r\n    else {\r\n        // No complete shadowing. We're either partially shadowing or not shadowing at all.\r\n        const childMerge = compoundWriteChildCompoundWrite(writeTree.visibleWrites, path);\r\n        if (compoundWriteIsEmpty(childMerge)) {\r\n            // We're not shadowing at all. Case 1\r\n            return existingServerSnap.getChild(childPath);\r\n        }\r\n        else {\r\n            // This could be more efficient if the serverNode + updates doesn't change the eventSnap\r\n            // However this is tricky to find out, since user updates don't necessary change the server\r\n            // snap, e.g. priority updates on empty nodes, or deep deletes. Another special case is if the server\r\n            // adds nodes, but doesn't change any existing writes. It is therefore not enough to\r\n            // only check if the updates change the serverNode.\r\n            // Maybe check if the merge tree contains these special cases and only do a full overwrite in that case?\r\n            return compoundWriteApply(childMerge, existingServerSnap.getChild(childPath));\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns a complete child for a given server snap after applying all user writes or null if there is no\r\n * complete child for this ChildKey.\r\n */\r\nfunction writeTreeCalcCompleteChild(writeTree, treePath, childKey, existingServerSnap) {\r\n    const path = pathChild(treePath, childKey);\r\n    const shadowingNode = compoundWriteGetCompleteNode(writeTree.visibleWrites, path);\r\n    if (shadowingNode != null) {\r\n        return shadowingNode;\r\n    }\r\n    else {\r\n        if (existingServerSnap.isCompleteForChild(childKey)) {\r\n            const childMerge = compoundWriteChildCompoundWrite(writeTree.visibleWrites, path);\r\n            return compoundWriteApply(childMerge, existingServerSnap.getNode().getImmediateChild(childKey));\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\r\n * a higher path, this will return the child of that write relative to the write and this path.\r\n * Returns null if there is no write at this path.\r\n */\r\nfunction writeTreeShadowingWrite(writeTree, path) {\r\n    return compoundWriteGetCompleteNode(writeTree.visibleWrites, path);\r\n}\r\n/**\r\n * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\r\n * the window, but may now be in the window.\r\n */\r\nfunction writeTreeCalcIndexedSlice(writeTree, treePath, completeServerData, startPost, count, reverse, index) {\r\n    let toIterate;\r\n    const merge = compoundWriteChildCompoundWrite(writeTree.visibleWrites, treePath);\r\n    const shadowingNode = compoundWriteGetCompleteNode(merge, newEmptyPath());\r\n    if (shadowingNode != null) {\r\n        toIterate = shadowingNode;\r\n    }\r\n    else if (completeServerData != null) {\r\n        toIterate = compoundWriteApply(merge, completeServerData);\r\n    }\r\n    else {\r\n        // no children to iterate on\r\n        return [];\r\n    }\r\n    toIterate = toIterate.withIndex(index);\r\n    if (!toIterate.isEmpty() && !toIterate.isLeafNode()) {\r\n        const nodes = [];\r\n        const cmp = index.getCompare();\r\n        const iter = reverse\r\n            ? toIterate.getReverseIteratorFrom(startPost, index)\r\n            : toIterate.getIteratorFrom(startPost, index);\r\n        let next = iter.getNext();\r\n        while (next && nodes.length < count) {\r\n            if (cmp(next, startPost) !== 0) {\r\n                nodes.push(next);\r\n            }\r\n            next = iter.getNext();\r\n        }\r\n        return nodes;\r\n    }\r\n    else {\r\n        return [];\r\n    }\r\n}\r\nfunction newWriteTree() {\r\n    return {\r\n        visibleWrites: CompoundWrite.empty(),\r\n        allWrites: [],\r\n        lastWriteId: -1\r\n    };\r\n}\r\n/**\r\n * If possible, returns a complete event cache, using the underlying server data if possible. In addition, can be used\r\n * to get a cache that includes hidden writes, and excludes arbitrary writes. Note that customizing the returned node\r\n * can lead to a more expensive calculation.\r\n *\r\n * @param writeIdsToExclude - Optional writes to exclude.\r\n * @param includeHiddenWrites - Defaults to false, whether or not to layer on writes with visible set to false\r\n */\r\nfunction writeTreeRefCalcCompleteEventCache(writeTreeRef, completeServerCache, writeIdsToExclude, includeHiddenWrites) {\r\n    return writeTreeCalcCompleteEventCache(writeTreeRef.writeTree, writeTreeRef.treePath, completeServerCache, writeIdsToExclude, includeHiddenWrites);\r\n}\r\n/**\r\n * If possible, returns a children node containing all of the complete children we have data for. The returned data is a\r\n * mix of the given server data and write data.\r\n *\r\n */\r\nfunction writeTreeRefCalcCompleteEventChildren(writeTreeRef, completeServerChildren) {\r\n    return writeTreeCalcCompleteEventChildren(writeTreeRef.writeTree, writeTreeRef.treePath, completeServerChildren);\r\n}\r\n/**\r\n * Given that either the underlying server data has updated or the outstanding writes have updated, determine what,\r\n * if anything, needs to be applied to the event cache.\r\n *\r\n * Possibilities:\r\n *\r\n * 1. No writes are shadowing. Events should be raised, the snap to be applied comes from the server data\r\n *\r\n * 2. Some write is completely shadowing. No events to be raised\r\n *\r\n * 3. Is partially shadowed. Events should be raised\r\n *\r\n * Either existingEventSnap or existingServerSnap must exist, this is validated via an assert\r\n *\r\n *\r\n */\r\nfunction writeTreeRefCalcEventCacheAfterServerOverwrite(writeTreeRef, path, existingEventSnap, existingServerSnap) {\r\n    return writeTreeCalcEventCacheAfterServerOverwrite(writeTreeRef.writeTree, writeTreeRef.treePath, path, existingEventSnap, existingServerSnap);\r\n}\r\n/**\r\n * Returns a node if there is a complete overwrite for this path. More specifically, if there is a write at\r\n * a higher path, this will return the child of that write relative to the write and this path.\r\n * Returns null if there is no write at this path.\r\n *\r\n */\r\nfunction writeTreeRefShadowingWrite(writeTreeRef, path) {\r\n    return writeTreeShadowingWrite(writeTreeRef.writeTree, pathChild(writeTreeRef.treePath, path));\r\n}\r\n/**\r\n * This method is used when processing child remove events on a query. If we can, we pull in children that were outside\r\n * the window, but may now be in the window\r\n */\r\nfunction writeTreeRefCalcIndexedSlice(writeTreeRef, completeServerData, startPost, count, reverse, index) {\r\n    return writeTreeCalcIndexedSlice(writeTreeRef.writeTree, writeTreeRef.treePath, completeServerData, startPost, count, reverse, index);\r\n}\r\n/**\r\n * Returns a complete child for a given server snap after applying all user writes or null if there is no\r\n * complete child for this ChildKey.\r\n */\r\nfunction writeTreeRefCalcCompleteChild(writeTreeRef, childKey, existingServerCache) {\r\n    return writeTreeCalcCompleteChild(writeTreeRef.writeTree, writeTreeRef.treePath, childKey, existingServerCache);\r\n}\r\n/**\r\n * Return a WriteTreeRef for a child.\r\n */\r\nfunction writeTreeRefChild(writeTreeRef, childName) {\r\n    return newWriteTreeRef(pathChild(writeTreeRef.treePath, childName), writeTreeRef.writeTree);\r\n}\r\nfunction newWriteTreeRef(path, writeTree) {\r\n    return {\r\n        treePath: path,\r\n        writeTree\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass ChildChangeAccumulator {\r\n    constructor() {\r\n        this.changeMap = new Map();\r\n    }\r\n    trackChildChange(change) {\r\n        const type = change.type;\r\n        const childKey = change.childName;\r\n        assert(type === \"child_added\" /* CHILD_ADDED */ ||\r\n            type === \"child_changed\" /* CHILD_CHANGED */ ||\r\n            type === \"child_removed\" /* CHILD_REMOVED */, 'Only child changes supported for tracking');\r\n        assert(childKey !== '.priority', 'Only non-priority child changes can be tracked.');\r\n        const oldChange = this.changeMap.get(childKey);\r\n        if (oldChange) {\r\n            const oldType = oldChange.type;\r\n            if (type === \"child_added\" /* CHILD_ADDED */ &&\r\n                oldType === \"child_removed\" /* CHILD_REMOVED */) {\r\n                this.changeMap.set(childKey, changeChildChanged(childKey, change.snapshotNode, oldChange.snapshotNode));\r\n            }\r\n            else if (type === \"child_removed\" /* CHILD_REMOVED */ &&\r\n                oldType === \"child_added\" /* CHILD_ADDED */) {\r\n                this.changeMap.delete(childKey);\r\n            }\r\n            else if (type === \"child_removed\" /* CHILD_REMOVED */ &&\r\n                oldType === \"child_changed\" /* CHILD_CHANGED */) {\r\n                this.changeMap.set(childKey, changeChildRemoved(childKey, oldChange.oldSnap));\r\n            }\r\n            else if (type === \"child_changed\" /* CHILD_CHANGED */ &&\r\n                oldType === \"child_added\" /* CHILD_ADDED */) {\r\n                this.changeMap.set(childKey, changeChildAdded(childKey, change.snapshotNode));\r\n            }\r\n            else if (type === \"child_changed\" /* CHILD_CHANGED */ &&\r\n                oldType === \"child_changed\" /* CHILD_CHANGED */) {\r\n                this.changeMap.set(childKey, changeChildChanged(childKey, change.snapshotNode, oldChange.oldSnap));\r\n            }\r\n            else {\r\n                throw assertionError('Illegal combination of changes: ' +\r\n                    change +\r\n                    ' occurred after ' +\r\n                    oldChange);\r\n            }\r\n        }\r\n        else {\r\n            this.changeMap.set(childKey, change);\r\n        }\r\n    }\r\n    getChanges() {\r\n        return Array.from(this.changeMap.values());\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * An implementation of CompleteChildSource that never returns any additional children\r\n */\r\n// eslint-disable-next-line @typescript-eslint/naming-convention\r\nclass NoCompleteChildSource_ {\r\n    getCompleteChild(childKey) {\r\n        return null;\r\n    }\r\n    getChildAfterChild(index, child, reverse) {\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * Singleton instance.\r\n */\r\nconst NO_COMPLETE_CHILD_SOURCE = new NoCompleteChildSource_();\r\n/**\r\n * An implementation of CompleteChildSource that uses a WriteTree in addition to any other server data or\r\n * old event caches available to calculate complete children.\r\n */\r\nclass WriteTreeCompleteChildSource {\r\n    constructor(writes_, viewCache_, optCompleteServerCache_ = null) {\r\n        this.writes_ = writes_;\r\n        this.viewCache_ = viewCache_;\r\n        this.optCompleteServerCache_ = optCompleteServerCache_;\r\n    }\r\n    getCompleteChild(childKey) {\r\n        const node = this.viewCache_.eventCache;\r\n        if (node.isCompleteForChild(childKey)) {\r\n            return node.getNode().getImmediateChild(childKey);\r\n        }\r\n        else {\r\n            const serverNode = this.optCompleteServerCache_ != null\r\n                ? new CacheNode(this.optCompleteServerCache_, true, false)\r\n                : this.viewCache_.serverCache;\r\n            return writeTreeRefCalcCompleteChild(this.writes_, childKey, serverNode);\r\n        }\r\n    }\r\n    getChildAfterChild(index, child, reverse) {\r\n        const completeServerData = this.optCompleteServerCache_ != null\r\n            ? this.optCompleteServerCache_\r\n            : viewCacheGetCompleteServerSnap(this.viewCache_);\r\n        const nodes = writeTreeRefCalcIndexedSlice(this.writes_, completeServerData, child, 1, reverse, index);\r\n        if (nodes.length === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return nodes[0];\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction newViewProcessor(filter) {\r\n    return { filter };\r\n}\r\nfunction viewProcessorAssertIndexed(viewProcessor, viewCache) {\r\n    assert(viewCache.eventCache.getNode().isIndexed(viewProcessor.filter.getIndex()), 'Event snap not indexed');\r\n    assert(viewCache.serverCache.getNode().isIndexed(viewProcessor.filter.getIndex()), 'Server snap not indexed');\r\n}\r\nfunction viewProcessorApplyOperation(viewProcessor, oldViewCache, operation, writesCache, completeCache) {\r\n    const accumulator = new ChildChangeAccumulator();\r\n    let newViewCache, filterServerNode;\r\n    if (operation.type === OperationType.OVERWRITE) {\r\n        const overwrite = operation;\r\n        if (overwrite.source.fromUser) {\r\n            newViewCache = viewProcessorApplyUserOverwrite(viewProcessor, oldViewCache, overwrite.path, overwrite.snap, writesCache, completeCache, accumulator);\r\n        }\r\n        else {\r\n            assert(overwrite.source.fromServer, 'Unknown source.');\r\n            // We filter the node if it's a tagged update or the node has been previously filtered  and the\r\n            // update is not at the root in which case it is ok (and necessary) to mark the node unfiltered\r\n            // again\r\n            filterServerNode =\r\n                overwrite.source.tagged ||\r\n                    (oldViewCache.serverCache.isFiltered() && !pathIsEmpty(overwrite.path));\r\n            newViewCache = viewProcessorApplyServerOverwrite(viewProcessor, oldViewCache, overwrite.path, overwrite.snap, writesCache, completeCache, filterServerNode, accumulator);\r\n        }\r\n    }\r\n    else if (operation.type === OperationType.MERGE) {\r\n        const merge = operation;\r\n        if (merge.source.fromUser) {\r\n            newViewCache = viewProcessorApplyUserMerge(viewProcessor, oldViewCache, merge.path, merge.children, writesCache, completeCache, accumulator);\r\n        }\r\n        else {\r\n            assert(merge.source.fromServer, 'Unknown source.');\r\n            // We filter the node if it's a tagged update or the node has been previously filtered\r\n            filterServerNode =\r\n                merge.source.tagged || oldViewCache.serverCache.isFiltered();\r\n            newViewCache = viewProcessorApplyServerMerge(viewProcessor, oldViewCache, merge.path, merge.children, writesCache, completeCache, filterServerNode, accumulator);\r\n        }\r\n    }\r\n    else if (operation.type === OperationType.ACK_USER_WRITE) {\r\n        const ackUserWrite = operation;\r\n        if (!ackUserWrite.revert) {\r\n            newViewCache = viewProcessorAckUserWrite(viewProcessor, oldViewCache, ackUserWrite.path, ackUserWrite.affectedTree, writesCache, completeCache, accumulator);\r\n        }\r\n        else {\r\n            newViewCache = viewProcessorRevertUserWrite(viewProcessor, oldViewCache, ackUserWrite.path, writesCache, completeCache, accumulator);\r\n        }\r\n    }\r\n    else if (operation.type === OperationType.LISTEN_COMPLETE) {\r\n        newViewCache = viewProcessorListenComplete(viewProcessor, oldViewCache, operation.path, writesCache, accumulator);\r\n    }\r\n    else {\r\n        throw assertionError('Unknown operation type: ' + operation.type);\r\n    }\r\n    const changes = accumulator.getChanges();\r\n    viewProcessorMaybeAddValueEvent(oldViewCache, newViewCache, changes);\r\n    return { viewCache: newViewCache, changes };\r\n}\r\nfunction viewProcessorMaybeAddValueEvent(oldViewCache, newViewCache, accumulator) {\r\n    const eventSnap = newViewCache.eventCache;\r\n    if (eventSnap.isFullyInitialized()) {\r\n        const isLeafOrEmpty = eventSnap.getNode().isLeafNode() || eventSnap.getNode().isEmpty();\r\n        const oldCompleteSnap = viewCacheGetCompleteEventSnap(oldViewCache);\r\n        if (accumulator.length > 0 ||\r\n            !oldViewCache.eventCache.isFullyInitialized() ||\r\n            (isLeafOrEmpty && !eventSnap.getNode().equals(oldCompleteSnap)) ||\r\n            !eventSnap.getNode().getPriority().equals(oldCompleteSnap.getPriority())) {\r\n            accumulator.push(changeValue(viewCacheGetCompleteEventSnap(newViewCache)));\r\n        }\r\n    }\r\n}\r\nfunction viewProcessorGenerateEventCacheAfterServerEvent(viewProcessor, viewCache, changePath, writesCache, source, accumulator) {\r\n    const oldEventSnap = viewCache.eventCache;\r\n    if (writeTreeRefShadowingWrite(writesCache, changePath) != null) {\r\n        // we have a shadowing write, ignore changes\r\n        return viewCache;\r\n    }\r\n    else {\r\n        let newEventCache, serverNode;\r\n        if (pathIsEmpty(changePath)) {\r\n            // TODO: figure out how this plays with \"sliding ack windows\"\r\n            assert(viewCache.serverCache.isFullyInitialized(), 'If change path is empty, we must have complete server data');\r\n            if (viewCache.serverCache.isFiltered()) {\r\n                // We need to special case this, because we need to only apply writes to complete children, or\r\n                // we might end up raising events for incomplete children. If the server data is filtered deep\r\n                // writes cannot be guaranteed to be complete\r\n                const serverCache = viewCacheGetCompleteServerSnap(viewCache);\r\n                const completeChildren = serverCache instanceof ChildrenNode\r\n                    ? serverCache\r\n                    : ChildrenNode.EMPTY_NODE;\r\n                const completeEventChildren = writeTreeRefCalcCompleteEventChildren(writesCache, completeChildren);\r\n                newEventCache = viewProcessor.filter.updateFullNode(viewCache.eventCache.getNode(), completeEventChildren, accumulator);\r\n            }\r\n            else {\r\n                const completeNode = writeTreeRefCalcCompleteEventCache(writesCache, viewCacheGetCompleteServerSnap(viewCache));\r\n                newEventCache = viewProcessor.filter.updateFullNode(viewCache.eventCache.getNode(), completeNode, accumulator);\r\n            }\r\n        }\r\n        else {\r\n            const childKey = pathGetFront(changePath);\r\n            if (childKey === '.priority') {\r\n                assert(pathGetLength(changePath) === 1, \"Can't have a priority with additional path components\");\r\n                const oldEventNode = oldEventSnap.getNode();\r\n                serverNode = viewCache.serverCache.getNode();\r\n                // we might have overwrites for this priority\r\n                const updatedPriority = writeTreeRefCalcEventCacheAfterServerOverwrite(writesCache, changePath, oldEventNode, serverNode);\r\n                if (updatedPriority != null) {\r\n                    newEventCache = viewProcessor.filter.updatePriority(oldEventNode, updatedPriority);\r\n                }\r\n                else {\r\n                    // priority didn't change, keep old node\r\n                    newEventCache = oldEventSnap.getNode();\r\n                }\r\n            }\r\n            else {\r\n                const childChangePath = pathPopFront(changePath);\r\n                // update child\r\n                let newEventChild;\r\n                if (oldEventSnap.isCompleteForChild(childKey)) {\r\n                    serverNode = viewCache.serverCache.getNode();\r\n                    const eventChildUpdate = writeTreeRefCalcEventCacheAfterServerOverwrite(writesCache, changePath, oldEventSnap.getNode(), serverNode);\r\n                    if (eventChildUpdate != null) {\r\n                        newEventChild = oldEventSnap\r\n                            .getNode()\r\n                            .getImmediateChild(childKey)\r\n                            .updateChild(childChangePath, eventChildUpdate);\r\n                    }\r\n                    else {\r\n                        // Nothing changed, just keep the old child\r\n                        newEventChild = oldEventSnap.getNode().getImmediateChild(childKey);\r\n                    }\r\n                }\r\n                else {\r\n                    newEventChild = writeTreeRefCalcCompleteChild(writesCache, childKey, viewCache.serverCache);\r\n                }\r\n                if (newEventChild != null) {\r\n                    newEventCache = viewProcessor.filter.updateChild(oldEventSnap.getNode(), childKey, newEventChild, childChangePath, source, accumulator);\r\n                }\r\n                else {\r\n                    // no complete child available or no change\r\n                    newEventCache = oldEventSnap.getNode();\r\n                }\r\n            }\r\n        }\r\n        return viewCacheUpdateEventSnap(viewCache, newEventCache, oldEventSnap.isFullyInitialized() || pathIsEmpty(changePath), viewProcessor.filter.filtersNodes());\r\n    }\r\n}\r\nfunction viewProcessorApplyServerOverwrite(viewProcessor, oldViewCache, changePath, changedSnap, writesCache, completeCache, filterServerNode, accumulator) {\r\n    const oldServerSnap = oldViewCache.serverCache;\r\n    let newServerCache;\r\n    const serverFilter = filterServerNode\r\n        ? viewProcessor.filter\r\n        : viewProcessor.filter.getIndexedFilter();\r\n    if (pathIsEmpty(changePath)) {\r\n        newServerCache = serverFilter.updateFullNode(oldServerSnap.getNode(), changedSnap, null);\r\n    }\r\n    else if (serverFilter.filtersNodes() && !oldServerSnap.isFiltered()) {\r\n        // we want to filter the server node, but we didn't filter the server node yet, so simulate a full update\r\n        const newServerNode = oldServerSnap\r\n            .getNode()\r\n            .updateChild(changePath, changedSnap);\r\n        newServerCache = serverFilter.updateFullNode(oldServerSnap.getNode(), newServerNode, null);\r\n    }\r\n    else {\r\n        const childKey = pathGetFront(changePath);\r\n        if (!oldServerSnap.isCompleteForPath(changePath) &&\r\n            pathGetLength(changePath) > 1) {\r\n            // We don't update incomplete nodes with updates intended for other listeners\r\n            return oldViewCache;\r\n        }\r\n        const childChangePath = pathPopFront(changePath);\r\n        const childNode = oldServerSnap.getNode().getImmediateChild(childKey);\r\n        const newChildNode = childNode.updateChild(childChangePath, changedSnap);\r\n        if (childKey === '.priority') {\r\n            newServerCache = serverFilter.updatePriority(oldServerSnap.getNode(), newChildNode);\r\n        }\r\n        else {\r\n            newServerCache = serverFilter.updateChild(oldServerSnap.getNode(), childKey, newChildNode, childChangePath, NO_COMPLETE_CHILD_SOURCE, null);\r\n        }\r\n    }\r\n    const newViewCache = viewCacheUpdateServerSnap(oldViewCache, newServerCache, oldServerSnap.isFullyInitialized() || pathIsEmpty(changePath), serverFilter.filtersNodes());\r\n    const source = new WriteTreeCompleteChildSource(writesCache, newViewCache, completeCache);\r\n    return viewProcessorGenerateEventCacheAfterServerEvent(viewProcessor, newViewCache, changePath, writesCache, source, accumulator);\r\n}\r\nfunction viewProcessorApplyUserOverwrite(viewProcessor, oldViewCache, changePath, changedSnap, writesCache, completeCache, accumulator) {\r\n    const oldEventSnap = oldViewCache.eventCache;\r\n    let newViewCache, newEventCache;\r\n    const source = new WriteTreeCompleteChildSource(writesCache, oldViewCache, completeCache);\r\n    if (pathIsEmpty(changePath)) {\r\n        newEventCache = viewProcessor.filter.updateFullNode(oldViewCache.eventCache.getNode(), changedSnap, accumulator);\r\n        newViewCache = viewCacheUpdateEventSnap(oldViewCache, newEventCache, true, viewProcessor.filter.filtersNodes());\r\n    }\r\n    else {\r\n        const childKey = pathGetFront(changePath);\r\n        if (childKey === '.priority') {\r\n            newEventCache = viewProcessor.filter.updatePriority(oldViewCache.eventCache.getNode(), changedSnap);\r\n            newViewCache = viewCacheUpdateEventSnap(oldViewCache, newEventCache, oldEventSnap.isFullyInitialized(), oldEventSnap.isFiltered());\r\n        }\r\n        else {\r\n            const childChangePath = pathPopFront(changePath);\r\n            const oldChild = oldEventSnap.getNode().getImmediateChild(childKey);\r\n            let newChild;\r\n            if (pathIsEmpty(childChangePath)) {\r\n                // Child overwrite, we can replace the child\r\n                newChild = changedSnap;\r\n            }\r\n            else {\r\n                const childNode = source.getCompleteChild(childKey);\r\n                if (childNode != null) {\r\n                    if (pathGetBack(childChangePath) === '.priority' &&\r\n                        childNode.getChild(pathParent(childChangePath)).isEmpty()) {\r\n                        // This is a priority update on an empty node. If this node exists on the server, the\r\n                        // server will send down the priority in the update, so ignore for now\r\n                        newChild = childNode;\r\n                    }\r\n                    else {\r\n                        newChild = childNode.updateChild(childChangePath, changedSnap);\r\n                    }\r\n                }\r\n                else {\r\n                    // There is no complete child node available\r\n                    newChild = ChildrenNode.EMPTY_NODE;\r\n                }\r\n            }\r\n            if (!oldChild.equals(newChild)) {\r\n                const newEventSnap = viewProcessor.filter.updateChild(oldEventSnap.getNode(), childKey, newChild, childChangePath, source, accumulator);\r\n                newViewCache = viewCacheUpdateEventSnap(oldViewCache, newEventSnap, oldEventSnap.isFullyInitialized(), viewProcessor.filter.filtersNodes());\r\n            }\r\n            else {\r\n                newViewCache = oldViewCache;\r\n            }\r\n        }\r\n    }\r\n    return newViewCache;\r\n}\r\nfunction viewProcessorCacheHasChild(viewCache, childKey) {\r\n    return viewCache.eventCache.isCompleteForChild(childKey);\r\n}\r\nfunction viewProcessorApplyUserMerge(viewProcessor, viewCache, path, changedChildren, writesCache, serverCache, accumulator) {\r\n    // HACK: In the case of a limit query, there may be some changes that bump things out of the\r\n    // window leaving room for new items.  It's important we process these changes first, so we\r\n    // iterate the changes twice, first processing any that affect items currently in view.\r\n    // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\r\n    // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\r\n    // not the other.\r\n    let curViewCache = viewCache;\r\n    changedChildren.foreach((relativePath, childNode) => {\r\n        const writePath = pathChild(path, relativePath);\r\n        if (viewProcessorCacheHasChild(viewCache, pathGetFront(writePath))) {\r\n            curViewCache = viewProcessorApplyUserOverwrite(viewProcessor, curViewCache, writePath, childNode, writesCache, serverCache, accumulator);\r\n        }\r\n    });\r\n    changedChildren.foreach((relativePath, childNode) => {\r\n        const writePath = pathChild(path, relativePath);\r\n        if (!viewProcessorCacheHasChild(viewCache, pathGetFront(writePath))) {\r\n            curViewCache = viewProcessorApplyUserOverwrite(viewProcessor, curViewCache, writePath, childNode, writesCache, serverCache, accumulator);\r\n        }\r\n    });\r\n    return curViewCache;\r\n}\r\nfunction viewProcessorApplyMerge(viewProcessor, node, merge) {\r\n    merge.foreach((relativePath, childNode) => {\r\n        node = node.updateChild(relativePath, childNode);\r\n    });\r\n    return node;\r\n}\r\nfunction viewProcessorApplyServerMerge(viewProcessor, viewCache, path, changedChildren, writesCache, serverCache, filterServerNode, accumulator) {\r\n    // If we don't have a cache yet, this merge was intended for a previously listen in the same location. Ignore it and\r\n    // wait for the complete data update coming soon.\r\n    if (viewCache.serverCache.getNode().isEmpty() &&\r\n        !viewCache.serverCache.isFullyInitialized()) {\r\n        return viewCache;\r\n    }\r\n    // HACK: In the case of a limit query, there may be some changes that bump things out of the\r\n    // window leaving room for new items.  It's important we process these changes first, so we\r\n    // iterate the changes twice, first processing any that affect items currently in view.\r\n    // TODO: I consider an item \"in view\" if cacheHasChild is true, which checks both the server\r\n    // and event snap.  I'm not sure if this will result in edge cases when a child is in one but\r\n    // not the other.\r\n    let curViewCache = viewCache;\r\n    let viewMergeTree;\r\n    if (pathIsEmpty(path)) {\r\n        viewMergeTree = changedChildren;\r\n    }\r\n    else {\r\n        viewMergeTree = new ImmutableTree(null).setTree(path, changedChildren);\r\n    }\r\n    const serverNode = viewCache.serverCache.getNode();\r\n    viewMergeTree.children.inorderTraversal((childKey, childTree) => {\r\n        if (serverNode.hasChild(childKey)) {\r\n            const serverChild = viewCache.serverCache\r\n                .getNode()\r\n                .getImmediateChild(childKey);\r\n            const newChild = viewProcessorApplyMerge(viewProcessor, serverChild, childTree);\r\n            curViewCache = viewProcessorApplyServerOverwrite(viewProcessor, curViewCache, new Path(childKey), newChild, writesCache, serverCache, filterServerNode, accumulator);\r\n        }\r\n    });\r\n    viewMergeTree.children.inorderTraversal((childKey, childMergeTree) => {\r\n        const isUnknownDeepMerge = !viewCache.serverCache.isCompleteForChild(childKey) &&\r\n            childMergeTree.value === null;\r\n        if (!serverNode.hasChild(childKey) && !isUnknownDeepMerge) {\r\n            const serverChild = viewCache.serverCache\r\n                .getNode()\r\n                .getImmediateChild(childKey);\r\n            const newChild = viewProcessorApplyMerge(viewProcessor, serverChild, childMergeTree);\r\n            curViewCache = viewProcessorApplyServerOverwrite(viewProcessor, curViewCache, new Path(childKey), newChild, writesCache, serverCache, filterServerNode, accumulator);\r\n        }\r\n    });\r\n    return curViewCache;\r\n}\r\nfunction viewProcessorAckUserWrite(viewProcessor, viewCache, ackPath, affectedTree, writesCache, completeCache, accumulator) {\r\n    if (writeTreeRefShadowingWrite(writesCache, ackPath) != null) {\r\n        return viewCache;\r\n    }\r\n    // Only filter server node if it is currently filtered\r\n    const filterServerNode = viewCache.serverCache.isFiltered();\r\n    // Essentially we'll just get our existing server cache for the affected paths and re-apply it as a server update\r\n    // now that it won't be shadowed.\r\n    const serverCache = viewCache.serverCache;\r\n    if (affectedTree.value != null) {\r\n        // This is an overwrite.\r\n        if ((pathIsEmpty(ackPath) && serverCache.isFullyInitialized()) ||\r\n            serverCache.isCompleteForPath(ackPath)) {\r\n            return viewProcessorApplyServerOverwrite(viewProcessor, viewCache, ackPath, serverCache.getNode().getChild(ackPath), writesCache, completeCache, filterServerNode, accumulator);\r\n        }\r\n        else if (pathIsEmpty(ackPath)) {\r\n            // This is a goofy edge case where we are acking data at this location but don't have full data.  We\r\n            // should just re-apply whatever we have in our cache as a merge.\r\n            let changedChildren = new ImmutableTree(null);\r\n            serverCache.getNode().forEachChild(KEY_INDEX, (name, node) => {\r\n                changedChildren = changedChildren.set(new Path(name), node);\r\n            });\r\n            return viewProcessorApplyServerMerge(viewProcessor, viewCache, ackPath, changedChildren, writesCache, completeCache, filterServerNode, accumulator);\r\n        }\r\n        else {\r\n            return viewCache;\r\n        }\r\n    }\r\n    else {\r\n        // This is a merge.\r\n        let changedChildren = new ImmutableTree(null);\r\n        affectedTree.foreach((mergePath, value) => {\r\n            const serverCachePath = pathChild(ackPath, mergePath);\r\n            if (serverCache.isCompleteForPath(serverCachePath)) {\r\n                changedChildren = changedChildren.set(mergePath, serverCache.getNode().getChild(serverCachePath));\r\n            }\r\n        });\r\n        return viewProcessorApplyServerMerge(viewProcessor, viewCache, ackPath, changedChildren, writesCache, completeCache, filterServerNode, accumulator);\r\n    }\r\n}\r\nfunction viewProcessorListenComplete(viewProcessor, viewCache, path, writesCache, accumulator) {\r\n    const oldServerNode = viewCache.serverCache;\r\n    const newViewCache = viewCacheUpdateServerSnap(viewCache, oldServerNode.getNode(), oldServerNode.isFullyInitialized() || pathIsEmpty(path), oldServerNode.isFiltered());\r\n    return viewProcessorGenerateEventCacheAfterServerEvent(viewProcessor, newViewCache, path, writesCache, NO_COMPLETE_CHILD_SOURCE, accumulator);\r\n}\r\nfunction viewProcessorRevertUserWrite(viewProcessor, viewCache, path, writesCache, completeServerCache, accumulator) {\r\n    let complete;\r\n    if (writeTreeRefShadowingWrite(writesCache, path) != null) {\r\n        return viewCache;\r\n    }\r\n    else {\r\n        const source = new WriteTreeCompleteChildSource(writesCache, viewCache, completeServerCache);\r\n        const oldEventCache = viewCache.eventCache.getNode();\r\n        let newEventCache;\r\n        if (pathIsEmpty(path) || pathGetFront(path) === '.priority') {\r\n            let newNode;\r\n            if (viewCache.serverCache.isFullyInitialized()) {\r\n                newNode = writeTreeRefCalcCompleteEventCache(writesCache, viewCacheGetCompleteServerSnap(viewCache));\r\n            }\r\n            else {\r\n                const serverChildren = viewCache.serverCache.getNode();\r\n                assert(serverChildren instanceof ChildrenNode, 'serverChildren would be complete if leaf node');\r\n                newNode = writeTreeRefCalcCompleteEventChildren(writesCache, serverChildren);\r\n            }\r\n            newNode = newNode;\r\n            newEventCache = viewProcessor.filter.updateFullNode(oldEventCache, newNode, accumulator);\r\n        }\r\n        else {\r\n            const childKey = pathGetFront(path);\r\n            let newChild = writeTreeRefCalcCompleteChild(writesCache, childKey, viewCache.serverCache);\r\n            if (newChild == null &&\r\n                viewCache.serverCache.isCompleteForChild(childKey)) {\r\n                newChild = oldEventCache.getImmediateChild(childKey);\r\n            }\r\n            if (newChild != null) {\r\n                newEventCache = viewProcessor.filter.updateChild(oldEventCache, childKey, newChild, pathPopFront(path), source, accumulator);\r\n            }\r\n            else if (viewCache.eventCache.getNode().hasChild(childKey)) {\r\n                // No complete child available, delete the existing one, if any\r\n                newEventCache = viewProcessor.filter.updateChild(oldEventCache, childKey, ChildrenNode.EMPTY_NODE, pathPopFront(path), source, accumulator);\r\n            }\r\n            else {\r\n                newEventCache = oldEventCache;\r\n            }\r\n            if (newEventCache.isEmpty() &&\r\n                viewCache.serverCache.isFullyInitialized()) {\r\n                // We might have reverted all child writes. Maybe the old event was a leaf node\r\n                complete = writeTreeRefCalcCompleteEventCache(writesCache, viewCacheGetCompleteServerSnap(viewCache));\r\n                if (complete.isLeafNode()) {\r\n                    newEventCache = viewProcessor.filter.updateFullNode(newEventCache, complete, accumulator);\r\n                }\r\n            }\r\n        }\r\n        complete =\r\n            viewCache.serverCache.isFullyInitialized() ||\r\n                writeTreeRefShadowingWrite(writesCache, newEmptyPath()) != null;\r\n        return viewCacheUpdateEventSnap(viewCache, newEventCache, complete, viewProcessor.filter.filtersNodes());\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A view represents a specific location and query that has 1 or more event registrations.\r\n *\r\n * It does several things:\r\n *  - Maintains the list of event registrations for this location/query.\r\n *  - Maintains a cache of the data visible for this location/query.\r\n *  - Applies new operations (via applyOperation), updates the cache, and based on the event\r\n *    registrations returns the set of events to be raised.\r\n */\r\nclass View {\r\n    constructor(query_, initialViewCache) {\r\n        this.query_ = query_;\r\n        this.eventRegistrations_ = [];\r\n        const params = this.query_._queryParams;\r\n        const indexFilter = new IndexedFilter(params.getIndex());\r\n        const filter = queryParamsGetNodeFilter(params);\r\n        this.processor_ = newViewProcessor(filter);\r\n        const initialServerCache = initialViewCache.serverCache;\r\n        const initialEventCache = initialViewCache.eventCache;\r\n        // Don't filter server node with other filter than index, wait for tagged listen\r\n        const serverSnap = indexFilter.updateFullNode(ChildrenNode.EMPTY_NODE, initialServerCache.getNode(), null);\r\n        const eventSnap = filter.updateFullNode(ChildrenNode.EMPTY_NODE, initialEventCache.getNode(), null);\r\n        const newServerCache = new CacheNode(serverSnap, initialServerCache.isFullyInitialized(), indexFilter.filtersNodes());\r\n        const newEventCache = new CacheNode(eventSnap, initialEventCache.isFullyInitialized(), filter.filtersNodes());\r\n        this.viewCache_ = newViewCache(newEventCache, newServerCache);\r\n        this.eventGenerator_ = new EventGenerator(this.query_);\r\n    }\r\n    get query() {\r\n        return this.query_;\r\n    }\r\n}\r\nfunction viewGetServerCache(view) {\r\n    return view.viewCache_.serverCache.getNode();\r\n}\r\nfunction viewGetCompleteNode(view) {\r\n    return viewCacheGetCompleteEventSnap(view.viewCache_);\r\n}\r\nfunction viewGetCompleteServerCache(view, path) {\r\n    const cache = viewCacheGetCompleteServerSnap(view.viewCache_);\r\n    if (cache) {\r\n        // If this isn't a \"loadsAllData\" view, then cache isn't actually a complete cache and\r\n        // we need to see if it contains the child we're interested in.\r\n        if (view.query._queryParams.loadsAllData() ||\r\n            (!pathIsEmpty(path) &&\r\n                !cache.getImmediateChild(pathGetFront(path)).isEmpty())) {\r\n            return cache.getChild(path);\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction viewIsEmpty(view) {\r\n    return view.eventRegistrations_.length === 0;\r\n}\r\nfunction viewAddEventRegistration(view, eventRegistration) {\r\n    view.eventRegistrations_.push(eventRegistration);\r\n}\r\n/**\r\n * @param eventRegistration - If null, remove all callbacks.\r\n * @param cancelError - If a cancelError is provided, appropriate cancel events will be returned.\r\n * @returns Cancel events, if cancelError was provided.\r\n */\r\nfunction viewRemoveEventRegistration(view, eventRegistration, cancelError) {\r\n    const cancelEvents = [];\r\n    if (cancelError) {\r\n        assert(eventRegistration == null, 'A cancel should cancel all event registrations.');\r\n        const path = view.query._path;\r\n        view.eventRegistrations_.forEach(registration => {\r\n            const maybeEvent = registration.createCancelEvent(cancelError, path);\r\n            if (maybeEvent) {\r\n                cancelEvents.push(maybeEvent);\r\n            }\r\n        });\r\n    }\r\n    if (eventRegistration) {\r\n        let remaining = [];\r\n        for (let i = 0; i < view.eventRegistrations_.length; ++i) {\r\n            const existing = view.eventRegistrations_[i];\r\n            if (!existing.matches(eventRegistration)) {\r\n                remaining.push(existing);\r\n            }\r\n            else if (eventRegistration.hasAnyCallback()) {\r\n                // We're removing just this one\r\n                remaining = remaining.concat(view.eventRegistrations_.slice(i + 1));\r\n                break;\r\n            }\r\n        }\r\n        view.eventRegistrations_ = remaining;\r\n    }\r\n    else {\r\n        view.eventRegistrations_ = [];\r\n    }\r\n    return cancelEvents;\r\n}\r\n/**\r\n * Applies the given Operation, updates our cache, and returns the appropriate events.\r\n */\r\nfunction viewApplyOperation(view, operation, writesCache, completeServerCache) {\r\n    if (operation.type === OperationType.MERGE &&\r\n        operation.source.queryId !== null) {\r\n        assert(viewCacheGetCompleteServerSnap(view.viewCache_), 'We should always have a full cache before handling merges');\r\n        assert(viewCacheGetCompleteEventSnap(view.viewCache_), 'Missing event cache, even though we have a server cache');\r\n    }\r\n    const oldViewCache = view.viewCache_;\r\n    const result = viewProcessorApplyOperation(view.processor_, oldViewCache, operation, writesCache, completeServerCache);\r\n    viewProcessorAssertIndexed(view.processor_, result.viewCache);\r\n    assert(result.viewCache.serverCache.isFullyInitialized() ||\r\n        !oldViewCache.serverCache.isFullyInitialized(), 'Once a server snap is complete, it should never go back');\r\n    view.viewCache_ = result.viewCache;\r\n    return viewGenerateEventsForChanges_(view, result.changes, result.viewCache.eventCache.getNode(), null);\r\n}\r\nfunction viewGetInitialEvents(view, registration) {\r\n    const eventSnap = view.viewCache_.eventCache;\r\n    const initialChanges = [];\r\n    if (!eventSnap.getNode().isLeafNode()) {\r\n        const eventNode = eventSnap.getNode();\r\n        eventNode.forEachChild(PRIORITY_INDEX, (key, childNode) => {\r\n            initialChanges.push(changeChildAdded(key, childNode));\r\n        });\r\n    }\r\n    if (eventSnap.isFullyInitialized()) {\r\n        initialChanges.push(changeValue(eventSnap.getNode()));\r\n    }\r\n    return viewGenerateEventsForChanges_(view, initialChanges, eventSnap.getNode(), registration);\r\n}\r\nfunction viewGenerateEventsForChanges_(view, changes, eventCache, eventRegistration) {\r\n    const registrations = eventRegistration\r\n        ? [eventRegistration]\r\n        : view.eventRegistrations_;\r\n    return eventGeneratorGenerateEventsForChanges(view.eventGenerator_, changes, eventCache, registrations);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nlet referenceConstructor$1;\r\n/**\r\n * SyncPoint represents a single location in a SyncTree with 1 or more event registrations, meaning we need to\r\n * maintain 1 or more Views at this location to cache server data and raise appropriate events for server changes\r\n * and user writes (set, transaction, update).\r\n *\r\n * It's responsible for:\r\n *  - Maintaining the set of 1 or more views necessary at this location (a SyncPoint with 0 views should be removed).\r\n *  - Proxying user / server operations to the views as appropriate (i.e. applyServerOverwrite,\r\n *    applyUserOverwrite, etc.)\r\n */\r\nclass SyncPoint {\r\n    constructor() {\r\n        /**\r\n         * The Views being tracked at this location in the tree, stored as a map where the key is a\r\n         * queryId and the value is the View for that query.\r\n         *\r\n         * NOTE: This list will be quite small (usually 1, but perhaps 2 or 3; any more is an odd use case).\r\n         */\r\n        this.views = new Map();\r\n    }\r\n}\r\nfunction syncPointSetReferenceConstructor(val) {\r\n    assert(!referenceConstructor$1, '__referenceConstructor has already been defined');\r\n    referenceConstructor$1 = val;\r\n}\r\nfunction syncPointGetReferenceConstructor() {\r\n    assert(referenceConstructor$1, 'Reference.ts has not been loaded');\r\n    return referenceConstructor$1;\r\n}\r\nfunction syncPointIsEmpty(syncPoint) {\r\n    return syncPoint.views.size === 0;\r\n}\r\nfunction syncPointApplyOperation(syncPoint, operation, writesCache, optCompleteServerCache) {\r\n    const queryId = operation.source.queryId;\r\n    if (queryId !== null) {\r\n        const view = syncPoint.views.get(queryId);\r\n        assert(view != null, 'SyncTree gave us an op for an invalid query.');\r\n        return viewApplyOperation(view, operation, writesCache, optCompleteServerCache);\r\n    }\r\n    else {\r\n        let events = [];\r\n        for (const view of syncPoint.views.values()) {\r\n            events = events.concat(viewApplyOperation(view, operation, writesCache, optCompleteServerCache));\r\n        }\r\n        return events;\r\n    }\r\n}\r\n/**\r\n * Get a view for the specified query.\r\n *\r\n * @param query - The query to return a view for\r\n * @param writesCache\r\n * @param serverCache\r\n * @param serverCacheComplete\r\n * @returns Events to raise.\r\n */\r\nfunction syncPointGetView(syncPoint, query, writesCache, serverCache, serverCacheComplete) {\r\n    const queryId = query._queryIdentifier;\r\n    const view = syncPoint.views.get(queryId);\r\n    if (!view) {\r\n        // TODO: make writesCache take flag for complete server node\r\n        let eventCache = writeTreeRefCalcCompleteEventCache(writesCache, serverCacheComplete ? serverCache : null);\r\n        let eventCacheComplete = false;\r\n        if (eventCache) {\r\n            eventCacheComplete = true;\r\n        }\r\n        else if (serverCache instanceof ChildrenNode) {\r\n            eventCache = writeTreeRefCalcCompleteEventChildren(writesCache, serverCache);\r\n            eventCacheComplete = false;\r\n        }\r\n        else {\r\n            eventCache = ChildrenNode.EMPTY_NODE;\r\n            eventCacheComplete = false;\r\n        }\r\n        const viewCache = newViewCache(new CacheNode(eventCache, eventCacheComplete, false), new CacheNode(serverCache, serverCacheComplete, false));\r\n        return new View(query, viewCache);\r\n    }\r\n    return view;\r\n}\r\n/**\r\n * Add an event callback for the specified query.\r\n *\r\n * @param query\r\n * @param eventRegistration\r\n * @param writesCache\r\n * @param serverCache - Complete server cache, if we have it.\r\n * @param serverCacheComplete\r\n * @returns Events to raise.\r\n */\r\nfunction syncPointAddEventRegistration(syncPoint, query, eventRegistration, writesCache, serverCache, serverCacheComplete) {\r\n    const view = syncPointGetView(syncPoint, query, writesCache, serverCache, serverCacheComplete);\r\n    if (!syncPoint.views.has(query._queryIdentifier)) {\r\n        syncPoint.views.set(query._queryIdentifier, view);\r\n    }\r\n    // This is guaranteed to exist now, we just created anything that was missing\r\n    viewAddEventRegistration(view, eventRegistration);\r\n    return viewGetInitialEvents(view, eventRegistration);\r\n}\r\n/**\r\n * Remove event callback(s).  Return cancelEvents if a cancelError is specified.\r\n *\r\n * If query is the default query, we'll check all views for the specified eventRegistration.\r\n * If eventRegistration is null, we'll remove all callbacks for the specified view(s).\r\n *\r\n * @param eventRegistration - If null, remove all callbacks.\r\n * @param cancelError - If a cancelError is provided, appropriate cancel events will be returned.\r\n * @returns removed queries and any cancel events\r\n */\r\nfunction syncPointRemoveEventRegistration(syncPoint, query, eventRegistration, cancelError) {\r\n    const queryId = query._queryIdentifier;\r\n    const removed = [];\r\n    let cancelEvents = [];\r\n    const hadCompleteView = syncPointHasCompleteView(syncPoint);\r\n    if (queryId === 'default') {\r\n        // When you do ref.off(...), we search all views for the registration to remove.\r\n        for (const [viewQueryId, view] of syncPoint.views.entries()) {\r\n            cancelEvents = cancelEvents.concat(viewRemoveEventRegistration(view, eventRegistration, cancelError));\r\n            if (viewIsEmpty(view)) {\r\n                syncPoint.views.delete(viewQueryId);\r\n                // We'll deal with complete views later.\r\n                if (!view.query._queryParams.loadsAllData()) {\r\n                    removed.push(view.query);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // remove the callback from the specific view.\r\n        const view = syncPoint.views.get(queryId);\r\n        if (view) {\r\n            cancelEvents = cancelEvents.concat(viewRemoveEventRegistration(view, eventRegistration, cancelError));\r\n            if (viewIsEmpty(view)) {\r\n                syncPoint.views.delete(queryId);\r\n                // We'll deal with complete views later.\r\n                if (!view.query._queryParams.loadsAllData()) {\r\n                    removed.push(view.query);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (hadCompleteView && !syncPointHasCompleteView(syncPoint)) {\r\n        // We removed our last complete view.\r\n        removed.push(new (syncPointGetReferenceConstructor())(query._repo, query._path));\r\n    }\r\n    return { removed, events: cancelEvents };\r\n}\r\nfunction syncPointGetQueryViews(syncPoint) {\r\n    const result = [];\r\n    for (const view of syncPoint.views.values()) {\r\n        if (!view.query._queryParams.loadsAllData()) {\r\n            result.push(view);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * @param path - The path to the desired complete snapshot\r\n * @returns A complete cache, if it exists\r\n */\r\nfunction syncPointGetCompleteServerCache(syncPoint, path) {\r\n    let serverCache = null;\r\n    for (const view of syncPoint.views.values()) {\r\n        serverCache = serverCache || viewGetCompleteServerCache(view, path);\r\n    }\r\n    return serverCache;\r\n}\r\nfunction syncPointViewForQuery(syncPoint, query) {\r\n    const params = query._queryParams;\r\n    if (params.loadsAllData()) {\r\n        return syncPointGetCompleteView(syncPoint);\r\n    }\r\n    else {\r\n        const queryId = query._queryIdentifier;\r\n        return syncPoint.views.get(queryId);\r\n    }\r\n}\r\nfunction syncPointViewExistsForQuery(syncPoint, query) {\r\n    return syncPointViewForQuery(syncPoint, query) != null;\r\n}\r\nfunction syncPointHasCompleteView(syncPoint) {\r\n    return syncPointGetCompleteView(syncPoint) != null;\r\n}\r\nfunction syncPointGetCompleteView(syncPoint) {\r\n    for (const view of syncPoint.views.values()) {\r\n        if (view.query._queryParams.loadsAllData()) {\r\n            return view;\r\n        }\r\n    }\r\n    return null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nlet referenceConstructor;\r\nfunction syncTreeSetReferenceConstructor(val) {\r\n    assert(!referenceConstructor, '__referenceConstructor has already been defined');\r\n    referenceConstructor = val;\r\n}\r\nfunction syncTreeGetReferenceConstructor() {\r\n    assert(referenceConstructor, 'Reference.ts has not been loaded');\r\n    return referenceConstructor;\r\n}\r\n/**\r\n * Static tracker for next query tag.\r\n */\r\nlet syncTreeNextQueryTag_ = 1;\r\n/**\r\n * SyncTree is the central class for managing event callback registration, data caching, views\r\n * (query processing), and event generation.  There are typically two SyncTree instances for\r\n * each Repo, one for the normal Firebase data, and one for the .info data.\r\n *\r\n * It has a number of responsibilities, including:\r\n *  - Tracking all user event callbacks (registered via addEventRegistration() and removeEventRegistration()).\r\n *  - Applying and caching data changes for user set(), transaction(), and update() calls\r\n *    (applyUserOverwrite(), applyUserMerge()).\r\n *  - Applying and caching data changes for server data changes (applyServerOverwrite(),\r\n *    applyServerMerge()).\r\n *  - Generating user-facing events for server and user changes (all of the apply* methods\r\n *    return the set of events that need to be raised as a result).\r\n *  - Maintaining the appropriate set of server listens to ensure we are always subscribed\r\n *    to the correct set of paths and queries to satisfy the current set of user event\r\n *    callbacks (listens are started/stopped using the provided listenProvider).\r\n *\r\n * NOTE: Although SyncTree tracks event callbacks and calculates events to raise, the actual\r\n * events are returned to the caller rather than raised synchronously.\r\n *\r\n */\r\nclass SyncTree {\r\n    /**\r\n     * @param listenProvider_ - Used by SyncTree to start / stop listening\r\n     *   to server data.\r\n     */\r\n    constructor(listenProvider_) {\r\n        this.listenProvider_ = listenProvider_;\r\n        /**\r\n         * Tree of SyncPoints.  There's a SyncPoint at any location that has 1 or more views.\r\n         */\r\n        this.syncPointTree_ = new ImmutableTree(null);\r\n        /**\r\n         * A tree of all pending user writes (user-initiated set()'s, transaction()'s, update()'s, etc.).\r\n         */\r\n        this.pendingWriteTree_ = newWriteTree();\r\n        this.tagToQueryMap = new Map();\r\n        this.queryToTagMap = new Map();\r\n    }\r\n}\r\n/**\r\n * Apply the data changes for a user-generated set() or transaction() call.\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeApplyUserOverwrite(syncTree, path, newData, writeId, visible) {\r\n    // Record pending write.\r\n    writeTreeAddOverwrite(syncTree.pendingWriteTree_, path, newData, writeId, visible);\r\n    if (!visible) {\r\n        return [];\r\n    }\r\n    else {\r\n        return syncTreeApplyOperationToSyncPoints_(syncTree, new Overwrite(newOperationSourceUser(), path, newData));\r\n    }\r\n}\r\n/**\r\n * Apply the data from a user-generated update() call\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeApplyUserMerge(syncTree, path, changedChildren, writeId) {\r\n    // Record pending merge.\r\n    writeTreeAddMerge(syncTree.pendingWriteTree_, path, changedChildren, writeId);\r\n    const changeTree = ImmutableTree.fromObject(changedChildren);\r\n    return syncTreeApplyOperationToSyncPoints_(syncTree, new Merge(newOperationSourceUser(), path, changeTree));\r\n}\r\n/**\r\n * Acknowledge a pending user write that was previously registered with applyUserOverwrite() or applyUserMerge().\r\n *\r\n * @param revert - True if the given write failed and needs to be reverted\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeAckUserWrite(syncTree, writeId, revert = false) {\r\n    const write = writeTreeGetWrite(syncTree.pendingWriteTree_, writeId);\r\n    const needToReevaluate = writeTreeRemoveWrite(syncTree.pendingWriteTree_, writeId);\r\n    if (!needToReevaluate) {\r\n        return [];\r\n    }\r\n    else {\r\n        let affectedTree = new ImmutableTree(null);\r\n        if (write.snap != null) {\r\n            // overwrite\r\n            affectedTree = affectedTree.set(newEmptyPath(), true);\r\n        }\r\n        else {\r\n            each(write.children, (pathString) => {\r\n                affectedTree = affectedTree.set(new Path(pathString), true);\r\n            });\r\n        }\r\n        return syncTreeApplyOperationToSyncPoints_(syncTree, new AckUserWrite(write.path, affectedTree, revert));\r\n    }\r\n}\r\n/**\r\n * Apply new server data for the specified path..\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeApplyServerOverwrite(syncTree, path, newData) {\r\n    return syncTreeApplyOperationToSyncPoints_(syncTree, new Overwrite(newOperationSourceServer(), path, newData));\r\n}\r\n/**\r\n * Apply new server data to be merged in at the specified path.\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeApplyServerMerge(syncTree, path, changedChildren) {\r\n    const changeTree = ImmutableTree.fromObject(changedChildren);\r\n    return syncTreeApplyOperationToSyncPoints_(syncTree, new Merge(newOperationSourceServer(), path, changeTree));\r\n}\r\n/**\r\n * Apply a listen complete for a query\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeApplyListenComplete(syncTree, path) {\r\n    return syncTreeApplyOperationToSyncPoints_(syncTree, new ListenComplete(newOperationSourceServer(), path));\r\n}\r\n/**\r\n * Apply a listen complete for a tagged query\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeApplyTaggedListenComplete(syncTree, path, tag) {\r\n    const queryKey = syncTreeQueryKeyForTag_(syncTree, tag);\r\n    if (queryKey) {\r\n        const r = syncTreeParseQueryKey_(queryKey);\r\n        const queryPath = r.path, queryId = r.queryId;\r\n        const relativePath = newRelativePath(queryPath, path);\r\n        const op = new ListenComplete(newOperationSourceServerTaggedQuery(queryId), relativePath);\r\n        return syncTreeApplyTaggedOperation_(syncTree, queryPath, op);\r\n    }\r\n    else {\r\n        // We've already removed the query. No big deal, ignore the update\r\n        return [];\r\n    }\r\n}\r\n/**\r\n * Remove event callback(s).\r\n *\r\n * If query is the default query, we'll check all queries for the specified eventRegistration.\r\n * If eventRegistration is null, we'll remove all callbacks for the specified query/queries.\r\n *\r\n * @param eventRegistration - If null, all callbacks are removed.\r\n * @param cancelError - If a cancelError is provided, appropriate cancel events will be returned.\r\n * @param skipListenerDedup - When performing a `get()`, we don't add any new listeners, so no\r\n *  deduping needs to take place. This flag allows toggling of that behavior\r\n * @returns Cancel events, if cancelError was provided.\r\n */\r\nfunction syncTreeRemoveEventRegistration(syncTree, query, eventRegistration, cancelError, skipListenerDedup = false) {\r\n    // Find the syncPoint first. Then deal with whether or not it has matching listeners\r\n    const path = query._path;\r\n    const maybeSyncPoint = syncTree.syncPointTree_.get(path);\r\n    let cancelEvents = [];\r\n    // A removal on a default query affects all queries at that location. A removal on an indexed query, even one without\r\n    // other query constraints, does *not* affect all queries at that location. So this check must be for 'default', and\r\n    // not loadsAllData().\r\n    if (maybeSyncPoint &&\r\n        (query._queryIdentifier === 'default' ||\r\n            syncPointViewExistsForQuery(maybeSyncPoint, query))) {\r\n        const removedAndEvents = syncPointRemoveEventRegistration(maybeSyncPoint, query, eventRegistration, cancelError);\r\n        if (syncPointIsEmpty(maybeSyncPoint)) {\r\n            syncTree.syncPointTree_ = syncTree.syncPointTree_.remove(path);\r\n        }\r\n        const removed = removedAndEvents.removed;\r\n        cancelEvents = removedAndEvents.events;\r\n        if (!skipListenerDedup) {\r\n            /**\r\n             * We may have just removed one of many listeners and can short-circuit this whole process\r\n             * We may also not have removed a default listener, in which case all of the descendant listeners should already be\r\n             * properly set up.\r\n             */\r\n            // Since indexed queries can shadow if they don't have other query constraints, check for loadsAllData(), instead of\r\n            // queryId === 'default'\r\n            const removingDefault = -1 !==\r\n                removed.findIndex(query => {\r\n                    return query._queryParams.loadsAllData();\r\n                });\r\n            const covered = syncTree.syncPointTree_.findOnPath(path, (relativePath, parentSyncPoint) => syncPointHasCompleteView(parentSyncPoint));\r\n            if (removingDefault && !covered) {\r\n                const subtree = syncTree.syncPointTree_.subtree(path);\r\n                // There are potentially child listeners. Determine what if any listens we need to send before executing the\r\n                // removal\r\n                if (!subtree.isEmpty()) {\r\n                    // We need to fold over our subtree and collect the listeners to send\r\n                    const newViews = syncTreeCollectDistinctViewsForSubTree_(subtree);\r\n                    // Ok, we've collected all the listens we need. Set them up.\r\n                    for (let i = 0; i < newViews.length; ++i) {\r\n                        const view = newViews[i], newQuery = view.query;\r\n                        const listener = syncTreeCreateListenerForView_(syncTree, view);\r\n                        syncTree.listenProvider_.startListening(syncTreeQueryForListening_(newQuery), syncTreeTagForQuery(syncTree, newQuery), listener.hashFn, listener.onComplete);\r\n                    }\r\n                }\r\n                // Otherwise there's nothing below us, so nothing we need to start listening on\r\n            }\r\n            // If we removed anything and we're not covered by a higher up listen, we need to stop listening on this query\r\n            // The above block has us covered in terms of making sure we're set up on listens lower in the tree.\r\n            // Also, note that if we have a cancelError, it's already been removed at the provider level.\r\n            if (!covered && removed.length > 0 && !cancelError) {\r\n                // If we removed a default, then we weren't listening on any of the other queries here. Just cancel the one\r\n                // default. Otherwise, we need to iterate through and cancel each individual query\r\n                if (removingDefault) {\r\n                    // We don't tag default listeners\r\n                    const defaultTag = null;\r\n                    syncTree.listenProvider_.stopListening(syncTreeQueryForListening_(query), defaultTag);\r\n                }\r\n                else {\r\n                    removed.forEach((queryToRemove) => {\r\n                        const tagToRemove = syncTree.queryToTagMap.get(syncTreeMakeQueryKey_(queryToRemove));\r\n                        syncTree.listenProvider_.stopListening(syncTreeQueryForListening_(queryToRemove), tagToRemove);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        // Now, clear all of the tags we're tracking for the removed listens\r\n        syncTreeRemoveTags_(syncTree, removed);\r\n    }\r\n    return cancelEvents;\r\n}\r\n/**\r\n * Apply new server data for the specified tagged query.\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeApplyTaggedQueryOverwrite(syncTree, path, snap, tag) {\r\n    const queryKey = syncTreeQueryKeyForTag_(syncTree, tag);\r\n    if (queryKey != null) {\r\n        const r = syncTreeParseQueryKey_(queryKey);\r\n        const queryPath = r.path, queryId = r.queryId;\r\n        const relativePath = newRelativePath(queryPath, path);\r\n        const op = new Overwrite(newOperationSourceServerTaggedQuery(queryId), relativePath, snap);\r\n        return syncTreeApplyTaggedOperation_(syncTree, queryPath, op);\r\n    }\r\n    else {\r\n        // Query must have been removed already\r\n        return [];\r\n    }\r\n}\r\n/**\r\n * Apply server data to be merged in for the specified tagged query.\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeApplyTaggedQueryMerge(syncTree, path, changedChildren, tag) {\r\n    const queryKey = syncTreeQueryKeyForTag_(syncTree, tag);\r\n    if (queryKey) {\r\n        const r = syncTreeParseQueryKey_(queryKey);\r\n        const queryPath = r.path, queryId = r.queryId;\r\n        const relativePath = newRelativePath(queryPath, path);\r\n        const changeTree = ImmutableTree.fromObject(changedChildren);\r\n        const op = new Merge(newOperationSourceServerTaggedQuery(queryId), relativePath, changeTree);\r\n        return syncTreeApplyTaggedOperation_(syncTree, queryPath, op);\r\n    }\r\n    else {\r\n        // We've already removed the query. No big deal, ignore the update\r\n        return [];\r\n    }\r\n}\r\n/**\r\n * Add an event callback for the specified query.\r\n *\r\n * @returns Events to raise.\r\n */\r\nfunction syncTreeAddEventRegistration(syncTree, query, eventRegistration, skipSetupListener = false) {\r\n    const path = query._path;\r\n    let serverCache = null;\r\n    let foundAncestorDefaultView = false;\r\n    // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\r\n    // Consider optimizing this once there's a better understanding of what actual behavior will be.\r\n    syncTree.syncPointTree_.foreachOnPath(path, (pathToSyncPoint, sp) => {\r\n        const relativePath = newRelativePath(pathToSyncPoint, path);\r\n        serverCache =\r\n            serverCache || syncPointGetCompleteServerCache(sp, relativePath);\r\n        foundAncestorDefaultView =\r\n            foundAncestorDefaultView || syncPointHasCompleteView(sp);\r\n    });\r\n    let syncPoint = syncTree.syncPointTree_.get(path);\r\n    if (!syncPoint) {\r\n        syncPoint = new SyncPoint();\r\n        syncTree.syncPointTree_ = syncTree.syncPointTree_.set(path, syncPoint);\r\n    }\r\n    else {\r\n        foundAncestorDefaultView =\r\n            foundAncestorDefaultView || syncPointHasCompleteView(syncPoint);\r\n        serverCache =\r\n            serverCache || syncPointGetCompleteServerCache(syncPoint, newEmptyPath());\r\n    }\r\n    let serverCacheComplete;\r\n    if (serverCache != null) {\r\n        serverCacheComplete = true;\r\n    }\r\n    else {\r\n        serverCacheComplete = false;\r\n        serverCache = ChildrenNode.EMPTY_NODE;\r\n        const subtree = syncTree.syncPointTree_.subtree(path);\r\n        subtree.foreachChild((childName, childSyncPoint) => {\r\n            const completeCache = syncPointGetCompleteServerCache(childSyncPoint, newEmptyPath());\r\n            if (completeCache) {\r\n                serverCache = serverCache.updateImmediateChild(childName, completeCache);\r\n            }\r\n        });\r\n    }\r\n    const viewAlreadyExists = syncPointViewExistsForQuery(syncPoint, query);\r\n    if (!viewAlreadyExists && !query._queryParams.loadsAllData()) {\r\n        // We need to track a tag for this query\r\n        const queryKey = syncTreeMakeQueryKey_(query);\r\n        assert(!syncTree.queryToTagMap.has(queryKey), 'View does not exist, but we have a tag');\r\n        const tag = syncTreeGetNextQueryTag_();\r\n        syncTree.queryToTagMap.set(queryKey, tag);\r\n        syncTree.tagToQueryMap.set(tag, queryKey);\r\n    }\r\n    const writesCache = writeTreeChildWrites(syncTree.pendingWriteTree_, path);\r\n    let events = syncPointAddEventRegistration(syncPoint, query, eventRegistration, writesCache, serverCache, serverCacheComplete);\r\n    if (!viewAlreadyExists && !foundAncestorDefaultView && !skipSetupListener) {\r\n        const view = syncPointViewForQuery(syncPoint, query);\r\n        events = events.concat(syncTreeSetupListener_(syncTree, query, view));\r\n    }\r\n    return events;\r\n}\r\n/**\r\n * Returns a complete cache, if we have one, of the data at a particular path. If the location does not have a\r\n * listener above it, we will get a false \"null\". This shouldn't be a problem because transactions will always\r\n * have a listener above, and atomic operations would correctly show a jitter of <increment value> ->\r\n *     <incremented total> as the write is applied locally and then acknowledged at the server.\r\n *\r\n * Note: this method will *include* hidden writes from transaction with applyLocally set to false.\r\n *\r\n * @param path - The path to the data we want\r\n * @param writeIdsToExclude - A specific set to be excluded\r\n */\r\nfunction syncTreeCalcCompleteEventCache(syncTree, path, writeIdsToExclude) {\r\n    const includeHiddenSets = true;\r\n    const writeTree = syncTree.pendingWriteTree_;\r\n    const serverCache = syncTree.syncPointTree_.findOnPath(path, (pathSoFar, syncPoint) => {\r\n        const relativePath = newRelativePath(pathSoFar, path);\r\n        const serverCache = syncPointGetCompleteServerCache(syncPoint, relativePath);\r\n        if (serverCache) {\r\n            return serverCache;\r\n        }\r\n    });\r\n    return writeTreeCalcCompleteEventCache(writeTree, path, serverCache, writeIdsToExclude, includeHiddenSets);\r\n}\r\nfunction syncTreeGetServerValue(syncTree, query) {\r\n    const path = query._path;\r\n    let serverCache = null;\r\n    // Any covering writes will necessarily be at the root, so really all we need to find is the server cache.\r\n    // Consider optimizing this once there's a better understanding of what actual behavior will be.\r\n    syncTree.syncPointTree_.foreachOnPath(path, (pathToSyncPoint, sp) => {\r\n        const relativePath = newRelativePath(pathToSyncPoint, path);\r\n        serverCache =\r\n            serverCache || syncPointGetCompleteServerCache(sp, relativePath);\r\n    });\r\n    let syncPoint = syncTree.syncPointTree_.get(path);\r\n    if (!syncPoint) {\r\n        syncPoint = new SyncPoint();\r\n        syncTree.syncPointTree_ = syncTree.syncPointTree_.set(path, syncPoint);\r\n    }\r\n    else {\r\n        serverCache =\r\n            serverCache || syncPointGetCompleteServerCache(syncPoint, newEmptyPath());\r\n    }\r\n    const serverCacheComplete = serverCache != null;\r\n    const serverCacheNode = serverCacheComplete\r\n        ? new CacheNode(serverCache, true, false)\r\n        : null;\r\n    const writesCache = writeTreeChildWrites(syncTree.pendingWriteTree_, query._path);\r\n    const view = syncPointGetView(syncPoint, query, writesCache, serverCacheComplete ? serverCacheNode.getNode() : ChildrenNode.EMPTY_NODE, serverCacheComplete);\r\n    return viewGetCompleteNode(view);\r\n}\r\n/**\r\n * A helper method that visits all descendant and ancestor SyncPoints, applying the operation.\r\n *\r\n * NOTES:\r\n * - Descendant SyncPoints will be visited first (since we raise events depth-first).\r\n *\r\n * - We call applyOperation() on each SyncPoint passing three things:\r\n *   1. A version of the Operation that has been made relative to the SyncPoint location.\r\n *   2. A WriteTreeRef of any writes we have cached at the SyncPoint location.\r\n *   3. A snapshot Node with cached server data, if we have it.\r\n *\r\n * - We concatenate all of the events returned by each SyncPoint and return the result.\r\n */\r\nfunction syncTreeApplyOperationToSyncPoints_(syncTree, operation) {\r\n    return syncTreeApplyOperationHelper_(operation, syncTree.syncPointTree_, \r\n    /*serverCache=*/ null, writeTreeChildWrites(syncTree.pendingWriteTree_, newEmptyPath()));\r\n}\r\n/**\r\n * Recursive helper for applyOperationToSyncPoints_\r\n */\r\nfunction syncTreeApplyOperationHelper_(operation, syncPointTree, serverCache, writesCache) {\r\n    if (pathIsEmpty(operation.path)) {\r\n        return syncTreeApplyOperationDescendantsHelper_(operation, syncPointTree, serverCache, writesCache);\r\n    }\r\n    else {\r\n        const syncPoint = syncPointTree.get(newEmptyPath());\r\n        // If we don't have cached server data, see if we can get it from this SyncPoint.\r\n        if (serverCache == null && syncPoint != null) {\r\n            serverCache = syncPointGetCompleteServerCache(syncPoint, newEmptyPath());\r\n        }\r\n        let events = [];\r\n        const childName = pathGetFront(operation.path);\r\n        const childOperation = operation.operationForChild(childName);\r\n        const childTree = syncPointTree.children.get(childName);\r\n        if (childTree && childOperation) {\r\n            const childServerCache = serverCache\r\n                ? serverCache.getImmediateChild(childName)\r\n                : null;\r\n            const childWritesCache = writeTreeRefChild(writesCache, childName);\r\n            events = events.concat(syncTreeApplyOperationHelper_(childOperation, childTree, childServerCache, childWritesCache));\r\n        }\r\n        if (syncPoint) {\r\n            events = events.concat(syncPointApplyOperation(syncPoint, operation, writesCache, serverCache));\r\n        }\r\n        return events;\r\n    }\r\n}\r\n/**\r\n * Recursive helper for applyOperationToSyncPoints_\r\n */\r\nfunction syncTreeApplyOperationDescendantsHelper_(operation, syncPointTree, serverCache, writesCache) {\r\n    const syncPoint = syncPointTree.get(newEmptyPath());\r\n    // If we don't have cached server data, see if we can get it from this SyncPoint.\r\n    if (serverCache == null && syncPoint != null) {\r\n        serverCache = syncPointGetCompleteServerCache(syncPoint, newEmptyPath());\r\n    }\r\n    let events = [];\r\n    syncPointTree.children.inorderTraversal((childName, childTree) => {\r\n        const childServerCache = serverCache\r\n            ? serverCache.getImmediateChild(childName)\r\n            : null;\r\n        const childWritesCache = writeTreeRefChild(writesCache, childName);\r\n        const childOperation = operation.operationForChild(childName);\r\n        if (childOperation) {\r\n            events = events.concat(syncTreeApplyOperationDescendantsHelper_(childOperation, childTree, childServerCache, childWritesCache));\r\n        }\r\n    });\r\n    if (syncPoint) {\r\n        events = events.concat(syncPointApplyOperation(syncPoint, operation, writesCache, serverCache));\r\n    }\r\n    return events;\r\n}\r\nfunction syncTreeCreateListenerForView_(syncTree, view) {\r\n    const query = view.query;\r\n    const tag = syncTreeTagForQuery(syncTree, query);\r\n    return {\r\n        hashFn: () => {\r\n            const cache = viewGetServerCache(view) || ChildrenNode.EMPTY_NODE;\r\n            return cache.hash();\r\n        },\r\n        onComplete: (status) => {\r\n            if (status === 'ok') {\r\n                if (tag) {\r\n                    return syncTreeApplyTaggedListenComplete(syncTree, query._path, tag);\r\n                }\r\n                else {\r\n                    return syncTreeApplyListenComplete(syncTree, query._path);\r\n                }\r\n            }\r\n            else {\r\n                // If a listen failed, kill all of the listeners here, not just the one that triggered the error.\r\n                // Note that this may need to be scoped to just this listener if we change permissions on filtered children\r\n                const error = errorForServerCode(status, query);\r\n                return syncTreeRemoveEventRegistration(syncTree, query, \r\n                /*eventRegistration*/ null, error);\r\n            }\r\n        }\r\n    };\r\n}\r\n/**\r\n * Return the tag associated with the given query.\r\n */\r\nfunction syncTreeTagForQuery(syncTree, query) {\r\n    const queryKey = syncTreeMakeQueryKey_(query);\r\n    return syncTree.queryToTagMap.get(queryKey);\r\n}\r\n/**\r\n * Given a query, computes a \"queryKey\" suitable for use in our queryToTagMap_.\r\n */\r\nfunction syncTreeMakeQueryKey_(query) {\r\n    return query._path.toString() + '$' + query._queryIdentifier;\r\n}\r\n/**\r\n * Return the query associated with the given tag, if we have one\r\n */\r\nfunction syncTreeQueryKeyForTag_(syncTree, tag) {\r\n    return syncTree.tagToQueryMap.get(tag);\r\n}\r\n/**\r\n * Given a queryKey (created by makeQueryKey), parse it back into a path and queryId.\r\n */\r\nfunction syncTreeParseQueryKey_(queryKey) {\r\n    const splitIndex = queryKey.indexOf('$');\r\n    assert(splitIndex !== -1 && splitIndex < queryKey.length - 1, 'Bad queryKey.');\r\n    return {\r\n        queryId: queryKey.substr(splitIndex + 1),\r\n        path: new Path(queryKey.substr(0, splitIndex))\r\n    };\r\n}\r\n/**\r\n * A helper method to apply tagged operations\r\n */\r\nfunction syncTreeApplyTaggedOperation_(syncTree, queryPath, operation) {\r\n    const syncPoint = syncTree.syncPointTree_.get(queryPath);\r\n    assert(syncPoint, \"Missing sync point for query tag that we're tracking\");\r\n    const writesCache = writeTreeChildWrites(syncTree.pendingWriteTree_, queryPath);\r\n    return syncPointApplyOperation(syncPoint, operation, writesCache, null);\r\n}\r\n/**\r\n * This collapses multiple unfiltered views into a single view, since we only need a single\r\n * listener for them.\r\n */\r\nfunction syncTreeCollectDistinctViewsForSubTree_(subtree) {\r\n    return subtree.fold((relativePath, maybeChildSyncPoint, childMap) => {\r\n        if (maybeChildSyncPoint && syncPointHasCompleteView(maybeChildSyncPoint)) {\r\n            const completeView = syncPointGetCompleteView(maybeChildSyncPoint);\r\n            return [completeView];\r\n        }\r\n        else {\r\n            // No complete view here, flatten any deeper listens into an array\r\n            let views = [];\r\n            if (maybeChildSyncPoint) {\r\n                views = syncPointGetQueryViews(maybeChildSyncPoint);\r\n            }\r\n            each(childMap, (_key, childViews) => {\r\n                views = views.concat(childViews);\r\n            });\r\n            return views;\r\n        }\r\n    });\r\n}\r\n/**\r\n * Normalizes a query to a query we send the server for listening\r\n *\r\n * @returns The normalized query\r\n */\r\nfunction syncTreeQueryForListening_(query) {\r\n    if (query._queryParams.loadsAllData() && !query._queryParams.isDefault()) {\r\n        // We treat queries that load all data as default queries\r\n        // Cast is necessary because ref() technically returns Firebase which is actually fb.api.Firebase which inherits\r\n        // from Query\r\n        return new (syncTreeGetReferenceConstructor())(query._repo, query._path);\r\n    }\r\n    else {\r\n        return query;\r\n    }\r\n}\r\nfunction syncTreeRemoveTags_(syncTree, queries) {\r\n    for (let j = 0; j < queries.length; ++j) {\r\n        const removedQuery = queries[j];\r\n        if (!removedQuery._queryParams.loadsAllData()) {\r\n            // We should have a tag for this\r\n            const removedQueryKey = syncTreeMakeQueryKey_(removedQuery);\r\n            const removedQueryTag = syncTree.queryToTagMap.get(removedQueryKey);\r\n            syncTree.queryToTagMap.delete(removedQueryKey);\r\n            syncTree.tagToQueryMap.delete(removedQueryTag);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Static accessor for query tags.\r\n */\r\nfunction syncTreeGetNextQueryTag_() {\r\n    return syncTreeNextQueryTag_++;\r\n}\r\n/**\r\n * For a given new listen, manage the de-duplication of outstanding subscriptions.\r\n *\r\n * @returns This method can return events to support synchronous data sources\r\n */\r\nfunction syncTreeSetupListener_(syncTree, query, view) {\r\n    const path = query._path;\r\n    const tag = syncTreeTagForQuery(syncTree, query);\r\n    const listener = syncTreeCreateListenerForView_(syncTree, view);\r\n    const events = syncTree.listenProvider_.startListening(syncTreeQueryForListening_(query), tag, listener.hashFn, listener.onComplete);\r\n    const subtree = syncTree.syncPointTree_.subtree(path);\r\n    // The root of this subtree has our query. We're here because we definitely need to send a listen for that, but we\r\n    // may need to shadow other listens as well.\r\n    if (tag) {\r\n        assert(!syncPointHasCompleteView(subtree.value), \"If we're adding a query, it shouldn't be shadowed\");\r\n    }\r\n    else {\r\n        // Shadow everything at or below this location, this is a default listener.\r\n        const queriesToStop = subtree.fold((relativePath, maybeChildSyncPoint, childMap) => {\r\n            if (!pathIsEmpty(relativePath) &&\r\n                maybeChildSyncPoint &&\r\n                syncPointHasCompleteView(maybeChildSyncPoint)) {\r\n                return [syncPointGetCompleteView(maybeChildSyncPoint).query];\r\n            }\r\n            else {\r\n                // No default listener here, flatten any deeper queries into an array\r\n                let queries = [];\r\n                if (maybeChildSyncPoint) {\r\n                    queries = queries.concat(syncPointGetQueryViews(maybeChildSyncPoint).map(view => view.query));\r\n                }\r\n                each(childMap, (_key, childQueries) => {\r\n                    queries = queries.concat(childQueries);\r\n                });\r\n                return queries;\r\n            }\r\n        });\r\n        for (let i = 0; i < queriesToStop.length; ++i) {\r\n            const queryToStop = queriesToStop[i];\r\n            syncTree.listenProvider_.stopListening(syncTreeQueryForListening_(queryToStop), syncTreeTagForQuery(syncTree, queryToStop));\r\n        }\r\n    }\r\n    return events;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass ExistingValueProvider {\r\n    constructor(node_) {\r\n        this.node_ = node_;\r\n    }\r\n    getImmediateChild(childName) {\r\n        const child = this.node_.getImmediateChild(childName);\r\n        return new ExistingValueProvider(child);\r\n    }\r\n    node() {\r\n        return this.node_;\r\n    }\r\n}\r\nclass DeferredValueProvider {\r\n    constructor(syncTree, path) {\r\n        this.syncTree_ = syncTree;\r\n        this.path_ = path;\r\n    }\r\n    getImmediateChild(childName) {\r\n        const childPath = pathChild(this.path_, childName);\r\n        return new DeferredValueProvider(this.syncTree_, childPath);\r\n    }\r\n    node() {\r\n        return syncTreeCalcCompleteEventCache(this.syncTree_, this.path_);\r\n    }\r\n}\r\n/**\r\n * Generate placeholders for deferred values.\r\n */\r\nconst generateWithValues = function (values) {\r\n    values = values || {};\r\n    values['timestamp'] = values['timestamp'] || new Date().getTime();\r\n    return values;\r\n};\r\n/**\r\n * Value to use when firing local events. When writing server values, fire\r\n * local events with an approximate value, otherwise return value as-is.\r\n */\r\nconst resolveDeferredLeafValue = function (value, existingVal, serverValues) {\r\n    if (!value || typeof value !== 'object') {\r\n        return value;\r\n    }\r\n    assert('.sv' in value, 'Unexpected leaf node or priority contents');\r\n    if (typeof value['.sv'] === 'string') {\r\n        return resolveScalarDeferredValue(value['.sv'], existingVal, serverValues);\r\n    }\r\n    else if (typeof value['.sv'] === 'object') {\r\n        return resolveComplexDeferredValue(value['.sv'], existingVal);\r\n    }\r\n    else {\r\n        assert(false, 'Unexpected server value: ' + JSON.stringify(value, null, 2));\r\n    }\r\n};\r\nconst resolveScalarDeferredValue = function (op, existing, serverValues) {\r\n    switch (op) {\r\n        case 'timestamp':\r\n            return serverValues['timestamp'];\r\n        default:\r\n            assert(false, 'Unexpected server value: ' + op);\r\n    }\r\n};\r\nconst resolveComplexDeferredValue = function (op, existing, unused) {\r\n    if (!op.hasOwnProperty('increment')) {\r\n        assert(false, 'Unexpected server value: ' + JSON.stringify(op, null, 2));\r\n    }\r\n    const delta = op['increment'];\r\n    if (typeof delta !== 'number') {\r\n        assert(false, 'Unexpected increment value: ' + delta);\r\n    }\r\n    const existingNode = existing.node();\r\n    assert(existingNode !== null && typeof existingNode !== 'undefined', 'Expected ChildrenNode.EMPTY_NODE for nulls');\r\n    // Incrementing a non-number sets the value to the incremented amount\r\n    if (!existingNode.isLeafNode()) {\r\n        return delta;\r\n    }\r\n    const leaf = existingNode;\r\n    const existingVal = leaf.getValue();\r\n    if (typeof existingVal !== 'number') {\r\n        return delta;\r\n    }\r\n    // No need to do over/underflow arithmetic here because JS only handles floats under the covers\r\n    return existingVal + delta;\r\n};\r\n/**\r\n * Recursively replace all deferred values and priorities in the tree with the\r\n * specified generated replacement values.\r\n * @param path - path to which write is relative\r\n * @param node - new data written at path\r\n * @param syncTree - current data\r\n */\r\nconst resolveDeferredValueTree = function (path, node, syncTree, serverValues) {\r\n    return resolveDeferredValue(node, new DeferredValueProvider(syncTree, path), serverValues);\r\n};\r\n/**\r\n * Recursively replace all deferred values and priorities in the node with the\r\n * specified generated replacement values.  If there are no server values in the node,\r\n * it'll be returned as-is.\r\n */\r\nconst resolveDeferredValueSnapshot = function (node, existing, serverValues) {\r\n    return resolveDeferredValue(node, new ExistingValueProvider(existing), serverValues);\r\n};\r\nfunction resolveDeferredValue(node, existingVal, serverValues) {\r\n    const rawPri = node.getPriority().val();\r\n    const priority = resolveDeferredLeafValue(rawPri, existingVal.getImmediateChild('.priority'), serverValues);\r\n    let newNode;\r\n    if (node.isLeafNode()) {\r\n        const leafNode = node;\r\n        const value = resolveDeferredLeafValue(leafNode.getValue(), existingVal, serverValues);\r\n        if (value !== leafNode.getValue() ||\r\n            priority !== leafNode.getPriority().val()) {\r\n            return new LeafNode(value, nodeFromJSON(priority));\r\n        }\r\n        else {\r\n            return node;\r\n        }\r\n    }\r\n    else {\r\n        const childrenNode = node;\r\n        newNode = childrenNode;\r\n        if (priority !== childrenNode.getPriority().val()) {\r\n            newNode = newNode.updatePriority(new LeafNode(priority));\r\n        }\r\n        childrenNode.forEachChild(PRIORITY_INDEX, (childName, childNode) => {\r\n            const newChildNode = resolveDeferredValue(childNode, existingVal.getImmediateChild(childName), serverValues);\r\n            if (newChildNode !== childNode) {\r\n                newNode = newNode.updateImmediateChild(childName, newChildNode);\r\n            }\r\n        });\r\n        return newNode;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A light-weight tree, traversable by path.  Nodes can have both values and children.\r\n * Nodes are not enumerated (by forEachChild) unless they have a value or non-empty\r\n * children.\r\n */\r\nclass Tree {\r\n    /**\r\n     * @param name - Optional name of the node.\r\n     * @param parent - Optional parent node.\r\n     * @param node - Optional node to wrap.\r\n     */\r\n    constructor(name = '', parent = null, node = { children: {}, childCount: 0 }) {\r\n        this.name = name;\r\n        this.parent = parent;\r\n        this.node = node;\r\n    }\r\n}\r\n/**\r\n * Returns a sub-Tree for the given path.\r\n *\r\n * @param pathObj - Path to look up.\r\n * @returns Tree for path.\r\n */\r\nfunction treeSubTree(tree, pathObj) {\r\n    // TODO: Require pathObj to be Path?\r\n    let path = pathObj instanceof Path ? pathObj : new Path(pathObj);\r\n    let child = tree, next = pathGetFront(path);\r\n    while (next !== null) {\r\n        const childNode = safeGet(child.node.children, next) || {\r\n            children: {},\r\n            childCount: 0\r\n        };\r\n        child = new Tree(next, child, childNode);\r\n        path = pathPopFront(path);\r\n        next = pathGetFront(path);\r\n    }\r\n    return child;\r\n}\r\n/**\r\n * Returns the data associated with this tree node.\r\n *\r\n * @returns The data or null if no data exists.\r\n */\r\nfunction treeGetValue(tree) {\r\n    return tree.node.value;\r\n}\r\n/**\r\n * Sets data to this tree node.\r\n *\r\n * @param value - Value to set.\r\n */\r\nfunction treeSetValue(tree, value) {\r\n    tree.node.value = value;\r\n    treeUpdateParents(tree);\r\n}\r\n/**\r\n * @returns Whether the tree has any children.\r\n */\r\nfunction treeHasChildren(tree) {\r\n    return tree.node.childCount > 0;\r\n}\r\n/**\r\n * @returns Whethe rthe tree is empty (no value or children).\r\n */\r\nfunction treeIsEmpty(tree) {\r\n    return treeGetValue(tree) === undefined && !treeHasChildren(tree);\r\n}\r\n/**\r\n * Calls action for each child of this tree node.\r\n *\r\n * @param action - Action to be called for each child.\r\n */\r\nfunction treeForEachChild(tree, action) {\r\n    each(tree.node.children, (child, childTree) => {\r\n        action(new Tree(child, tree, childTree));\r\n    });\r\n}\r\n/**\r\n * Does a depth-first traversal of this node's descendants, calling action for each one.\r\n *\r\n * @param action - Action to be called for each child.\r\n * @param includeSelf - Whether to call action on this node as well. Defaults to\r\n *   false.\r\n * @param childrenFirst - Whether to call action on children before calling it on\r\n *   parent.\r\n */\r\nfunction treeForEachDescendant(tree, action, includeSelf, childrenFirst) {\r\n    if (includeSelf && !childrenFirst) {\r\n        action(tree);\r\n    }\r\n    treeForEachChild(tree, child => {\r\n        treeForEachDescendant(child, action, true, childrenFirst);\r\n    });\r\n    if (includeSelf && childrenFirst) {\r\n        action(tree);\r\n    }\r\n}\r\n/**\r\n * Calls action on each ancestor node.\r\n *\r\n * @param action - Action to be called on each parent; return\r\n *   true to abort.\r\n * @param includeSelf - Whether to call action on this node as well.\r\n * @returns true if the action callback returned true.\r\n */\r\nfunction treeForEachAncestor(tree, action, includeSelf) {\r\n    let node = includeSelf ? tree : tree.parent;\r\n    while (node !== null) {\r\n        if (action(node)) {\r\n            return true;\r\n        }\r\n        node = node.parent;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @returns The path of this tree node, as a Path.\r\n */\r\nfunction treeGetPath(tree) {\r\n    return new Path(tree.parent === null\r\n        ? tree.name\r\n        : treeGetPath(tree.parent) + '/' + tree.name);\r\n}\r\n/**\r\n * Adds or removes this child from its parent based on whether it's empty or not.\r\n */\r\nfunction treeUpdateParents(tree) {\r\n    if (tree.parent !== null) {\r\n        treeUpdateChild(tree.parent, tree.name, tree);\r\n    }\r\n}\r\n/**\r\n * Adds or removes the passed child to this tree node, depending on whether it's empty.\r\n *\r\n * @param childName - The name of the child to update.\r\n * @param child - The child to update.\r\n */\r\nfunction treeUpdateChild(tree, childName, child) {\r\n    const childEmpty = treeIsEmpty(child);\r\n    const childExists = contains(tree.node.children, childName);\r\n    if (childEmpty && childExists) {\r\n        delete tree.node.children[childName];\r\n        tree.node.childCount--;\r\n        treeUpdateParents(tree);\r\n    }\r\n    else if (!childEmpty && !childExists) {\r\n        tree.node.children[childName] = child.node;\r\n        tree.node.childCount++;\r\n        treeUpdateParents(tree);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * True for invalid Firebase keys\r\n */\r\nconst INVALID_KEY_REGEX_ = /[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/;\r\n/**\r\n * True for invalid Firebase paths.\r\n * Allows '/' in paths.\r\n */\r\nconst INVALID_PATH_REGEX_ = /[\\[\\].#$\\u0000-\\u001F\\u007F]/;\r\n/**\r\n * Maximum number of characters to allow in leaf value\r\n */\r\nconst MAX_LEAF_SIZE_ = 10 * 1024 * 1024;\r\nconst isValidKey = function (key) {\r\n    return (typeof key === 'string' && key.length !== 0 && !INVALID_KEY_REGEX_.test(key));\r\n};\r\nconst isValidPathString = function (pathString) {\r\n    return (typeof pathString === 'string' &&\r\n        pathString.length !== 0 &&\r\n        !INVALID_PATH_REGEX_.test(pathString));\r\n};\r\nconst isValidRootPathString = function (pathString) {\r\n    if (pathString) {\r\n        // Allow '/.info/' at the beginning.\r\n        pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\r\n    }\r\n    return isValidPathString(pathString);\r\n};\r\nconst isValidPriority = function (priority) {\r\n    return (priority === null ||\r\n        typeof priority === 'string' ||\r\n        (typeof priority === 'number' && !isInvalidJSONNumber(priority)) ||\r\n        (priority &&\r\n            typeof priority === 'object' &&\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            contains(priority, '.sv')));\r\n};\r\n/**\r\n * Pre-validate a datum passed as an argument to Firebase function.\r\n */\r\nconst validateFirebaseDataArg = function (fnName, value, path, optional) {\r\n    if (optional && value === undefined) {\r\n        return;\r\n    }\r\n    validateFirebaseData(errorPrefix(fnName, 'value'), value, path);\r\n};\r\n/**\r\n * Validate a data object client-side before sending to server.\r\n */\r\nconst validateFirebaseData = function (errorPrefix, data, path_) {\r\n    const path = path_ instanceof Path ? new ValidationPath(path_, errorPrefix) : path_;\r\n    if (data === undefined) {\r\n        throw new Error(errorPrefix + 'contains undefined ' + validationPathToErrorString(path));\r\n    }\r\n    if (typeof data === 'function') {\r\n        throw new Error(errorPrefix +\r\n            'contains a function ' +\r\n            validationPathToErrorString(path) +\r\n            ' with contents = ' +\r\n            data.toString());\r\n    }\r\n    if (isInvalidJSONNumber(data)) {\r\n        throw new Error(errorPrefix +\r\n            'contains ' +\r\n            data.toString() +\r\n            ' ' +\r\n            validationPathToErrorString(path));\r\n    }\r\n    // Check max leaf size, but try to avoid the utf8 conversion if we can.\r\n    if (typeof data === 'string' &&\r\n        data.length > MAX_LEAF_SIZE_ / 3 &&\r\n        stringLength(data) > MAX_LEAF_SIZE_) {\r\n        throw new Error(errorPrefix +\r\n            'contains a string greater than ' +\r\n            MAX_LEAF_SIZE_ +\r\n            ' utf8 bytes ' +\r\n            validationPathToErrorString(path) +\r\n            \" ('\" +\r\n            data.substring(0, 50) +\r\n            \"...')\");\r\n    }\r\n    // TODO = Perf = Consider combining the recursive validation of keys into NodeFromJSON\r\n    // to save extra walking of large objects.\r\n    if (data && typeof data === 'object') {\r\n        let hasDotValue = false;\r\n        let hasActualChild = false;\r\n        each(data, (key, value) => {\r\n            if (key === '.value') {\r\n                hasDotValue = true;\r\n            }\r\n            else if (key !== '.priority' && key !== '.sv') {\r\n                hasActualChild = true;\r\n                if (!isValidKey(key)) {\r\n                    throw new Error(errorPrefix +\r\n                        ' contains an invalid key (' +\r\n                        key +\r\n                        ') ' +\r\n                        validationPathToErrorString(path) +\r\n                        '.  Keys must be non-empty strings ' +\r\n                        'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\r\n                }\r\n            }\r\n            validationPathPush(path, key);\r\n            validateFirebaseData(errorPrefix, value, path);\r\n            validationPathPop(path);\r\n        });\r\n        if (hasDotValue && hasActualChild) {\r\n            throw new Error(errorPrefix +\r\n                ' contains \".value\" child ' +\r\n                validationPathToErrorString(path) +\r\n                ' in addition to actual children.');\r\n        }\r\n    }\r\n};\r\n/**\r\n * Pre-validate paths passed in the firebase function.\r\n */\r\nconst validateFirebaseMergePaths = function (errorPrefix, mergePaths) {\r\n    let i, curPath;\r\n    for (i = 0; i < mergePaths.length; i++) {\r\n        curPath = mergePaths[i];\r\n        const keys = pathSlice(curPath);\r\n        for (let j = 0; j < keys.length; j++) {\r\n            if (keys[j] === '.priority' && j === keys.length - 1) ;\r\n            else if (!isValidKey(keys[j])) {\r\n                throw new Error(errorPrefix +\r\n                    'contains an invalid key (' +\r\n                    keys[j] +\r\n                    ') in path ' +\r\n                    curPath.toString() +\r\n                    '. Keys must be non-empty strings ' +\r\n                    'and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');\r\n            }\r\n        }\r\n    }\r\n    // Check that update keys are not descendants of each other.\r\n    // We rely on the property that sorting guarantees that ancestors come\r\n    // right before descendants.\r\n    mergePaths.sort(pathCompare);\r\n    let prevPath = null;\r\n    for (i = 0; i < mergePaths.length; i++) {\r\n        curPath = mergePaths[i];\r\n        if (prevPath !== null && pathContains(prevPath, curPath)) {\r\n            throw new Error(errorPrefix +\r\n                'contains a path ' +\r\n                prevPath.toString() +\r\n                ' that is ancestor of another path ' +\r\n                curPath.toString());\r\n        }\r\n        prevPath = curPath;\r\n    }\r\n};\r\n/**\r\n * pre-validate an object passed as an argument to firebase function (\r\n * must be an object - e.g. for firebase.update()).\r\n */\r\nconst validateFirebaseMergeDataArg = function (fnName, data, path, optional) {\r\n    if (optional && data === undefined) {\r\n        return;\r\n    }\r\n    const errorPrefix$1 = errorPrefix(fnName, 'values');\r\n    if (!(data && typeof data === 'object') || Array.isArray(data)) {\r\n        throw new Error(errorPrefix$1 + ' must be an object containing the children to replace.');\r\n    }\r\n    const mergePaths = [];\r\n    each(data, (key, value) => {\r\n        const curPath = new Path(key);\r\n        validateFirebaseData(errorPrefix$1, value, pathChild(path, curPath));\r\n        if (pathGetBack(curPath) === '.priority') {\r\n            if (!isValidPriority(value)) {\r\n                throw new Error(errorPrefix$1 +\r\n                    \"contains an invalid value for '\" +\r\n                    curPath.toString() +\r\n                    \"', which must be a valid \" +\r\n                    'Firebase priority (a string, finite number, server value, or null).');\r\n            }\r\n        }\r\n        mergePaths.push(curPath);\r\n    });\r\n    validateFirebaseMergePaths(errorPrefix$1, mergePaths);\r\n};\r\nconst validatePriority = function (fnName, priority, optional) {\r\n    if (optional && priority === undefined) {\r\n        return;\r\n    }\r\n    if (isInvalidJSONNumber(priority)) {\r\n        throw new Error(errorPrefix(fnName, 'priority') +\r\n            'is ' +\r\n            priority.toString() +\r\n            ', but must be a valid Firebase priority (a string, finite number, ' +\r\n            'server value, or null).');\r\n    }\r\n    // Special case to allow importing data with a .sv.\r\n    if (!isValidPriority(priority)) {\r\n        throw new Error(errorPrefix(fnName, 'priority') +\r\n            'must be a valid Firebase priority ' +\r\n            '(a string, finite number, server value, or null).');\r\n    }\r\n};\r\nconst validateKey = function (fnName, argumentName, key, optional) {\r\n    if (optional && key === undefined) {\r\n        return;\r\n    }\r\n    if (!isValidKey(key)) {\r\n        throw new Error(errorPrefix(fnName, argumentName) +\r\n            'was an invalid key = \"' +\r\n            key +\r\n            '\".  Firebase keys must be non-empty strings and ' +\r\n            'can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").');\r\n    }\r\n};\r\n/**\r\n * @internal\r\n */\r\nconst validatePathString = function (fnName, argumentName, pathString, optional) {\r\n    if (optional && pathString === undefined) {\r\n        return;\r\n    }\r\n    if (!isValidPathString(pathString)) {\r\n        throw new Error(errorPrefix(fnName, argumentName) +\r\n            'was an invalid path = \"' +\r\n            pathString +\r\n            '\". Paths must be non-empty strings and ' +\r\n            'can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"');\r\n    }\r\n};\r\nconst validateRootPathString = function (fnName, argumentName, pathString, optional) {\r\n    if (pathString) {\r\n        // Allow '/.info/' at the beginning.\r\n        pathString = pathString.replace(/^\\/*\\.info(\\/|$)/, '/');\r\n    }\r\n    validatePathString(fnName, argumentName, pathString, optional);\r\n};\r\n/**\r\n * @internal\r\n */\r\nconst validateWritablePath = function (fnName, path) {\r\n    if (pathGetFront(path) === '.info') {\r\n        throw new Error(fnName + \" failed = Can't modify data under /.info/\");\r\n    }\r\n};\r\nconst validateUrl = function (fnName, parsedUrl) {\r\n    // TODO = Validate server better.\r\n    const pathString = parsedUrl.path.toString();\r\n    if (!(typeof parsedUrl.repoInfo.host === 'string') ||\r\n        parsedUrl.repoInfo.host.length === 0 ||\r\n        (!isValidKey(parsedUrl.repoInfo.namespace) &&\r\n            parsedUrl.repoInfo.host.split(':')[0] !== 'localhost') ||\r\n        (pathString.length !== 0 && !isValidRootPathString(pathString))) {\r\n        throw new Error(errorPrefix(fnName, 'url') +\r\n            'must be a valid firebase URL and ' +\r\n            'the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".');\r\n    }\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The event queue serves a few purposes:\r\n * 1. It ensures we maintain event order in the face of event callbacks doing operations that result in more\r\n *    events being queued.\r\n * 2. raiseQueuedEvents() handles being called reentrantly nicely.  That is, if in the course of raising events,\r\n *    raiseQueuedEvents() is called again, the \"inner\" call will pick up raising events where the \"outer\" call\r\n *    left off, ensuring that the events are still raised synchronously and in order.\r\n * 3. You can use raiseEventsAtPath and raiseEventsForChangedPath to ensure only relevant previously-queued\r\n *    events are raised synchronously.\r\n *\r\n * NOTE: This can all go away if/when we move to async events.\r\n *\r\n */\r\nclass EventQueue {\r\n    constructor() {\r\n        this.eventLists_ = [];\r\n        /**\r\n         * Tracks recursion depth of raiseQueuedEvents_, for debugging purposes.\r\n         */\r\n        this.recursionDepth_ = 0;\r\n    }\r\n}\r\n/**\r\n * @param eventDataList - The new events to queue.\r\n */\r\nfunction eventQueueQueueEvents(eventQueue, eventDataList) {\r\n    // We group events by path, storing them in a single EventList, to make it easier to skip over them quickly.\r\n    let currList = null;\r\n    for (let i = 0; i < eventDataList.length; i++) {\r\n        const data = eventDataList[i];\r\n        const path = data.getPath();\r\n        if (currList !== null && !pathEquals(path, currList.path)) {\r\n            eventQueue.eventLists_.push(currList);\r\n            currList = null;\r\n        }\r\n        if (currList === null) {\r\n            currList = { events: [], path };\r\n        }\r\n        currList.events.push(data);\r\n    }\r\n    if (currList) {\r\n        eventQueue.eventLists_.push(currList);\r\n    }\r\n}\r\n/**\r\n * Queues the specified events and synchronously raises all events (including previously queued ones)\r\n * for the specified path.\r\n *\r\n * It is assumed that the new events are all for the specified path.\r\n *\r\n * @param path - The path to raise events for.\r\n * @param eventDataList - The new events to raise.\r\n */\r\nfunction eventQueueRaiseEventsAtPath(eventQueue, path, eventDataList) {\r\n    eventQueueQueueEvents(eventQueue, eventDataList);\r\n    eventQueueRaiseQueuedEventsMatchingPredicate(eventQueue, eventPath => pathEquals(eventPath, path));\r\n}\r\n/**\r\n * Queues the specified events and synchronously raises all events (including previously queued ones) for\r\n * locations related to the specified change path (i.e. all ancestors and descendants).\r\n *\r\n * It is assumed that the new events are all related (ancestor or descendant) to the specified path.\r\n *\r\n * @param changedPath - The path to raise events for.\r\n * @param eventDataList - The events to raise\r\n */\r\nfunction eventQueueRaiseEventsForChangedPath(eventQueue, changedPath, eventDataList) {\r\n    eventQueueQueueEvents(eventQueue, eventDataList);\r\n    eventQueueRaiseQueuedEventsMatchingPredicate(eventQueue, eventPath => pathContains(eventPath, changedPath) ||\r\n        pathContains(changedPath, eventPath));\r\n}\r\nfunction eventQueueRaiseQueuedEventsMatchingPredicate(eventQueue, predicate) {\r\n    eventQueue.recursionDepth_++;\r\n    let sentAll = true;\r\n    for (let i = 0; i < eventQueue.eventLists_.length; i++) {\r\n        const eventList = eventQueue.eventLists_[i];\r\n        if (eventList) {\r\n            const eventPath = eventList.path;\r\n            if (predicate(eventPath)) {\r\n                eventListRaise(eventQueue.eventLists_[i]);\r\n                eventQueue.eventLists_[i] = null;\r\n            }\r\n            else {\r\n                sentAll = false;\r\n            }\r\n        }\r\n    }\r\n    if (sentAll) {\r\n        eventQueue.eventLists_ = [];\r\n    }\r\n    eventQueue.recursionDepth_--;\r\n}\r\n/**\r\n * Iterates through the list and raises each event\r\n */\r\nfunction eventListRaise(eventList) {\r\n    for (let i = 0; i < eventList.events.length; i++) {\r\n        const eventData = eventList.events[i];\r\n        if (eventData !== null) {\r\n            eventList.events[i] = null;\r\n            const eventFn = eventData.getEventRunner();\r\n            if (logger) {\r\n                log('event: ' + eventData.toString());\r\n            }\r\n            exceptionGuard(eventFn);\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst INTERRUPT_REASON = 'repo_interrupt';\r\n/**\r\n * If a transaction does not succeed after 25 retries, we abort it. Among other\r\n * things this ensure that if there's ever a bug causing a mismatch between\r\n * client / server hashes for some data, we won't retry indefinitely.\r\n */\r\nconst MAX_TRANSACTION_RETRIES = 25;\r\n/**\r\n * A connection to a single data repository.\r\n */\r\nclass Repo {\r\n    constructor(repoInfo_, forceRestClient_, authTokenProvider_, appCheckProvider_) {\r\n        this.repoInfo_ = repoInfo_;\r\n        this.forceRestClient_ = forceRestClient_;\r\n        this.authTokenProvider_ = authTokenProvider_;\r\n        this.appCheckProvider_ = appCheckProvider_;\r\n        this.dataUpdateCount = 0;\r\n        this.statsListener_ = null;\r\n        this.eventQueue_ = new EventQueue();\r\n        this.nextWriteId_ = 1;\r\n        this.interceptServerDataCallback_ = null;\r\n        /** A list of data pieces and paths to be set when this client disconnects. */\r\n        this.onDisconnect_ = newSparseSnapshotTree();\r\n        /** Stores queues of outstanding transactions for Firebase locations. */\r\n        this.transactionQueueTree_ = new Tree();\r\n        // TODO: This should be @private but it's used by test_access.js and internal.js\r\n        this.persistentConnection_ = null;\r\n        // This key is intentionally not updated if RepoInfo is later changed or replaced\r\n        this.key = this.repoInfo_.toURLString();\r\n    }\r\n    /**\r\n     * @returns The URL corresponding to the root of this Firebase.\r\n     */\r\n    toString() {\r\n        return ((this.repoInfo_.secure ? 'https://' : 'http://') + this.repoInfo_.host);\r\n    }\r\n}\r\nfunction repoStart(repo, appId, authOverride) {\r\n    repo.stats_ = statsManagerGetCollection(repo.repoInfo_);\r\n    if (repo.forceRestClient_ || beingCrawled()) {\r\n        repo.server_ = new ReadonlyRestClient(repo.repoInfo_, (pathString, data, isMerge, tag) => {\r\n            repoOnDataUpdate(repo, pathString, data, isMerge, tag);\r\n        }, repo.authTokenProvider_, repo.appCheckProvider_);\r\n        // Minor hack: Fire onConnect immediately, since there's no actual connection.\r\n        setTimeout(() => repoOnConnectStatus(repo, /* connectStatus= */ true), 0);\r\n    }\r\n    else {\r\n        // Validate authOverride\r\n        if (typeof authOverride !== 'undefined' && authOverride !== null) {\r\n            if (typeof authOverride !== 'object') {\r\n                throw new Error('Only objects are supported for option databaseAuthVariableOverride');\r\n            }\r\n            try {\r\n                stringify(authOverride);\r\n            }\r\n            catch (e) {\r\n                throw new Error('Invalid authOverride provided: ' + e);\r\n            }\r\n        }\r\n        repo.persistentConnection_ = new PersistentConnection(repo.repoInfo_, appId, (pathString, data, isMerge, tag) => {\r\n            repoOnDataUpdate(repo, pathString, data, isMerge, tag);\r\n        }, (connectStatus) => {\r\n            repoOnConnectStatus(repo, connectStatus);\r\n        }, (updates) => {\r\n            repoOnServerInfoUpdate(repo, updates);\r\n        }, repo.authTokenProvider_, repo.appCheckProvider_, authOverride);\r\n        repo.server_ = repo.persistentConnection_;\r\n    }\r\n    repo.authTokenProvider_.addTokenChangeListener(token => {\r\n        repo.server_.refreshAuthToken(token);\r\n    });\r\n    repo.appCheckProvider_.addTokenChangeListener(result => {\r\n        repo.server_.refreshAppCheckToken(result.token);\r\n    });\r\n    // In the case of multiple Repos for the same repoInfo (i.e. there are multiple Firebase.Contexts being used),\r\n    // we only want to create one StatsReporter.  As such, we'll report stats over the first Repo created.\r\n    repo.statsReporter_ = statsManagerGetOrCreateReporter(repo.repoInfo_, () => new StatsReporter(repo.stats_, repo.server_));\r\n    // Used for .info.\r\n    repo.infoData_ = new SnapshotHolder();\r\n    repo.infoSyncTree_ = new SyncTree({\r\n        startListening: (query, tag, currentHashFn, onComplete) => {\r\n            let infoEvents = [];\r\n            const node = repo.infoData_.getNode(query._path);\r\n            // This is possibly a hack, but we have different semantics for .info endpoints. We don't raise null events\r\n            // on initial data...\r\n            if (!node.isEmpty()) {\r\n                infoEvents = syncTreeApplyServerOverwrite(repo.infoSyncTree_, query._path, node);\r\n                setTimeout(() => {\r\n                    onComplete('ok');\r\n                }, 0);\r\n            }\r\n            return infoEvents;\r\n        },\r\n        stopListening: () => { }\r\n    });\r\n    repoUpdateInfo(repo, 'connected', false);\r\n    repo.serverSyncTree_ = new SyncTree({\r\n        startListening: (query, tag, currentHashFn, onComplete) => {\r\n            repo.server_.listen(query, currentHashFn, tag, (status, data) => {\r\n                const events = onComplete(status, data);\r\n                eventQueueRaiseEventsForChangedPath(repo.eventQueue_, query._path, events);\r\n            });\r\n            // No synchronous events for network-backed sync trees\r\n            return [];\r\n        },\r\n        stopListening: (query, tag) => {\r\n            repo.server_.unlisten(query, tag);\r\n        }\r\n    });\r\n}\r\n/**\r\n * @returns The time in milliseconds, taking the server offset into account if we have one.\r\n */\r\nfunction repoServerTime(repo) {\r\n    const offsetNode = repo.infoData_.getNode(new Path('.info/serverTimeOffset'));\r\n    const offset = offsetNode.val() || 0;\r\n    return new Date().getTime() + offset;\r\n}\r\n/**\r\n * Generate ServerValues using some variables from the repo object.\r\n */\r\nfunction repoGenerateServerValues(repo) {\r\n    return generateWithValues({\r\n        timestamp: repoServerTime(repo)\r\n    });\r\n}\r\n/**\r\n * Called by realtime when we get new messages from the server.\r\n */\r\nfunction repoOnDataUpdate(repo, pathString, data, isMerge, tag) {\r\n    // For testing.\r\n    repo.dataUpdateCount++;\r\n    const path = new Path(pathString);\r\n    data = repo.interceptServerDataCallback_\r\n        ? repo.interceptServerDataCallback_(pathString, data)\r\n        : data;\r\n    let events = [];\r\n    if (tag) {\r\n        if (isMerge) {\r\n            const taggedChildren = map(data, (raw) => nodeFromJSON(raw));\r\n            events = syncTreeApplyTaggedQueryMerge(repo.serverSyncTree_, path, taggedChildren, tag);\r\n        }\r\n        else {\r\n            const taggedSnap = nodeFromJSON(data);\r\n            events = syncTreeApplyTaggedQueryOverwrite(repo.serverSyncTree_, path, taggedSnap, tag);\r\n        }\r\n    }\r\n    else if (isMerge) {\r\n        const changedChildren = map(data, (raw) => nodeFromJSON(raw));\r\n        events = syncTreeApplyServerMerge(repo.serverSyncTree_, path, changedChildren);\r\n    }\r\n    else {\r\n        const snap = nodeFromJSON(data);\r\n        events = syncTreeApplyServerOverwrite(repo.serverSyncTree_, path, snap);\r\n    }\r\n    let affectedPath = path;\r\n    if (events.length > 0) {\r\n        // Since we have a listener outstanding for each transaction, receiving any events\r\n        // is a proxy for some change having occurred.\r\n        affectedPath = repoRerunTransactions(repo, path);\r\n    }\r\n    eventQueueRaiseEventsForChangedPath(repo.eventQueue_, affectedPath, events);\r\n}\r\nfunction repoOnConnectStatus(repo, connectStatus) {\r\n    repoUpdateInfo(repo, 'connected', connectStatus);\r\n    if (connectStatus === false) {\r\n        repoRunOnDisconnectEvents(repo);\r\n    }\r\n}\r\nfunction repoOnServerInfoUpdate(repo, updates) {\r\n    each(updates, (key, value) => {\r\n        repoUpdateInfo(repo, key, value);\r\n    });\r\n}\r\nfunction repoUpdateInfo(repo, pathString, value) {\r\n    const path = new Path('/.info/' + pathString);\r\n    const newNode = nodeFromJSON(value);\r\n    repo.infoData_.updateSnapshot(path, newNode);\r\n    const events = syncTreeApplyServerOverwrite(repo.infoSyncTree_, path, newNode);\r\n    eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, events);\r\n}\r\nfunction repoGetNextWriteId(repo) {\r\n    return repo.nextWriteId_++;\r\n}\r\n/**\r\n * The purpose of `getValue` is to return the latest known value\r\n * satisfying `query`.\r\n *\r\n * This method will first check for in-memory cached values\r\n * belonging to active listeners. If they are found, such values\r\n * are considered to be the most up-to-date.\r\n *\r\n * If the client is not connected, this method will wait until the\r\n *  repo has established a connection and then request the value for `query`.\r\n * If the client is not able to retrieve the query result for another reason,\r\n * it reports an error.\r\n *\r\n * @param query - The query to surface a value for.\r\n */\r\nfunction repoGetValue(repo, query, eventRegistration) {\r\n    // Only active queries are cached. There is no persisted cache.\r\n    const cached = syncTreeGetServerValue(repo.serverSyncTree_, query);\r\n    if (cached != null) {\r\n        return Promise.resolve(cached);\r\n    }\r\n    return repo.server_.get(query).then(payload => {\r\n        const node = nodeFromJSON(payload).withIndex(query._queryParams.getIndex());\r\n        /**\r\n         * Below we simulate the actions of an `onlyOnce` `onValue()` event where:\r\n         * Add an event registration,\r\n         * Update data at the path,\r\n         * Raise any events,\r\n         * Cleanup the SyncTree\r\n         */\r\n        syncTreeAddEventRegistration(repo.serverSyncTree_, query, eventRegistration, true);\r\n        let events;\r\n        if (query._queryParams.loadsAllData()) {\r\n            events = syncTreeApplyServerOverwrite(repo.serverSyncTree_, query._path, node);\r\n        }\r\n        else {\r\n            const tag = syncTreeTagForQuery(repo.serverSyncTree_, query);\r\n            events = syncTreeApplyTaggedQueryOverwrite(repo.serverSyncTree_, query._path, node, tag);\r\n        }\r\n        /*\r\n         * We need to raise events in the scenario where `get()` is called at a parent path, and\r\n         * while the `get()` is pending, `onValue` is called at a child location. While get() is waiting\r\n         * for the data, `onValue` will register a new event. Then, get() will come back, and update the syncTree\r\n         * and its corresponding serverCache, including the child location where `onValue` is called. Then,\r\n         * `onValue` will receive the event from the server, but look at the syncTree and see that the data received\r\n         * from the server is already at the SyncPoint, and so the `onValue` callback will never get fired.\r\n         * Calling `eventQueueRaiseEventsForChangedPath()` is the correct way to propagate the events and\r\n         * ensure the corresponding child events will get fired.\r\n         */\r\n        eventQueueRaiseEventsForChangedPath(repo.eventQueue_, query._path, events);\r\n        syncTreeRemoveEventRegistration(repo.serverSyncTree_, query, eventRegistration, null, true);\r\n        return node;\r\n    }, err => {\r\n        repoLog(repo, 'get for query ' + stringify(query) + ' failed: ' + err);\r\n        return Promise.reject(new Error(err));\r\n    });\r\n}\r\nfunction repoSetWithPriority(repo, path, newVal, newPriority, onComplete) {\r\n    repoLog(repo, 'set', {\r\n        path: path.toString(),\r\n        value: newVal,\r\n        priority: newPriority\r\n    });\r\n    // TODO: Optimize this behavior to either (a) store flag to skip resolving where possible and / or\r\n    // (b) store unresolved paths on JSON parse\r\n    const serverValues = repoGenerateServerValues(repo);\r\n    const newNodeUnresolved = nodeFromJSON(newVal, newPriority);\r\n    const existing = syncTreeCalcCompleteEventCache(repo.serverSyncTree_, path);\r\n    const newNode = resolveDeferredValueSnapshot(newNodeUnresolved, existing, serverValues);\r\n    const writeId = repoGetNextWriteId(repo);\r\n    const events = syncTreeApplyUserOverwrite(repo.serverSyncTree_, path, newNode, writeId, true);\r\n    eventQueueQueueEvents(repo.eventQueue_, events);\r\n    repo.server_.put(path.toString(), newNodeUnresolved.val(/*export=*/ true), (status, errorReason) => {\r\n        const success = status === 'ok';\r\n        if (!success) {\r\n            warn('set at ' + path + ' failed: ' + status);\r\n        }\r\n        const clearEvents = syncTreeAckUserWrite(repo.serverSyncTree_, writeId, !success);\r\n        eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, clearEvents);\r\n        repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\r\n    });\r\n    const affectedPath = repoAbortTransactions(repo, path);\r\n    repoRerunTransactions(repo, affectedPath);\r\n    // We queued the events above, so just flush the queue here\r\n    eventQueueRaiseEventsForChangedPath(repo.eventQueue_, affectedPath, []);\r\n}\r\nfunction repoUpdate(repo, path, childrenToMerge, onComplete) {\r\n    repoLog(repo, 'update', { path: path.toString(), value: childrenToMerge });\r\n    // Start with our existing data and merge each child into it.\r\n    let empty = true;\r\n    const serverValues = repoGenerateServerValues(repo);\r\n    const changedChildren = {};\r\n    each(childrenToMerge, (changedKey, changedValue) => {\r\n        empty = false;\r\n        changedChildren[changedKey] = resolveDeferredValueTree(pathChild(path, changedKey), nodeFromJSON(changedValue), repo.serverSyncTree_, serverValues);\r\n    });\r\n    if (!empty) {\r\n        const writeId = repoGetNextWriteId(repo);\r\n        const events = syncTreeApplyUserMerge(repo.serverSyncTree_, path, changedChildren, writeId);\r\n        eventQueueQueueEvents(repo.eventQueue_, events);\r\n        repo.server_.merge(path.toString(), childrenToMerge, (status, errorReason) => {\r\n            const success = status === 'ok';\r\n            if (!success) {\r\n                warn('update at ' + path + ' failed: ' + status);\r\n            }\r\n            const clearEvents = syncTreeAckUserWrite(repo.serverSyncTree_, writeId, !success);\r\n            const affectedPath = clearEvents.length > 0 ? repoRerunTransactions(repo, path) : path;\r\n            eventQueueRaiseEventsForChangedPath(repo.eventQueue_, affectedPath, clearEvents);\r\n            repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\r\n        });\r\n        each(childrenToMerge, (changedPath) => {\r\n            const affectedPath = repoAbortTransactions(repo, pathChild(path, changedPath));\r\n            repoRerunTransactions(repo, affectedPath);\r\n        });\r\n        // We queued the events above, so just flush the queue here\r\n        eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, []);\r\n    }\r\n    else {\r\n        log(\"update() called with empty data.  Don't do anything.\");\r\n        repoCallOnCompleteCallback(repo, onComplete, 'ok', undefined);\r\n    }\r\n}\r\n/**\r\n * Applies all of the changes stored up in the onDisconnect_ tree.\r\n */\r\nfunction repoRunOnDisconnectEvents(repo) {\r\n    repoLog(repo, 'onDisconnectEvents');\r\n    const serverValues = repoGenerateServerValues(repo);\r\n    const resolvedOnDisconnectTree = newSparseSnapshotTree();\r\n    sparseSnapshotTreeForEachTree(repo.onDisconnect_, newEmptyPath(), (path, node) => {\r\n        const resolved = resolveDeferredValueTree(path, node, repo.serverSyncTree_, serverValues);\r\n        sparseSnapshotTreeRemember(resolvedOnDisconnectTree, path, resolved);\r\n    });\r\n    let events = [];\r\n    sparseSnapshotTreeForEachTree(resolvedOnDisconnectTree, newEmptyPath(), (path, snap) => {\r\n        events = events.concat(syncTreeApplyServerOverwrite(repo.serverSyncTree_, path, snap));\r\n        const affectedPath = repoAbortTransactions(repo, path);\r\n        repoRerunTransactions(repo, affectedPath);\r\n    });\r\n    repo.onDisconnect_ = newSparseSnapshotTree();\r\n    eventQueueRaiseEventsForChangedPath(repo.eventQueue_, newEmptyPath(), events);\r\n}\r\nfunction repoOnDisconnectCancel(repo, path, onComplete) {\r\n    repo.server_.onDisconnectCancel(path.toString(), (status, errorReason) => {\r\n        if (status === 'ok') {\r\n            sparseSnapshotTreeForget(repo.onDisconnect_, path);\r\n        }\r\n        repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\r\n    });\r\n}\r\nfunction repoOnDisconnectSet(repo, path, value, onComplete) {\r\n    const newNode = nodeFromJSON(value);\r\n    repo.server_.onDisconnectPut(path.toString(), newNode.val(/*export=*/ true), (status, errorReason) => {\r\n        if (status === 'ok') {\r\n            sparseSnapshotTreeRemember(repo.onDisconnect_, path, newNode);\r\n        }\r\n        repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\r\n    });\r\n}\r\nfunction repoOnDisconnectSetWithPriority(repo, path, value, priority, onComplete) {\r\n    const newNode = nodeFromJSON(value, priority);\r\n    repo.server_.onDisconnectPut(path.toString(), newNode.val(/*export=*/ true), (status, errorReason) => {\r\n        if (status === 'ok') {\r\n            sparseSnapshotTreeRemember(repo.onDisconnect_, path, newNode);\r\n        }\r\n        repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\r\n    });\r\n}\r\nfunction repoOnDisconnectUpdate(repo, path, childrenToMerge, onComplete) {\r\n    if (isEmpty(childrenToMerge)) {\r\n        log(\"onDisconnect().update() called with empty data.  Don't do anything.\");\r\n        repoCallOnCompleteCallback(repo, onComplete, 'ok', undefined);\r\n        return;\r\n    }\r\n    repo.server_.onDisconnectMerge(path.toString(), childrenToMerge, (status, errorReason) => {\r\n        if (status === 'ok') {\r\n            each(childrenToMerge, (childName, childNode) => {\r\n                const newChildNode = nodeFromJSON(childNode);\r\n                sparseSnapshotTreeRemember(repo.onDisconnect_, pathChild(path, childName), newChildNode);\r\n            });\r\n        }\r\n        repoCallOnCompleteCallback(repo, onComplete, status, errorReason);\r\n    });\r\n}\r\nfunction repoAddEventCallbackForQuery(repo, query, eventRegistration) {\r\n    let events;\r\n    if (pathGetFront(query._path) === '.info') {\r\n        events = syncTreeAddEventRegistration(repo.infoSyncTree_, query, eventRegistration);\r\n    }\r\n    else {\r\n        events = syncTreeAddEventRegistration(repo.serverSyncTree_, query, eventRegistration);\r\n    }\r\n    eventQueueRaiseEventsAtPath(repo.eventQueue_, query._path, events);\r\n}\r\nfunction repoRemoveEventCallbackForQuery(repo, query, eventRegistration) {\r\n    // These are guaranteed not to raise events, since we're not passing in a cancelError. However, we can future-proof\r\n    // a little bit by handling the return values anyways.\r\n    let events;\r\n    if (pathGetFront(query._path) === '.info') {\r\n        events = syncTreeRemoveEventRegistration(repo.infoSyncTree_, query, eventRegistration);\r\n    }\r\n    else {\r\n        events = syncTreeRemoveEventRegistration(repo.serverSyncTree_, query, eventRegistration);\r\n    }\r\n    eventQueueRaiseEventsAtPath(repo.eventQueue_, query._path, events);\r\n}\r\nfunction repoInterrupt(repo) {\r\n    if (repo.persistentConnection_) {\r\n        repo.persistentConnection_.interrupt(INTERRUPT_REASON);\r\n    }\r\n}\r\nfunction repoResume(repo) {\r\n    if (repo.persistentConnection_) {\r\n        repo.persistentConnection_.resume(INTERRUPT_REASON);\r\n    }\r\n}\r\nfunction repoLog(repo, ...varArgs) {\r\n    let prefix = '';\r\n    if (repo.persistentConnection_) {\r\n        prefix = repo.persistentConnection_.id + ':';\r\n    }\r\n    log(prefix, ...varArgs);\r\n}\r\nfunction repoCallOnCompleteCallback(repo, callback, status, errorReason) {\r\n    if (callback) {\r\n        exceptionGuard(() => {\r\n            if (status === 'ok') {\r\n                callback(null);\r\n            }\r\n            else {\r\n                const code = (status || 'error').toUpperCase();\r\n                let message = code;\r\n                if (errorReason) {\r\n                    message += ': ' + errorReason;\r\n                }\r\n                const error = new Error(message);\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                error.code = code;\r\n                callback(error);\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Creates a new transaction, adds it to the transactions we're tracking, and\r\n * sends it to the server if possible.\r\n *\r\n * @param path - Path at which to do transaction.\r\n * @param transactionUpdate - Update callback.\r\n * @param onComplete - Completion callback.\r\n * @param unwatcher - Function that will be called when the transaction no longer\r\n * need data updates for `path`.\r\n * @param applyLocally - Whether or not to make intermediate results visible\r\n */\r\nfunction repoStartTransaction(repo, path, transactionUpdate, onComplete, unwatcher, applyLocally) {\r\n    repoLog(repo, 'transaction on ' + path);\r\n    // Initialize transaction.\r\n    const transaction = {\r\n        path,\r\n        update: transactionUpdate,\r\n        onComplete,\r\n        // One of TransactionStatus enums.\r\n        status: null,\r\n        // Used when combining transactions at different locations to figure out\r\n        // which one goes first.\r\n        order: LUIDGenerator(),\r\n        // Whether to raise local events for this transaction.\r\n        applyLocally,\r\n        // Count of how many times we've retried the transaction.\r\n        retryCount: 0,\r\n        // Function to call to clean up our .on() listener.\r\n        unwatcher,\r\n        // Stores why a transaction was aborted.\r\n        abortReason: null,\r\n        currentWriteId: null,\r\n        currentInputSnapshot: null,\r\n        currentOutputSnapshotRaw: null,\r\n        currentOutputSnapshotResolved: null\r\n    };\r\n    // Run transaction initially.\r\n    const currentState = repoGetLatestState(repo, path, undefined);\r\n    transaction.currentInputSnapshot = currentState;\r\n    const newVal = transaction.update(currentState.val());\r\n    if (newVal === undefined) {\r\n        // Abort transaction.\r\n        transaction.unwatcher();\r\n        transaction.currentOutputSnapshotRaw = null;\r\n        transaction.currentOutputSnapshotResolved = null;\r\n        if (transaction.onComplete) {\r\n            transaction.onComplete(null, false, transaction.currentInputSnapshot);\r\n        }\r\n    }\r\n    else {\r\n        validateFirebaseData('transaction failed: Data returned ', newVal, transaction.path);\r\n        // Mark as run and add to our queue.\r\n        transaction.status = 0 /* RUN */;\r\n        const queueNode = treeSubTree(repo.transactionQueueTree_, path);\r\n        const nodeQueue = treeGetValue(queueNode) || [];\r\n        nodeQueue.push(transaction);\r\n        treeSetValue(queueNode, nodeQueue);\r\n        // Update visibleData and raise events\r\n        // Note: We intentionally raise events after updating all of our\r\n        // transaction state, since the user could start new transactions from the\r\n        // event callbacks.\r\n        let priorityForNode;\r\n        if (typeof newVal === 'object' &&\r\n            newVal !== null &&\r\n            contains(newVal, '.priority')) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            priorityForNode = safeGet(newVal, '.priority');\r\n            assert(isValidPriority(priorityForNode), 'Invalid priority returned by transaction. ' +\r\n                'Priority must be a valid string, finite number, server value, or null.');\r\n        }\r\n        else {\r\n            const currentNode = syncTreeCalcCompleteEventCache(repo.serverSyncTree_, path) ||\r\n                ChildrenNode.EMPTY_NODE;\r\n            priorityForNode = currentNode.getPriority().val();\r\n        }\r\n        const serverValues = repoGenerateServerValues(repo);\r\n        const newNodeUnresolved = nodeFromJSON(newVal, priorityForNode);\r\n        const newNode = resolveDeferredValueSnapshot(newNodeUnresolved, currentState, serverValues);\r\n        transaction.currentOutputSnapshotRaw = newNodeUnresolved;\r\n        transaction.currentOutputSnapshotResolved = newNode;\r\n        transaction.currentWriteId = repoGetNextWriteId(repo);\r\n        const events = syncTreeApplyUserOverwrite(repo.serverSyncTree_, path, newNode, transaction.currentWriteId, transaction.applyLocally);\r\n        eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, events);\r\n        repoSendReadyTransactions(repo, repo.transactionQueueTree_);\r\n    }\r\n}\r\n/**\r\n * @param excludeSets - A specific set to exclude\r\n */\r\nfunction repoGetLatestState(repo, path, excludeSets) {\r\n    return (syncTreeCalcCompleteEventCache(repo.serverSyncTree_, path, excludeSets) ||\r\n        ChildrenNode.EMPTY_NODE);\r\n}\r\n/**\r\n * Sends any already-run transactions that aren't waiting for outstanding\r\n * transactions to complete.\r\n *\r\n * Externally it's called with no arguments, but it calls itself recursively\r\n * with a particular transactionQueueTree node to recurse through the tree.\r\n *\r\n * @param node - transactionQueueTree node to start at.\r\n */\r\nfunction repoSendReadyTransactions(repo, node = repo.transactionQueueTree_) {\r\n    // Before recursing, make sure any completed transactions are removed.\r\n    if (!node) {\r\n        repoPruneCompletedTransactionsBelowNode(repo, node);\r\n    }\r\n    if (treeGetValue(node)) {\r\n        const queue = repoBuildTransactionQueue(repo, node);\r\n        assert(queue.length > 0, 'Sending zero length transaction queue');\r\n        const allRun = queue.every((transaction) => transaction.status === 0 /* RUN */);\r\n        // If they're all run (and not sent), we can send them.  Else, we must wait.\r\n        if (allRun) {\r\n            repoSendTransactionQueue(repo, treeGetPath(node), queue);\r\n        }\r\n    }\r\n    else if (treeHasChildren(node)) {\r\n        treeForEachChild(node, childNode => {\r\n            repoSendReadyTransactions(repo, childNode);\r\n        });\r\n    }\r\n}\r\n/**\r\n * Given a list of run transactions, send them to the server and then handle\r\n * the result (success or failure).\r\n *\r\n * @param path - The location of the queue.\r\n * @param queue - Queue of transactions under the specified location.\r\n */\r\nfunction repoSendTransactionQueue(repo, path, queue) {\r\n    // Mark transactions as sent and increment retry count!\r\n    const setsToIgnore = queue.map(txn => {\r\n        return txn.currentWriteId;\r\n    });\r\n    const latestState = repoGetLatestState(repo, path, setsToIgnore);\r\n    let snapToSend = latestState;\r\n    const latestHash = latestState.hash();\r\n    for (let i = 0; i < queue.length; i++) {\r\n        const txn = queue[i];\r\n        assert(txn.status === 0 /* RUN */, 'tryToSendTransactionQueue_: items in queue should all be run.');\r\n        txn.status = 1 /* SENT */;\r\n        txn.retryCount++;\r\n        const relativePath = newRelativePath(path, txn.path);\r\n        // If we've gotten to this point, the output snapshot must be defined.\r\n        snapToSend = snapToSend.updateChild(relativePath /** @type {!Node} */, txn.currentOutputSnapshotRaw);\r\n    }\r\n    const dataToSend = snapToSend.val(true);\r\n    const pathToSend = path;\r\n    // Send the put.\r\n    repo.server_.put(pathToSend.toString(), dataToSend, (status) => {\r\n        repoLog(repo, 'transaction put response', {\r\n            path: pathToSend.toString(),\r\n            status\r\n        });\r\n        let events = [];\r\n        if (status === 'ok') {\r\n            // Queue up the callbacks and fire them after cleaning up all of our\r\n            // transaction state, since the callback could trigger more\r\n            // transactions or sets.\r\n            const callbacks = [];\r\n            for (let i = 0; i < queue.length; i++) {\r\n                queue[i].status = 2 /* COMPLETED */;\r\n                events = events.concat(syncTreeAckUserWrite(repo.serverSyncTree_, queue[i].currentWriteId));\r\n                if (queue[i].onComplete) {\r\n                    // We never unset the output snapshot, and given that this\r\n                    // transaction is complete, it should be set\r\n                    callbacks.push(() => queue[i].onComplete(null, true, queue[i].currentOutputSnapshotResolved));\r\n                }\r\n                queue[i].unwatcher();\r\n            }\r\n            // Now remove the completed transactions.\r\n            repoPruneCompletedTransactionsBelowNode(repo, treeSubTree(repo.transactionQueueTree_, path));\r\n            // There may be pending transactions that we can now send.\r\n            repoSendReadyTransactions(repo, repo.transactionQueueTree_);\r\n            eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, events);\r\n            // Finally, trigger onComplete callbacks.\r\n            for (let i = 0; i < callbacks.length; i++) {\r\n                exceptionGuard(callbacks[i]);\r\n            }\r\n        }\r\n        else {\r\n            // transactions are no longer sent.  Update their status appropriately.\r\n            if (status === 'datastale') {\r\n                for (let i = 0; i < queue.length; i++) {\r\n                    if (queue[i].status === 3 /* SENT_NEEDS_ABORT */) {\r\n                        queue[i].status = 4 /* NEEDS_ABORT */;\r\n                    }\r\n                    else {\r\n                        queue[i].status = 0 /* RUN */;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                warn('transaction at ' + pathToSend.toString() + ' failed: ' + status);\r\n                for (let i = 0; i < queue.length; i++) {\r\n                    queue[i].status = 4 /* NEEDS_ABORT */;\r\n                    queue[i].abortReason = status;\r\n                }\r\n            }\r\n            repoRerunTransactions(repo, path);\r\n        }\r\n    }, latestHash);\r\n}\r\n/**\r\n * Finds all transactions dependent on the data at changedPath and reruns them.\r\n *\r\n * Should be called any time cached data changes.\r\n *\r\n * Return the highest path that was affected by rerunning transactions. This\r\n * is the path at which events need to be raised for.\r\n *\r\n * @param changedPath - The path in mergedData that changed.\r\n * @returns The rootmost path that was affected by rerunning transactions.\r\n */\r\nfunction repoRerunTransactions(repo, changedPath) {\r\n    const rootMostTransactionNode = repoGetAncestorTransactionNode(repo, changedPath);\r\n    const path = treeGetPath(rootMostTransactionNode);\r\n    const queue = repoBuildTransactionQueue(repo, rootMostTransactionNode);\r\n    repoRerunTransactionQueue(repo, queue, path);\r\n    return path;\r\n}\r\n/**\r\n * Does all the work of rerunning transactions (as well as cleans up aborted\r\n * transactions and whatnot).\r\n *\r\n * @param queue - The queue of transactions to run.\r\n * @param path - The path the queue is for.\r\n */\r\nfunction repoRerunTransactionQueue(repo, queue, path) {\r\n    if (queue.length === 0) {\r\n        return; // Nothing to do!\r\n    }\r\n    // Queue up the callbacks and fire them after cleaning up all of our\r\n    // transaction state, since the callback could trigger more transactions or\r\n    // sets.\r\n    const callbacks = [];\r\n    let events = [];\r\n    // Ignore all of the sets we're going to re-run.\r\n    const txnsToRerun = queue.filter(q => {\r\n        return q.status === 0 /* RUN */;\r\n    });\r\n    const setsToIgnore = txnsToRerun.map(q => {\r\n        return q.currentWriteId;\r\n    });\r\n    for (let i = 0; i < queue.length; i++) {\r\n        const transaction = queue[i];\r\n        const relativePath = newRelativePath(path, transaction.path);\r\n        let abortTransaction = false, abortReason;\r\n        assert(relativePath !== null, 'rerunTransactionsUnderNode_: relativePath should not be null.');\r\n        if (transaction.status === 4 /* NEEDS_ABORT */) {\r\n            abortTransaction = true;\r\n            abortReason = transaction.abortReason;\r\n            events = events.concat(syncTreeAckUserWrite(repo.serverSyncTree_, transaction.currentWriteId, true));\r\n        }\r\n        else if (transaction.status === 0 /* RUN */) {\r\n            if (transaction.retryCount >= MAX_TRANSACTION_RETRIES) {\r\n                abortTransaction = true;\r\n                abortReason = 'maxretry';\r\n                events = events.concat(syncTreeAckUserWrite(repo.serverSyncTree_, transaction.currentWriteId, true));\r\n            }\r\n            else {\r\n                // This code reruns a transaction\r\n                const currentNode = repoGetLatestState(repo, transaction.path, setsToIgnore);\r\n                transaction.currentInputSnapshot = currentNode;\r\n                const newData = queue[i].update(currentNode.val());\r\n                if (newData !== undefined) {\r\n                    validateFirebaseData('transaction failed: Data returned ', newData, transaction.path);\r\n                    let newDataNode = nodeFromJSON(newData);\r\n                    const hasExplicitPriority = typeof newData === 'object' &&\r\n                        newData != null &&\r\n                        contains(newData, '.priority');\r\n                    if (!hasExplicitPriority) {\r\n                        // Keep the old priority if there wasn't a priority explicitly specified.\r\n                        newDataNode = newDataNode.updatePriority(currentNode.getPriority());\r\n                    }\r\n                    const oldWriteId = transaction.currentWriteId;\r\n                    const serverValues = repoGenerateServerValues(repo);\r\n                    const newNodeResolved = resolveDeferredValueSnapshot(newDataNode, currentNode, serverValues);\r\n                    transaction.currentOutputSnapshotRaw = newDataNode;\r\n                    transaction.currentOutputSnapshotResolved = newNodeResolved;\r\n                    transaction.currentWriteId = repoGetNextWriteId(repo);\r\n                    // Mutates setsToIgnore in place\r\n                    setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId), 1);\r\n                    events = events.concat(syncTreeApplyUserOverwrite(repo.serverSyncTree_, transaction.path, newNodeResolved, transaction.currentWriteId, transaction.applyLocally));\r\n                    events = events.concat(syncTreeAckUserWrite(repo.serverSyncTree_, oldWriteId, true));\r\n                }\r\n                else {\r\n                    abortTransaction = true;\r\n                    abortReason = 'nodata';\r\n                    events = events.concat(syncTreeAckUserWrite(repo.serverSyncTree_, transaction.currentWriteId, true));\r\n                }\r\n            }\r\n        }\r\n        eventQueueRaiseEventsForChangedPath(repo.eventQueue_, path, events);\r\n        events = [];\r\n        if (abortTransaction) {\r\n            // Abort.\r\n            queue[i].status = 2 /* COMPLETED */;\r\n            // Removing a listener can trigger pruning which can muck with\r\n            // mergedData/visibleData (as it prunes data). So defer the unwatcher\r\n            // until we're done.\r\n            (function (unwatcher) {\r\n                setTimeout(unwatcher, Math.floor(0));\r\n            })(queue[i].unwatcher);\r\n            if (queue[i].onComplete) {\r\n                if (abortReason === 'nodata') {\r\n                    callbacks.push(() => queue[i].onComplete(null, false, queue[i].currentInputSnapshot));\r\n                }\r\n                else {\r\n                    callbacks.push(() => queue[i].onComplete(new Error(abortReason), false, null));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // Clean up completed transactions.\r\n    repoPruneCompletedTransactionsBelowNode(repo, repo.transactionQueueTree_);\r\n    // Now fire callbacks, now that we're in a good, known state.\r\n    for (let i = 0; i < callbacks.length; i++) {\r\n        exceptionGuard(callbacks[i]);\r\n    }\r\n    // Try to send the transaction result to the server.\r\n    repoSendReadyTransactions(repo, repo.transactionQueueTree_);\r\n}\r\n/**\r\n * Returns the rootmost ancestor node of the specified path that has a pending\r\n * transaction on it, or just returns the node for the given path if there are\r\n * no pending transactions on any ancestor.\r\n *\r\n * @param path - The location to start at.\r\n * @returns The rootmost node with a transaction.\r\n */\r\nfunction repoGetAncestorTransactionNode(repo, path) {\r\n    let front;\r\n    // Start at the root and walk deeper into the tree towards path until we\r\n    // find a node with pending transactions.\r\n    let transactionNode = repo.transactionQueueTree_;\r\n    front = pathGetFront(path);\r\n    while (front !== null && treeGetValue(transactionNode) === undefined) {\r\n        transactionNode = treeSubTree(transactionNode, front);\r\n        path = pathPopFront(path);\r\n        front = pathGetFront(path);\r\n    }\r\n    return transactionNode;\r\n}\r\n/**\r\n * Builds the queue of all transactions at or below the specified\r\n * transactionNode.\r\n *\r\n * @param transactionNode\r\n * @returns The generated queue.\r\n */\r\nfunction repoBuildTransactionQueue(repo, transactionNode) {\r\n    // Walk any child transaction queues and aggregate them into a single queue.\r\n    const transactionQueue = [];\r\n    repoAggregateTransactionQueuesForNode(repo, transactionNode, transactionQueue);\r\n    // Sort them by the order the transactions were created.\r\n    transactionQueue.sort((a, b) => a.order - b.order);\r\n    return transactionQueue;\r\n}\r\nfunction repoAggregateTransactionQueuesForNode(repo, node, queue) {\r\n    const nodeQueue = treeGetValue(node);\r\n    if (nodeQueue) {\r\n        for (let i = 0; i < nodeQueue.length; i++) {\r\n            queue.push(nodeQueue[i]);\r\n        }\r\n    }\r\n    treeForEachChild(node, child => {\r\n        repoAggregateTransactionQueuesForNode(repo, child, queue);\r\n    });\r\n}\r\n/**\r\n * Remove COMPLETED transactions at or below this node in the transactionQueueTree_.\r\n */\r\nfunction repoPruneCompletedTransactionsBelowNode(repo, node) {\r\n    const queue = treeGetValue(node);\r\n    if (queue) {\r\n        let to = 0;\r\n        for (let from = 0; from < queue.length; from++) {\r\n            if (queue[from].status !== 2 /* COMPLETED */) {\r\n                queue[to] = queue[from];\r\n                to++;\r\n            }\r\n        }\r\n        queue.length = to;\r\n        treeSetValue(node, queue.length > 0 ? queue : undefined);\r\n    }\r\n    treeForEachChild(node, childNode => {\r\n        repoPruneCompletedTransactionsBelowNode(repo, childNode);\r\n    });\r\n}\r\n/**\r\n * Aborts all transactions on ancestors or descendants of the specified path.\r\n * Called when doing a set() or update() since we consider them incompatible\r\n * with transactions.\r\n *\r\n * @param path - Path for which we want to abort related transactions.\r\n */\r\nfunction repoAbortTransactions(repo, path) {\r\n    const affectedPath = treeGetPath(repoGetAncestorTransactionNode(repo, path));\r\n    const transactionNode = treeSubTree(repo.transactionQueueTree_, path);\r\n    treeForEachAncestor(transactionNode, (node) => {\r\n        repoAbortTransactionsOnNode(repo, node);\r\n    });\r\n    repoAbortTransactionsOnNode(repo, transactionNode);\r\n    treeForEachDescendant(transactionNode, (node) => {\r\n        repoAbortTransactionsOnNode(repo, node);\r\n    });\r\n    return affectedPath;\r\n}\r\n/**\r\n * Abort transactions stored in this transaction queue node.\r\n *\r\n * @param node - Node to abort transactions for.\r\n */\r\nfunction repoAbortTransactionsOnNode(repo, node) {\r\n    const queue = treeGetValue(node);\r\n    if (queue) {\r\n        // Queue up the callbacks and fire them after cleaning up all of our\r\n        // transaction state, since the callback could trigger more transactions\r\n        // or sets.\r\n        const callbacks = [];\r\n        // Go through queue.  Any already-sent transactions must be marked for\r\n        // abort, while the unsent ones can be immediately aborted and removed.\r\n        let events = [];\r\n        let lastSent = -1;\r\n        for (let i = 0; i < queue.length; i++) {\r\n            if (queue[i].status === 3 /* SENT_NEEDS_ABORT */) ;\r\n            else if (queue[i].status === 1 /* SENT */) {\r\n                assert(lastSent === i - 1, 'All SENT items should be at beginning of queue.');\r\n                lastSent = i;\r\n                // Mark transaction for abort when it comes back.\r\n                queue[i].status = 3 /* SENT_NEEDS_ABORT */;\r\n                queue[i].abortReason = 'set';\r\n            }\r\n            else {\r\n                assert(queue[i].status === 0 /* RUN */, 'Unexpected transaction status in abort');\r\n                // We can abort it immediately.\r\n                queue[i].unwatcher();\r\n                events = events.concat(syncTreeAckUserWrite(repo.serverSyncTree_, queue[i].currentWriteId, true));\r\n                if (queue[i].onComplete) {\r\n                    callbacks.push(queue[i].onComplete.bind(null, new Error('set'), false, null));\r\n                }\r\n            }\r\n        }\r\n        if (lastSent === -1) {\r\n            // We're not waiting for any sent transactions.  We can clear the queue.\r\n            treeSetValue(node, undefined);\r\n        }\r\n        else {\r\n            // Remove the transactions we aborted.\r\n            queue.length = lastSent + 1;\r\n        }\r\n        // Now fire the callbacks.\r\n        eventQueueRaiseEventsForChangedPath(repo.eventQueue_, treeGetPath(node), events);\r\n        for (let i = 0; i < callbacks.length; i++) {\r\n            exceptionGuard(callbacks[i]);\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction decodePath(pathString) {\r\n    let pathStringDecoded = '';\r\n    const pieces = pathString.split('/');\r\n    for (let i = 0; i < pieces.length; i++) {\r\n        if (pieces[i].length > 0) {\r\n            let piece = pieces[i];\r\n            try {\r\n                piece = decodeURIComponent(piece.replace(/\\+/g, ' '));\r\n            }\r\n            catch (e) { }\r\n            pathStringDecoded += '/' + piece;\r\n        }\r\n    }\r\n    return pathStringDecoded;\r\n}\r\n/**\r\n * @returns key value hash\r\n */\r\nfunction decodeQuery(queryString) {\r\n    const results = {};\r\n    if (queryString.charAt(0) === '?') {\r\n        queryString = queryString.substring(1);\r\n    }\r\n    for (const segment of queryString.split('&')) {\r\n        if (segment.length === 0) {\r\n            continue;\r\n        }\r\n        const kv = segment.split('=');\r\n        if (kv.length === 2) {\r\n            results[decodeURIComponent(kv[0])] = decodeURIComponent(kv[1]);\r\n        }\r\n        else {\r\n            warn(`Invalid query segment '${segment}' in query '${queryString}'`);\r\n        }\r\n    }\r\n    return results;\r\n}\r\nconst parseRepoInfo = function (dataURL, nodeAdmin) {\r\n    const parsedUrl = parseDatabaseURL(dataURL), namespace = parsedUrl.namespace;\r\n    if (parsedUrl.domain === 'firebase.com') {\r\n        fatal(parsedUrl.host +\r\n            ' is no longer supported. ' +\r\n            'Please use <YOUR FIREBASE>.firebaseio.com instead');\r\n    }\r\n    // Catch common error of uninitialized namespace value.\r\n    if ((!namespace || namespace === 'undefined') &&\r\n        parsedUrl.domain !== 'localhost') {\r\n        fatal('Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com');\r\n    }\r\n    if (!parsedUrl.secure) {\r\n        warnIfPageIsSecure();\r\n    }\r\n    const webSocketOnly = parsedUrl.scheme === 'ws' || parsedUrl.scheme === 'wss';\r\n    return {\r\n        repoInfo: new RepoInfo(parsedUrl.host, parsedUrl.secure, namespace, webSocketOnly, nodeAdmin, \r\n        /*persistenceKey=*/ '', \r\n        /*includeNamespaceInQueryParams=*/ namespace !== parsedUrl.subdomain),\r\n        path: new Path(parsedUrl.pathString)\r\n    };\r\n};\r\nconst parseDatabaseURL = function (dataURL) {\r\n    // Default to empty strings in the event of a malformed string.\r\n    let host = '', domain = '', subdomain = '', pathString = '', namespace = '';\r\n    // Always default to SSL, unless otherwise specified.\r\n    let secure = true, scheme = 'https', port = 443;\r\n    // Don't do any validation here. The caller is responsible for validating the result of parsing.\r\n    if (typeof dataURL === 'string') {\r\n        // Parse scheme.\r\n        let colonInd = dataURL.indexOf('//');\r\n        if (colonInd >= 0) {\r\n            scheme = dataURL.substring(0, colonInd - 1);\r\n            dataURL = dataURL.substring(colonInd + 2);\r\n        }\r\n        // Parse host, path, and query string.\r\n        let slashInd = dataURL.indexOf('/');\r\n        if (slashInd === -1) {\r\n            slashInd = dataURL.length;\r\n        }\r\n        let questionMarkInd = dataURL.indexOf('?');\r\n        if (questionMarkInd === -1) {\r\n            questionMarkInd = dataURL.length;\r\n        }\r\n        host = dataURL.substring(0, Math.min(slashInd, questionMarkInd));\r\n        if (slashInd < questionMarkInd) {\r\n            // For pathString, questionMarkInd will always come after slashInd\r\n            pathString = decodePath(dataURL.substring(slashInd, questionMarkInd));\r\n        }\r\n        const queryParams = decodeQuery(dataURL.substring(Math.min(dataURL.length, questionMarkInd)));\r\n        // If we have a port, use scheme for determining if it's secure.\r\n        colonInd = host.indexOf(':');\r\n        if (colonInd >= 0) {\r\n            secure = scheme === 'https' || scheme === 'wss';\r\n            port = parseInt(host.substring(colonInd + 1), 10);\r\n        }\r\n        else {\r\n            colonInd = host.length;\r\n        }\r\n        const hostWithoutPort = host.slice(0, colonInd);\r\n        if (hostWithoutPort.toLowerCase() === 'localhost') {\r\n            domain = 'localhost';\r\n        }\r\n        else if (hostWithoutPort.split('.').length <= 2) {\r\n            domain = hostWithoutPort;\r\n        }\r\n        else {\r\n            // Interpret the subdomain of a 3 or more component URL as the namespace name.\r\n            const dotInd = host.indexOf('.');\r\n            subdomain = host.substring(0, dotInd).toLowerCase();\r\n            domain = host.substring(dotInd + 1);\r\n            // Normalize namespaces to lowercase to share storage / connection.\r\n            namespace = subdomain;\r\n        }\r\n        // Always treat the value of the `ns` as the namespace name if it is present.\r\n        if ('ns' in queryParams) {\r\n            namespace = queryParams['ns'];\r\n        }\r\n    }\r\n    return {\r\n        host,\r\n        port,\r\n        domain,\r\n        subdomain,\r\n        secure,\r\n        scheme,\r\n        pathString,\r\n        namespace\r\n    };\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Encapsulates the data needed to raise an event\r\n */\r\nclass DataEvent {\r\n    /**\r\n     * @param eventType - One of: value, child_added, child_changed, child_moved, child_removed\r\n     * @param eventRegistration - The function to call to with the event data. User provided\r\n     * @param snapshot - The data backing the event\r\n     * @param prevName - Optional, the name of the previous child for child_* events.\r\n     */\r\n    constructor(eventType, eventRegistration, snapshot, prevName) {\r\n        this.eventType = eventType;\r\n        this.eventRegistration = eventRegistration;\r\n        this.snapshot = snapshot;\r\n        this.prevName = prevName;\r\n    }\r\n    getPath() {\r\n        const ref = this.snapshot.ref;\r\n        if (this.eventType === 'value') {\r\n            return ref._path;\r\n        }\r\n        else {\r\n            return ref.parent._path;\r\n        }\r\n    }\r\n    getEventType() {\r\n        return this.eventType;\r\n    }\r\n    getEventRunner() {\r\n        return this.eventRegistration.getEventRunner(this);\r\n    }\r\n    toString() {\r\n        return (this.getPath().toString() +\r\n            ':' +\r\n            this.eventType +\r\n            ':' +\r\n            stringify(this.snapshot.exportVal()));\r\n    }\r\n}\r\nclass CancelEvent {\r\n    constructor(eventRegistration, error, path) {\r\n        this.eventRegistration = eventRegistration;\r\n        this.error = error;\r\n        this.path = path;\r\n    }\r\n    getPath() {\r\n        return this.path;\r\n    }\r\n    getEventType() {\r\n        return 'cancel';\r\n    }\r\n    getEventRunner() {\r\n        return this.eventRegistration.getEventRunner(this);\r\n    }\r\n    toString() {\r\n        return this.path.toString() + ':cancel';\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A wrapper class that converts events from the database@exp SDK to the legacy\r\n * Database SDK. Events are not converted directly as event registration relies\r\n * on reference comparison of the original user callback (see `matches()`) and\r\n * relies on equality of the legacy SDK's `context` object.\r\n */\r\nclass CallbackContext {\r\n    constructor(snapshotCallback, cancelCallback) {\r\n        this.snapshotCallback = snapshotCallback;\r\n        this.cancelCallback = cancelCallback;\r\n    }\r\n    onValue(expDataSnapshot, previousChildName) {\r\n        this.snapshotCallback.call(null, expDataSnapshot, previousChildName);\r\n    }\r\n    onCancel(error) {\r\n        assert(this.hasCancelCallback, 'Raising a cancel event on a listener with no cancel callback');\r\n        return this.cancelCallback.call(null, error);\r\n    }\r\n    get hasCancelCallback() {\r\n        return !!this.cancelCallback;\r\n    }\r\n    matches(other) {\r\n        return (this.snapshotCallback === other.snapshotCallback ||\r\n            (this.snapshotCallback.userCallback !== undefined &&\r\n                this.snapshotCallback.userCallback ===\r\n                    other.snapshotCallback.userCallback &&\r\n                this.snapshotCallback.context === other.snapshotCallback.context));\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The `onDisconnect` class allows you to write or clear data when your client\r\n * disconnects from the Database server. These updates occur whether your\r\n * client disconnects cleanly or not, so you can rely on them to clean up data\r\n * even if a connection is dropped or a client crashes.\r\n *\r\n * The `onDisconnect` class is most commonly used to manage presence in\r\n * applications where it is useful to detect how many clients are connected and\r\n * when other clients disconnect. See\r\n * {@link https://firebase.google.com/docs/database/web/offline-capabilities | Enabling Offline Capabilities in JavaScript}\r\n * for more information.\r\n *\r\n * To avoid problems when a connection is dropped before the requests can be\r\n * transferred to the Database server, these functions should be called before\r\n * writing any data.\r\n *\r\n * Note that `onDisconnect` operations are only triggered once. If you want an\r\n * operation to occur each time a disconnect occurs, you'll need to re-establish\r\n * the `onDisconnect` operations each time you reconnect.\r\n */\r\nclass OnDisconnect {\r\n    /** @hideconstructor */\r\n    constructor(_repo, _path) {\r\n        this._repo = _repo;\r\n        this._path = _path;\r\n    }\r\n    /**\r\n     * Cancels all previously queued `onDisconnect()` set or update events for this\r\n     * location and all children.\r\n     *\r\n     * If a write has been queued for this location via a `set()` or `update()` at a\r\n     * parent location, the write at this location will be canceled, though writes\r\n     * to sibling locations will still occur.\r\n     *\r\n     * @returns Resolves when synchronization to the server is complete.\r\n     */\r\n    cancel() {\r\n        const deferred = new Deferred();\r\n        repoOnDisconnectCancel(this._repo, this._path, deferred.wrapCallback(() => { }));\r\n        return deferred.promise;\r\n    }\r\n    /**\r\n     * Ensures the data at this location is deleted when the client is disconnected\r\n     * (due to closing the browser, navigating to a new page, or network issues).\r\n     *\r\n     * @returns Resolves when synchronization to the server is complete.\r\n     */\r\n    remove() {\r\n        validateWritablePath('OnDisconnect.remove', this._path);\r\n        const deferred = new Deferred();\r\n        repoOnDisconnectSet(this._repo, this._path, null, deferred.wrapCallback(() => { }));\r\n        return deferred.promise;\r\n    }\r\n    /**\r\n     * Ensures the data at this location is set to the specified value when the\r\n     * client is disconnected (due to closing the browser, navigating to a new page,\r\n     * or network issues).\r\n     *\r\n     * `set()` is especially useful for implementing \"presence\" systems, where a\r\n     * value should be changed or cleared when a user disconnects so that they\r\n     * appear \"offline\" to other users. See\r\n     * {@link https://firebase.google.com/docs/database/web/offline-capabilities | Enabling Offline Capabilities in JavaScript}\r\n     * for more information.\r\n     *\r\n     * Note that `onDisconnect` operations are only triggered once. If you want an\r\n     * operation to occur each time a disconnect occurs, you'll need to re-establish\r\n     * the `onDisconnect` operations each time.\r\n     *\r\n     * @param value - The value to be written to this location on disconnect (can\r\n     * be an object, array, string, number, boolean, or null).\r\n     * @returns Resolves when synchronization to the Database is complete.\r\n     */\r\n    set(value) {\r\n        validateWritablePath('OnDisconnect.set', this._path);\r\n        validateFirebaseDataArg('OnDisconnect.set', value, this._path, false);\r\n        const deferred = new Deferred();\r\n        repoOnDisconnectSet(this._repo, this._path, value, deferred.wrapCallback(() => { }));\r\n        return deferred.promise;\r\n    }\r\n    /**\r\n     * Ensures the data at this location is set to the specified value and priority\r\n     * when the client is disconnected (due to closing the browser, navigating to a\r\n     * new page, or network issues).\r\n     *\r\n     * @param value - The value to be written to this location on disconnect (can\r\n     * be an object, array, string, number, boolean, or null).\r\n     * @param priority - The priority to be written (string, number, or null).\r\n     * @returns Resolves when synchronization to the Database is complete.\r\n     */\r\n    setWithPriority(value, priority) {\r\n        validateWritablePath('OnDisconnect.setWithPriority', this._path);\r\n        validateFirebaseDataArg('OnDisconnect.setWithPriority', value, this._path, false);\r\n        validatePriority('OnDisconnect.setWithPriority', priority, false);\r\n        const deferred = new Deferred();\r\n        repoOnDisconnectSetWithPriority(this._repo, this._path, value, priority, deferred.wrapCallback(() => { }));\r\n        return deferred.promise;\r\n    }\r\n    /**\r\n     * Writes multiple values at this location when the client is disconnected (due\r\n     * to closing the browser, navigating to a new page, or network issues).\r\n     *\r\n     * The `values` argument contains multiple property-value pairs that will be\r\n     * written to the Database together. Each child property can either be a simple\r\n     * property (for example, \"name\") or a relative path (for example, \"name/first\")\r\n     * from the current location to the data to update.\r\n     *\r\n     * As opposed to the `set()` method, `update()` can be use to selectively update\r\n     * only the referenced properties at the current location (instead of replacing\r\n     * all the child properties at the current location).\r\n     *\r\n     * @param values - Object containing multiple values.\r\n     * @returns Resolves when synchronization to the Database is complete.\r\n     */\r\n    update(values) {\r\n        validateWritablePath('OnDisconnect.update', this._path);\r\n        validateFirebaseMergeDataArg('OnDisconnect.update', values, this._path, false);\r\n        const deferred = new Deferred();\r\n        repoOnDisconnectUpdate(this._repo, this._path, values, deferred.wrapCallback(() => { }));\r\n        return deferred.promise;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @internal\r\n */\r\nclass QueryImpl {\r\n    /**\r\n     * @hideconstructor\r\n     */\r\n    constructor(_repo, _path, _queryParams, _orderByCalled) {\r\n        this._repo = _repo;\r\n        this._path = _path;\r\n        this._queryParams = _queryParams;\r\n        this._orderByCalled = _orderByCalled;\r\n    }\r\n    get key() {\r\n        if (pathIsEmpty(this._path)) {\r\n            return null;\r\n        }\r\n        else {\r\n            return pathGetBack(this._path);\r\n        }\r\n    }\r\n    get ref() {\r\n        return new ReferenceImpl(this._repo, this._path);\r\n    }\r\n    get _queryIdentifier() {\r\n        const obj = queryParamsGetQueryObject(this._queryParams);\r\n        const id = ObjectToUniqueKey(obj);\r\n        return id === '{}' ? 'default' : id;\r\n    }\r\n    /**\r\n     * An object representation of the query parameters used by this Query.\r\n     */\r\n    get _queryObject() {\r\n        return queryParamsGetQueryObject(this._queryParams);\r\n    }\r\n    isEqual(other) {\r\n        other = getModularInstance(other);\r\n        if (!(other instanceof QueryImpl)) {\r\n            return false;\r\n        }\r\n        const sameRepo = this._repo === other._repo;\r\n        const samePath = pathEquals(this._path, other._path);\r\n        const sameQueryIdentifier = this._queryIdentifier === other._queryIdentifier;\r\n        return sameRepo && samePath && sameQueryIdentifier;\r\n    }\r\n    toJSON() {\r\n        return this.toString();\r\n    }\r\n    toString() {\r\n        return this._repo.toString() + pathToUrlEncodedString(this._path);\r\n    }\r\n}\r\n/**\r\n * Validates that no other order by call has been made\r\n */\r\nfunction validateNoPreviousOrderByCall(query, fnName) {\r\n    if (query._orderByCalled === true) {\r\n        throw new Error(fnName + \": You can't combine multiple orderBy calls.\");\r\n    }\r\n}\r\n/**\r\n * Validates start/end values for queries.\r\n */\r\nfunction validateQueryEndpoints(params) {\r\n    let startNode = null;\r\n    let endNode = null;\r\n    if (params.hasStart()) {\r\n        startNode = params.getIndexStartValue();\r\n    }\r\n    if (params.hasEnd()) {\r\n        endNode = params.getIndexEndValue();\r\n    }\r\n    if (params.getIndex() === KEY_INDEX) {\r\n        const tooManyArgsError = 'Query: When ordering by key, you may only pass one argument to ' +\r\n            'startAt(), endAt(), or equalTo().';\r\n        const wrongArgTypeError = 'Query: When ordering by key, the argument passed to startAt(), startAfter(), ' +\r\n            'endAt(), endBefore(), or equalTo() must be a string.';\r\n        if (params.hasStart()) {\r\n            const startName = params.getIndexStartName();\r\n            if (startName !== MIN_NAME) {\r\n                throw new Error(tooManyArgsError);\r\n            }\r\n            else if (typeof startNode !== 'string') {\r\n                throw new Error(wrongArgTypeError);\r\n            }\r\n        }\r\n        if (params.hasEnd()) {\r\n            const endName = params.getIndexEndName();\r\n            if (endName !== MAX_NAME) {\r\n                throw new Error(tooManyArgsError);\r\n            }\r\n            else if (typeof endNode !== 'string') {\r\n                throw new Error(wrongArgTypeError);\r\n            }\r\n        }\r\n    }\r\n    else if (params.getIndex() === PRIORITY_INDEX) {\r\n        if ((startNode != null && !isValidPriority(startNode)) ||\r\n            (endNode != null && !isValidPriority(endNode))) {\r\n            throw new Error('Query: When ordering by priority, the first argument passed to startAt(), ' +\r\n                'startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value ' +\r\n                '(null, a number, or a string).');\r\n        }\r\n    }\r\n    else {\r\n        assert(params.getIndex() instanceof PathIndex ||\r\n            params.getIndex() === VALUE_INDEX, 'unknown index type.');\r\n        if ((startNode != null && typeof startNode === 'object') ||\r\n            (endNode != null && typeof endNode === 'object')) {\r\n            throw new Error('Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or ' +\r\n                'equalTo() cannot be an object.');\r\n        }\r\n    }\r\n}\r\n/**\r\n * Validates that limit* has been called with the correct combination of parameters\r\n */\r\nfunction validateLimit(params) {\r\n    if (params.hasStart() &&\r\n        params.hasEnd() &&\r\n        params.hasLimit() &&\r\n        !params.hasAnchoredLimit()) {\r\n        throw new Error(\"Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use \" +\r\n            'limitToFirst() or limitToLast() instead.');\r\n    }\r\n}\r\n/**\r\n * @internal\r\n */\r\nclass ReferenceImpl extends QueryImpl {\r\n    /** @hideconstructor */\r\n    constructor(repo, path) {\r\n        super(repo, path, new QueryParams(), false);\r\n    }\r\n    get parent() {\r\n        const parentPath = pathParent(this._path);\r\n        return parentPath === null\r\n            ? null\r\n            : new ReferenceImpl(this._repo, parentPath);\r\n    }\r\n    get root() {\r\n        let ref = this;\r\n        while (ref.parent !== null) {\r\n            ref = ref.parent;\r\n        }\r\n        return ref;\r\n    }\r\n}\r\n/**\r\n * A `DataSnapshot` contains data from a Database location.\r\n *\r\n * Any time you read data from the Database, you receive the data as a\r\n * `DataSnapshot`. A `DataSnapshot` is passed to the event callbacks you attach\r\n * with `on()` or `once()`. You can extract the contents of the snapshot as a\r\n * JavaScript object by calling the `val()` method. Alternatively, you can\r\n * traverse into the snapshot by calling `child()` to return child snapshots\r\n * (which you could then call `val()` on).\r\n *\r\n * A `DataSnapshot` is an efficiently generated, immutable copy of the data at\r\n * a Database location. It cannot be modified and will never change (to modify\r\n * data, you always call the `set()` method on a `Reference` directly).\r\n */\r\nclass DataSnapshot {\r\n    /**\r\n     * @param _node - A SnapshotNode to wrap.\r\n     * @param ref - The location this snapshot came from.\r\n     * @param _index - The iteration order for this snapshot\r\n     * @hideconstructor\r\n     */\r\n    constructor(_node, \r\n    /**\r\n     * The location of this DataSnapshot.\r\n     */\r\n    ref, _index) {\r\n        this._node = _node;\r\n        this.ref = ref;\r\n        this._index = _index;\r\n    }\r\n    /**\r\n     * Gets the priority value of the data in this `DataSnapshot`.\r\n     *\r\n     * Applications need not use priority but can order collections by\r\n     * ordinary properties (see\r\n     * {@link https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data |Sorting and filtering data}\r\n     * ).\r\n     */\r\n    get priority() {\r\n        // typecast here because we never return deferred values or internal priorities (MAX_PRIORITY)\r\n        return this._node.getPriority().val();\r\n    }\r\n    /**\r\n     * The key (last part of the path) of the location of this `DataSnapshot`.\r\n     *\r\n     * The last token in a Database location is considered its key. For example,\r\n     * \"ada\" is the key for the /users/ada/ node. Accessing the key on any\r\n     * `DataSnapshot` will return the key for the location that generated it.\r\n     * However, accessing the key on the root URL of a Database will return\r\n     * `null`.\r\n     */\r\n    get key() {\r\n        return this.ref.key;\r\n    }\r\n    /** Returns the number of child properties of this `DataSnapshot`. */\r\n    get size() {\r\n        return this._node.numChildren();\r\n    }\r\n    /**\r\n     * Gets another `DataSnapshot` for the location at the specified relative path.\r\n     *\r\n     * Passing a relative path to the `child()` method of a DataSnapshot returns\r\n     * another `DataSnapshot` for the location at the specified relative path. The\r\n     * relative path can either be a simple child name (for example, \"ada\") or a\r\n     * deeper, slash-separated path (for example, \"ada/name/first\"). If the child\r\n     * location has no data, an empty `DataSnapshot` (that is, a `DataSnapshot`\r\n     * whose value is `null`) is returned.\r\n     *\r\n     * @param path - A relative path to the location of child data.\r\n     */\r\n    child(path) {\r\n        const childPath = new Path(path);\r\n        const childRef = child(this.ref, path);\r\n        return new DataSnapshot(this._node.getChild(childPath), childRef, PRIORITY_INDEX);\r\n    }\r\n    /**\r\n     * Returns true if this `DataSnapshot` contains any data. It is slightly more\r\n     * efficient than using `snapshot.val() !== null`.\r\n     */\r\n    exists() {\r\n        return !this._node.isEmpty();\r\n    }\r\n    /**\r\n     * Exports the entire contents of the DataSnapshot as a JavaScript object.\r\n     *\r\n     * The `exportVal()` method is similar to `val()`, except priority information\r\n     * is included (if available), making it suitable for backing up your data.\r\n     *\r\n     * @returns The DataSnapshot's contents as a JavaScript value (Object,\r\n     *   Array, string, number, boolean, or `null`).\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    exportVal() {\r\n        return this._node.val(true);\r\n    }\r\n    /**\r\n     * Enumerates the top-level children in the `DataSnapshot`.\r\n     *\r\n     * Because of the way JavaScript objects work, the ordering of data in the\r\n     * JavaScript object returned by `val()` is not guaranteed to match the\r\n     * ordering on the server nor the ordering of `onChildAdded()` events. That is\r\n     * where `forEach()` comes in handy. It guarantees the children of a\r\n     * `DataSnapshot` will be iterated in their query order.\r\n     *\r\n     * If no explicit `orderBy*()` method is used, results are returned\r\n     * ordered by key (unless priorities are used, in which case, results are\r\n     * returned by priority).\r\n     *\r\n     * @param action - A function that will be called for each child DataSnapshot.\r\n     * The callback can return true to cancel further enumeration.\r\n     * @returns true if enumeration was canceled due to your callback returning\r\n     * true.\r\n     */\r\n    forEach(action) {\r\n        if (this._node.isLeafNode()) {\r\n            return false;\r\n        }\r\n        const childrenNode = this._node;\r\n        // Sanitize the return value to a boolean. ChildrenNode.forEachChild has a weird return type...\r\n        return !!childrenNode.forEachChild(this._index, (key, node) => {\r\n            return action(new DataSnapshot(node, child(this.ref, key), PRIORITY_INDEX));\r\n        });\r\n    }\r\n    /**\r\n     * Returns true if the specified child path has (non-null) data.\r\n     *\r\n     * @param path - A relative path to the location of a potential child.\r\n     * @returns `true` if data exists at the specified child path; else\r\n     *  `false`.\r\n     */\r\n    hasChild(path) {\r\n        const childPath = new Path(path);\r\n        return !this._node.getChild(childPath).isEmpty();\r\n    }\r\n    /**\r\n     * Returns whether or not the `DataSnapshot` has any non-`null` child\r\n     * properties.\r\n     *\r\n     * You can use `hasChildren()` to determine if a `DataSnapshot` has any\r\n     * children. If it does, you can enumerate them using `forEach()`. If it\r\n     * doesn't, then either this snapshot contains a primitive value (which can be\r\n     * retrieved with `val()`) or it is empty (in which case, `val()` will return\r\n     * `null`).\r\n     *\r\n     * @returns true if this snapshot has any children; else false.\r\n     */\r\n    hasChildren() {\r\n        if (this._node.isLeafNode()) {\r\n            return false;\r\n        }\r\n        else {\r\n            return !this._node.isEmpty();\r\n        }\r\n    }\r\n    /**\r\n     * Returns a JSON-serializable representation of this object.\r\n     */\r\n    toJSON() {\r\n        return this.exportVal();\r\n    }\r\n    /**\r\n     * Extracts a JavaScript value from a `DataSnapshot`.\r\n     *\r\n     * Depending on the data in a `DataSnapshot`, the `val()` method may return a\r\n     * scalar type (string, number, or boolean), an array, or an object. It may\r\n     * also return null, indicating that the `DataSnapshot` is empty (contains no\r\n     * data).\r\n     *\r\n     * @returns The DataSnapshot's contents as a JavaScript value (Object,\r\n     *   Array, string, number, boolean, or `null`).\r\n     */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    val() {\r\n        return this._node.val();\r\n    }\r\n}\r\n/**\r\n *\r\n * Returns a `Reference` representing the location in the Database\r\n * corresponding to the provided path. If no path is provided, the `Reference`\r\n * will point to the root of the Database.\r\n *\r\n * @param db - The database instance to obtain a reference for.\r\n * @param path - Optional path representing the location the returned\r\n *   `Reference` will point. If not provided, the returned `Reference` will\r\n *   point to the root of the Database.\r\n * @returns If a path is provided, a `Reference`\r\n *   pointing to the provided path. Otherwise, a `Reference` pointing to the\r\n *   root of the Database.\r\n */\r\nfunction ref(db, path) {\r\n    db = getModularInstance(db);\r\n    db._checkNotDeleted('ref');\r\n    return path !== undefined ? child(db._root, path) : db._root;\r\n}\r\n/**\r\n * Returns a `Reference` representing the location in the Database\r\n * corresponding to the provided Firebase URL.\r\n *\r\n * An exception is thrown if the URL is not a valid Firebase Database URL or it\r\n * has a different domain than the current `Database` instance.\r\n *\r\n * Note that all query parameters (`orderBy`, `limitToLast`, etc.) are ignored\r\n * and are not applied to the returned `Reference`.\r\n *\r\n * @param db - The database instance to obtain a reference for.\r\n * @param url - The Firebase URL at which the returned `Reference` will\r\n *   point.\r\n * @returns A `Reference` pointing to the provided\r\n *   Firebase URL.\r\n */\r\nfunction refFromURL(db, url) {\r\n    db = getModularInstance(db);\r\n    db._checkNotDeleted('refFromURL');\r\n    const parsedURL = parseRepoInfo(url, db._repo.repoInfo_.nodeAdmin);\r\n    validateUrl('refFromURL', parsedURL);\r\n    const repoInfo = parsedURL.repoInfo;\r\n    if (!db._repo.repoInfo_.isCustomHost() &&\r\n        repoInfo.host !== db._repo.repoInfo_.host) {\r\n        fatal('refFromURL' +\r\n            ': Host name does not match the current database: ' +\r\n            '(found ' +\r\n            repoInfo.host +\r\n            ' but expected ' +\r\n            db._repo.repoInfo_.host +\r\n            ')');\r\n    }\r\n    return ref(db, parsedURL.path.toString());\r\n}\r\n/**\r\n * Gets a `Reference` for the location at the specified relative path.\r\n *\r\n * The relative path can either be a simple child name (for example, \"ada\") or\r\n * a deeper slash-separated path (for example, \"ada/name/first\").\r\n *\r\n * @param parent - The parent location.\r\n * @param path - A relative path from this location to the desired child\r\n *   location.\r\n * @returns The specified child location.\r\n */\r\nfunction child(parent, path) {\r\n    parent = getModularInstance(parent);\r\n    if (pathGetFront(parent._path) === null) {\r\n        validateRootPathString('child', 'path', path, false);\r\n    }\r\n    else {\r\n        validatePathString('child', 'path', path, false);\r\n    }\r\n    return new ReferenceImpl(parent._repo, pathChild(parent._path, path));\r\n}\r\n/**\r\n * Returns an `OnDisconnect` object - see\r\n * {@link https://firebase.google.com/docs/database/web/offline-capabilities | Enabling Offline Capabilities in JavaScript}\r\n * for more information on how to use it.\r\n *\r\n * @param ref - The reference to add OnDisconnect triggers for.\r\n */\r\nfunction onDisconnect(ref) {\r\n    ref = getModularInstance(ref);\r\n    return new OnDisconnect(ref._repo, ref._path);\r\n}\r\n/**\r\n * Generates a new child location using a unique key and returns its\r\n * `Reference`.\r\n *\r\n * This is the most common pattern for adding data to a collection of items.\r\n *\r\n * If you provide a value to `push()`, the value is written to the\r\n * generated location. If you don't pass a value, nothing is written to the\r\n * database and the child remains empty (but you can use the `Reference`\r\n * elsewhere).\r\n *\r\n * The unique keys generated by `push()` are ordered by the current time, so the\r\n * resulting list of items is chronologically sorted. The keys are also\r\n * designed to be unguessable (they contain 72 random bits of entropy).\r\n *\r\n * See {@link https://firebase.google.com/docs/database/web/lists-of-data#append_to_a_list_of_data | Append to a list of data}\r\n * </br>See {@link ttps://firebase.googleblog.com/2015/02/the-2120-ways-to-ensure-unique_68.html | The 2^120 Ways to Ensure Unique Identifiers}\r\n *\r\n * @param parent - The parent location.\r\n * @param value - Optional value to be written at the generated location.\r\n * @returns Combined `Promise` and `Reference`; resolves when write is complete,\r\n * but can be used immediately as the `Reference` to the child location.\r\n */\r\nfunction push(parent, value) {\r\n    parent = getModularInstance(parent);\r\n    validateWritablePath('push', parent._path);\r\n    validateFirebaseDataArg('push', value, parent._path, true);\r\n    const now = repoServerTime(parent._repo);\r\n    const name = nextPushId(now);\r\n    // push() returns a ThennableReference whose promise is fulfilled with a\r\n    // regular Reference. We use child() to create handles to two different\r\n    // references. The first is turned into a ThennableReference below by adding\r\n    // then() and catch() methods and is used as the return value of push(). The\r\n    // second remains a regular Reference and is used as the fulfilled value of\r\n    // the first ThennableReference.\r\n    const thennablePushRef = child(parent, name);\r\n    const pushRef = child(parent, name);\r\n    let promise;\r\n    if (value != null) {\r\n        promise = set(pushRef, value).then(() => pushRef);\r\n    }\r\n    else {\r\n        promise = Promise.resolve(pushRef);\r\n    }\r\n    thennablePushRef.then = promise.then.bind(promise);\r\n    thennablePushRef.catch = promise.then.bind(promise, undefined);\r\n    return thennablePushRef;\r\n}\r\n/**\r\n * Removes the data at this Database location.\r\n *\r\n * Any data at child locations will also be deleted.\r\n *\r\n * The effect of the remove will be visible immediately and the corresponding\r\n * event 'value' will be triggered. Synchronization of the remove to the\r\n * Firebase servers will also be started, and the returned Promise will resolve\r\n * when complete. If provided, the onComplete callback will be called\r\n * asynchronously after synchronization has finished.\r\n *\r\n * @param ref - The location to remove.\r\n * @returns Resolves when remove on server is complete.\r\n */\r\nfunction remove(ref) {\r\n    validateWritablePath('remove', ref._path);\r\n    return set(ref, null);\r\n}\r\n/**\r\n * Writes data to this Database location.\r\n *\r\n * This will overwrite any data at this location and all child locations.\r\n *\r\n * The effect of the write will be visible immediately, and the corresponding\r\n * events (\"value\", \"child_added\", etc.) will be triggered. Synchronization of\r\n * the data to the Firebase servers will also be started, and the returned\r\n * Promise will resolve when complete. If provided, the `onComplete` callback\r\n * will be called asynchronously after synchronization has finished.\r\n *\r\n * Passing `null` for the new value is equivalent to calling `remove()`; namely,\r\n * all data at this location and all child locations will be deleted.\r\n *\r\n * `set()` will remove any priority stored at this location, so if priority is\r\n * meant to be preserved, you need to use `setWithPriority()` instead.\r\n *\r\n * Note that modifying data with `set()` will cancel any pending transactions\r\n * at that location, so extreme care should be taken if mixing `set()` and\r\n * `transaction()` to modify the same data.\r\n *\r\n * A single `set()` will generate a single \"value\" event at the location where\r\n * the `set()` was performed.\r\n *\r\n * @param ref - The location to write to.\r\n * @param value - The value to be written (string, number, boolean, object,\r\n *   array, or null).\r\n * @returns Resolves when write to server is complete.\r\n */\r\nfunction set(ref, value) {\r\n    ref = getModularInstance(ref);\r\n    validateWritablePath('set', ref._path);\r\n    validateFirebaseDataArg('set', value, ref._path, false);\r\n    const deferred = new Deferred();\r\n    repoSetWithPriority(ref._repo, ref._path, value, \r\n    /*priority=*/ null, deferred.wrapCallback(() => { }));\r\n    return deferred.promise;\r\n}\r\n/**\r\n * Sets a priority for the data at this Database location.\r\n *\r\n * Applications need not use priority but can order collections by\r\n * ordinary properties (see\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data | Sorting and filtering data}\r\n * ).\r\n *\r\n * @param ref - The location to write to.\r\n * @param priority - The priority to be written (string, number, or null).\r\n * @returns Resolves when write to server is complete.\r\n */\r\nfunction setPriority(ref, priority) {\r\n    ref = getModularInstance(ref);\r\n    validateWritablePath('setPriority', ref._path);\r\n    validatePriority('setPriority', priority, false);\r\n    const deferred = new Deferred();\r\n    repoSetWithPriority(ref._repo, pathChild(ref._path, '.priority'), priority, null, deferred.wrapCallback(() => { }));\r\n    return deferred.promise;\r\n}\r\n/**\r\n * Writes data the Database location. Like `set()` but also specifies the\r\n * priority for that data.\r\n *\r\n * Applications need not use priority but can order collections by\r\n * ordinary properties (see\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sorting_and_filtering_data | Sorting and filtering data}\r\n * ).\r\n *\r\n * @param ref - The location to write to.\r\n * @param value - The value to be written (string, number, boolean, object,\r\n *   array, or null).\r\n * @param priority - The priority to be written (string, number, or null).\r\n * @returns Resolves when write to server is complete.\r\n */\r\nfunction setWithPriority(ref, value, priority) {\r\n    validateWritablePath('setWithPriority', ref._path);\r\n    validateFirebaseDataArg('setWithPriority', value, ref._path, false);\r\n    validatePriority('setWithPriority', priority, false);\r\n    if (ref.key === '.length' || ref.key === '.keys') {\r\n        throw 'setWithPriority failed: ' + ref.key + ' is a read-only object.';\r\n    }\r\n    const deferred = new Deferred();\r\n    repoSetWithPriority(ref._repo, ref._path, value, priority, deferred.wrapCallback(() => { }));\r\n    return deferred.promise;\r\n}\r\n/**\r\n * Writes multiple values to the Database at once.\r\n *\r\n * The `values` argument contains multiple property-value pairs that will be\r\n * written to the Database together. Each child property can either be a simple\r\n * property (for example, \"name\") or a relative path (for example,\r\n * \"name/first\") from the current location to the data to update.\r\n *\r\n * As opposed to the `set()` method, `update()` can be use to selectively update\r\n * only the referenced properties at the current location (instead of replacing\r\n * all the child properties at the current location).\r\n *\r\n * The effect of the write will be visible immediately, and the corresponding\r\n * events ('value', 'child_added', etc.) will be triggered. Synchronization of\r\n * the data to the Firebase servers will also be started, and the returned\r\n * Promise will resolve when complete. If provided, the `onComplete` callback\r\n * will be called asynchronously after synchronization has finished.\r\n *\r\n * A single `update()` will generate a single \"value\" event at the location\r\n * where the `update()` was performed, regardless of how many children were\r\n * modified.\r\n *\r\n * Note that modifying data with `update()` will cancel any pending\r\n * transactions at that location, so extreme care should be taken if mixing\r\n * `update()` and `transaction()` to modify the same data.\r\n *\r\n * Passing `null` to `update()` will remove the data at this location.\r\n *\r\n * See\r\n * {@link https://firebase.googleblog.com/2015/09/introducing-multi-location-updates-and_86.html | Introducing multi-location updates and more}.\r\n *\r\n * @param ref - The location to write to.\r\n * @param values - Object containing multiple values.\r\n * @returns Resolves when update on server is complete.\r\n */\r\nfunction update(ref, values) {\r\n    validateFirebaseMergeDataArg('update', values, ref._path, false);\r\n    const deferred = new Deferred();\r\n    repoUpdate(ref._repo, ref._path, values, deferred.wrapCallback(() => { }));\r\n    return deferred.promise;\r\n}\r\n/**\r\n * Gets the most up-to-date result for this query.\r\n *\r\n * @param query - The query to run.\r\n * @returns A `Promise` which resolves to the resulting DataSnapshot if a value is\r\n * available, or rejects if the client is unable to return a value (e.g., if the\r\n * server is unreachable and there is nothing cached).\r\n */\r\nfunction get(query) {\r\n    query = getModularInstance(query);\r\n    const callbackContext = new CallbackContext(() => { });\r\n    const container = new ValueEventRegistration(callbackContext);\r\n    return repoGetValue(query._repo, query, container).then(node => {\r\n        return new DataSnapshot(node, new ReferenceImpl(query._repo, query._path), query._queryParams.getIndex());\r\n    });\r\n}\r\n/**\r\n * Represents registration for 'value' events.\r\n */\r\nclass ValueEventRegistration {\r\n    constructor(callbackContext) {\r\n        this.callbackContext = callbackContext;\r\n    }\r\n    respondsTo(eventType) {\r\n        return eventType === 'value';\r\n    }\r\n    createEvent(change, query) {\r\n        const index = query._queryParams.getIndex();\r\n        return new DataEvent('value', this, new DataSnapshot(change.snapshotNode, new ReferenceImpl(query._repo, query._path), index));\r\n    }\r\n    getEventRunner(eventData) {\r\n        if (eventData.getEventType() === 'cancel') {\r\n            return () => this.callbackContext.onCancel(eventData.error);\r\n        }\r\n        else {\r\n            return () => this.callbackContext.onValue(eventData.snapshot, null);\r\n        }\r\n    }\r\n    createCancelEvent(error, path) {\r\n        if (this.callbackContext.hasCancelCallback) {\r\n            return new CancelEvent(this, error, path);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    matches(other) {\r\n        if (!(other instanceof ValueEventRegistration)) {\r\n            return false;\r\n        }\r\n        else if (!other.callbackContext || !this.callbackContext) {\r\n            // If no callback specified, we consider it to match any callback.\r\n            return true;\r\n        }\r\n        else {\r\n            return other.callbackContext.matches(this.callbackContext);\r\n        }\r\n    }\r\n    hasAnyCallback() {\r\n        return this.callbackContext !== null;\r\n    }\r\n}\r\n/**\r\n * Represents the registration of a child_x event.\r\n */\r\nclass ChildEventRegistration {\r\n    constructor(eventType, callbackContext) {\r\n        this.eventType = eventType;\r\n        this.callbackContext = callbackContext;\r\n    }\r\n    respondsTo(eventType) {\r\n        let eventToCheck = eventType === 'children_added' ? 'child_added' : eventType;\r\n        eventToCheck =\r\n            eventToCheck === 'children_removed' ? 'child_removed' : eventToCheck;\r\n        return this.eventType === eventToCheck;\r\n    }\r\n    createCancelEvent(error, path) {\r\n        if (this.callbackContext.hasCancelCallback) {\r\n            return new CancelEvent(this, error, path);\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    createEvent(change, query) {\r\n        assert(change.childName != null, 'Child events should have a childName.');\r\n        const childRef = child(new ReferenceImpl(query._repo, query._path), change.childName);\r\n        const index = query._queryParams.getIndex();\r\n        return new DataEvent(change.type, this, new DataSnapshot(change.snapshotNode, childRef, index), change.prevName);\r\n    }\r\n    getEventRunner(eventData) {\r\n        if (eventData.getEventType() === 'cancel') {\r\n            return () => this.callbackContext.onCancel(eventData.error);\r\n        }\r\n        else {\r\n            return () => this.callbackContext.onValue(eventData.snapshot, eventData.prevName);\r\n        }\r\n    }\r\n    matches(other) {\r\n        if (other instanceof ChildEventRegistration) {\r\n            return (this.eventType === other.eventType &&\r\n                (!this.callbackContext ||\r\n                    !other.callbackContext ||\r\n                    this.callbackContext.matches(other.callbackContext)));\r\n        }\r\n        return false;\r\n    }\r\n    hasAnyCallback() {\r\n        return !!this.callbackContext;\r\n    }\r\n}\r\nfunction addEventListener(query, eventType, callback, cancelCallbackOrListenOptions, options) {\r\n    let cancelCallback;\r\n    if (typeof cancelCallbackOrListenOptions === 'object') {\r\n        cancelCallback = undefined;\r\n        options = cancelCallbackOrListenOptions;\r\n    }\r\n    if (typeof cancelCallbackOrListenOptions === 'function') {\r\n        cancelCallback = cancelCallbackOrListenOptions;\r\n    }\r\n    if (options && options.onlyOnce) {\r\n        const userCallback = callback;\r\n        const onceCallback = (dataSnapshot, previousChildName) => {\r\n            repoRemoveEventCallbackForQuery(query._repo, query, container);\r\n            userCallback(dataSnapshot, previousChildName);\r\n        };\r\n        onceCallback.userCallback = callback.userCallback;\r\n        onceCallback.context = callback.context;\r\n        callback = onceCallback;\r\n    }\r\n    const callbackContext = new CallbackContext(callback, cancelCallback || undefined);\r\n    const container = eventType === 'value'\r\n        ? new ValueEventRegistration(callbackContext)\r\n        : new ChildEventRegistration(eventType, callbackContext);\r\n    repoAddEventCallbackForQuery(query._repo, query, container);\r\n    return () => repoRemoveEventCallbackForQuery(query._repo, query, container);\r\n}\r\nfunction onValue(query, callback, cancelCallbackOrListenOptions, options) {\r\n    return addEventListener(query, 'value', callback, cancelCallbackOrListenOptions, options);\r\n}\r\nfunction onChildAdded(query, callback, cancelCallbackOrListenOptions, options) {\r\n    return addEventListener(query, 'child_added', callback, cancelCallbackOrListenOptions, options);\r\n}\r\nfunction onChildChanged(query, callback, cancelCallbackOrListenOptions, options) {\r\n    return addEventListener(query, 'child_changed', callback, cancelCallbackOrListenOptions, options);\r\n}\r\nfunction onChildMoved(query, callback, cancelCallbackOrListenOptions, options) {\r\n    return addEventListener(query, 'child_moved', callback, cancelCallbackOrListenOptions, options);\r\n}\r\nfunction onChildRemoved(query, callback, cancelCallbackOrListenOptions, options) {\r\n    return addEventListener(query, 'child_removed', callback, cancelCallbackOrListenOptions, options);\r\n}\r\n/**\r\n * Detaches a callback previously attached with the corresponding `on*()` (`onValue`, `onChildAdded`) listener.\r\n * Note: This is not the recommended way to remove a listener. Instead, please use the returned callback function from\r\n * the respective `on*` callbacks.\r\n *\r\n * Detach a callback previously attached with `on*()`. Calling `off()` on a parent listener\r\n * will not automatically remove listeners registered on child nodes, `off()`\r\n * must also be called on any child listeners to remove the callback.\r\n *\r\n * If a callback is not specified, all callbacks for the specified eventType\r\n * will be removed. Similarly, if no eventType is specified, all callbacks\r\n * for the `Reference` will be removed.\r\n *\r\n * Individual listeners can also be removed by invoking their unsubscribe\r\n * callbacks.\r\n *\r\n * @param query - The query that the listener was registered with.\r\n * @param eventType - One of the following strings: \"value\", \"child_added\",\r\n * \"child_changed\", \"child_removed\", or \"child_moved.\" If omitted, all callbacks\r\n * for the `Reference` will be removed.\r\n * @param callback - The callback function that was passed to `on()` or\r\n * `undefined` to remove all callbacks.\r\n */\r\nfunction off(query, eventType, callback) {\r\n    let container = null;\r\n    const expCallback = callback ? new CallbackContext(callback) : null;\r\n    if (eventType === 'value') {\r\n        container = new ValueEventRegistration(expCallback);\r\n    }\r\n    else if (eventType) {\r\n        container = new ChildEventRegistration(eventType, expCallback);\r\n    }\r\n    repoRemoveEventCallbackForQuery(query._repo, query, container);\r\n}\r\n/**\r\n * A `QueryConstraint` is used to narrow the set of documents returned by a\r\n * Database query. `QueryConstraint`s are created by invoking {@link endAt},\r\n * {@link endBefore}, {@link startAt}, {@link startAfter}, {@link\r\n * limitToFirst}, {@link limitToLast}, {@link orderByChild},\r\n * {@link orderByChild}, {@link orderByKey} , {@link orderByPriority} ,\r\n * {@link orderByValue}  or {@link equalTo} and\r\n * can then be passed to {@link query} to create a new query instance that\r\n * also contains this `QueryConstraint`.\r\n */\r\nclass QueryConstraint {\r\n}\r\nclass QueryEndAtConstraint extends QueryConstraint {\r\n    constructor(_value, _key) {\r\n        super();\r\n        this._value = _value;\r\n        this._key = _key;\r\n    }\r\n    _apply(query) {\r\n        validateFirebaseDataArg('endAt', this._value, query._path, true);\r\n        const newParams = queryParamsEndAt(query._queryParams, this._value, this._key);\r\n        validateLimit(newParams);\r\n        validateQueryEndpoints(newParams);\r\n        if (query._queryParams.hasEnd()) {\r\n            throw new Error('endAt: Starting point was already set (by another call to endAt, ' +\r\n                'endBefore or equalTo).');\r\n        }\r\n        return new QueryImpl(query._repo, query._path, newParams, query._orderByCalled);\r\n    }\r\n}\r\n/**\r\n * Creates a `QueryConstraint` with the specified ending point.\r\n *\r\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\r\n * allows you to choose arbitrary starting and ending points for your queries.\r\n *\r\n * The ending point is inclusive, so children with exactly the specified value\r\n * will be included in the query. The optional key argument can be used to\r\n * further limit the range of the query. If it is specified, then children that\r\n * have exactly the specified value must also have a key name less than or equal\r\n * to the specified key.\r\n *\r\n * You can read more about `endAt()` in\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\r\n *\r\n * @param value - The value to end at. The argument type depends on which\r\n * `orderBy*()` function was used in this query. Specify a value that matches\r\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\r\n * value must be a string.\r\n * @param key - The child key to end at, among the children with the previously\r\n * specified priority. This argument is only allowed if ordering by child,\r\n * value, or priority.\r\n */\r\nfunction endAt(value, key) {\r\n    validateKey('endAt', 'key', key, true);\r\n    return new QueryEndAtConstraint(value, key);\r\n}\r\nclass QueryEndBeforeConstraint extends QueryConstraint {\r\n    constructor(_value, _key) {\r\n        super();\r\n        this._value = _value;\r\n        this._key = _key;\r\n    }\r\n    _apply(query) {\r\n        validateFirebaseDataArg('endBefore', this._value, query._path, false);\r\n        const newParams = queryParamsEndBefore(query._queryParams, this._value, this._key);\r\n        validateLimit(newParams);\r\n        validateQueryEndpoints(newParams);\r\n        if (query._queryParams.hasEnd()) {\r\n            throw new Error('endBefore: Starting point was already set (by another call to endAt, ' +\r\n                'endBefore or equalTo).');\r\n        }\r\n        return new QueryImpl(query._repo, query._path, newParams, query._orderByCalled);\r\n    }\r\n}\r\n/**\r\n * Creates a `QueryConstraint` with the specified ending point (exclusive).\r\n *\r\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\r\n * allows you to choose arbitrary starting and ending points for your queries.\r\n *\r\n * The ending point is exclusive. If only a value is provided, children\r\n * with a value less than the specified value will be included in the query.\r\n * If a key is specified, then children must have a value lesss than or equal\r\n * to the specified value and a a key name less than the specified key.\r\n *\r\n * @param value - The value to end before. The argument type depends on which\r\n * `orderBy*()` function was used in this query. Specify a value that matches\r\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\r\n * value must be a string.\r\n * @param key - The child key to end before, among the children with the\r\n * previously specified priority. This argument is only allowed if ordering by\r\n * child, value, or priority.\r\n */\r\nfunction endBefore(value, key) {\r\n    validateKey('endBefore', 'key', key, true);\r\n    return new QueryEndBeforeConstraint(value, key);\r\n}\r\nclass QueryStartAtConstraint extends QueryConstraint {\r\n    constructor(_value, _key) {\r\n        super();\r\n        this._value = _value;\r\n        this._key = _key;\r\n    }\r\n    _apply(query) {\r\n        validateFirebaseDataArg('startAt', this._value, query._path, true);\r\n        const newParams = queryParamsStartAt(query._queryParams, this._value, this._key);\r\n        validateLimit(newParams);\r\n        validateQueryEndpoints(newParams);\r\n        if (query._queryParams.hasStart()) {\r\n            throw new Error('startAt: Starting point was already set (by another call to startAt, ' +\r\n                'startBefore or equalTo).');\r\n        }\r\n        return new QueryImpl(query._repo, query._path, newParams, query._orderByCalled);\r\n    }\r\n}\r\n/**\r\n * Creates a `QueryConstraint` with the specified starting point.\r\n *\r\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\r\n * allows you to choose arbitrary starting and ending points for your queries.\r\n *\r\n * The starting point is inclusive, so children with exactly the specified value\r\n * will be included in the query. The optional key argument can be used to\r\n * further limit the range of the query. If it is specified, then children that\r\n * have exactly the specified value must also have a key name greater than or\r\n * equal to the specified key.\r\n *\r\n * You can read more about `startAt()` in\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\r\n *\r\n * @param value - The value to start at. The argument type depends on which\r\n * `orderBy*()` function was used in this query. Specify a value that matches\r\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\r\n * value must be a string.\r\n * @param key - The child key to start at. This argument is only allowed if\r\n * ordering by child, value, or priority.\r\n */\r\nfunction startAt(value = null, key) {\r\n    validateKey('startAt', 'key', key, true);\r\n    return new QueryStartAtConstraint(value, key);\r\n}\r\nclass QueryStartAfterConstraint extends QueryConstraint {\r\n    constructor(_value, _key) {\r\n        super();\r\n        this._value = _value;\r\n        this._key = _key;\r\n    }\r\n    _apply(query) {\r\n        validateFirebaseDataArg('startAfter', this._value, query._path, false);\r\n        const newParams = queryParamsStartAfter(query._queryParams, this._value, this._key);\r\n        validateLimit(newParams);\r\n        validateQueryEndpoints(newParams);\r\n        if (query._queryParams.hasStart()) {\r\n            throw new Error('startAfter: Starting point was already set (by another call to startAt, ' +\r\n                'startAfter, or equalTo).');\r\n        }\r\n        return new QueryImpl(query._repo, query._path, newParams, query._orderByCalled);\r\n    }\r\n}\r\n/**\r\n * Creates a `QueryConstraint` with the specified starting point (exclusive).\r\n *\r\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\r\n * allows you to choose arbitrary starting and ending points for your queries.\r\n *\r\n * The starting point is exclusive. If only a value is provided, children\r\n * with a value greater than the specified value will be included in the query.\r\n * If a key is specified, then children must have a value greater than or equal\r\n * to the specified value and a a key name greater than the specified key.\r\n *\r\n * @param value - The value to start after. The argument type depends on which\r\n * `orderBy*()` function was used in this query. Specify a value that matches\r\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\r\n * value must be a string.\r\n * @param key - The child key to start after. This argument is only allowed if\r\n * ordering by child, value, or priority.\r\n */\r\nfunction startAfter(value, key) {\r\n    validateKey('startAfter', 'key', key, true);\r\n    return new QueryStartAfterConstraint(value, key);\r\n}\r\nclass QueryLimitToFirstConstraint extends QueryConstraint {\r\n    constructor(_limit) {\r\n        super();\r\n        this._limit = _limit;\r\n    }\r\n    _apply(query) {\r\n        if (query._queryParams.hasLimit()) {\r\n            throw new Error('limitToFirst: Limit was already set (by another call to limitToFirst ' +\r\n                'or limitToLast).');\r\n        }\r\n        return new QueryImpl(query._repo, query._path, queryParamsLimitToFirst(query._queryParams, this._limit), query._orderByCalled);\r\n    }\r\n}\r\n/**\r\n * Creates a new `QueryConstraint` that if limited to the first specific number\r\n * of children.\r\n *\r\n * The `limitToFirst()` method is used to set a maximum number of children to be\r\n * synced for a given callback. If we set a limit of 100, we will initially only\r\n * receive up to 100 `child_added` events. If we have fewer than 100 messages\r\n * stored in our Database, a `child_added` event will fire for each message.\r\n * However, if we have over 100 messages, we will only receive a `child_added`\r\n * event for the first 100 ordered messages. As items change, we will receive\r\n * `child_removed` events for each item that drops out of the active list so\r\n * that the total number stays at 100.\r\n *\r\n * You can read more about `limitToFirst()` in\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\r\n *\r\n * @param limit - The maximum number of nodes to include in this query.\r\n */\r\nfunction limitToFirst(limit) {\r\n    if (typeof limit !== 'number' || Math.floor(limit) !== limit || limit <= 0) {\r\n        throw new Error('limitToFirst: First argument must be a positive integer.');\r\n    }\r\n    return new QueryLimitToFirstConstraint(limit);\r\n}\r\nclass QueryLimitToLastConstraint extends QueryConstraint {\r\n    constructor(_limit) {\r\n        super();\r\n        this._limit = _limit;\r\n    }\r\n    _apply(query) {\r\n        if (query._queryParams.hasLimit()) {\r\n            throw new Error('limitToLast: Limit was already set (by another call to limitToFirst ' +\r\n                'or limitToLast).');\r\n        }\r\n        return new QueryImpl(query._repo, query._path, queryParamsLimitToLast(query._queryParams, this._limit), query._orderByCalled);\r\n    }\r\n}\r\n/**\r\n * Creates a new `QueryConstraint` that is limited to return only the last\r\n * specified number of children.\r\n *\r\n * The `limitToLast()` method is used to set a maximum number of children to be\r\n * synced for a given callback. If we set a limit of 100, we will initially only\r\n * receive up to 100 `child_added` events. If we have fewer than 100 messages\r\n * stored in our Database, a `child_added` event will fire for each message.\r\n * However, if we have over 100 messages, we will only receive a `child_added`\r\n * event for the last 100 ordered messages. As items change, we will receive\r\n * `child_removed` events for each item that drops out of the active list so\r\n * that the total number stays at 100.\r\n *\r\n * You can read more about `limitToLast()` in\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\r\n *\r\n * @param limit - The maximum number of nodes to include in this query.\r\n */\r\nfunction limitToLast(limit) {\r\n    if (typeof limit !== 'number' || Math.floor(limit) !== limit || limit <= 0) {\r\n        throw new Error('limitToLast: First argument must be a positive integer.');\r\n    }\r\n    return new QueryLimitToLastConstraint(limit);\r\n}\r\nclass QueryOrderByChildConstraint extends QueryConstraint {\r\n    constructor(_path) {\r\n        super();\r\n        this._path = _path;\r\n    }\r\n    _apply(query) {\r\n        validateNoPreviousOrderByCall(query, 'orderByChild');\r\n        const parsedPath = new Path(this._path);\r\n        if (pathIsEmpty(parsedPath)) {\r\n            throw new Error('orderByChild: cannot pass in empty path. Use orderByValue() instead.');\r\n        }\r\n        const index = new PathIndex(parsedPath);\r\n        const newParams = queryParamsOrderBy(query._queryParams, index);\r\n        validateQueryEndpoints(newParams);\r\n        return new QueryImpl(query._repo, query._path, newParams, \r\n        /*orderByCalled=*/ true);\r\n    }\r\n}\r\n/**\r\n * Creates a new `QueryConstraint` that orders by the specified child key.\r\n *\r\n * Queries can only order by one key at a time. Calling `orderByChild()`\r\n * multiple times on the same query is an error.\r\n *\r\n * Firebase queries allow you to order your data by any child key on the fly.\r\n * However, if you know in advance what your indexes will be, you can define\r\n * them via the .indexOn rule in your Security Rules for better performance. See\r\n * the{@link https://firebase.google.com/docs/database/security/indexing-data}\r\n * rule for more information.\r\n *\r\n * You can read more about `orderByChild()` in\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sort_data | Sort data}.\r\n *\r\n * @param path - The path to order by.\r\n */\r\nfunction orderByChild(path) {\r\n    if (path === '$key') {\r\n        throw new Error('orderByChild: \"$key\" is invalid.  Use orderByKey() instead.');\r\n    }\r\n    else if (path === '$priority') {\r\n        throw new Error('orderByChild: \"$priority\" is invalid.  Use orderByPriority() instead.');\r\n    }\r\n    else if (path === '$value') {\r\n        throw new Error('orderByChild: \"$value\" is invalid.  Use orderByValue() instead.');\r\n    }\r\n    validatePathString('orderByChild', 'path', path, false);\r\n    return new QueryOrderByChildConstraint(path);\r\n}\r\nclass QueryOrderByKeyConstraint extends QueryConstraint {\r\n    _apply(query) {\r\n        validateNoPreviousOrderByCall(query, 'orderByKey');\r\n        const newParams = queryParamsOrderBy(query._queryParams, KEY_INDEX);\r\n        validateQueryEndpoints(newParams);\r\n        return new QueryImpl(query._repo, query._path, newParams, \r\n        /*orderByCalled=*/ true);\r\n    }\r\n}\r\n/**\r\n * Creates a new `QueryConstraint` that orders by the key.\r\n *\r\n * Sorts the results of a query by their (ascending) key values.\r\n *\r\n * You can read more about `orderByKey()` in\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sort_data | Sort data}.\r\n */\r\nfunction orderByKey() {\r\n    return new QueryOrderByKeyConstraint();\r\n}\r\nclass QueryOrderByPriorityConstraint extends QueryConstraint {\r\n    _apply(query) {\r\n        validateNoPreviousOrderByCall(query, 'orderByPriority');\r\n        const newParams = queryParamsOrderBy(query._queryParams, PRIORITY_INDEX);\r\n        validateQueryEndpoints(newParams);\r\n        return new QueryImpl(query._repo, query._path, newParams, \r\n        /*orderByCalled=*/ true);\r\n    }\r\n}\r\n/**\r\n * Creates a new `QueryConstraint` that orders by priority.\r\n *\r\n * Applications need not use priority but can order collections by\r\n * ordinary properties (see\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sort_data | Sort data}\r\n * for alternatives to priority.\r\n */\r\nfunction orderByPriority() {\r\n    return new QueryOrderByPriorityConstraint();\r\n}\r\nclass QueryOrderByValueConstraint extends QueryConstraint {\r\n    _apply(query) {\r\n        validateNoPreviousOrderByCall(query, 'orderByValue');\r\n        const newParams = queryParamsOrderBy(query._queryParams, VALUE_INDEX);\r\n        validateQueryEndpoints(newParams);\r\n        return new QueryImpl(query._repo, query._path, newParams, \r\n        /*orderByCalled=*/ true);\r\n    }\r\n}\r\n/**\r\n * Creates a new `QueryConstraint` that orders by value.\r\n *\r\n * If the children of a query are all scalar values (string, number, or\r\n * boolean), you can order the results by their (ascending) values.\r\n *\r\n * You can read more about `orderByValue()` in\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#sort_data | Sort data}.\r\n */\r\nfunction orderByValue() {\r\n    return new QueryOrderByValueConstraint();\r\n}\r\nclass QueryEqualToValueConstraint extends QueryConstraint {\r\n    constructor(_value, _key) {\r\n        super();\r\n        this._value = _value;\r\n        this._key = _key;\r\n    }\r\n    _apply(query) {\r\n        validateFirebaseDataArg('equalTo', this._value, query._path, false);\r\n        if (query._queryParams.hasStart()) {\r\n            throw new Error('equalTo: Starting point was already set (by another call to startAt/startAfter or ' +\r\n                'equalTo).');\r\n        }\r\n        if (query._queryParams.hasEnd()) {\r\n            throw new Error('equalTo: Ending point was already set (by another call to endAt/endBefore or ' +\r\n                'equalTo).');\r\n        }\r\n        return new QueryEndAtConstraint(this._value, this._key)._apply(new QueryStartAtConstraint(this._value, this._key)._apply(query));\r\n    }\r\n}\r\n/**\r\n * Creates a `QueryConstraint` that includes children that match the specified\r\n * value.\r\n *\r\n * Using `startAt()`, `startAfter()`, `endBefore()`, `endAt()` and `equalTo()`\r\n * allows you to choose arbitrary starting and ending points for your queries.\r\n *\r\n * The optional key argument can be used to further limit the range of the\r\n * query. If it is specified, then children that have exactly the specified\r\n * value must also have exactly the specified key as their key name. This can be\r\n * used to filter result sets with many matches for the same value.\r\n *\r\n * You can read more about `equalTo()` in\r\n * {@link https://firebase.google.com/docs/database/web/lists-of-data#filtering_data | Filtering data}.\r\n *\r\n * @param value - The value to match for. The argument type depends on which\r\n * `orderBy*()` function was used in this query. Specify a value that matches\r\n * the `orderBy*()` type. When used in combination with `orderByKey()`, the\r\n * value must be a string.\r\n * @param key - The child key to start at, among the children with the\r\n * previously specified priority. This argument is only allowed if ordering by\r\n * child, value, or priority.\r\n */\r\nfunction equalTo(value, key) {\r\n    validateKey('equalTo', 'key', key, true);\r\n    return new QueryEqualToValueConstraint(value, key);\r\n}\r\n/**\r\n * Creates a new immutable instance of `Query` that is extended to also include\r\n * additional query constraints.\r\n *\r\n * @param query - The Query instance to use as a base for the new constraints.\r\n * @param queryConstraints - The list of `QueryConstraint`s to apply.\r\n * @throws if any of the provided query constraints cannot be combined with the\r\n * existing or new constraints.\r\n */\r\nfunction query(query, ...queryConstraints) {\r\n    let queryImpl = getModularInstance(query);\r\n    for (const constraint of queryConstraints) {\r\n        queryImpl = constraint._apply(queryImpl);\r\n    }\r\n    return queryImpl;\r\n}\r\n/**\r\n * Define reference constructor in various modules\r\n *\r\n * We are doing this here to avoid several circular\r\n * dependency issues\r\n */\r\nsyncPointSetReferenceConstructor(ReferenceImpl);\r\nsyncTreeSetReferenceConstructor(ReferenceImpl);\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * This variable is also defined in the firebase Node.js Admin SDK. Before\r\n * modifying this definition, consult the definition in:\r\n *\r\n * https://github.com/firebase/firebase-admin-node\r\n *\r\n * and make sure the two are consistent.\r\n */\r\nconst FIREBASE_DATABASE_EMULATOR_HOST_VAR = 'FIREBASE_DATABASE_EMULATOR_HOST';\r\n/**\r\n * Creates and caches `Repo` instances.\r\n */\r\nconst repos = {};\r\n/**\r\n * If true, any new `Repo` will be created to use `ReadonlyRestClient` (for testing purposes).\r\n */\r\nlet useRestClient = false;\r\n/**\r\n * Update an existing `Repo` in place to point to a new host/port.\r\n */\r\nfunction repoManagerApplyEmulatorSettings(repo, host, port, tokenProvider) {\r\n    repo.repoInfo_ = new RepoInfo(`${host}:${port}`, \r\n    /* secure= */ false, repo.repoInfo_.namespace, repo.repoInfo_.webSocketOnly, repo.repoInfo_.nodeAdmin, repo.repoInfo_.persistenceKey, repo.repoInfo_.includeNamespaceInQueryParams);\r\n    if (tokenProvider) {\r\n        repo.authTokenProvider_ = tokenProvider;\r\n    }\r\n}\r\n/**\r\n * This function should only ever be called to CREATE a new database instance.\r\n * @internal\r\n */\r\nfunction repoManagerDatabaseFromApp(app, authProvider, appCheckProvider, url, nodeAdmin) {\r\n    let dbUrl = url || app.options.databaseURL;\r\n    if (dbUrl === undefined) {\r\n        if (!app.options.projectId) {\r\n            fatal(\"Can't determine Firebase Database URL. Be sure to include \" +\r\n                ' a Project ID when calling firebase.initializeApp().');\r\n        }\r\n        log('Using default host for project ', app.options.projectId);\r\n        dbUrl = `${app.options.projectId}-default-rtdb.firebaseio.com`;\r\n    }\r\n    let parsedUrl = parseRepoInfo(dbUrl, nodeAdmin);\r\n    let repoInfo = parsedUrl.repoInfo;\r\n    let isEmulator;\r\n    let dbEmulatorHost = undefined;\r\n    if (typeof process !== 'undefined' && process.env) {\r\n        dbEmulatorHost = process.env[FIREBASE_DATABASE_EMULATOR_HOST_VAR];\r\n    }\r\n    if (dbEmulatorHost) {\r\n        isEmulator = true;\r\n        dbUrl = `http://${dbEmulatorHost}?ns=${repoInfo.namespace}`;\r\n        parsedUrl = parseRepoInfo(dbUrl, nodeAdmin);\r\n        repoInfo = parsedUrl.repoInfo;\r\n    }\r\n    else {\r\n        isEmulator = !parsedUrl.repoInfo.secure;\r\n    }\r\n    const authTokenProvider = nodeAdmin && isEmulator\r\n        ? new EmulatorTokenProvider(EmulatorTokenProvider.OWNER)\r\n        : new FirebaseAuthTokenProvider(app.name, app.options, authProvider);\r\n    validateUrl('Invalid Firebase Database URL', parsedUrl);\r\n    if (!pathIsEmpty(parsedUrl.path)) {\r\n        fatal('Database URL must point to the root of a Firebase Database ' +\r\n            '(not including a child path).');\r\n    }\r\n    const repo = repoManagerCreateRepo(repoInfo, app, authTokenProvider, new AppCheckTokenProvider(app.name, appCheckProvider));\r\n    return new Database(repo, app);\r\n}\r\n/**\r\n * Remove the repo and make sure it is disconnected.\r\n *\r\n */\r\nfunction repoManagerDeleteRepo(repo, appName) {\r\n    const appRepos = repos[appName];\r\n    // This should never happen...\r\n    if (!appRepos || appRepos[repo.key] !== repo) {\r\n        fatal(`Database ${appName}(${repo.repoInfo_}) has already been deleted.`);\r\n    }\r\n    repoInterrupt(repo);\r\n    delete appRepos[repo.key];\r\n}\r\n/**\r\n * Ensures a repo doesn't already exist and then creates one using the\r\n * provided app.\r\n *\r\n * @param repoInfo - The metadata about the Repo\r\n * @returns The Repo object for the specified server / repoName.\r\n */\r\nfunction repoManagerCreateRepo(repoInfo, app, authTokenProvider, appCheckProvider) {\r\n    let appRepos = repos[app.name];\r\n    if (!appRepos) {\r\n        appRepos = {};\r\n        repos[app.name] = appRepos;\r\n    }\r\n    let repo = appRepos[repoInfo.toURLString()];\r\n    if (repo) {\r\n        fatal('Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.');\r\n    }\r\n    repo = new Repo(repoInfo, useRestClient, authTokenProvider, appCheckProvider);\r\n    appRepos[repoInfo.toURLString()] = repo;\r\n    return repo;\r\n}\r\n/**\r\n * Forces us to use ReadonlyRestClient instead of PersistentConnection for new Repos.\r\n */\r\nfunction repoManagerForceRestClient(forceRestClient) {\r\n    useRestClient = forceRestClient;\r\n}\r\n/**\r\n * Class representing a Firebase Realtime Database.\r\n */\r\nclass Database {\r\n    /** @hideconstructor */\r\n    constructor(_repoInternal, \r\n    /** The {@link @firebase/app#FirebaseApp} associated with this Realtime Database instance. */\r\n    app) {\r\n        this._repoInternal = _repoInternal;\r\n        this.app = app;\r\n        /** Represents a `Database` instance. */\r\n        this['type'] = 'database';\r\n        /** Track if the instance has been used (root or repo accessed) */\r\n        this._instanceStarted = false;\r\n    }\r\n    get _repo() {\r\n        if (!this._instanceStarted) {\r\n            repoStart(this._repoInternal, this.app.options.appId, this.app.options['databaseAuthVariableOverride']);\r\n            this._instanceStarted = true;\r\n        }\r\n        return this._repoInternal;\r\n    }\r\n    get _root() {\r\n        if (!this._rootInternal) {\r\n            this._rootInternal = new ReferenceImpl(this._repo, newEmptyPath());\r\n        }\r\n        return this._rootInternal;\r\n    }\r\n    _delete() {\r\n        if (this._rootInternal !== null) {\r\n            repoManagerDeleteRepo(this._repo, this.app.name);\r\n            this._repoInternal = null;\r\n            this._rootInternal = null;\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    _checkNotDeleted(apiName) {\r\n        if (this._rootInternal === null) {\r\n            fatal('Cannot call ' + apiName + ' on a deleted database.');\r\n        }\r\n    }\r\n}\r\nfunction checkTransportInit() {\r\n    if (TransportManager.IS_TRANSPORT_INITIALIZED) {\r\n        warn('Transport has already been initialized. Please call this function before calling ref or setting up a listener');\r\n    }\r\n}\r\n/**\r\n * Force the use of websockets instead of longPolling.\r\n */\r\nfunction forceWebSockets() {\r\n    checkTransportInit();\r\n    BrowserPollConnection.forceDisallow();\r\n}\r\n/**\r\n * Force the use of longPolling instead of websockets. This will be ignored if websocket protocol is used in databaseURL.\r\n */\r\nfunction forceLongPolling() {\r\n    checkTransportInit();\r\n    WebSocketConnection.forceDisallow();\r\n    BrowserPollConnection.forceAllow();\r\n}\r\n/**\r\n * Returns the instance of the Realtime Database SDK that is associated\r\n * with the provided {@link @firebase/app#FirebaseApp}. Initializes a new instance with\r\n * with default settings if no instance exists or if the existing instance uses\r\n * a custom database URL.\r\n *\r\n * @param app - The {@link @firebase/app#FirebaseApp} instance that the returned Realtime\r\n * Database instance is associated with.\r\n * @param url - The URL of the Realtime Database instance to connect to. If not\r\n * provided, the SDK connects to the default instance of the Firebase App.\r\n * @returns The `Database` instance of the provided app.\r\n */\r\nfunction getDatabase(app = getApp(), url) {\r\n    return _getProvider(app, 'database').getImmediate({\r\n        identifier: url\r\n    });\r\n}\r\n/**\r\n * Modify the provided instance to communicate with the Realtime Database\r\n * emulator.\r\n *\r\n * <p>Note: This method must be called before performing any other operation.\r\n *\r\n * @param db - The instance to modify.\r\n * @param host - The emulator host (ex: localhost)\r\n * @param port - The emulator port (ex: 8080)\r\n * @param options.mockUserToken - the mock auth token to use for unit testing Security Rules\r\n */\r\nfunction connectDatabaseEmulator(db, host, port, options = {}) {\r\n    db = getModularInstance(db);\r\n    db._checkNotDeleted('useEmulator');\r\n    if (db._instanceStarted) {\r\n        fatal('Cannot call useEmulator() after instance has already been initialized.');\r\n    }\r\n    const repo = db._repoInternal;\r\n    let tokenProvider = undefined;\r\n    if (repo.repoInfo_.nodeAdmin) {\r\n        if (options.mockUserToken) {\r\n            fatal('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the \"firebase\" package instead of \"firebase-admin\".');\r\n        }\r\n        tokenProvider = new EmulatorTokenProvider(EmulatorTokenProvider.OWNER);\r\n    }\r\n    else if (options.mockUserToken) {\r\n        const token = typeof options.mockUserToken === 'string'\r\n            ? options.mockUserToken\r\n            : createMockUserToken(options.mockUserToken, db.app.options.projectId);\r\n        tokenProvider = new EmulatorTokenProvider(token);\r\n    }\r\n    // Modify the repo to apply emulator settings\r\n    repoManagerApplyEmulatorSettings(repo, host, port, tokenProvider);\r\n}\r\n/**\r\n * Disconnects from the server (all Database operations will be completed\r\n * offline).\r\n *\r\n * The client automatically maintains a persistent connection to the Database\r\n * server, which will remain active indefinitely and reconnect when\r\n * disconnected. However, the `goOffline()` and `goOnline()` methods may be used\r\n * to control the client connection in cases where a persistent connection is\r\n * undesirable.\r\n *\r\n * While offline, the client will no longer receive data updates from the\r\n * Database. However, all Database operations performed locally will continue to\r\n * immediately fire events, allowing your application to continue behaving\r\n * normally. Additionally, each operation performed locally will automatically\r\n * be queued and retried upon reconnection to the Database server.\r\n *\r\n * To reconnect to the Database and begin receiving remote events, see\r\n * `goOnline()`.\r\n *\r\n * @param db - The instance to disconnect.\r\n */\r\nfunction goOffline(db) {\r\n    db = getModularInstance(db);\r\n    db._checkNotDeleted('goOffline');\r\n    repoInterrupt(db._repo);\r\n}\r\n/**\r\n * Reconnects to the server and synchronizes the offline Database state\r\n * with the server state.\r\n *\r\n * This method should be used after disabling the active connection with\r\n * `goOffline()`. Once reconnected, the client will transmit the proper data\r\n * and fire the appropriate events so that your client \"catches up\"\r\n * automatically.\r\n *\r\n * @param db - The instance to reconnect.\r\n */\r\nfunction goOnline(db) {\r\n    db = getModularInstance(db);\r\n    db._checkNotDeleted('goOnline');\r\n    repoResume(db._repo);\r\n}\r\nfunction enableLogging(logger, persistent) {\r\n    enableLogging$1(logger, persistent);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction registerDatabase(variant) {\r\n    setSDKVersion(SDK_VERSION$1);\r\n    _registerComponent(new Component('database', (container, { instanceIdentifier: url }) => {\r\n        const app = container.getProvider('app').getImmediate();\r\n        const authProvider = container.getProvider('auth-internal');\r\n        const appCheckProvider = container.getProvider('app-check-internal');\r\n        return repoManagerDatabaseFromApp(app, authProvider, appCheckProvider, url);\r\n    }, \"PUBLIC\" /* PUBLIC */).setMultipleInstances(true));\r\n    registerVersion(name, version, variant);\r\n    // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\n    registerVersion(name, version, 'esm2017');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst SERVER_TIMESTAMP = {\r\n    '.sv': 'timestamp'\r\n};\r\n/**\r\n * Returns a placeholder value for auto-populating the current timestamp (time\r\n * since the Unix epoch, in milliseconds) as determined by the Firebase\r\n * servers.\r\n */\r\nfunction serverTimestamp() {\r\n    return SERVER_TIMESTAMP;\r\n}\r\n/**\r\n * Returns a placeholder value that can be used to atomically increment the\r\n * current database value by the provided delta.\r\n *\r\n * @param delta - the amount to modify the current value atomically.\r\n * @returns A placeholder value for modifying data atomically server-side.\r\n */\r\nfunction increment(delta) {\r\n    return {\r\n        '.sv': {\r\n            'increment': delta\r\n        }\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A type for the resolve value of {@link runTransaction}.\r\n */\r\nclass TransactionResult {\r\n    /** @hideconstructor */\r\n    constructor(\r\n    /** Whether the transaction was successfully committed. */\r\n    committed, \r\n    /** The resulting data snapshot. */\r\n    snapshot) {\r\n        this.committed = committed;\r\n        this.snapshot = snapshot;\r\n    }\r\n    /** Returns a JSON-serializable representation of this object. */\r\n    toJSON() {\r\n        return { committed: this.committed, snapshot: this.snapshot.toJSON() };\r\n    }\r\n}\r\n/**\r\n * Atomically modifies the data at this location.\r\n *\r\n * Atomically modify the data at this location. Unlike a normal `set()`, which\r\n * just overwrites the data regardless of its previous value, `runTransaction()` is\r\n * used to modify the existing value to a new value, ensuring there are no\r\n * conflicts with other clients writing to the same location at the same time.\r\n *\r\n * To accomplish this, you pass `runTransaction()` an update function which is\r\n * used to transform the current value into a new value. If another client\r\n * writes to the location before your new value is successfully written, your\r\n * update function will be called again with the new current value, and the\r\n * write will be retried. This will happen repeatedly until your write succeeds\r\n * without conflict or you abort the transaction by not returning a value from\r\n * your update function.\r\n *\r\n * Note: Modifying data with `set()` will cancel any pending transactions at\r\n * that location, so extreme care should be taken if mixing `set()` and\r\n * `runTransaction()` to update the same data.\r\n *\r\n * Note: When using transactions with Security and Firebase Rules in place, be\r\n * aware that a client needs `.read` access in addition to `.write` access in\r\n * order to perform a transaction. This is because the client-side nature of\r\n * transactions requires the client to read the data in order to transactionally\r\n * update it.\r\n *\r\n * @param ref - The location to atomically modify.\r\n * @param transactionUpdate - A developer-supplied function which will be passed\r\n * the current data stored at this location (as a JavaScript object). The\r\n * function should return the new value it would like written (as a JavaScript\r\n * object). If `undefined` is returned (i.e. you return with no arguments) the\r\n * transaction will be aborted and the data at this location will not be\r\n * modified.\r\n * @param options - An options object to configure transactions.\r\n * @returns A `Promise` that can optionally be used instead of the `onComplete`\r\n * callback to handle success and failure.\r\n */\r\nfunction runTransaction(ref, \r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\ntransactionUpdate, options) {\r\n    var _a;\r\n    ref = getModularInstance(ref);\r\n    validateWritablePath('Reference.transaction', ref._path);\r\n    if (ref.key === '.length' || ref.key === '.keys') {\r\n        throw ('Reference.transaction failed: ' + ref.key + ' is a read-only object.');\r\n    }\r\n    const applyLocally = (_a = options === null || options === void 0 ? void 0 : options.applyLocally) !== null && _a !== void 0 ? _a : true;\r\n    const deferred = new Deferred();\r\n    const promiseComplete = (error, committed, node) => {\r\n        let dataSnapshot = null;\r\n        if (error) {\r\n            deferred.reject(error);\r\n        }\r\n        else {\r\n            dataSnapshot = new DataSnapshot(node, new ReferenceImpl(ref._repo, ref._path), PRIORITY_INDEX);\r\n            deferred.resolve(new TransactionResult(committed, dataSnapshot));\r\n        }\r\n    };\r\n    // Add a watch to make sure we get server updates.\r\n    const unwatcher = onValue(ref, () => { });\r\n    repoStartTransaction(ref._repo, ref._path, transactionUpdate, promiseComplete, unwatcher, applyLocally);\r\n    return deferred.promise;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nPersistentConnection;\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nPersistentConnection.prototype.simpleListen = function (pathString, onComplete) {\r\n    this.sendRequest('q', { p: pathString }, onComplete);\r\n};\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nPersistentConnection.prototype.echo = function (data, onEcho) {\r\n    this.sendRequest('echo', { d: data }, onEcho);\r\n};\r\n// RealTimeConnection properties that we use in tests.\r\nConnection;\r\n/**\r\n * @internal\r\n */\r\nconst hijackHash = function (newHash) {\r\n    const oldPut = PersistentConnection.prototype.put;\r\n    PersistentConnection.prototype.put = function (pathString, data, onComplete, hash) {\r\n        if (hash !== undefined) {\r\n            hash = newHash();\r\n        }\r\n        oldPut.call(this, pathString, data, onComplete, hash);\r\n    };\r\n    return function () {\r\n        PersistentConnection.prototype.put = oldPut;\r\n    };\r\n};\r\nRepoInfo;\r\n/**\r\n * Forces the RepoManager to create Repos that use ReadonlyRestClient instead of PersistentConnection.\r\n * @internal\r\n */\r\nconst forceRestClient = function (forceRestClient) {\r\n    repoManagerForceRestClient(forceRestClient);\r\n};\n\n/**\r\n * Firebase Realtime Database\r\n *\r\n * @packageDocumentation\r\n */\r\nregisterDatabase();\n\nexport { DataSnapshot, Database, OnDisconnect, QueryConstraint, TransactionResult, QueryImpl as _QueryImpl, QueryParams as _QueryParams, ReferenceImpl as _ReferenceImpl, forceRestClient as _TEST_ACCESS_forceRestClient, hijackHash as _TEST_ACCESS_hijackHash, repoManagerDatabaseFromApp as _repoManagerDatabaseFromApp, setSDKVersion as _setSDKVersion, validatePathString as _validatePathString, validateWritablePath as _validateWritablePath, child, connectDatabaseEmulator, enableLogging, endAt, endBefore, equalTo, forceLongPolling, forceWebSockets, get, getDatabase, goOffline, goOnline, increment, limitToFirst, limitToLast, off, onChildAdded, onChildChanged, onChildMoved, onChildRemoved, onDisconnect, onValue, orderByChild, orderByKey, orderByPriority, orderByValue, push, query, ref, refFromURL, remove, runTransaction, serverTimestamp, set, setPriority, setWithPriority, startAfter, startAt, update };\n//# sourceMappingURL=index.esm2017.js.map\n","import firebase from '@firebase/app-compat';\nimport { Provider, ComponentContainer, Component } from '@firebase/component';\nimport { _validatePathString, onChildMoved, onChildChanged, onChildRemoved, onChildAdded, onValue, off, get, query, limitToFirst, limitToLast, orderByChild, orderByKey, orderByPriority, orderByValue, startAt, startAfter, endAt, endBefore, equalTo, _ReferenceImpl, _QueryImpl, _QueryParams, child, set, _validateWritablePath, update, setWithPriority, remove, runTransaction, setPriority, push, OnDisconnect as OnDisconnect$1, forceWebSockets, forceLongPolling, connectDatabaseEmulator, refFromURL, ref, goOffline, goOnline, serverTimestamp, increment, _setSDKVersion, _repoManagerDatabaseFromApp, enableLogging } from '@firebase/database';\nimport { errorPrefix, validateArgCount, validateCallback, validateContextObject, Deferred } from '@firebase/util';\nimport { Logger } from '@firebase/logger';\n\nconst name = \"@firebase/database-compat\";\nconst version = \"0.2.5\";\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst logClient = new Logger('@firebase/database-compat');\r\nconst warn = function (msg) {\r\n    const message = 'FIREBASE WARNING: ' + msg;\r\n    logClient.warn(message);\r\n};\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst validateBoolean = function (fnName, argumentName, bool, optional) {\r\n    if (optional && bool === undefined) {\r\n        return;\r\n    }\r\n    if (typeof bool !== 'boolean') {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a boolean.');\r\n    }\r\n};\r\nconst validateEventType = function (fnName, eventType, optional) {\r\n    if (optional && eventType === undefined) {\r\n        return;\r\n    }\r\n    switch (eventType) {\r\n        case 'value':\r\n        case 'child_added':\r\n        case 'child_removed':\r\n        case 'child_changed':\r\n        case 'child_moved':\r\n            break;\r\n        default:\r\n            throw new Error(errorPrefix(fnName, 'eventType') +\r\n                'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\r\n                '\"child_changed\", or \"child_moved\".');\r\n    }\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass OnDisconnect {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n    }\r\n    cancel(onComplete) {\r\n        validateArgCount('OnDisconnect.cancel', 0, 1, arguments.length);\r\n        validateCallback('OnDisconnect.cancel', 'onComplete', onComplete, true);\r\n        const result = this._delegate.cancel();\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    remove(onComplete) {\r\n        validateArgCount('OnDisconnect.remove', 0, 1, arguments.length);\r\n        validateCallback('OnDisconnect.remove', 'onComplete', onComplete, true);\r\n        const result = this._delegate.remove();\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    set(value, onComplete) {\r\n        validateArgCount('OnDisconnect.set', 1, 2, arguments.length);\r\n        validateCallback('OnDisconnect.set', 'onComplete', onComplete, true);\r\n        const result = this._delegate.set(value);\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    setWithPriority(value, priority, onComplete) {\r\n        validateArgCount('OnDisconnect.setWithPriority', 2, 3, arguments.length);\r\n        validateCallback('OnDisconnect.setWithPriority', 'onComplete', onComplete, true);\r\n        const result = this._delegate.setWithPriority(value, priority);\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    update(objectToMerge, onComplete) {\r\n        validateArgCount('OnDisconnect.update', 1, 2, arguments.length);\r\n        if (Array.isArray(objectToMerge)) {\r\n            const newObjectToMerge = {};\r\n            for (let i = 0; i < objectToMerge.length; ++i) {\r\n                newObjectToMerge['' + i] = objectToMerge[i];\r\n            }\r\n            objectToMerge = newObjectToMerge;\r\n            warn('Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the ' +\r\n                'existing data, or an Object with integer keys if you really do want to only update some of the children.');\r\n        }\r\n        validateCallback('OnDisconnect.update', 'onComplete', onComplete, true);\r\n        const result = this._delegate.update(objectToMerge);\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass TransactionResult {\r\n    /**\r\n     * A type for the resolve value of Firebase.transaction.\r\n     */\r\n    constructor(committed, snapshot) {\r\n        this.committed = committed;\r\n        this.snapshot = snapshot;\r\n    }\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users\r\n    toJSON() {\r\n        validateArgCount('TransactionResult.toJSON', 0, 1, arguments.length);\r\n        return { committed: this.committed, snapshot: this.snapshot.toJSON() };\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Class representing a firebase data snapshot.  It wraps a SnapshotNode and\r\n * surfaces the public methods (val, forEach, etc.) we want to expose.\r\n */\r\nclass DataSnapshot {\r\n    constructor(_database, _delegate) {\r\n        this._database = _database;\r\n        this._delegate = _delegate;\r\n    }\r\n    /**\r\n     * Retrieves the snapshot contents as JSON.  Returns null if the snapshot is\r\n     * empty.\r\n     *\r\n     * @returns JSON representation of the DataSnapshot contents, or null if empty.\r\n     */\r\n    val() {\r\n        validateArgCount('DataSnapshot.val', 0, 0, arguments.length);\r\n        return this._delegate.val();\r\n    }\r\n    /**\r\n     * Returns the snapshot contents as JSON, including priorities of node.  Suitable for exporting\r\n     * the entire node contents.\r\n     * @returns JSON representation of the DataSnapshot contents, or null if empty.\r\n     */\r\n    exportVal() {\r\n        validateArgCount('DataSnapshot.exportVal', 0, 0, arguments.length);\r\n        return this._delegate.exportVal();\r\n    }\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users\r\n    toJSON() {\r\n        // Optional spacer argument is unnecessary because we're depending on recursion rather than stringifying the content\r\n        validateArgCount('DataSnapshot.toJSON', 0, 1, arguments.length);\r\n        return this._delegate.toJSON();\r\n    }\r\n    /**\r\n     * Returns whether the snapshot contains a non-null value.\r\n     *\r\n     * @returns Whether the snapshot contains a non-null value, or is empty.\r\n     */\r\n    exists() {\r\n        validateArgCount('DataSnapshot.exists', 0, 0, arguments.length);\r\n        return this._delegate.exists();\r\n    }\r\n    /**\r\n     * Returns a DataSnapshot of the specified child node's contents.\r\n     *\r\n     * @param path - Path to a child.\r\n     * @returns DataSnapshot for child node.\r\n     */\r\n    child(path) {\r\n        validateArgCount('DataSnapshot.child', 0, 1, arguments.length);\r\n        // Ensure the childPath is a string (can be a number)\r\n        path = String(path);\r\n        _validatePathString('DataSnapshot.child', 'path', path, false);\r\n        return new DataSnapshot(this._database, this._delegate.child(path));\r\n    }\r\n    /**\r\n     * Returns whether the snapshot contains a child at the specified path.\r\n     *\r\n     * @param path - Path to a child.\r\n     * @returns Whether the child exists.\r\n     */\r\n    hasChild(path) {\r\n        validateArgCount('DataSnapshot.hasChild', 1, 1, arguments.length);\r\n        _validatePathString('DataSnapshot.hasChild', 'path', path, false);\r\n        return this._delegate.hasChild(path);\r\n    }\r\n    /**\r\n     * Returns the priority of the object, or null if no priority was set.\r\n     *\r\n     * @returns The priority.\r\n     */\r\n    getPriority() {\r\n        validateArgCount('DataSnapshot.getPriority', 0, 0, arguments.length);\r\n        return this._delegate.priority;\r\n    }\r\n    /**\r\n     * Iterates through child nodes and calls the specified action for each one.\r\n     *\r\n     * @param action - Callback function to be called\r\n     * for each child.\r\n     * @returns True if forEach was canceled by action returning true for\r\n     * one of the child nodes.\r\n     */\r\n    forEach(action) {\r\n        validateArgCount('DataSnapshot.forEach', 1, 1, arguments.length);\r\n        validateCallback('DataSnapshot.forEach', 'action', action, false);\r\n        return this._delegate.forEach(expDataSnapshot => action(new DataSnapshot(this._database, expDataSnapshot)));\r\n    }\r\n    /**\r\n     * Returns whether this DataSnapshot has children.\r\n     * @returns True if the DataSnapshot contains 1 or more child nodes.\r\n     */\r\n    hasChildren() {\r\n        validateArgCount('DataSnapshot.hasChildren', 0, 0, arguments.length);\r\n        return this._delegate.hasChildren();\r\n    }\r\n    get key() {\r\n        return this._delegate.key;\r\n    }\r\n    /**\r\n     * Returns the number of children for this DataSnapshot.\r\n     * @returns The number of children that this DataSnapshot contains.\r\n     */\r\n    numChildren() {\r\n        validateArgCount('DataSnapshot.numChildren', 0, 0, arguments.length);\r\n        return this._delegate.size;\r\n    }\r\n    /**\r\n     * @returns The Firebase reference for the location this snapshot's data came\r\n     * from.\r\n     */\r\n    getRef() {\r\n        validateArgCount('DataSnapshot.ref', 0, 0, arguments.length);\r\n        return new Reference(this._database, this._delegate.ref);\r\n    }\r\n    get ref() {\r\n        return this.getRef();\r\n    }\r\n}\r\n/**\r\n * A Query represents a filter to be applied to a firebase location.  This object purely represents the\r\n * query expression (and exposes our public API to build the query).  The actual query logic is in ViewBase.js.\r\n *\r\n * Since every Firebase reference is a query, Firebase inherits from this object.\r\n */\r\nclass Query {\r\n    constructor(database, _delegate) {\r\n        this.database = database;\r\n        this._delegate = _delegate;\r\n    }\r\n    on(eventType, callback, cancelCallbackOrContext, context) {\r\n        var _a;\r\n        validateArgCount('Query.on', 2, 4, arguments.length);\r\n        validateCallback('Query.on', 'callback', callback, false);\r\n        const ret = Query.getCancelAndContextArgs_('Query.on', cancelCallbackOrContext, context);\r\n        const valueCallback = (expSnapshot, previousChildName) => {\r\n            callback.call(ret.context, new DataSnapshot(this.database, expSnapshot), previousChildName);\r\n        };\r\n        valueCallback.userCallback = callback;\r\n        valueCallback.context = ret.context;\r\n        const cancelCallback = (_a = ret.cancel) === null || _a === void 0 ? void 0 : _a.bind(ret.context);\r\n        switch (eventType) {\r\n            case 'value':\r\n                onValue(this._delegate, valueCallback, cancelCallback);\r\n                return callback;\r\n            case 'child_added':\r\n                onChildAdded(this._delegate, valueCallback, cancelCallback);\r\n                return callback;\r\n            case 'child_removed':\r\n                onChildRemoved(this._delegate, valueCallback, cancelCallback);\r\n                return callback;\r\n            case 'child_changed':\r\n                onChildChanged(this._delegate, valueCallback, cancelCallback);\r\n                return callback;\r\n            case 'child_moved':\r\n                onChildMoved(this._delegate, valueCallback, cancelCallback);\r\n                return callback;\r\n            default:\r\n                throw new Error(errorPrefix('Query.on', 'eventType') +\r\n                    'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\r\n                    '\"child_changed\", or \"child_moved\".');\r\n        }\r\n    }\r\n    off(eventType, callback, context) {\r\n        validateArgCount('Query.off', 0, 3, arguments.length);\r\n        validateEventType('Query.off', eventType, true);\r\n        validateCallback('Query.off', 'callback', callback, true);\r\n        validateContextObject('Query.off', 'context', context, true);\r\n        if (callback) {\r\n            const valueCallback = () => { };\r\n            valueCallback.userCallback = callback;\r\n            valueCallback.context = context;\r\n            off(this._delegate, eventType, valueCallback);\r\n        }\r\n        else {\r\n            off(this._delegate, eventType);\r\n        }\r\n    }\r\n    /**\r\n     * Get the server-value for this query, or return a cached value if not connected.\r\n     */\r\n    get() {\r\n        return get(this._delegate).then(expSnapshot => {\r\n            return new DataSnapshot(this.database, expSnapshot);\r\n        });\r\n    }\r\n    /**\r\n     * Attaches a listener, waits for the first event, and then removes the listener\r\n     */\r\n    once(eventType, callback, failureCallbackOrContext, context) {\r\n        validateArgCount('Query.once', 1, 4, arguments.length);\r\n        validateCallback('Query.once', 'callback', callback, true);\r\n        const ret = Query.getCancelAndContextArgs_('Query.once', failureCallbackOrContext, context);\r\n        const deferred = new Deferred();\r\n        const valueCallback = (expSnapshot, previousChildName) => {\r\n            const result = new DataSnapshot(this.database, expSnapshot);\r\n            if (callback) {\r\n                callback.call(ret.context, result, previousChildName);\r\n            }\r\n            deferred.resolve(result);\r\n        };\r\n        valueCallback.userCallback = callback;\r\n        valueCallback.context = ret.context;\r\n        const cancelCallback = (error) => {\r\n            if (ret.cancel) {\r\n                ret.cancel.call(ret.context, error);\r\n            }\r\n            deferred.reject(error);\r\n        };\r\n        switch (eventType) {\r\n            case 'value':\r\n                onValue(this._delegate, valueCallback, cancelCallback, {\r\n                    onlyOnce: true\r\n                });\r\n                break;\r\n            case 'child_added':\r\n                onChildAdded(this._delegate, valueCallback, cancelCallback, {\r\n                    onlyOnce: true\r\n                });\r\n                break;\r\n            case 'child_removed':\r\n                onChildRemoved(this._delegate, valueCallback, cancelCallback, {\r\n                    onlyOnce: true\r\n                });\r\n                break;\r\n            case 'child_changed':\r\n                onChildChanged(this._delegate, valueCallback, cancelCallback, {\r\n                    onlyOnce: true\r\n                });\r\n                break;\r\n            case 'child_moved':\r\n                onChildMoved(this._delegate, valueCallback, cancelCallback, {\r\n                    onlyOnce: true\r\n                });\r\n                break;\r\n            default:\r\n                throw new Error(errorPrefix('Query.once', 'eventType') +\r\n                    'must be a valid event type = \"value\", \"child_added\", \"child_removed\", ' +\r\n                    '\"child_changed\", or \"child_moved\".');\r\n        }\r\n        return deferred.promise;\r\n    }\r\n    /**\r\n     * Set a limit and anchor it to the start of the window.\r\n     */\r\n    limitToFirst(limit) {\r\n        validateArgCount('Query.limitToFirst', 1, 1, arguments.length);\r\n        return new Query(this.database, query(this._delegate, limitToFirst(limit)));\r\n    }\r\n    /**\r\n     * Set a limit and anchor it to the end of the window.\r\n     */\r\n    limitToLast(limit) {\r\n        validateArgCount('Query.limitToLast', 1, 1, arguments.length);\r\n        return new Query(this.database, query(this._delegate, limitToLast(limit)));\r\n    }\r\n    /**\r\n     * Given a child path, return a new query ordered by the specified grandchild path.\r\n     */\r\n    orderByChild(path) {\r\n        validateArgCount('Query.orderByChild', 1, 1, arguments.length);\r\n        return new Query(this.database, query(this._delegate, orderByChild(path)));\r\n    }\r\n    /**\r\n     * Return a new query ordered by the KeyIndex\r\n     */\r\n    orderByKey() {\r\n        validateArgCount('Query.orderByKey', 0, 0, arguments.length);\r\n        return new Query(this.database, query(this._delegate, orderByKey()));\r\n    }\r\n    /**\r\n     * Return a new query ordered by the PriorityIndex\r\n     */\r\n    orderByPriority() {\r\n        validateArgCount('Query.orderByPriority', 0, 0, arguments.length);\r\n        return new Query(this.database, query(this._delegate, orderByPriority()));\r\n    }\r\n    /**\r\n     * Return a new query ordered by the ValueIndex\r\n     */\r\n    orderByValue() {\r\n        validateArgCount('Query.orderByValue', 0, 0, arguments.length);\r\n        return new Query(this.database, query(this._delegate, orderByValue()));\r\n    }\r\n    startAt(value = null, name) {\r\n        validateArgCount('Query.startAt', 0, 2, arguments.length);\r\n        return new Query(this.database, query(this._delegate, startAt(value, name)));\r\n    }\r\n    startAfter(value = null, name) {\r\n        validateArgCount('Query.startAfter', 0, 2, arguments.length);\r\n        return new Query(this.database, query(this._delegate, startAfter(value, name)));\r\n    }\r\n    endAt(value = null, name) {\r\n        validateArgCount('Query.endAt', 0, 2, arguments.length);\r\n        return new Query(this.database, query(this._delegate, endAt(value, name)));\r\n    }\r\n    endBefore(value = null, name) {\r\n        validateArgCount('Query.endBefore', 0, 2, arguments.length);\r\n        return new Query(this.database, query(this._delegate, endBefore(value, name)));\r\n    }\r\n    /**\r\n     * Load the selection of children with exactly the specified value, and, optionally,\r\n     * the specified name.\r\n     */\r\n    equalTo(value, name) {\r\n        validateArgCount('Query.equalTo', 1, 2, arguments.length);\r\n        return new Query(this.database, query(this._delegate, equalTo(value, name)));\r\n    }\r\n    /**\r\n     * @returns URL for this location.\r\n     */\r\n    toString() {\r\n        validateArgCount('Query.toString', 0, 0, arguments.length);\r\n        return this._delegate.toString();\r\n    }\r\n    // Do not create public documentation. This is intended to make JSON serialization work but is otherwise unnecessary\r\n    // for end-users.\r\n    toJSON() {\r\n        // An optional spacer argument is unnecessary for a string.\r\n        validateArgCount('Query.toJSON', 0, 1, arguments.length);\r\n        return this._delegate.toJSON();\r\n    }\r\n    /**\r\n     * Return true if this query and the provided query are equivalent; otherwise, return false.\r\n     */\r\n    isEqual(other) {\r\n        validateArgCount('Query.isEqual', 1, 1, arguments.length);\r\n        if (!(other instanceof Query)) {\r\n            const error = 'Query.isEqual failed: First argument must be an instance of firebase.database.Query.';\r\n            throw new Error(error);\r\n        }\r\n        return this._delegate.isEqual(other._delegate);\r\n    }\r\n    /**\r\n     * Helper used by .on and .once to extract the context and or cancel arguments.\r\n     * @param fnName - The function name (on or once)\r\n     *\r\n     */\r\n    static getCancelAndContextArgs_(fnName, cancelOrContext, context) {\r\n        const ret = { cancel: undefined, context: undefined };\r\n        if (cancelOrContext && context) {\r\n            ret.cancel = cancelOrContext;\r\n            validateCallback(fnName, 'cancel', ret.cancel, true);\r\n            ret.context = context;\r\n            validateContextObject(fnName, 'context', ret.context, true);\r\n        }\r\n        else if (cancelOrContext) {\r\n            // we have either a cancel callback or a context.\r\n            if (typeof cancelOrContext === 'object' && cancelOrContext !== null) {\r\n                // it's a context!\r\n                ret.context = cancelOrContext;\r\n            }\r\n            else if (typeof cancelOrContext === 'function') {\r\n                ret.cancel = cancelOrContext;\r\n            }\r\n            else {\r\n                throw new Error(errorPrefix(fnName, 'cancelOrContext') +\r\n                    ' must either be a cancel callback or a context object.');\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    get ref() {\r\n        return new Reference(this.database, new _ReferenceImpl(this._delegate._repo, this._delegate._path));\r\n    }\r\n}\r\nclass Reference extends Query {\r\n    /**\r\n     * Call options:\r\n     *   new Reference(Repo, Path) or\r\n     *   new Reference(url: string, string|RepoManager)\r\n     *\r\n     * Externally - this is the firebase.database.Reference type.\r\n     */\r\n    constructor(database, _delegate) {\r\n        super(database, new _QueryImpl(_delegate._repo, _delegate._path, new _QueryParams(), false));\r\n        this.database = database;\r\n        this._delegate = _delegate;\r\n    }\r\n    /** @returns {?string} */\r\n    getKey() {\r\n        validateArgCount('Reference.key', 0, 0, arguments.length);\r\n        return this._delegate.key;\r\n    }\r\n    child(pathString) {\r\n        validateArgCount('Reference.child', 1, 1, arguments.length);\r\n        if (typeof pathString === 'number') {\r\n            pathString = String(pathString);\r\n        }\r\n        return new Reference(this.database, child(this._delegate, pathString));\r\n    }\r\n    /** @returns {?Reference} */\r\n    getParent() {\r\n        validateArgCount('Reference.parent', 0, 0, arguments.length);\r\n        const parent = this._delegate.parent;\r\n        return parent ? new Reference(this.database, parent) : null;\r\n    }\r\n    /** @returns {!Reference} */\r\n    getRoot() {\r\n        validateArgCount('Reference.root', 0, 0, arguments.length);\r\n        return new Reference(this.database, this._delegate.root);\r\n    }\r\n    set(newVal, onComplete) {\r\n        validateArgCount('Reference.set', 1, 2, arguments.length);\r\n        validateCallback('Reference.set', 'onComplete', onComplete, true);\r\n        const result = set(this._delegate, newVal);\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    update(values, onComplete) {\r\n        validateArgCount('Reference.update', 1, 2, arguments.length);\r\n        if (Array.isArray(values)) {\r\n            const newObjectToMerge = {};\r\n            for (let i = 0; i < values.length; ++i) {\r\n                newObjectToMerge['' + i] = values[i];\r\n            }\r\n            values = newObjectToMerge;\r\n            warn('Passing an Array to Firebase.update() is deprecated. ' +\r\n                'Use set() if you want to overwrite the existing data, or ' +\r\n                'an Object with integer keys if you really do want to ' +\r\n                'only update some of the children.');\r\n        }\r\n        _validateWritablePath('Reference.update', this._delegate._path);\r\n        validateCallback('Reference.update', 'onComplete', onComplete, true);\r\n        const result = update(this._delegate, values);\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    setWithPriority(newVal, newPriority, onComplete) {\r\n        validateArgCount('Reference.setWithPriority', 2, 3, arguments.length);\r\n        validateCallback('Reference.setWithPriority', 'onComplete', onComplete, true);\r\n        const result = setWithPriority(this._delegate, newVal, newPriority);\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    remove(onComplete) {\r\n        validateArgCount('Reference.remove', 0, 1, arguments.length);\r\n        validateCallback('Reference.remove', 'onComplete', onComplete, true);\r\n        const result = remove(this._delegate);\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    transaction(transactionUpdate, onComplete, applyLocally) {\r\n        validateArgCount('Reference.transaction', 1, 3, arguments.length);\r\n        validateCallback('Reference.transaction', 'transactionUpdate', transactionUpdate, false);\r\n        validateCallback('Reference.transaction', 'onComplete', onComplete, true);\r\n        validateBoolean('Reference.transaction', 'applyLocally', applyLocally, true);\r\n        const result = runTransaction(this._delegate, transactionUpdate, {\r\n            applyLocally\r\n        }).then(transactionResult => new TransactionResult(transactionResult.committed, new DataSnapshot(this.database, transactionResult.snapshot)));\r\n        if (onComplete) {\r\n            result.then(transactionResult => onComplete(null, transactionResult.committed, transactionResult.snapshot), error => onComplete(error, false, null));\r\n        }\r\n        return result;\r\n    }\r\n    setPriority(priority, onComplete) {\r\n        validateArgCount('Reference.setPriority', 1, 2, arguments.length);\r\n        validateCallback('Reference.setPriority', 'onComplete', onComplete, true);\r\n        const result = setPriority(this._delegate, priority);\r\n        if (onComplete) {\r\n            result.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        return result;\r\n    }\r\n    push(value, onComplete) {\r\n        validateArgCount('Reference.push', 0, 2, arguments.length);\r\n        validateCallback('Reference.push', 'onComplete', onComplete, true);\r\n        const expPromise = push(this._delegate, value);\r\n        const promise = expPromise.then(expRef => new Reference(this.database, expRef));\r\n        if (onComplete) {\r\n            promise.then(() => onComplete(null), error => onComplete(error));\r\n        }\r\n        const result = new Reference(this.database, expPromise);\r\n        result.then = promise.then.bind(promise);\r\n        result.catch = promise.catch.bind(promise, undefined);\r\n        return result;\r\n    }\r\n    onDisconnect() {\r\n        _validateWritablePath('Reference.onDisconnect', this._delegate._path);\r\n        return new OnDisconnect(new OnDisconnect$1(this._delegate._repo, this._delegate._path));\r\n    }\r\n    get key() {\r\n        return this.getKey();\r\n    }\r\n    get parent() {\r\n        return this.getParent();\r\n    }\r\n    get root() {\r\n        return this.getRoot();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Class representing a firebase database.\r\n */\r\nclass Database {\r\n    /**\r\n     * The constructor should not be called by users of our public API.\r\n     */\r\n    constructor(_delegate, app) {\r\n        this._delegate = _delegate;\r\n        this.app = app;\r\n        this.INTERNAL = {\r\n            delete: () => this._delegate._delete(),\r\n            forceWebSockets,\r\n            forceLongPolling\r\n        };\r\n    }\r\n    /**\r\n     * Modify this instance to communicate with the Realtime Database emulator.\r\n     *\r\n     * <p>Note: This method must be called before performing any other operation.\r\n     *\r\n     * @param host - the emulator host (ex: localhost)\r\n     * @param port - the emulator port (ex: 8080)\r\n     * @param options.mockUserToken - the mock auth token to use for unit testing Security Rules\r\n     */\r\n    useEmulator(host, port, options = {}) {\r\n        connectDatabaseEmulator(this._delegate, host, port, options);\r\n    }\r\n    ref(path) {\r\n        validateArgCount('database.ref', 0, 1, arguments.length);\r\n        if (path instanceof Reference) {\r\n            const childRef = refFromURL(this._delegate, path.toString());\r\n            return new Reference(this, childRef);\r\n        }\r\n        else {\r\n            const childRef = ref(this._delegate, path);\r\n            return new Reference(this, childRef);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a reference to the root or the path specified in url.\r\n     * We throw a exception if the url is not in the same domain as the\r\n     * current repo.\r\n     * @returns Firebase reference.\r\n     */\r\n    refFromURL(url) {\r\n        const apiName = 'database.refFromURL';\r\n        validateArgCount(apiName, 1, 1, arguments.length);\r\n        const childRef = refFromURL(this._delegate, url);\r\n        return new Reference(this, childRef);\r\n    }\r\n    // Make individual repo go offline.\r\n    goOffline() {\r\n        validateArgCount('database.goOffline', 0, 0, arguments.length);\r\n        return goOffline(this._delegate);\r\n    }\r\n    goOnline() {\r\n        validateArgCount('database.goOnline', 0, 0, arguments.length);\r\n        return goOnline(this._delegate);\r\n    }\r\n}\r\nDatabase.ServerValue = {\r\n    TIMESTAMP: serverTimestamp(),\r\n    increment: (delta) => increment(delta)\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Used by console to create a database based on the app,\r\n * passed database URL and a custom auth implementation.\r\n *\r\n * @param app - A valid FirebaseApp-like object\r\n * @param url - A valid Firebase databaseURL\r\n * @param version - custom version e.g. firebase-admin version\r\n * @param customAuthImpl - custom auth implementation\r\n */\r\nfunction initStandalone({ app, url, version, customAuthImpl, namespace, nodeAdmin = false }) {\r\n    _setSDKVersion(version);\r\n    /**\r\n     * ComponentContainer('database-standalone') is just a placeholder that doesn't perform\r\n     * any actual function.\r\n     */\r\n    const authProvider = new Provider('auth-internal', new ComponentContainer('database-standalone'));\r\n    authProvider.setComponent(new Component('auth-internal', () => customAuthImpl, \"PRIVATE\" /* PRIVATE */));\r\n    return {\r\n        instance: new Database(_repoManagerDatabaseFromApp(app, authProvider, \r\n        /* appCheckProvider= */ undefined, url, nodeAdmin), app),\r\n        namespace\r\n    };\r\n}\n\nvar INTERNAL = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  initStandalone: initStandalone\n});\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ServerValue = Database.ServerValue;\r\nfunction registerDatabase(instance) {\r\n    // Register the Database Service with the 'firebase' namespace.\r\n    instance.INTERNAL.registerComponent(new Component('database-compat', (container, { instanceIdentifier: url }) => {\r\n        /* Dependencies */\r\n        // getImmediate for FirebaseApp will always succeed\r\n        const app = container.getProvider('app-compat').getImmediate();\r\n        const databaseExp = container\r\n            .getProvider('database')\r\n            .getImmediate({ identifier: url });\r\n        return new Database(databaseExp, app);\r\n    }, \"PUBLIC\" /* PUBLIC */)\r\n        .setServiceProps(\r\n    // firebase.database namespace properties\r\n    {\r\n        Reference,\r\n        Query,\r\n        Database,\r\n        DataSnapshot,\r\n        enableLogging,\r\n        INTERNAL,\r\n        ServerValue\r\n    })\r\n        .setMultipleInstances(true));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterDatabase(firebase);\n\nexport { registerDatabase };\n//# sourceMappingURL=index.esm2017.js.map\n","import { VNodeDirective } from 'vue/types/vnode'\nimport { DirectiveOptions, VNode } from 'vue'\n\ninterface ScrollVNodeDirective extends Omit<VNodeDirective, 'modifiers'> {\n  value: EventListener | {\n    handler: EventListener\n    options?: boolean | AddEventListenerOptions\n  } | EventListenerObject & { options?: boolean | AddEventListenerOptions }\n  modifiers?: {\n    self?: boolean\n  }\n}\n\nfunction inserted (el: HTMLElement, binding: ScrollVNodeDirective, vnode: VNode) {\n  const { self = false } = binding.modifiers || {}\n  const value = binding.value\n  const options = (typeof value === 'object' && value.options) || { passive: true }\n  const handler = typeof value === 'function' || 'handleEvent' in value ? value : value.handler\n\n  const target = self\n    ? el\n    : binding.arg\n      ? document.querySelector(binding.arg)\n      : window\n\n  if (!target) return\n\n  target.addEventListener('scroll', handler, options)\n\n  el._onScroll = Object(el._onScroll)\n  el._onScroll![vnode.context!._uid] = {\n    handler,\n    options,\n    // Don't reference self\n    target: self ? undefined : target,\n  }\n}\n\nfunction unbind (el: HTMLElement, binding: ScrollVNodeDirective, vnode: VNode) {\n  if (!el._onScroll?.[vnode.context!._uid]) return\n\n  const { handler, options, target = el } = el._onScroll[vnode.context!._uid]!\n\n  target.removeEventListener('scroll', handler, options)\n  delete el._onScroll[vnode.context!._uid]\n}\n\nexport const Scroll = {\n  inserted,\n  unbind,\n} as DirectiveOptions\n\nexport default Scroll\n","// Directives\nimport { Scroll } from '../../directives'\n\n// Utilities\nimport { consoleWarn } from '../../util/console'\n\n// Types\nimport Vue from 'vue'\n\n/**\n * Scrollable\n *\n * Used for monitoring scrolling and\n * invoking functions based upon\n * scrolling thresholds being\n * met.\n */\n/* @vue/component */\nexport default Vue.extend({\n  name: 'scrollable',\n\n  directives: { Scroll },\n\n  props: {\n    scrollTarget: String,\n    scrollThreshold: [String, Number],\n  },\n\n  data: () => ({\n    currentScroll: 0,\n    currentThreshold: 0,\n    isActive: false,\n    isScrollingUp: false,\n    previousScroll: 0,\n    savedScroll: 0,\n    target: null as Element | null,\n  }),\n\n  computed: {\n    /**\n     * A computed property that returns\n     * whether scrolling features are\n     * enabled or disabled\n     */\n    canScroll (): boolean {\n      return typeof window !== 'undefined'\n    },\n    /**\n     * The threshold that must be met before\n     * thresholdMet function is invoked\n     */\n    computedScrollThreshold (): number {\n      return this.scrollThreshold\n        ? Number(this.scrollThreshold)\n        : 300\n    },\n  },\n\n  watch: {\n    isScrollingUp () {\n      this.savedScroll = this.savedScroll || this.currentScroll\n    },\n    isActive () {\n      this.savedScroll = 0\n    },\n  },\n\n  mounted () {\n    if (this.scrollTarget) {\n      this.target = document.querySelector(this.scrollTarget)\n\n      if (!this.target) {\n        consoleWarn(`Unable to locate element with identifier ${this.scrollTarget}`, this)\n      }\n    }\n  },\n\n  methods: {\n    onScroll () {\n      if (!this.canScroll) return\n\n      this.previousScroll = this.currentScroll\n      this.currentScroll = this.target\n        ? this.target.scrollTop\n        : window.pageYOffset\n\n      this.isScrollingUp = this.currentScroll < this.previousScroll\n      this.currentThreshold = Math.abs(this.currentScroll - this.computedScrollThreshold)\n\n      this.$nextTick(() => {\n        if (\n          Math.abs(this.currentScroll - this.savedScroll) >\n          this.computedScrollThreshold\n        ) this.thresholdMet()\n      })\n    },\n    /**\n     * The method invoked when\n     * scrolling in any direction\n     * has exceeded the threshold\n     */\n    thresholdMet () { /* noop */ },\n  },\n})\n","// Styles\nimport './VAppBar.sass'\n\n// Extensions\nimport VToolbar from '../VToolbar/VToolbar'\n\n// Directives\nimport Scroll from '../../directives/scroll'\n\n// Mixins\nimport Applicationable from '../../mixins/applicationable'\nimport Scrollable from '../../mixins/scrollable'\nimport SSRBootable from '../../mixins/ssr-bootable'\nimport Toggleable from '../../mixins/toggleable'\n\n// Utilities\nimport { convertToUnit } from '../../util/helpers'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nconst baseMixins = mixins(\n  VToolbar,\n  Scrollable,\n  SSRBootable,\n  Toggleable,\n  Applicationable('top', [\n    'clippedLeft',\n    'clippedRight',\n    'computedHeight',\n    'invertedScroll',\n    'isExtended',\n    'isProminent',\n    'value',\n  ])\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-app-bar',\n\n  directives: { Scroll },\n\n  provide (): object {\n    return { VAppBar: this }\n  },\n\n  props: {\n    clippedLeft: Boolean,\n    clippedRight: Boolean,\n    collapseOnScroll: Boolean,\n    elevateOnScroll: Boolean,\n    fadeImgOnScroll: Boolean,\n    hideOnScroll: Boolean,\n    invertedScroll: Boolean,\n    scrollOffScreen: Boolean,\n    shrinkOnScroll: Boolean,\n    value: {\n      type: Boolean,\n      default: true,\n    },\n  },\n\n  data () {\n    return {\n      isActive: this.value,\n    }\n  },\n\n  computed: {\n    applicationProperty (): string {\n      return !this.bottom ? 'top' : 'bottom'\n    },\n    canScroll (): boolean {\n      return (\n        Scrollable.options.computed.canScroll.call(this) &&\n        (\n          this.invertedScroll ||\n          this.elevateOnScroll ||\n          this.hideOnScroll ||\n          this.collapseOnScroll ||\n          this.isBooted ||\n          // If falsy, user has provided an\n          // explicit value which should\n          // overwrite anything we do\n          !this.value\n        )\n      )\n    },\n    classes (): object {\n      return {\n        ...VToolbar.options.computed.classes.call(this),\n        'v-toolbar--collapse': this.collapse || this.collapseOnScroll,\n        'v-app-bar': true,\n        'v-app-bar--clipped': this.clippedLeft || this.clippedRight,\n        'v-app-bar--fade-img-on-scroll': this.fadeImgOnScroll,\n        'v-app-bar--elevate-on-scroll': this.elevateOnScroll,\n        'v-app-bar--fixed': !this.absolute && (this.app || this.fixed),\n        'v-app-bar--hide-shadow': this.hideShadow,\n        'v-app-bar--is-scrolled': this.currentScroll > 0,\n        'v-app-bar--shrink-on-scroll': this.shrinkOnScroll,\n      }\n    },\n    scrollRatio (): number {\n      const threshold = this.computedScrollThreshold\n      return Math.max((threshold - this.currentScroll) / threshold, 0)\n    },\n    computedContentHeight (): number {\n      if (!this.shrinkOnScroll) return VToolbar.options.computed.computedContentHeight.call(this)\n\n      const min = this.dense ? 48 : 56\n      const max = this.computedOriginalHeight\n\n      return min + (max - min) * this.scrollRatio\n    },\n    computedFontSize (): number | undefined {\n      if (!this.isProminent) return undefined\n\n      const min = 1.25\n      const max = 1.5\n\n      return min + (max - min) * this.scrollRatio\n    },\n    computedLeft (): number {\n      if (!this.app || this.clippedLeft) return 0\n\n      return this.$vuetify.application.left\n    },\n    computedMarginTop (): number {\n      if (!this.app) return 0\n\n      return this.$vuetify.application.bar\n    },\n    computedOpacity (): number | undefined {\n      if (!this.fadeImgOnScroll) return undefined\n\n      return this.scrollRatio\n    },\n    computedOriginalHeight (): number {\n      let height = VToolbar.options.computed.computedContentHeight.call(this)\n      if (this.isExtended) height += parseInt(this.extensionHeight)\n      return height\n    },\n    computedRight (): number {\n      if (!this.app || this.clippedRight) return 0\n\n      return this.$vuetify.application.right\n    },\n    computedScrollThreshold (): number {\n      if (this.scrollThreshold) return Number(this.scrollThreshold)\n\n      return this.computedOriginalHeight - (this.dense ? 48 : 56)\n    },\n    computedTransform (): number {\n      if (\n        !this.canScroll ||\n        (this.elevateOnScroll && this.currentScroll === 0 && this.isActive)\n      ) return 0\n\n      if (this.isActive) return 0\n\n      const scrollOffScreen = this.scrollOffScreen\n        ? this.computedHeight\n        : this.computedContentHeight\n\n      return this.bottom ? scrollOffScreen : -scrollOffScreen\n    },\n    hideShadow (): boolean {\n      if (this.elevateOnScroll && this.isExtended) {\n        return this.currentScroll < this.computedScrollThreshold\n      }\n\n      if (this.elevateOnScroll) {\n        return this.currentScroll === 0 ||\n          this.computedTransform < 0\n      }\n\n      return (\n        !this.isExtended ||\n        this.scrollOffScreen\n      ) && this.computedTransform !== 0\n    },\n    isCollapsed (): boolean {\n      if (!this.collapseOnScroll) {\n        return VToolbar.options.computed.isCollapsed.call(this)\n      }\n\n      return this.currentScroll > 0\n    },\n    isProminent (): boolean {\n      return (\n        VToolbar.options.computed.isProminent.call(this) ||\n        this.shrinkOnScroll\n      )\n    },\n    styles (): object {\n      return {\n        ...VToolbar.options.computed.styles.call(this),\n        fontSize: convertToUnit(this.computedFontSize, 'rem'),\n        marginTop: convertToUnit(this.computedMarginTop),\n        transform: `translateY(${convertToUnit(this.computedTransform)})`,\n        left: convertToUnit(this.computedLeft),\n        right: convertToUnit(this.computedRight),\n      }\n    },\n  },\n\n  watch: {\n    canScroll: 'onScroll',\n    computedTransform () {\n      // Normally we do not want the v-app-bar\n      // to update the application top value\n      // to avoid screen jump. However, in\n      // this situation, we must so that\n      // the clipped drawer can update\n      // its top value when scrolled\n      if (\n        !this.canScroll ||\n        (!this.clippedLeft && !this.clippedRight)\n      ) return\n\n      this.callUpdate()\n    },\n    invertedScroll (val: boolean) {\n      this.isActive = !val || this.currentScroll !== 0\n    },\n    hideOnScroll (val: boolean) {\n      this.isActive = !val || this.currentScroll < this.computedScrollThreshold\n    },\n  },\n\n  created () {\n    if (this.invertedScroll) this.isActive = false\n  },\n\n  methods: {\n    genBackground () {\n      const render = VToolbar.options.methods.genBackground.call(this)\n\n      render.data = this._b(render.data || {}, render.tag!, {\n        style: { opacity: this.computedOpacity },\n      })\n\n      return render\n    },\n    updateApplication (): number {\n      return this.invertedScroll\n        ? 0\n        : this.computedHeight + this.computedTransform\n    },\n    thresholdMet () {\n      if (this.invertedScroll) {\n        this.isActive = this.currentScroll > this.computedScrollThreshold\n        return\n      }\n\n      if (this.hideOnScroll) {\n        this.isActive = this.isScrollingUp ||\n          this.currentScroll < this.computedScrollThreshold\n      }\n\n      if (this.currentThreshold < this.computedScrollThreshold) return\n\n      this.savedScroll = this.currentScroll\n    },\n  },\n\n  render (h): VNode {\n    const render = VToolbar.options.render.call(this, h)\n\n    render.data = render.data || {}\n\n    if (this.canScroll) {\n      render.data.directives = render.data.directives || []\n      render.data.directives.push({\n        arg: this.scrollTarget,\n        name: 'scroll',\n        value: this.onScroll,\n      })\n    }\n\n    return render\n  },\n})\n","// Components\nimport VIcon from '../VIcon'\nimport VBtn from '../VBtn/VBtn'\n\n// Types\nimport Vue from 'vue'\n\n/* @vue/component */\nexport default Vue.extend({\n  name: 'v-app-bar-nav-icon',\n\n  functional: true,\n\n  render (h, { slots, listeners, props, data }) {\n    const d = Object.assign(data, {\n      staticClass: (`v-app-bar__nav-icon ${data.staticClass || ''}`).trim(),\n      props: {\n        ...props,\n        icon: true,\n      },\n      on: listeners,\n    })\n\n    const defaultSlot = slots().default\n\n    return h(VBtn, d, defaultSlot || [h(VIcon, '$menu')])\n  },\n})\n","// Styles\nimport './VApp.sass'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n/* @vue/component */\nexport default mixins(\n  Themeable\n).extend({\n  name: 'v-app',\n\n  props: {\n    dark: {\n      type: Boolean,\n      default: undefined,\n    },\n    id: {\n      type: String,\n      default: 'app',\n    },\n    light: {\n      type: Boolean,\n      default: undefined,\n    },\n  },\n\n  computed: {\n    isDark (): boolean {\n      return this.$vuetify.theme.dark\n    },\n  },\n\n  beforeCreate () {\n    if (!this.$vuetify || (this.$vuetify === this.$root as any)) {\n      throw new Error('Vuetify is not properly initialized, see https://vuetifyjs.com/getting-started/quick-start#bootstrapping-the-vuetify-object')\n    }\n  },\n\n  render (h) {\n    const wrapper = h('div', { staticClass: 'v-application--wrap' }, this.$slots.default)\n\n    return h('div', {\n      staticClass: 'v-application',\n      class: {\n        'v-application--is-rtl': this.$vuetify.rtl,\n        'v-application--is-ltr': !this.$vuetify.rtl,\n        ...this.themeClasses,\n      },\n      attrs: { 'data-app': true },\n      domProps: { id: this.id },\n    }, [wrapper])\n  },\n})\n","// Styles\nimport './VProgressCircular.sass'\n\n// Directives\nimport intersect from '../../directives/intersect'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\n\n// Utils\nimport { convertToUnit } from '../../util/helpers'\n\n// Types\nimport { VNode, VNodeChildren } from 'vue'\n\n/* @vue/component */\nexport default Colorable.extend({\n  name: 'v-progress-circular',\n\n  directives: { intersect },\n\n  props: {\n    button: Boolean,\n    indeterminate: Boolean,\n    rotate: {\n      type: [Number, String],\n      default: 0,\n    },\n    size: {\n      type: [Number, String],\n      default: 32,\n    },\n    width: {\n      type: [Number, String],\n      default: 4,\n    },\n    value: {\n      type: [Number, String],\n      default: 0,\n    },\n  },\n\n  data: () => ({\n    radius: 20,\n    isVisible: true,\n  }),\n\n  computed: {\n    calculatedSize (): number {\n      return Number(this.size) + (this.button ? 8 : 0)\n    },\n\n    circumference (): number {\n      return 2 * Math.PI * this.radius\n    },\n\n    classes (): object {\n      return {\n        'v-progress-circular--visible': this.isVisible,\n        'v-progress-circular--indeterminate': this.indeterminate,\n        'v-progress-circular--button': this.button,\n      }\n    },\n\n    normalizedValue (): number {\n      if (this.value < 0) {\n        return 0\n      }\n\n      if (this.value > 100) {\n        return 100\n      }\n\n      return parseFloat(this.value)\n    },\n\n    strokeDashArray (): number {\n      return Math.round(this.circumference * 1000) / 1000\n    },\n\n    strokeDashOffset (): string {\n      return ((100 - this.normalizedValue) / 100) * this.circumference + 'px'\n    },\n\n    strokeWidth (): number {\n      return Number(this.width) / +this.size * this.viewBoxSize * 2\n    },\n\n    styles (): object {\n      return {\n        height: convertToUnit(this.calculatedSize),\n        width: convertToUnit(this.calculatedSize),\n      }\n    },\n\n    svgStyles (): object {\n      return {\n        transform: `rotate(${Number(this.rotate)}deg)`,\n      }\n    },\n\n    viewBoxSize (): number {\n      return this.radius / (1 - Number(this.width) / +this.size)\n    },\n  },\n\n  methods: {\n    genCircle (name: string, offset: string | number): VNode {\n      return this.$createElement('circle', {\n        class: `v-progress-circular__${name}`,\n        attrs: {\n          fill: 'transparent',\n          cx: 2 * this.viewBoxSize,\n          cy: 2 * this.viewBoxSize,\n          r: this.radius,\n          'stroke-width': this.strokeWidth,\n          'stroke-dasharray': this.strokeDashArray,\n          'stroke-dashoffset': offset,\n        },\n      })\n    },\n    genSvg (): VNode {\n      const children = [\n        this.indeterminate || this.genCircle('underlay', 0),\n        this.genCircle('overlay', this.strokeDashOffset),\n      ] as VNodeChildren\n\n      return this.$createElement('svg', {\n        style: this.svgStyles,\n        attrs: {\n          xmlns: 'http://www.w3.org/2000/svg',\n          viewBox: `${this.viewBoxSize} ${this.viewBoxSize} ${2 * this.viewBoxSize} ${2 * this.viewBoxSize}`,\n        },\n      }, children)\n    },\n    genInfo (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-progress-circular__info',\n      }, this.$slots.default)\n    },\n    onObserve (entries: IntersectionObserverEntry[], observer: IntersectionObserver, isIntersecting: boolean) {\n      this.isVisible = isIntersecting\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.setTextColor(this.color, {\n      staticClass: 'v-progress-circular',\n      attrs: {\n        role: 'progressbar',\n        'aria-valuemin': 0,\n        'aria-valuemax': 100,\n        'aria-valuenow': this.indeterminate ? undefined : this.normalizedValue,\n      },\n      class: this.classes,\n      directives: [{\n        name: 'intersect',\n        value: this.onObserve,\n      }],\n      style: this.styles,\n      on: this.$listeners,\n    }), [\n      this.genSvg(),\n      this.genInfo(),\n    ])\n  },\n})\n","import VProgressCircular from './VProgressCircular'\n\nexport { VProgressCircular }\nexport default VProgressCircular\n","// Styles\nimport './VBtn.sass'\n\n// Extensions\nimport VSheet from '../VSheet'\n\n// Components\nimport VProgressCircular from '../VProgressCircular'\n\n// Mixins\nimport { factory as GroupableFactory } from '../../mixins/groupable'\nimport { factory as ToggleableFactory } from '../../mixins/toggleable'\nimport Elevatable from '../../mixins/elevatable'\nimport Positionable from '../../mixins/positionable'\nimport Routable from '../../mixins/routable'\nimport Sizeable from '../../mixins/sizeable'\n\n// Utilities\nimport mixins, { ExtractVue } from '../../util/mixins'\nimport { breaking } from '../../util/console'\n\n// Types\nimport { VNode } from 'vue'\nimport { PropValidator, PropType } from 'vue/types/options'\nimport { RippleOptions } from '../../directives/ripple'\n\nconst baseMixins = mixins(\n  VSheet,\n  Routable,\n  Positionable,\n  Sizeable,\n  GroupableFactory('btnToggle'),\n  ToggleableFactory('inputValue')\n  /* @vue/component */\n)\ninterface options extends ExtractVue<typeof baseMixins> {\n  $el: HTMLElement\n}\n\nexport default baseMixins.extend<options>().extend({\n  name: 'v-btn',\n\n  props: {\n    activeClass: {\n      type: String,\n      default (): string | undefined {\n        if (!this.btnToggle) return ''\n\n        return this.btnToggle.activeClass\n      },\n    } as any as PropValidator<string>,\n    block: Boolean,\n    depressed: Boolean,\n    fab: Boolean,\n    icon: Boolean,\n    loading: Boolean,\n    outlined: Boolean,\n    plain: Boolean,\n    retainFocusOnClick: Boolean,\n    rounded: Boolean,\n    tag: {\n      type: String,\n      default: 'button',\n    },\n    text: Boolean,\n    tile: Boolean,\n    type: {\n      type: String,\n      default: 'button',\n    },\n    value: null as any as PropType<any>,\n  },\n\n  data: () => ({\n    proxyClass: 'v-btn--active',\n  }),\n\n  computed: {\n    classes (): any {\n      return {\n        'v-btn': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-btn--absolute': this.absolute,\n        'v-btn--block': this.block,\n        'v-btn--bottom': this.bottom,\n        'v-btn--disabled': this.disabled,\n        'v-btn--is-elevated': this.isElevated,\n        'v-btn--fab': this.fab,\n        'v-btn--fixed': this.fixed,\n        'v-btn--has-bg': this.hasBg,\n        'v-btn--icon': this.icon,\n        'v-btn--left': this.left,\n        'v-btn--loading': this.loading,\n        'v-btn--outlined': this.outlined,\n        'v-btn--plain': this.plain,\n        'v-btn--right': this.right,\n        'v-btn--round': this.isRound,\n        'v-btn--rounded': this.rounded,\n        'v-btn--router': this.to,\n        'v-btn--text': this.text,\n        'v-btn--tile': this.tile,\n        'v-btn--top': this.top,\n        ...this.themeClasses,\n        ...this.groupClasses,\n        ...this.elevationClasses,\n        ...this.sizeableClasses,\n      }\n    },\n    computedElevation (): string | number | undefined {\n      if (this.disabled) return undefined\n\n      return Elevatable.options.computed.computedElevation.call(this)\n    },\n    computedRipple (): RippleOptions | boolean {\n      const defaultRipple = this.icon || this.fab ? { circle: true } : true\n      if (this.disabled) return false\n      else return this.ripple ?? defaultRipple\n    },\n    hasBg (): boolean {\n      return !this.text && !this.plain && !this.outlined && !this.icon\n    },\n    isElevated (): boolean {\n      return Boolean(\n        !this.icon &&\n        !this.text &&\n        !this.outlined &&\n        !this.depressed &&\n        !this.disabled &&\n        !this.plain &&\n        (this.elevation == null || Number(this.elevation) > 0)\n      )\n    },\n    isRound (): boolean {\n      return Boolean(\n        this.icon ||\n        this.fab\n      )\n    },\n    styles (): object {\n      return {\n        ...this.measurableStyles,\n      }\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['flat', 'text'],\n      ['outline', 'outlined'],\n      ['round', 'rounded'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n  },\n\n  methods: {\n    click (e: MouseEvent): void {\n      // TODO: Remove this in v3\n      !this.retainFocusOnClick && !this.fab && e.detail && this.$el.blur()\n      this.$emit('click', e)\n\n      this.btnToggle && this.toggle()\n    },\n    genContent (): VNode {\n      return this.$createElement('span', {\n        staticClass: 'v-btn__content',\n      }, this.$slots.default)\n    },\n    genLoader (): VNode {\n      return this.$createElement('span', {\n        class: 'v-btn__loader',\n      }, this.$slots.loader || [this.$createElement(VProgressCircular, {\n        props: {\n          indeterminate: true,\n          size: 23,\n          width: 2,\n        },\n      })])\n    },\n  },\n\n  render (h): VNode {\n    const children = [\n      this.genContent(),\n      this.loading && this.genLoader(),\n    ]\n    const { tag, data } = this.generateRouteLink()\n    const setColor = this.hasBg\n      ? this.setBackgroundColor\n      : this.setTextColor\n\n    if (tag === 'button') {\n      data.attrs!.type = this.type\n      data.attrs!.disabled = this.disabled\n    }\n    data.attrs!.value = ['string', 'number'].includes(typeof this.value)\n      ? this.value\n      : JSON.stringify(this.value)\n\n    return h(tag, this.disabled ? data : setColor(this.color, data), children)\n  },\n})\n","// Styles\nimport './VCard.sass'\n\n// Extensions\nimport VSheet from '../VSheet'\n\n// Mixins\nimport Loadable from '../../mixins/loadable'\nimport Routable from '../../mixins/routable'\n\n// Helpers\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default mixins(\n  Loadable,\n  Routable,\n  VSheet\n).extend({\n  name: 'v-card',\n\n  props: {\n    flat: Boolean,\n    hover: Boolean,\n    img: String,\n    link: Boolean,\n    loaderHeight: {\n      type: [Number, String],\n      default: 4,\n    },\n    raised: Boolean,\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-card': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-card--flat': this.flat,\n        'v-card--hover': this.hover,\n        'v-card--link': this.isClickable,\n        'v-card--loading': this.loading,\n        'v-card--disabled': this.disabled,\n        'v-card--raised': this.raised,\n        ...VSheet.options.computed.classes.call(this),\n      }\n    },\n    styles (): object {\n      const style: Dictionary<string> = {\n        ...VSheet.options.computed.styles.call(this),\n      }\n\n      if (this.img) {\n        style.background = `url(\"${this.img}\") center center / cover no-repeat`\n      }\n\n      return style\n    },\n  },\n\n  methods: {\n    genProgress () {\n      const render = Loadable.options.methods.genProgress.call(this)\n\n      if (!render) return null\n\n      return this.$createElement('div', {\n        staticClass: 'v-card__progress',\n        key: 'progress',\n      }, [render])\n    },\n  },\n\n  render (h): VNode {\n    const { tag, data } = this.generateRouteLink()\n\n    data.style = this.styles\n\n    if (this.isClickable) {\n      data.attrs = data.attrs || {}\n      data.attrs.tabindex = 0\n    }\n\n    return h(tag, this.setBackgroundColor(this.color, data), [\n      this.genProgress(),\n      this.$slots.default,\n    ])\n  },\n})\n","import VCard from './VCard'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nconst VCardActions = createSimpleFunctional('v-card__actions')\nconst VCardSubtitle = createSimpleFunctional('v-card__subtitle')\nconst VCardText = createSimpleFunctional('v-card__text')\nconst VCardTitle = createSimpleFunctional('v-card__title')\n\nexport {\n  VCard,\n  VCardActions,\n  VCardSubtitle,\n  VCardText,\n  VCardTitle,\n}\n\nexport default {\n  $_vuetify_subcomponents: {\n    VCard,\n    VCardActions,\n    VCardSubtitle,\n    VCardText,\n    VCardTitle,\n  },\n}\n","// Directives\nimport ripple from '../../directives/ripple'\n\n// Types\nimport Vue, { VNode, VNodeData, VNodeDirective } from 'vue'\n\nexport default Vue.extend({\n  name: 'rippleable',\n\n  directives: { ripple },\n\n  props: {\n    ripple: {\n      type: [Boolean, Object],\n      default: true,\n    },\n  },\n\n  methods: {\n    genRipple (data: VNodeData = {}): VNode | null {\n      if (!this.ripple) return null\n\n      data.staticClass = 'v-input--selection-controls__ripple'\n\n      data.directives = data.directives || []\n      data.directives.push({\n        name: 'ripple',\n        value: { center: true },\n      } as VNodeDirective)\n\n      return this.$createElement('div', data)\n    },\n  },\n})\n","// Components\nimport VInput from '../../components/VInput'\n\n// Mixins\nimport Rippleable from '../rippleable'\nimport Comparable from '../comparable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\nexport function prevent (e: Event) {\n  e.preventDefault()\n}\n\n/* @vue/component */\nexport default mixins(\n  VInput,\n  Rippleable,\n  Comparable\n).extend({\n  name: 'selectable',\n\n  model: {\n    prop: 'inputValue',\n    event: 'change',\n  },\n\n  props: {\n    id: String,\n    inputValue: null as any,\n    falseValue: null as any,\n    trueValue: null as any,\n    multiple: {\n      type: Boolean,\n      default: null,\n    },\n    label: String,\n  },\n\n  data () {\n    return {\n      hasColor: this.inputValue,\n      lazyValue: this.inputValue,\n    }\n  },\n\n  computed: {\n    computedColor (): string | undefined {\n      if (!this.isActive) return undefined\n      if (this.color) return this.color\n      if (this.isDark && !this.appIsDark) return 'white'\n      return 'primary'\n    },\n    isMultiple (): boolean {\n      return this.multiple === true || (this.multiple === null && Array.isArray(this.internalValue))\n    },\n    isActive (): boolean {\n      const value = this.value\n      const input = this.internalValue\n\n      if (this.isMultiple) {\n        if (!Array.isArray(input)) return false\n\n        return input.some(item => this.valueComparator(item, value))\n      }\n\n      if (this.trueValue === undefined || this.falseValue === undefined) {\n        return value\n          ? this.valueComparator(value, input)\n          : Boolean(input)\n      }\n\n      return this.valueComparator(input, this.trueValue)\n    },\n    isDirty (): boolean {\n      return this.isActive\n    },\n    rippleState (): string | undefined {\n      return !this.isDisabled && !this.validationState\n        ? undefined\n        : this.validationState\n    },\n  },\n\n  watch: {\n    inputValue (val) {\n      this.lazyValue = val\n      this.hasColor = val\n    },\n  },\n\n  methods: {\n    genLabel () {\n      const label = VInput.options.methods.genLabel.call(this)\n\n      if (!label) return label\n\n      label!.data!.on = {\n        // Label shouldn't cause the input to focus\n        click: prevent,\n      }\n\n      return label\n    },\n    genInput (type: string, attrs: object) {\n      return this.$createElement('input', {\n        attrs: Object.assign({\n          'aria-checked': this.isActive.toString(),\n          disabled: this.isDisabled,\n          id: this.computedId,\n          role: type,\n          type,\n        }, attrs),\n        domProps: {\n          value: this.value,\n          checked: this.isActive,\n        },\n        on: {\n          blur: this.onBlur,\n          change: this.onChange,\n          focus: this.onFocus,\n          keydown: this.onKeydown,\n          click: prevent,\n        },\n        ref: 'input',\n      })\n    },\n    onClick (e: Event) {\n      this.onChange()\n      this.$emit('click', e)\n    },\n    onChange () {\n      if (!this.isInteractive) return\n\n      const value = this.value\n      let input = this.internalValue\n\n      if (this.isMultiple) {\n        if (!Array.isArray(input)) {\n          input = []\n        }\n\n        const length = input.length\n\n        input = input.filter((item: any) => !this.valueComparator(item, value))\n\n        if (input.length === length) {\n          input.push(value)\n        }\n      } else if (this.trueValue !== undefined && this.falseValue !== undefined) {\n        input = this.valueComparator(input, this.trueValue) ? this.falseValue : this.trueValue\n      } else if (value) {\n        input = this.valueComparator(input, value) ? null : value\n      } else {\n        input = !input\n      }\n\n      this.validate(true, input)\n      this.internalValue = input\n      this.hasColor = input\n    },\n    onFocus (e: FocusEvent) {\n      this.isFocused = true\n      this.$emit('focus', e)\n    },\n    onBlur (e: FocusEvent) {\n      this.isFocused = false\n      this.$emit('blur', e)\n    },\n    /** @abstract */\n    onKeydown (e: Event) {},\n  },\n})\n","// Styles\nimport './VCheckbox.sass'\nimport '../../styles/components/_selection-controls.sass'\n\n// Components\nimport VIcon from '../VIcon'\nimport VInput from '../VInput'\n\n// Mixins\nimport Selectable from '../../mixins/selectable'\n\n/* @vue/component */\nexport default Selectable.extend({\n  name: 'v-checkbox',\n\n  props: {\n    indeterminate: Boolean,\n    indeterminateIcon: {\n      type: String,\n      default: '$checkboxIndeterminate',\n    },\n    offIcon: {\n      type: String,\n      default: '$checkboxOff',\n    },\n    onIcon: {\n      type: String,\n      default: '$checkboxOn',\n    },\n  },\n\n  data () {\n    return {\n      inputIndeterminate: this.indeterminate,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        'v-input--selection-controls': true,\n        'v-input--checkbox': true,\n        'v-input--indeterminate': this.inputIndeterminate,\n      }\n    },\n    computedIcon (): string {\n      if (this.inputIndeterminate) {\n        return this.indeterminateIcon\n      } else if (this.isActive) {\n        return this.onIcon\n      } else {\n        return this.offIcon\n      }\n    },\n    // Do not return undefined if disabled,\n    // according to spec, should still show\n    // a color when disabled and active\n    validationState (): string | undefined {\n      if (this.isDisabled && !this.inputIndeterminate) return undefined\n      if (this.hasError && this.shouldValidate) return 'error'\n      if (this.hasSuccess) return 'success'\n      if (this.hasColor !== null) return this.computedColor\n      return undefined\n    },\n  },\n\n  watch: {\n    indeterminate (val) {\n      // https://github.com/vuetifyjs/vuetify/issues/8270\n      this.$nextTick(() => (this.inputIndeterminate = val))\n    },\n    inputIndeterminate (val) {\n      this.$emit('update:indeterminate', val)\n    },\n    isActive () {\n      if (!this.indeterminate) return\n      this.inputIndeterminate = false\n    },\n  },\n\n  methods: {\n    genCheckbox () {\n      const { title, ...checkboxAttrs } = this.attrs$\n      return this.$createElement('div', {\n        staticClass: 'v-input--selection-controls__input',\n      }, [\n        this.$createElement(VIcon, this.setTextColor(this.validationState, {\n          props: {\n            dense: this.dense,\n            dark: this.dark,\n            light: this.light,\n          },\n        }), this.computedIcon),\n        this.genInput('checkbox', {\n          ...checkboxAttrs,\n          'aria-checked': this.inputIndeterminate\n            ? 'mixed'\n            : this.isActive.toString(),\n        }),\n        this.genRipple(this.setTextColor(this.rippleState)),\n      ])\n    },\n    genDefaultSlot () {\n      return [\n        this.genCheckbox(),\n        this.genLabel(),\n      ]\n    },\n  },\n})\n","// Styles\nimport './VDivider.sass'\n\n// Types\nimport { VNode } from 'vue'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\n\nexport default Themeable.extend({\n  name: 'v-divider',\n\n  props: {\n    inset: Boolean,\n    vertical: Boolean,\n  },\n\n  render (h): VNode {\n    // WAI-ARIA attributes\n    let orientation\n    if (!this.$attrs.role || this.$attrs.role === 'separator') {\n      orientation = this.vertical ? 'vertical' : 'horizontal'\n    }\n    return h('hr', {\n      class: {\n        'v-divider': true,\n        'v-divider--inset': this.inset,\n        'v-divider--vertical': this.vertical,\n        ...this.themeClasses,\n      },\n      attrs: {\n        role: 'separator',\n        'aria-orientation': orientation,\n        ...this.$attrs,\n      },\n      on: this.$listeners,\n    })\n  },\n})\n","import './VGrid.sass'\n\nimport Vue, { VNode, PropOptions } from 'vue'\nimport mergeData from '../../util/mergeData'\nimport { upperFirst } from '../../util/helpers'\n\n// no xs\nconst breakpoints = ['sm', 'md', 'lg', 'xl']\n\nconst breakpointProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props[val] = {\n      type: [Boolean, String, Number],\n      default: false,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst offsetProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['offset' + upperFirst(val)] = {\n      type: [String, Number],\n      default: null,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst orderProps = (() => {\n  return breakpoints.reduce((props, val) => {\n    props['order' + upperFirst(val)] = {\n      type: [String, Number],\n      default: null,\n    }\n    return props\n  }, {} as Dictionary<PropOptions>)\n})()\n\nconst propMap = {\n  col: Object.keys(breakpointProps),\n  offset: Object.keys(offsetProps),\n  order: Object.keys(orderProps),\n}\n\nfunction breakpointClass (type: keyof typeof propMap, prop: string, val: boolean | string | number) {\n  let className = type\n  if (val == null || val === false) {\n    return undefined\n  }\n  if (prop) {\n    const breakpoint = prop.replace(type, '')\n    className += `-${breakpoint}`\n  }\n  // Handling the boolean style prop when accepting [Boolean, String, Number]\n  // means Vue will not convert <v-col sm></v-col> to sm: true for us.\n  // Since the default is false, an empty string indicates the prop's presence.\n  if (type === 'col' && (val === '' || val === true)) {\n    // .col-md\n    return className.toLowerCase()\n  }\n  // .order-md-6\n  className += `-${val}`\n  return className.toLowerCase()\n}\n\nconst cache = new Map<string, any[]>()\n\nexport default Vue.extend({\n  name: 'v-col',\n  functional: true,\n  props: {\n    cols: {\n      type: [Boolean, String, Number],\n      default: false,\n    },\n    ...breakpointProps,\n    offset: {\n      type: [String, Number],\n      default: null,\n    },\n    ...offsetProps,\n    order: {\n      type: [String, Number],\n      default: null,\n    },\n    ...orderProps,\n    alignSelf: {\n      type: String,\n      default: null,\n      validator: (str: any) => ['auto', 'start', 'end', 'center', 'baseline', 'stretch'].includes(str),\n    },\n    tag: {\n      type: String,\n      default: 'div',\n    },\n  },\n  render (h, { props, data, children, parent }): VNode {\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    let cacheKey = ''\n    for (const prop in props) {\n      cacheKey += String((props as any)[prop])\n    }\n    let classList = cache.get(cacheKey)\n\n    if (!classList) {\n      classList = []\n      // Loop through `col`, `offset`, `order` breakpoint props\n      let type: keyof typeof propMap\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value: string | number | boolean = (props as any)[prop]\n          const className = breakpointClass(type, prop, value)\n          if (className) classList!.push(className)\n        })\n      }\n\n      const hasColClasses = classList.some(className => className.startsWith('col-'))\n\n      classList.push({\n        // Default to .col if no other col-{bp}-* classes generated nor `cols` specified.\n        col: !hasColClasses || !props.cols,\n        [`col-${props.cols}`]: props.cols,\n        [`offset-${props.offset}`]: props.offset,\n        [`order-${props.order}`]: props.order,\n        [`align-self-${props.alignSelf}`]: props.alignSelf,\n      })\n\n      cache.set(cacheKey, classList)\n    }\n\n    return h(props.tag, mergeData(data, { class: classList }), children)\n  },\n})\n","// Types\nimport Vue, { VNode } from 'vue'\n\nexport default function VGrid (name: string) {\n  /* @vue/component */\n  return Vue.extend({\n    name: `v-${name}`,\n\n    functional: true,\n\n    props: {\n      id: String,\n      tag: {\n        type: String,\n        default: 'div',\n      },\n    },\n\n    render (h, { props, data, children }): VNode {\n      data.staticClass = (`${name} ${data.staticClass || ''}`).trim()\n\n      const { attrs } = data\n      if (attrs) {\n        // reset attrs to extract utility clases like pa-3\n        data.attrs = {}\n        const classes = Object.keys(attrs).filter(key => {\n          // TODO: Remove once resolved\n          // https://github.com/vuejs/vue/issues/7841\n          if (key === 'slot') return false\n\n          const value = attrs[key]\n\n          // add back data attributes like data-test=\"foo\" but do not\n          // add them as classes\n          if (key.startsWith('data-')) {\n            data.attrs![key] = value\n            return false\n          }\n\n          return value || typeof value === 'string'\n        })\n\n        if (classes.length) data.staticClass += ` ${classes.join(' ')}`\n      }\n\n      if (props.id) {\n        data.domProps = data.domProps || {}\n        data.domProps.id = props.id\n      }\n\n      return h(props.tag, data, children)\n    },\n  })\n}\n","import './_grid.sass'\nimport './VGrid.sass'\n\nimport Grid from './grid'\n\nimport mergeData from '../../util/mergeData'\n\n/* @vue/component */\nexport default Grid('container').extend({\n  name: 'v-container',\n  functional: true,\n  props: {\n    id: String,\n    tag: {\n      type: String,\n      default: 'div',\n    },\n    fluid: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  render (h, { props, data, children }) {\n    let classes\n    const { attrs } = data\n    if (attrs) {\n      // reset attrs to extract utility clases like pa-3\n      data.attrs = {}\n      classes = Object.keys(attrs).filter(key => {\n        // TODO: Remove once resolved\n        // https://github.com/vuejs/vue/issues/7841\n        if (key === 'slot') return false\n\n        const value = attrs[key]\n\n        // add back data attributes like data-test=\"foo\" but do not\n        // add them as classes\n        if (key.startsWith('data-')) {\n          data.attrs![key] = value\n          return false\n        }\n\n        return value || typeof value === 'string'\n      })\n    }\n\n    if (props.id) {\n      data.domProps = data.domProps || {}\n      data.domProps.id = props.id\n    }\n\n    return h(\n      props.tag,\n      mergeData(data, {\n        staticClass: 'container',\n        class: Array<any>({\n          'container--fluid': props.fluid,\n        }).concat(classes || []),\n      }),\n      children\n    )\n  },\n})\n","import './VGrid.sass'\n\nimport Vue, { PropOptions } from 'vue'\nimport mergeData from '../../util/mergeData'\nimport { upperFirst } from '../../util/helpers'\n\n// no xs\nconst breakpoints = ['sm', 'md', 'lg', 'xl']\n\nconst ALIGNMENT = ['start', 'end', 'center']\n\nfunction makeProps (prefix: string, def: () => PropOptions) {\n  return breakpoints.reduce((props, val) => {\n    props[prefix + upperFirst(val)] = def()\n    return props\n  }, {} as Dictionary<PropOptions>)\n}\n\nconst alignValidator = (str: any) => [...ALIGNMENT, 'baseline', 'stretch'].includes(str)\nconst alignProps = makeProps('align', () => ({\n  type: String,\n  default: null,\n  validator: alignValidator,\n}))\n\nconst justifyValidator = (str: any) => [...ALIGNMENT, 'space-between', 'space-around'].includes(str)\nconst justifyProps = makeProps('justify', () => ({\n  type: String,\n  default: null,\n  validator: justifyValidator,\n}))\n\nconst alignContentValidator = (str: any) => [...ALIGNMENT, 'space-between', 'space-around', 'stretch'].includes(str)\nconst alignContentProps = makeProps('alignContent', () => ({\n  type: String,\n  default: null,\n  validator: alignContentValidator,\n}))\n\nconst propMap = {\n  align: Object.keys(alignProps),\n  justify: Object.keys(justifyProps),\n  alignContent: Object.keys(alignContentProps),\n}\n\nconst classMap = {\n  align: 'align',\n  justify: 'justify',\n  alignContent: 'align-content',\n}\n\nfunction breakpointClass (type: keyof typeof propMap, prop: string, val: string) {\n  let className = classMap[type]\n  if (val == null) {\n    return undefined\n  }\n  if (prop) {\n    // alignSm -> Sm\n    const breakpoint = prop.replace(type, '')\n    className += `-${breakpoint}`\n  }\n  // .align-items-sm-center\n  className += `-${val}`\n  return className.toLowerCase()\n}\n\nconst cache = new Map<string, any[]>()\n\nexport default Vue.extend({\n  name: 'v-row',\n  functional: true,\n  props: {\n    tag: {\n      type: String,\n      default: 'div',\n    },\n    dense: Boolean,\n    noGutters: Boolean,\n    align: {\n      type: String,\n      default: null,\n      validator: alignValidator,\n    },\n    ...alignProps,\n    justify: {\n      type: String,\n      default: null,\n      validator: justifyValidator,\n    },\n    ...justifyProps,\n    alignContent: {\n      type: String,\n      default: null,\n      validator: alignContentValidator,\n    },\n    ...alignContentProps,\n  },\n  render (h, { props, data, children }) {\n    // Super-fast memoization based on props, 5x faster than JSON.stringify\n    let cacheKey = ''\n    for (const prop in props) {\n      cacheKey += String((props as any)[prop])\n    }\n    let classList = cache.get(cacheKey)\n\n    if (!classList) {\n      classList = []\n      // Loop through `align`, `justify`, `alignContent` breakpoint props\n      let type: keyof typeof propMap\n      for (type in propMap) {\n        propMap[type].forEach(prop => {\n          const value: string = (props as any)[prop]\n          const className = breakpointClass(type, prop, value)\n          if (className) classList!.push(className)\n        })\n      }\n\n      classList.push({\n        'no-gutters': props.noGutters,\n        'row--dense': props.dense,\n        [`align-${props.align}`]: props.align,\n        [`justify-${props.justify}`]: props.justify,\n        [`align-content-${props.alignContent}`]: props.alignContent,\n      })\n\n      cache.set(cacheKey, classList)\n    }\n\n    return h(\n      props.tag,\n      mergeData(data, {\n        staticClass: 'row',\n        class: classList,\n      }),\n      children\n    )\n  },\n})\n","import './VIcon.sass'\n\n// Mixins\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport Colorable from '../../mixins/colorable'\nimport Sizeable from '../../mixins/sizeable'\nimport Themeable from '../../mixins/themeable'\n\n// Util\nimport { convertToUnit, keys, remapInternalIcon } from '../../util/helpers'\n\n// Types\nimport Vue, { CreateElement, VNode, VNodeChildren, VNodeData } from 'vue'\nimport mixins from '../../util/mixins'\nimport { VuetifyIcon, VuetifyIconComponent } from 'vuetify/types/services/icons'\n\nenum SIZE_MAP {\n  xSmall = '12px',\n  small = '16px',\n  default = '24px',\n  medium = '28px',\n  large = '36px',\n  xLarge = '40px'\n}\n\nfunction isFontAwesome5 (iconType: string): boolean {\n  return ['fas', 'far', 'fal', 'fab', 'fad', 'fak'].some(val => iconType.includes(val))\n}\n\nfunction isSvgPath (icon: string): boolean {\n  return (/^[mzlhvcsqta]\\s*[-+.0-9][^mlhvzcsqta]+/i.test(icon) && /[\\dz]$/i.test(icon) && icon.length > 4)\n}\n\nconst VIcon = mixins(\n  BindsAttrs,\n  Colorable,\n  Sizeable,\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-icon',\n\n  props: {\n    dense: Boolean,\n    disabled: Boolean,\n    left: Boolean,\n    right: Boolean,\n    size: [Number, String],\n    tag: {\n      type: String,\n      required: false,\n      default: 'i',\n    },\n  },\n\n  computed: {\n    medium () {\n      return false\n    },\n    hasClickListener (): boolean {\n      return Boolean(\n        this.listeners$.click || this.listeners$['!click']\n      )\n    },\n  },\n\n  methods: {\n    getIcon (): VuetifyIcon {\n      let iconName = ''\n      if (this.$slots.default) iconName = this.$slots.default[0].text!.trim()\n\n      return remapInternalIcon(this, iconName)\n    },\n    getSize (): string | undefined {\n      const sizes = {\n        xSmall: this.xSmall,\n        small: this.small,\n        medium: this.medium,\n        large: this.large,\n        xLarge: this.xLarge,\n      }\n\n      const explicitSize = keys(sizes).find(key => sizes[key])\n\n      return (\n        (explicitSize && SIZE_MAP[explicitSize]) || convertToUnit(this.size)\n      )\n    },\n    // Component data for both font icon and SVG wrapper span\n    getDefaultData (): VNodeData {\n      return {\n        staticClass: 'v-icon notranslate',\n        class: {\n          'v-icon--disabled': this.disabled,\n          'v-icon--left': this.left,\n          'v-icon--link': this.hasClickListener,\n          'v-icon--right': this.right,\n          'v-icon--dense': this.dense,\n        },\n        attrs: {\n          'aria-hidden': !this.hasClickListener,\n          disabled: this.hasClickListener && this.disabled,\n          type: this.hasClickListener ? 'button' : undefined,\n          ...this.attrs$,\n        },\n        on: this.listeners$,\n      }\n    },\n    getSvgWrapperData () {\n      const fontSize = this.getSize()\n      const wrapperData = {\n        ...this.getDefaultData(),\n        style: fontSize ? {\n          fontSize,\n          height: fontSize,\n          width: fontSize,\n        } : undefined,\n      }\n      this.applyColors(wrapperData)\n\n      return wrapperData\n    },\n    applyColors (data: VNodeData): void {\n      data.class = { ...data.class, ...this.themeClasses }\n      this.setTextColor(this.color, data)\n    },\n    renderFontIcon (icon: string, h: CreateElement): VNode {\n      const newChildren: VNodeChildren = []\n      const data = this.getDefaultData()\n\n      let iconType = 'material-icons'\n      // Material Icon delimiter is _\n      // https://material.io/icons/\n      const delimiterIndex = icon.indexOf('-')\n      const isMaterialIcon = delimiterIndex <= -1\n\n      if (isMaterialIcon) {\n        // Material icon uses ligatures.\n        newChildren.push(icon)\n      } else {\n        iconType = icon.slice(0, delimiterIndex)\n        if (isFontAwesome5(iconType)) iconType = ''\n      }\n\n      data.class[iconType] = true\n      data.class[icon] = !isMaterialIcon\n\n      const fontSize = this.getSize()\n      if (fontSize) data.style = { fontSize }\n\n      this.applyColors(data)\n\n      return h(this.hasClickListener ? 'button' : this.tag, data, newChildren)\n    },\n    renderSvgIcon (icon: string, h: CreateElement): VNode {\n      const svgData: VNodeData = {\n        class: 'v-icon__svg',\n        attrs: {\n          xmlns: 'http://www.w3.org/2000/svg',\n          viewBox: '0 0 24 24',\n          role: 'img',\n          'aria-hidden': true,\n        },\n      }\n\n      const size = this.getSize()\n      if (size) {\n        svgData.style = {\n          fontSize: size,\n          height: size,\n          width: size,\n        }\n      }\n\n      return h(this.hasClickListener ? 'button' : 'span', this.getSvgWrapperData(), [\n        h('svg', svgData, [\n          h('path', {\n            attrs: {\n              d: icon,\n            },\n          }),\n        ]),\n      ])\n    },\n    renderSvgIconComponent (\n      icon: VuetifyIconComponent,\n      h: CreateElement\n    ): VNode {\n      const data: VNodeData = {\n        class: {\n          'v-icon__component': true,\n        },\n      }\n\n      const size = this.getSize()\n      if (size) {\n        data.style = {\n          fontSize: size,\n          height: size,\n          width: size,\n        }\n      }\n\n      this.applyColors(data)\n\n      const component = icon.component\n      data.props = icon.props\n      data.nativeOn = data.on\n\n      return h(this.hasClickListener ? 'button' : 'span', this.getSvgWrapperData(), [\n        h(component, data),\n      ])\n    },\n  },\n\n  render (h: CreateElement): VNode {\n    const icon = this.getIcon()\n\n    if (typeof icon === 'string') {\n      if (isSvgPath(icon)) {\n        return this.renderSvgIcon(icon, h)\n      }\n      return this.renderFontIcon(icon, h)\n    }\n\n    return this.renderSvgIconComponent(icon, h)\n  },\n})\n\nexport default Vue.extend({\n  name: 'v-icon',\n\n  $_wrapperFor: VIcon,\n\n  functional: true,\n\n  render (h, { data, children }): VNode {\n    let iconName = ''\n\n    // Support usage of v-text and v-html\n    if (data.domProps) {\n      iconName = data.domProps.textContent ||\n        data.domProps.innerHTML ||\n        iconName\n\n      // Remove nodes so it doesn't\n      // overwrite our changes\n      delete data.domProps.textContent\n      delete data.domProps.innerHTML\n    }\n\n    return h(VIcon, data, iconName ? [iconName] : children)\n  },\n})\n","import VIcon from './VIcon'\n\nexport { VIcon }\nexport default VIcon\n","import './VResponsive.sass'\n\n// Mixins\nimport Measurable, { NumberOrNumberString } from '../../mixins/measurable'\n\n// Types\nimport { VNode } from 'vue'\n\n// Utils\nimport mixins from '../../util/mixins'\nimport { getSlot } from '../../util/helpers'\n\n/* @vue/component */\nexport default mixins(Measurable).extend({\n  name: 'v-responsive',\n\n  props: {\n    aspectRatio: [String, Number] as NumberOrNumberString,\n    contentClass: String,\n  },\n\n  computed: {\n    computedAspectRatio (): number {\n      return Number(this.aspectRatio)\n    },\n    aspectStyle (): object | undefined {\n      return this.computedAspectRatio\n        ? { paddingBottom: (1 / this.computedAspectRatio) * 100 + '%' }\n        : undefined\n    },\n    __cachedSizer (): VNode | [] {\n      if (!this.aspectStyle) return []\n\n      return this.$createElement('div', {\n        style: this.aspectStyle,\n        staticClass: 'v-responsive__sizer',\n      })\n    },\n  },\n\n  methods: {\n    genContent (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-responsive__content',\n        class: this.contentClass,\n      }, getSlot(this))\n    },\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-responsive',\n      style: this.measurableStyles,\n      on: this.$listeners,\n    }, [\n      this.__cachedSizer,\n      this.genContent(),\n    ])\n  },\n})\n","import VResponsive from './VResponsive'\n\nexport { VResponsive }\nexport default VResponsive\n","// Styles\nimport './VImg.sass'\n\n// Directives\nimport intersect from '../../directives/intersect'\n\n// Types\nimport { VNode } from 'vue'\nimport { PropValidator } from 'vue/types/options'\n\n// Components\nimport VResponsive from '../VResponsive'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\n\n// Utils\nimport mixins from '../../util/mixins'\nimport mergeData from '../../util/mergeData'\nimport { consoleWarn } from '../../util/console'\nimport { getSlot } from '../../util/helpers'\n\n// not intended for public use, this is passed in by vuetify-loader\nexport interface srcObject {\n  src: string\n  srcset?: string\n  lazySrc: string\n  aspect: number\n}\n\nconst hasIntersect = typeof window !== 'undefined' && 'IntersectionObserver' in window\n\n/* @vue/component */\nexport default mixins(\n  VResponsive,\n  Themeable,\n).extend({\n  name: 'v-img',\n\n  directives: { intersect },\n\n  props: {\n    alt: String,\n    contain: Boolean,\n    eager: Boolean,\n    gradient: String,\n    lazySrc: String,\n    options: {\n      type: Object,\n      // For more information on types, navigate to:\n      // https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API\n      default: () => ({\n        root: undefined,\n        rootMargin: undefined,\n        threshold: undefined,\n      }),\n    } as PropValidator<IntersectionObserverInit>,\n    position: {\n      type: String,\n      default: 'center center',\n    },\n    sizes: String,\n    src: {\n      type: [String, Object],\n      default: '',\n    } as PropValidator<string | srcObject>,\n    srcset: String,\n    transition: {\n      type: [Boolean, String],\n      default: 'fade-transition',\n    },\n  },\n\n  data () {\n    return {\n      currentSrc: '', // Set from srcset\n      image: null as HTMLImageElement | null,\n      isLoading: true,\n      calculatedAspectRatio: undefined as number | undefined,\n      naturalWidth: undefined as number | undefined,\n      hasError: false,\n    }\n  },\n\n  computed: {\n    computedAspectRatio (): number {\n      return Number(this.normalisedSrc.aspect || this.calculatedAspectRatio)\n    },\n    normalisedSrc (): srcObject {\n      return this.src && typeof this.src === 'object'\n        ? {\n          src: this.src.src,\n          srcset: this.srcset || this.src.srcset,\n          lazySrc: this.lazySrc || this.src.lazySrc,\n          aspect: Number(this.aspectRatio || this.src.aspect),\n        } : {\n          src: this.src,\n          srcset: this.srcset,\n          lazySrc: this.lazySrc,\n          aspect: Number(this.aspectRatio || 0),\n        }\n    },\n    __cachedImage (): VNode | [] {\n      if (!(this.normalisedSrc.src || this.normalisedSrc.lazySrc || this.gradient)) return []\n\n      const backgroundImage: string[] = []\n      const src = this.isLoading ? this.normalisedSrc.lazySrc : this.currentSrc\n\n      if (this.gradient) backgroundImage.push(`linear-gradient(${this.gradient})`)\n      if (src) backgroundImage.push(`url(\"${src}\")`)\n\n      const image = this.$createElement('div', {\n        staticClass: 'v-image__image',\n        class: {\n          'v-image__image--preload': this.isLoading,\n          'v-image__image--contain': this.contain,\n          'v-image__image--cover': !this.contain,\n        },\n        style: {\n          backgroundImage: backgroundImage.join(', '),\n          backgroundPosition: this.position,\n        },\n        key: +this.isLoading,\n      })\n\n      /* istanbul ignore if */\n      if (!this.transition) return image\n\n      return this.$createElement('transition', {\n        attrs: {\n          name: this.transition,\n          mode: 'in-out',\n        },\n      }, [image])\n    },\n  },\n\n  watch: {\n    src () {\n      // Force re-init when src changes\n      if (!this.isLoading) this.init(undefined, undefined, true)\n      else this.loadImage()\n    },\n    '$vuetify.breakpoint.width': 'getSrc',\n  },\n\n  mounted () {\n    this.init()\n  },\n\n  methods: {\n    init (\n      entries?: IntersectionObserverEntry[],\n      observer?: IntersectionObserver,\n      isIntersecting?: boolean\n    ) {\n      // If the current browser supports the intersection\n      // observer api, the image is not observable, and\n      // the eager prop isn't being used, do not load\n      if (\n        hasIntersect &&\n        !isIntersecting &&\n        !this.eager\n      ) return\n\n      if (this.normalisedSrc.lazySrc) {\n        const lazyImg = new Image()\n        lazyImg.src = this.normalisedSrc.lazySrc\n        this.pollForSize(lazyImg, null)\n      }\n      /* istanbul ignore else */\n      if (this.normalisedSrc.src) this.loadImage()\n    },\n    onLoad () {\n      this.getSrc()\n      this.isLoading = false\n      this.$emit('load', this.src)\n\n      if (\n        this.image &&\n        (this.normalisedSrc.src.endsWith('.svg') || this.normalisedSrc.src.startsWith('data:image/svg+xml'))\n      ) {\n        if (this.image.naturalHeight && this.image.naturalWidth) {\n          this.naturalWidth = this.image.naturalWidth\n          this.calculatedAspectRatio = this.image.naturalWidth / this.image.naturalHeight\n        } else {\n          this.calculatedAspectRatio = 1\n        }\n      }\n    },\n    onError () {\n      this.hasError = true\n      this.$emit('error', this.src)\n    },\n    getSrc () {\n      /* istanbul ignore else */\n      if (this.image) this.currentSrc = this.image.currentSrc || this.image.src\n    },\n    loadImage () {\n      const image = new Image()\n      this.image = image\n\n      image.onload = () => {\n        /* istanbul ignore if */\n        if (image.decode) {\n          image.decode().catch((err: DOMException) => {\n            consoleWarn(\n              `Failed to decode image, trying to render anyway\\n\\n` +\n              `src: ${this.normalisedSrc.src}` +\n              (err.message ? `\\nOriginal error: ${err.message}` : ''),\n              this\n            )\n          }).then(this.onLoad)\n        } else {\n          this.onLoad()\n        }\n      }\n      image.onerror = this.onError\n\n      this.hasError = false\n      this.sizes && (image.sizes = this.sizes)\n      this.normalisedSrc.srcset && (image.srcset = this.normalisedSrc.srcset)\n      image.src = this.normalisedSrc.src\n      this.$emit('loadstart', this.normalisedSrc.src)\n\n      this.aspectRatio || this.pollForSize(image)\n      this.getSrc()\n    },\n    pollForSize (img: HTMLImageElement, timeout: number | null = 100) {\n      const poll = () => {\n        const { naturalHeight, naturalWidth } = img\n\n        if (naturalHeight || naturalWidth) {\n          this.naturalWidth = naturalWidth\n          this.calculatedAspectRatio = naturalWidth / naturalHeight\n        } else if (!img.complete && this.isLoading && !this.hasError && timeout != null) {\n          setTimeout(poll, timeout)\n        }\n      }\n\n      poll()\n    },\n    genContent () {\n      const content: VNode = VResponsive.options.methods.genContent.call(this)\n      if (this.naturalWidth) {\n        this._b(content.data!, 'div', {\n          style: { width: `${this.naturalWidth}px` },\n        })\n      }\n\n      return content\n    },\n    __genPlaceholder (): VNode | void {\n      const slot = getSlot(this, 'placeholder')\n      if (slot) {\n        const placeholder = this.isLoading\n          ? [this.$createElement('div', {\n            staticClass: 'v-image__placeholder',\n          }, slot)]\n          : []\n\n        if (!this.transition) return placeholder[0]\n\n        return this.$createElement('transition', {\n          props: {\n            appear: true,\n            name: this.transition,\n          },\n        }, placeholder)\n      }\n    },\n  },\n\n  render (h): VNode {\n    const node = VResponsive.options.render.call(this, h)\n\n    const data = mergeData(node.data!, {\n      staticClass: 'v-image',\n      attrs: {\n        'aria-label': this.alt,\n        role: this.alt ? 'img' : undefined,\n      },\n      class: this.themeClasses,\n      // Only load intersect directive if it\n      // will work in the current browser.\n      directives: hasIntersect\n        ? [{\n          name: 'intersect',\n          modifiers: { once: true },\n          value: {\n            handler: this.init,\n            options: this.options,\n          },\n        }]\n        : undefined,\n    })\n\n    node.children = [\n      this.__cachedSizer,\n      this.__cachedImage,\n      this.__genPlaceholder(),\n      this.genContent(),\n    ] as VNode[]\n\n    return h(node.tag, data, node.children)\n  },\n})\n","// Styles\nimport './VMessages.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Themeable from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport { PropValidator } from 'vue/types/options'\nimport mixins from '../../util/mixins'\n\n// Utilities\nimport { getSlot } from '../../util/helpers'\n\n/* @vue/component */\nexport default mixins(Colorable, Themeable).extend({\n  name: 'v-messages',\n\n  props: {\n    value: {\n      type: Array,\n      default: () => ([]),\n    } as PropValidator<string[]>,\n  },\n\n  methods: {\n    genChildren () {\n      return this.$createElement('transition-group', {\n        staticClass: 'v-messages__wrapper',\n        attrs: {\n          name: 'message-transition',\n          tag: 'div',\n        },\n      }, this.value.map(this.genMessage))\n    },\n    genMessage (message: string, key: number) {\n      return this.$createElement('div', {\n        staticClass: 'v-messages__message',\n        key,\n      }, getSlot(this, 'default', { message, key }) || [message])\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.setTextColor(this.color, {\n      staticClass: 'v-messages',\n      class: this.themeClasses,\n    }), [this.genChildren()])\n  },\n})\n","import VMessages from './VMessages'\n\nexport { VMessages }\nexport default VMessages\n","// Styles\nimport './VInput.sass'\n\n// Components\nimport VIcon from '../VIcon'\nimport VLabel from '../VLabel'\nimport VMessages from '../VMessages'\n\n// Mixins\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport Validatable from '../../mixins/validatable'\n\n// Utilities\nimport {\n  convertToUnit,\n  getSlot,\n  kebabCase,\n} from '../../util/helpers'\nimport mergeData from '../../util/mergeData'\n\n// Types\nimport { VNode, VNodeData, PropType } from 'vue'\nimport mixins from '../../util/mixins'\nimport { InputValidationRule } from 'vuetify/types'\n\nconst baseMixins = mixins(\n  BindsAttrs,\n  Validatable,\n)\n\ninterface options extends InstanceType<typeof baseMixins> {\n  /* eslint-disable-next-line camelcase */\n  $_modelEvent: string\n}\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-input',\n\n  inheritAttrs: false,\n\n  props: {\n    appendIcon: String,\n    backgroundColor: {\n      type: String,\n      default: '',\n    },\n    dense: Boolean,\n    height: [Number, String],\n    hideDetails: [Boolean, String] as PropType<boolean | 'auto'>,\n    hideSpinButtons: Boolean,\n    hint: String,\n    id: String,\n    label: String,\n    loading: Boolean,\n    persistentHint: Boolean,\n    prependIcon: String,\n    value: null as any as PropType<any>,\n  },\n\n  data () {\n    return {\n      lazyValue: this.value,\n      hasMouseDown: false,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-input--has-state': this.hasState,\n        'v-input--hide-details': !this.showDetails,\n        'v-input--is-label-active': this.isLabelActive,\n        'v-input--is-dirty': this.isDirty,\n        'v-input--is-disabled': this.isDisabled,\n        'v-input--is-focused': this.isFocused,\n        // <v-switch loading>.loading === '' so we can't just cast to boolean\n        'v-input--is-loading': this.loading !== false && this.loading != null,\n        'v-input--is-readonly': this.isReadonly,\n        'v-input--dense': this.dense,\n        'v-input--hide-spin-buttons': this.hideSpinButtons,\n        ...this.themeClasses,\n      }\n    },\n    computedId (): string {\n      return this.id || `input-${this._uid}`\n    },\n    hasDetails (): boolean {\n      return this.messagesToDisplay.length > 0\n    },\n    hasHint (): boolean {\n      return !this.hasMessages &&\n        !!this.hint &&\n        (this.persistentHint || this.isFocused)\n    },\n    hasLabel (): boolean {\n      return !!(this.$slots.label || this.label)\n    },\n    // Proxy for `lazyValue`\n    // This allows an input\n    // to function without\n    // a provided model\n    internalValue: {\n      get (): any {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n        this.$emit(this.$_modelEvent, val)\n      },\n    },\n    isDirty (): boolean {\n      return !!this.lazyValue\n    },\n    isLabelActive (): boolean {\n      return this.isDirty\n    },\n    messagesToDisplay (): string[] {\n      if (this.hasHint) return [this.hint]\n\n      if (!this.hasMessages) return []\n\n      return this.validations.map((validation: string | InputValidationRule) => {\n        if (typeof validation === 'string') return validation\n\n        const validationResult = validation(this.internalValue)\n\n        return typeof validationResult === 'string' ? validationResult : ''\n      }).filter(message => message !== '')\n    },\n    showDetails (): boolean {\n      return this.hideDetails === false || (this.hideDetails === 'auto' && this.hasDetails)\n    },\n  },\n\n  watch: {\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  beforeCreate () {\n    // v-radio-group needs to emit a different event\n    // https://github.com/vuetifyjs/vuetify/issues/4752\n    this.$_modelEvent = (this.$options.model && this.$options.model.event) || 'input'\n  },\n\n  methods: {\n    genContent () {\n      return [\n        this.genPrependSlot(),\n        this.genControl(),\n        this.genAppendSlot(),\n      ]\n    },\n    genControl () {\n      return this.$createElement('div', {\n        staticClass: 'v-input__control',\n        attrs: { title: this.attrs$.title },\n      }, [\n        this.genInputSlot(),\n        this.genMessages(),\n      ])\n    },\n    genDefaultSlot () {\n      return [\n        this.genLabel(),\n        this.$slots.default,\n      ]\n    },\n    genIcon (\n      type: string,\n      cb?: (e: Event) => void,\n      extraData: VNodeData = {}\n    ) {\n      const icon = (this as any)[`${type}Icon`]\n      const eventName = `click:${kebabCase(type)}`\n      const hasListener = !!(this.listeners$[eventName] || cb)\n\n      const data = mergeData({\n        attrs: {\n          'aria-label': hasListener ? kebabCase(type).split('-')[0] + ' icon' : undefined,\n          color: this.validationState,\n          dark: this.dark,\n          disabled: this.isDisabled,\n          light: this.light,\n        },\n        on: !hasListener\n          ? undefined\n          : {\n            click: (e: Event) => {\n              e.preventDefault()\n              e.stopPropagation()\n\n              this.$emit(eventName, e)\n              cb && cb(e)\n            },\n            // Container has g event that will\n            // trigger menu open if enclosed\n            mouseup: (e: Event) => {\n              e.preventDefault()\n              e.stopPropagation()\n            },\n          },\n      }, extraData)\n\n      return this.$createElement('div', {\n        staticClass: `v-input__icon`,\n        class: type ? `v-input__icon--${kebabCase(type)}` : undefined,\n      }, [\n        this.$createElement(\n          VIcon,\n          data,\n          icon\n        ),\n      ])\n    },\n    genInputSlot () {\n      return this.$createElement('div', this.setBackgroundColor(this.backgroundColor, {\n        staticClass: 'v-input__slot',\n        style: { height: convertToUnit(this.height) },\n        on: {\n          click: this.onClick,\n          mousedown: this.onMouseDown,\n          mouseup: this.onMouseUp,\n        },\n        ref: 'input-slot',\n      }), [this.genDefaultSlot()])\n    },\n    genLabel () {\n      if (!this.hasLabel) return null\n\n      return this.$createElement(VLabel, {\n        props: {\n          color: this.validationState,\n          dark: this.dark,\n          disabled: this.isDisabled,\n          focused: this.hasState,\n          for: this.computedId,\n          light: this.light,\n        },\n      }, this.$slots.label || this.label)\n    },\n    genMessages () {\n      if (!this.showDetails) return null\n\n      return this.$createElement(VMessages, {\n        props: {\n          color: this.hasHint ? '' : this.validationState,\n          dark: this.dark,\n          light: this.light,\n          value: this.messagesToDisplay,\n        },\n        attrs: {\n          role: this.hasMessages ? 'alert' : null,\n        },\n        scopedSlots: {\n          default: props => getSlot(this, 'message', props),\n        },\n      })\n    },\n    genSlot (\n      type: string,\n      location: string,\n      slot: (VNode | VNode[])[]\n    ) {\n      if (!slot.length) return null\n\n      const ref = `${type}-${location}`\n\n      return this.$createElement('div', {\n        staticClass: `v-input__${ref}`,\n        ref,\n      }, slot)\n    },\n    genPrependSlot () {\n      const slot = []\n\n      if (this.$slots.prepend) {\n        slot.push(this.$slots.prepend)\n      } else if (this.prependIcon) {\n        slot.push(this.genIcon('prepend'))\n      }\n\n      return this.genSlot('prepend', 'outer', slot)\n    },\n    genAppendSlot () {\n      const slot = []\n\n      // Append icon for text field was really\n      // an appended inner icon, v-text-field\n      // will overwrite this method in order to obtain\n      // backwards compat\n      if (this.$slots.append) {\n        slot.push(this.$slots.append)\n      } else if (this.appendIcon) {\n        slot.push(this.genIcon('append'))\n      }\n\n      return this.genSlot('append', 'outer', slot)\n    },\n    onClick (e: Event) {\n      this.$emit('click', e)\n    },\n    onMouseDown (e: Event) {\n      this.hasMouseDown = true\n      this.$emit('mousedown', e)\n    },\n    onMouseUp (e: Event) {\n      this.hasMouseDown = false\n      this.$emit('mouseup', e)\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.setTextColor(this.validationState, {\n      staticClass: 'v-input',\n      class: this.classes,\n    }), this.genContent())\n  },\n})\n","import VInput from './VInput'\n\nexport { VInput }\nexport default VInput\n","// Styles\nimport './VItemGroup.sass'\n\n// Mixins\nimport Comparable from '../../mixins/comparable'\nimport Groupable from '../../mixins/groupable'\nimport Proxyable from '../../mixins/proxyable'\nimport Themeable from '../../mixins/themeable'\n\n// Utilities\nimport mixins from '../../util/mixins'\nimport { consoleWarn } from '../../util/console'\n\n// Types\nimport { VNode } from 'vue/types'\n\nexport type GroupableInstance = InstanceType<typeof Groupable> & {\n  id?: string\n  to?: any\n  value?: any\n }\n\nexport const BaseItemGroup = mixins(\n  Comparable,\n  Proxyable,\n  Themeable\n).extend({\n  name: 'base-item-group',\n\n  props: {\n    activeClass: {\n      type: String,\n      default: 'v-item--active',\n    },\n    mandatory: Boolean,\n    max: {\n      type: [Number, String],\n      default: null,\n    },\n    multiple: Boolean,\n    tag: {\n      type: String,\n      default: 'div',\n    },\n  },\n\n  data () {\n    return {\n      // As long as a value is defined, show it\n      // Otherwise, check if multiple\n      // to determine which default to provide\n      internalLazyValue: this.value !== undefined\n        ? this.value\n        : this.multiple ? [] : undefined,\n      items: [] as GroupableInstance[],\n    }\n  },\n\n  computed: {\n    classes (): Record<string, boolean> {\n      return {\n        'v-item-group': true,\n        ...this.themeClasses,\n      }\n    },\n    selectedIndex (): number {\n      return (this.selectedItem && this.items.indexOf(this.selectedItem)) || -1\n    },\n    selectedItem (): GroupableInstance | undefined {\n      if (this.multiple) return undefined\n\n      return this.selectedItems[0]\n    },\n    selectedItems (): GroupableInstance[] {\n      return this.items.filter((item, index) => {\n        return this.toggleMethod(this.getValue(item, index))\n      })\n    },\n    selectedValues (): any[] {\n      if (this.internalValue == null) return []\n\n      return Array.isArray(this.internalValue)\n        ? this.internalValue\n        : [this.internalValue]\n    },\n    toggleMethod (): (v: any) => boolean {\n      if (!this.multiple) {\n        return (v: any) => this.valueComparator(this.internalValue, v)\n      }\n\n      const internalValue = this.internalValue\n      if (Array.isArray(internalValue)) {\n        return (v: any) => internalValue.some(intern => this.valueComparator(intern, v))\n      }\n\n      return () => false\n    },\n  },\n\n  watch: {\n    internalValue: 'updateItemsState',\n    items: 'updateItemsState',\n  },\n\n  created () {\n    if (this.multiple && !Array.isArray(this.internalValue)) {\n      consoleWarn('Model must be bound to an array if the multiple property is true.', this)\n    }\n  },\n\n  methods: {\n\n    genData (): object {\n      return {\n        class: this.classes,\n      }\n    },\n    getValue (item: GroupableInstance, i: number): unknown {\n      return item.value === undefined\n        ? i\n        : item.value\n    },\n    onClick (item: GroupableInstance) {\n      this.updateInternalValue(\n        this.getValue(item, this.items.indexOf(item))\n      )\n    },\n    register (item: GroupableInstance) {\n      const index = this.items.push(item) - 1\n\n      item.$on('change', () => this.onClick(item))\n\n      // If no value provided and mandatory,\n      // assign first registered item\n      if (this.mandatory && !this.selectedValues.length) {\n        this.updateMandatory()\n      }\n\n      this.updateItem(item, index)\n    },\n    unregister (item: GroupableInstance) {\n      if (this._isDestroyed) return\n\n      const index = this.items.indexOf(item)\n      const value = this.getValue(item, index)\n\n      this.items.splice(index, 1)\n\n      const valueIndex = this.selectedValues.indexOf(value)\n\n      // Items is not selected, do nothing\n      if (valueIndex < 0) return\n\n      // If not mandatory, use regular update process\n      if (!this.mandatory) {\n        return this.updateInternalValue(value)\n      }\n\n      // Remove the value\n      if (this.multiple && Array.isArray(this.internalValue)) {\n        this.internalValue = this.internalValue.filter(v => v !== value)\n      } else {\n        this.internalValue = undefined\n      }\n\n      // If mandatory and we have no selection\n      // add the last item as value\n      /* istanbul ignore else */\n      if (!this.selectedItems.length) {\n        this.updateMandatory(true)\n      }\n    },\n    updateItem (item: GroupableInstance, index: number) {\n      const value = this.getValue(item, index)\n\n      item.isActive = this.toggleMethod(value)\n    },\n    // https://github.com/vuetifyjs/vuetify/issues/5352\n    updateItemsState () {\n      this.$nextTick(() => {\n        if (this.mandatory &&\n          !this.selectedItems.length\n        ) {\n          return this.updateMandatory()\n        }\n\n        // TODO: Make this smarter so it\n        // doesn't have to iterate every\n        // child in an update\n        this.items.forEach(this.updateItem)\n      })\n    },\n    updateInternalValue (value: any) {\n      this.multiple\n        ? this.updateMultiple(value)\n        : this.updateSingle(value)\n    },\n    updateMandatory (last?: boolean) {\n      if (!this.items.length) return\n\n      const items = this.items.slice()\n\n      if (last) items.reverse()\n\n      const item = items.find(item => !item.disabled)\n\n      // If no tabs are available\n      // aborts mandatory value\n      if (!item) return\n\n      const index = this.items.indexOf(item)\n\n      this.updateInternalValue(\n        this.getValue(item, index)\n      )\n    },\n    updateMultiple (value: any) {\n      const defaultValue = Array.isArray(this.internalValue)\n        ? this.internalValue\n        : []\n      const internalValue = defaultValue.slice()\n      const index = internalValue.findIndex(val => val === value)\n\n      if (\n        this.mandatory &&\n        // Item already exists\n        index > -1 &&\n        // value would be reduced below min\n        internalValue.length - 1 < 1\n      ) return\n\n      if (\n        // Max is set\n        this.max != null &&\n        // Item doesn't exist\n        index < 0 &&\n        // value would be increased above max\n        internalValue.length + 1 > this.max\n      ) return\n\n      index > -1\n        ? internalValue.splice(index, 1)\n        : internalValue.push(value)\n\n      this.internalValue = internalValue\n    },\n    updateSingle (value: any) {\n      const isSame = value === this.internalValue\n\n      if (this.mandatory && isSame) return\n\n      this.internalValue = isSame ? undefined : value\n    },\n  },\n\n  render (h): VNode {\n    return h(this.tag, this.genData(), this.$slots.default)\n  },\n})\n\nexport default BaseItemGroup.extend({\n  name: 'v-item-group',\n\n  provide (): object {\n    return {\n      itemGroup: this,\n    }\n  },\n})\n","// Styles\nimport './VLabel.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Themeable, { functionalThemeClasses } from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n// Helpers\nimport { convertToUnit } from '../../util/helpers'\n\n/* @vue/component */\nexport default mixins(Themeable).extend({\n  name: 'v-label',\n\n  functional: true,\n\n  props: {\n    absolute: Boolean,\n    color: {\n      type: String,\n      default: 'primary',\n    },\n    disabled: Boolean,\n    focused: Boolean,\n    for: String,\n    left: {\n      type: [Number, String],\n      default: 0,\n    },\n    right: {\n      type: [Number, String],\n      default: 'auto',\n    },\n    value: Boolean,\n  },\n\n  render (h, ctx): VNode {\n    const { children, listeners, props } = ctx\n    const data = {\n      staticClass: 'v-label',\n      class: {\n        'v-label--active': props.value,\n        'v-label--is-disabled': props.disabled,\n        ...functionalThemeClasses(ctx),\n      },\n      attrs: {\n        for: props.for,\n        'aria-hidden': !props.for,\n      },\n      on: listeners,\n      style: {\n        left: convertToUnit(props.left),\n        right: convertToUnit(props.right),\n        position: props.absolute ? 'absolute' : 'relative',\n      },\n      ref: 'label',\n    }\n\n    return h('label', Colorable.options.methods.setTextColor(props.focused && props.color, data), children)\n  },\n})\n","import VLabel from './VLabel'\n\nexport { VLabel }\nexport default VLabel\n","// Styles\nimport './VList.sass'\nimport VListGroup from './VListGroup'\n\n// Components\nimport VSheet from '../VSheet/VSheet'\n\n// Types\nimport { VNode } from 'vue'\n\ntype VListGroupInstance = InstanceType<typeof VListGroup>\n\ninterface options extends InstanceType<typeof VSheet> {\n  isInMenu: boolean\n  isInNav: boolean\n}\n\n/* @vue/component */\nexport default VSheet.extend<options>().extend({\n  name: 'v-list',\n\n  provide (): object {\n    return {\n      isInList: true,\n      list: this,\n    }\n  },\n\n  inject: {\n    isInMenu: {\n      default: false,\n    },\n    isInNav: {\n      default: false,\n    },\n  },\n\n  props: {\n    dense: Boolean,\n    disabled: Boolean,\n    expand: Boolean,\n    flat: Boolean,\n    nav: Boolean,\n    rounded: Boolean,\n    subheader: Boolean,\n    threeLine: Boolean,\n    twoLine: Boolean,\n  },\n\n  data: () => ({\n    groups: [] as VListGroupInstance[],\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        ...VSheet.options.computed.classes.call(this),\n        'v-list--dense': this.dense,\n        'v-list--disabled': this.disabled,\n        'v-list--flat': this.flat,\n        'v-list--nav': this.nav,\n        'v-list--rounded': this.rounded,\n        'v-list--subheader': this.subheader,\n        'v-list--two-line': this.twoLine,\n        'v-list--three-line': this.threeLine,\n      }\n    },\n  },\n\n  methods: {\n    register (content: VListGroupInstance) {\n      this.groups.push(content)\n    },\n    unregister (content: VListGroupInstance) {\n      const index = this.groups.findIndex(g => g._uid === content._uid)\n\n      if (index > -1) this.groups.splice(index, 1)\n    },\n    listClick (uid: number) {\n      if (this.expand) return\n\n      for (const group of this.groups) {\n        group.toggle(uid)\n      }\n    },\n  },\n\n  render (h): VNode {\n    const data = {\n      staticClass: 'v-list',\n      class: this.classes,\n      style: this.styles,\n      attrs: {\n        role: this.isInNav || this.isInMenu ? undefined : 'list',\n        ...this.attrs$,\n      },\n    }\n\n    return h(this.tag, this.setBackgroundColor(this.color, data), [this.$slots.default])\n  },\n})\n","// Styles\nimport './VListItem.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Routable from '../../mixins/routable'\nimport { factory as GroupableFactory } from '../../mixins/groupable'\nimport Themeable from '../../mixins/themeable'\nimport { factory as ToggleableFactory } from '../../mixins/toggleable'\n\n// Directives\nimport Ripple from '../../directives/ripple'\n\n// Utilities\nimport { keyCodes } from './../../util/helpers'\nimport { ExtractVue } from './../../util/mixins'\nimport { removed } from '../../util/console'\n\n// Types\nimport mixins from '../../util/mixins'\nimport { VNode } from 'vue'\nimport { PropType, PropValidator } from 'vue/types/options'\n\nconst baseMixins = mixins(\n  Colorable,\n  Routable,\n  Themeable,\n  GroupableFactory('listItemGroup'),\n  ToggleableFactory('inputValue')\n)\n\ninterface options extends ExtractVue<typeof baseMixins> {\n  $el: HTMLElement\n  isInGroup: boolean\n  isInList: boolean\n  isInMenu: boolean\n  isInNav: boolean\n}\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-list-item',\n\n  directives: {\n    Ripple,\n  },\n\n  inject: {\n    isInGroup: {\n      default: false,\n    },\n    isInList: {\n      default: false,\n    },\n    isInMenu: {\n      default: false,\n    },\n    isInNav: {\n      default: false,\n    },\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    activeClass: {\n      type: String,\n      default (): string | undefined {\n        if (!this.listItemGroup) return ''\n\n        return this.listItemGroup.activeClass\n      },\n    } as any as PropValidator<string>,\n    dense: Boolean,\n    inactive: Boolean,\n    link: Boolean,\n    selectable: {\n      type: Boolean,\n    },\n    tag: {\n      type: String,\n      default: 'div',\n    },\n    threeLine: Boolean,\n    twoLine: Boolean,\n    value: null as any as PropType<any>,\n  },\n\n  data: () => ({\n    proxyClass: 'v-list-item--active',\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        'v-list-item': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-list-item--dense': this.dense,\n        'v-list-item--disabled': this.disabled,\n        'v-list-item--link': this.isClickable && !this.inactive,\n        'v-list-item--selectable': this.selectable,\n        'v-list-item--three-line': this.threeLine,\n        'v-list-item--two-line': this.twoLine,\n        ...this.themeClasses,\n      }\n    },\n    isClickable (): boolean {\n      return Boolean(\n        Routable.options.computed.isClickable.call(this) ||\n        this.listItemGroup\n      )\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('avatar')) {\n      removed('avatar', this)\n    }\n  },\n\n  methods: {\n    click (e: MouseEvent | KeyboardEvent) {\n      if (e.detail) this.$el.blur()\n\n      this.$emit('click', e)\n\n      this.to || this.toggle()\n    },\n    genAttrs () {\n      const attrs: Record<string, any> = {\n        'aria-disabled': this.disabled ? true : undefined,\n        tabindex: this.isClickable && !this.disabled ? 0 : -1,\n        ...this.$attrs,\n      }\n\n      if (this.$attrs.hasOwnProperty('role')) {\n        // do nothing, role already provided\n      } else if (this.isInNav) {\n        // do nothing, role is inherit\n      } else if (this.isInGroup) {\n        attrs.role = 'option'\n        attrs['aria-selected'] = String(this.isActive)\n      } else if (this.isInMenu) {\n        attrs.role = this.isClickable ? 'menuitem' : undefined\n        attrs.id = attrs.id || `list-item-${this._uid}`\n      } else if (this.isInList) {\n        attrs.role = 'listitem'\n      }\n\n      return attrs\n    },\n    toggle () {\n      if (this.to && this.inputValue === undefined) {\n        this.isActive = !this.isActive\n      }\n      this.$emit('change')\n    },\n  },\n\n  render (h): VNode {\n    let { tag, data } = this.generateRouteLink()\n\n    data.attrs = {\n      ...data.attrs,\n      ...this.genAttrs(),\n    }\n    data[this.to ? 'nativeOn' : 'on'] = {\n      ...data[this.to ? 'nativeOn' : 'on'],\n      keydown: (e: KeyboardEvent) => {\n        /* istanbul ignore else */\n        if (e.keyCode === keyCodes.enter) this.click(e)\n\n        this.$emit('keydown', e)\n      },\n    }\n\n    if (this.inactive) tag = 'div'\n    if (this.inactive && this.to) {\n      data.on = data.nativeOn\n      delete data.nativeOn\n    }\n\n    const children = this.$scopedSlots.default\n      ? this.$scopedSlots.default({\n        active: this.isActive,\n        toggle: this.toggle,\n      })\n      : this.$slots.default\n\n    return h(tag, this.isActive ? this.setTextColor(this.color, data) : data, children)\n  },\n})\n","// Styles\nimport './VListItemGroup.sass'\n\n// Extensions\nimport { BaseItemGroup } from '../VItemGroup/VItemGroup'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\nexport default mixins(\n  BaseItemGroup,\n  Colorable\n).extend({\n  name: 'v-list-item-group',\n\n  provide () {\n    return {\n      isInGroup: true,\n      listItemGroup: this,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...BaseItemGroup.options.computed.classes.call(this),\n        'v-list-item-group': true,\n      }\n    },\n  },\n\n  methods: {\n    genData (): object {\n      return this.setTextColor(this.color, {\n        ...BaseItemGroup.options.methods.genData.call(this),\n        attrs: {\n          role: 'listbox',\n        },\n      })\n    },\n  },\n})\n","// Types\nimport Vue, { VNode } from 'vue'\n\n/* @vue/component */\nexport default Vue.extend({\n  name: 'v-list-item-icon',\n\n  functional: true,\n\n  render (h, { data, children }): VNode {\n    data.staticClass = (`v-list-item__icon ${data.staticClass || ''}`).trim()\n\n    return h('div', data, children)\n  },\n})\n","// Styles\nimport './VListGroup.sass'\n\n// Components\nimport VIcon from '../VIcon'\nimport VList from './VList'\nimport VListItem from './VListItem'\nimport VListItemIcon from './VListItemIcon'\n\n// Mixins\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport Bootable from '../../mixins/bootable'\nimport Colorable from '../../mixins/colorable'\nimport Toggleable from '../../mixins/toggleable'\nimport { inject as RegistrableInject } from '../../mixins/registrable'\n\n// Directives\nimport ripple from '../../directives/ripple'\n\n// Transitions\nimport { VExpandTransition } from '../transitions'\n\n// Utils\nimport mixins, { ExtractVue } from '../../util/mixins'\nimport { getSlot } from '../../util/helpers'\n\n// Types\nimport { VNode } from 'vue'\nimport { Route } from 'vue-router'\n\nconst baseMixins = mixins(\n  BindsAttrs,\n  Bootable,\n  Colorable,\n  RegistrableInject('list'),\n  Toggleable\n)\n\ntype VListInstance = InstanceType<typeof VList>\n\ninterface options extends ExtractVue<typeof baseMixins> {\n  list: VListInstance\n  $refs: {\n    group: HTMLElement\n  }\n  $route: Route\n}\n\nexport default baseMixins.extend<options>().extend({\n  name: 'v-list-group',\n\n  directives: { ripple },\n\n  props: {\n    activeClass: {\n      type: String,\n      default: '',\n    },\n    appendIcon: {\n      type: String,\n      default: '$expand',\n    },\n    color: {\n      type: String,\n      default: 'primary',\n    },\n    disabled: Boolean,\n    group: [String, RegExp],\n    noAction: Boolean,\n    prependIcon: String,\n    ripple: {\n      type: [Boolean, Object],\n      default: true,\n    },\n    subGroup: Boolean,\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-list-group--active': this.isActive,\n        'v-list-group--disabled': this.disabled,\n        'v-list-group--no-action': this.noAction,\n        'v-list-group--sub-group': this.subGroup,\n      }\n    },\n  },\n\n  watch: {\n    isActive (val: boolean) {\n      /* istanbul ignore else */\n      if (!this.subGroup && val) {\n        this.list && this.list.listClick(this._uid)\n      }\n    },\n    $route: 'onRouteChange',\n  },\n\n  created () {\n    this.list && this.list.register(this)\n\n    if (this.group &&\n      this.$route &&\n      this.value == null\n    ) {\n      this.isActive = this.matchRoute(this.$route.path)\n    }\n  },\n\n  beforeDestroy () {\n    this.list && this.list.unregister(this)\n  },\n\n  methods: {\n    click (e: Event) {\n      if (this.disabled) return\n\n      this.isBooted = true\n\n      this.$emit('click', e)\n      this.$nextTick(() => (this.isActive = !this.isActive))\n    },\n    genIcon (icon: string | false): VNode {\n      return this.$createElement(VIcon, icon)\n    },\n    genAppendIcon (): VNode | null {\n      const icon = !this.subGroup ? this.appendIcon : false\n\n      if (!icon && !this.$slots.appendIcon) return null\n\n      return this.$createElement(VListItemIcon, {\n        staticClass: 'v-list-group__header__append-icon',\n      }, [\n        this.$slots.appendIcon || this.genIcon(icon),\n      ])\n    },\n    genHeader (): VNode {\n      return this.$createElement(VListItem, {\n        staticClass: 'v-list-group__header',\n        attrs: {\n          'aria-expanded': String(this.isActive),\n          role: 'button',\n        },\n        class: {\n          [this.activeClass]: this.isActive,\n        },\n        props: {\n          inputValue: this.isActive,\n        },\n        directives: [{\n          name: 'ripple',\n          value: this.ripple,\n        }],\n        on: {\n          ...this.listeners$,\n          click: this.click,\n        },\n      }, [\n        this.genPrependIcon(),\n        this.$slots.activator,\n        this.genAppendIcon(),\n      ])\n    },\n    genItems (): VNode[] {\n      return this.showLazyContent(() => [\n        this.$createElement('div', {\n          staticClass: 'v-list-group__items',\n          directives: [{\n            name: 'show',\n            value: this.isActive,\n          }],\n        }, getSlot(this)),\n      ])\n    },\n    genPrependIcon (): VNode | null {\n      const icon = this.subGroup && this.prependIcon == null\n        ? '$subgroup'\n        : this.prependIcon\n\n      if (!icon && !this.$slots.prependIcon) return null\n\n      return this.$createElement(VListItemIcon, {\n        staticClass: 'v-list-group__header__prepend-icon',\n      }, [\n        this.$slots.prependIcon || this.genIcon(icon),\n      ])\n    },\n    onRouteChange (to: Route) {\n      /* istanbul ignore if */\n      if (!this.group) return\n\n      const isActive = this.matchRoute(to.path)\n\n      /* istanbul ignore else */\n      if (isActive && this.isActive !== isActive) {\n        this.list && this.list.listClick(this._uid)\n      }\n\n      this.isActive = isActive\n    },\n    toggle (uid: number) {\n      const isActive = this._uid === uid\n\n      if (isActive) this.isBooted = true\n      this.$nextTick(() => (this.isActive = isActive))\n    },\n    matchRoute (to: string) {\n      return to.match(this.group) !== null\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.setTextColor(this.isActive && this.color, {\n      staticClass: 'v-list-group',\n      class: this.classes,\n    }), [\n      this.genHeader(),\n      h(VExpandTransition, this.genItems()),\n    ])\n  },\n})\n","// Types\nimport Vue, { VNode } from 'vue'\n\n/* @vue/component */\nexport default Vue.extend({\n  name: 'v-list-item-action',\n\n  functional: true,\n\n  render (h, { data, children = [] }): VNode {\n    data.staticClass = data.staticClass ? `v-list-item__action ${data.staticClass}` : 'v-list-item__action'\n    const filteredChild = children.filter(VNode => {\n      return VNode.isComment === false && VNode.text !== ' '\n    })\n    if (filteredChild.length > 1) data.staticClass += ' v-list-item__action--stack'\n\n    return h('div', data, children)\n  },\n})\n","import './VAvatar.sass'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Measurable from '../../mixins/measurable'\nimport Roundable from '../../mixins/roundable'\n\n// Utilities\nimport { convertToUnit } from '../../util/helpers'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\nexport default mixins(\n  Colorable,\n  Measurable,\n  Roundable,\n  /* @vue/component */\n).extend({\n  name: 'v-avatar',\n\n  props: {\n    left: Boolean,\n    right: Boolean,\n    size: {\n      type: [Number, String],\n      default: 48,\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-avatar--left': this.left,\n        'v-avatar--right': this.right,\n        ...this.roundedClasses,\n      }\n    },\n    styles (): object {\n      return {\n        height: convertToUnit(this.size),\n        minWidth: convertToUnit(this.size),\n        width: convertToUnit(this.size),\n        ...this.measurableStyles,\n      }\n    },\n  },\n\n  render (h): VNode {\n    const data = {\n      staticClass: 'v-avatar',\n      class: this.classes,\n      style: this.styles,\n      on: this.$listeners,\n    }\n\n    return h('div', this.setBackgroundColor(this.color, data), this.$slots.default)\n  },\n})\n","import VAvatar from './VAvatar'\n\nexport { VAvatar }\nexport default VAvatar\n","// Components\nimport VAvatar from '../VAvatar'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default VAvatar.extend({\n  name: 'v-list-item-avatar',\n\n  props: {\n    horizontal: Boolean,\n    size: {\n      type: [Number, String],\n      default: 40,\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-list-item__avatar--horizontal': this.horizontal,\n        ...VAvatar.options.computed.classes.call(this),\n        'v-avatar--tile': this.tile || this.horizontal,\n      }\n    },\n  },\n\n  render (h): VNode {\n    const render = VAvatar.options.render.call(this, h)\n\n    render.data = render.data || {}\n    render.data.staticClass += ' v-list-item__avatar'\n\n    return render\n  },\n})\n","import { createSimpleFunctional } from '../../util/helpers'\n\nimport VList from './VList'\nimport VListGroup from './VListGroup'\nimport VListItem from './VListItem'\nimport VListItemGroup from './VListItemGroup'\nimport VListItemAction from './VListItemAction'\nimport VListItemAvatar from './VListItemAvatar'\nimport VListItemIcon from './VListItemIcon'\n\nexport const VListItemActionText = createSimpleFunctional('v-list-item__action-text', 'span')\nexport const VListItemContent = createSimpleFunctional('v-list-item__content', 'div')\nexport const VListItemTitle = createSimpleFunctional('v-list-item__title', 'div')\nexport const VListItemSubtitle = createSimpleFunctional('v-list-item__subtitle', 'div')\n\nexport {\n  VList,\n  VListGroup,\n  VListItem,\n  VListItemAction,\n  VListItemAvatar,\n  VListItemIcon,\n  VListItemGroup,\n}\n\nexport default {\n  $_vuetify_subcomponents: {\n    VList,\n    VListGroup,\n    VListItem,\n    VListItemAction,\n    VListItemActionText,\n    VListItemAvatar,\n    VListItemContent,\n    VListItemGroup,\n    VListItemIcon,\n    VListItemSubtitle,\n    VListItemTitle,\n  },\n}\n","// Styles\nimport './VMain.sass'\n\n// Mixins\nimport SSRBootable from '../../mixins/ssr-bootable'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default SSRBootable.extend({\n  name: 'v-main',\n\n  props: {\n    tag: {\n      type: String,\n      default: 'main',\n    },\n  },\n\n  computed: {\n    styles (): object {\n      const {\n        bar, top, right, footer, insetFooter, bottom, left,\n      } = this.$vuetify.application\n\n      return {\n        paddingTop: `${top + bar}px`,\n        paddingRight: `${right}px`,\n        paddingBottom: `${footer + insetFooter + bottom}px`,\n        paddingLeft: `${left}px`,\n      }\n    },\n  },\n\n  render (h): VNode {\n    const data = {\n      staticClass: 'v-main',\n      style: this.styles,\n      ref: 'main',\n    }\n\n    return h(this.tag, data, [\n      h(\n        'div',\n        { staticClass: 'v-main__wrap' },\n        this.$slots.default\n      ),\n    ])\n  },\n})\n","// Styles\nimport './VNavigationDrawer.sass'\n\n// Components\nimport VImg, { srcObject } from '../VImg/VImg'\n\n// Mixins\nimport Applicationable from '../../mixins/applicationable'\nimport Colorable from '../../mixins/colorable'\nimport Dependent from '../../mixins/dependent'\nimport Mobile from '../../mixins/mobile'\nimport Overlayable from '../../mixins/overlayable'\nimport SSRBootable from '../../mixins/ssr-bootable'\nimport Themeable from '../../mixins/themeable'\n\n// Directives\nimport ClickOutside from '../../directives/click-outside'\nimport Resize from '../../directives/resize'\nimport Touch from '../../directives/touch'\n\n// Utilities\nimport { convertToUnit, getSlot } from '../../util/helpers'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode, VNodeDirective, PropType } from 'vue'\nimport { TouchWrapper } from 'vuetify/types'\n\nconst baseMixins = mixins(\n  Applicationable('left', [\n    'isActive',\n    'isMobile',\n    'miniVariant',\n    'expandOnHover',\n    'permanent',\n    'right',\n    'temporary',\n    'width',\n  ]),\n  Colorable,\n  Dependent,\n  Mobile,\n  Overlayable,\n  SSRBootable,\n  Themeable\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-navigation-drawer',\n\n  directives: {\n    ClickOutside,\n    Resize,\n    Touch,\n  },\n\n  provide (): object {\n    return {\n      isInNav: this.tag === 'nav',\n    }\n  },\n\n  props: {\n    bottom: Boolean,\n    clipped: Boolean,\n    disableResizeWatcher: Boolean,\n    disableRouteWatcher: Boolean,\n    expandOnHover: Boolean,\n    floating: Boolean,\n    height: {\n      type: [Number, String],\n      default (): string {\n        return this.app ? '100vh' : '100%'\n      },\n    },\n    miniVariant: Boolean,\n    miniVariantWidth: {\n      type: [Number, String],\n      default: 56,\n    },\n    permanent: Boolean,\n    right: Boolean,\n    src: {\n      type: [String, Object] as PropType<string | srcObject>,\n      default: '',\n    },\n    stateless: Boolean,\n    tag: {\n      type: String,\n      default (): string {\n        return this.app ? 'nav' : 'aside'\n      },\n    },\n    temporary: Boolean,\n    touchless: Boolean,\n    width: {\n      type: [Number, String],\n      default: 256,\n    },\n    value: null as unknown as PropType<any>,\n  },\n\n  data: () => ({\n    isMouseover: false,\n    touchArea: {\n      left: 0,\n      right: 0,\n    },\n    stackMinZIndex: 6,\n  }),\n\n  computed: {\n    /**\n     * Used for setting an app value from a dynamic\n     * property. Called from applicationable.js\n     */\n    applicationProperty (): string {\n      return this.right ? 'right' : 'left'\n    },\n    classes (): object {\n      return {\n        'v-navigation-drawer': true,\n        'v-navigation-drawer--absolute': this.absolute,\n        'v-navigation-drawer--bottom': this.bottom,\n        'v-navigation-drawer--clipped': this.clipped,\n        'v-navigation-drawer--close': !this.isActive,\n        'v-navigation-drawer--fixed': !this.absolute && (this.app || this.fixed),\n        'v-navigation-drawer--floating': this.floating,\n        'v-navigation-drawer--is-mobile': this.isMobile,\n        'v-navigation-drawer--is-mouseover': this.isMouseover,\n        'v-navigation-drawer--mini-variant': this.isMiniVariant,\n        'v-navigation-drawer--custom-mini-variant': Number(this.miniVariantWidth) !== 56,\n        'v-navigation-drawer--open': this.isActive,\n        'v-navigation-drawer--open-on-hover': this.expandOnHover,\n        'v-navigation-drawer--right': this.right,\n        'v-navigation-drawer--temporary': this.temporary,\n        ...this.themeClasses,\n      }\n    },\n    computedMaxHeight (): number | null {\n      if (!this.hasApp) return null\n\n      const computedMaxHeight = (\n        this.$vuetify.application.bottom +\n        this.$vuetify.application.footer +\n        this.$vuetify.application.bar\n      )\n\n      if (!this.clipped) return computedMaxHeight\n\n      return computedMaxHeight + this.$vuetify.application.top\n    },\n    computedTop (): number {\n      if (!this.hasApp) return 0\n\n      let computedTop = this.$vuetify.application.bar\n\n      computedTop += this.clipped\n        ? this.$vuetify.application.top\n        : 0\n\n      return computedTop\n    },\n    computedTransform (): number {\n      if (this.isActive) return 0\n      if (this.isBottom) return 100\n      return this.right ? 100 : -100\n    },\n    computedWidth (): string | number {\n      return this.isMiniVariant ? this.miniVariantWidth : this.width\n    },\n    hasApp (): boolean {\n      return (\n        this.app &&\n        (!this.isMobile && !this.temporary)\n      )\n    },\n    isBottom (): boolean {\n      return this.bottom && this.isMobile\n    },\n    isMiniVariant (): boolean {\n      return (\n        !this.expandOnHover &&\n        this.miniVariant\n      ) || (\n        this.expandOnHover &&\n        !this.isMouseover\n      )\n    },\n    isMobile (): boolean {\n      return (\n        !this.stateless &&\n        !this.permanent &&\n        Mobile.options.computed.isMobile.call(this)\n      )\n    },\n    reactsToClick (): boolean {\n      return (\n        !this.stateless &&\n        !this.permanent &&\n        (this.isMobile || this.temporary)\n      )\n    },\n    reactsToMobile (): boolean {\n      return (\n        this.app &&\n        !this.disableResizeWatcher &&\n        !this.permanent &&\n        !this.stateless &&\n        !this.temporary\n      )\n    },\n    reactsToResize (): boolean {\n      return !this.disableResizeWatcher && !this.stateless\n    },\n    reactsToRoute (): boolean {\n      return (\n        !this.disableRouteWatcher &&\n        !this.stateless &&\n        (this.temporary || this.isMobile)\n      )\n    },\n    showOverlay (): boolean {\n      return (\n        !this.hideOverlay &&\n        this.isActive &&\n        (this.isMobile || this.temporary)\n      )\n    },\n    styles (): object {\n      const translate = this.isBottom ? 'translateY' : 'translateX'\n      return {\n        height: convertToUnit(this.height),\n        top: !this.isBottom ? convertToUnit(this.computedTop) : 'auto',\n        maxHeight: this.computedMaxHeight != null\n          ? `calc(100% - ${convertToUnit(this.computedMaxHeight)})`\n          : undefined,\n        transform: `${translate}(${convertToUnit(this.computedTransform, '%')})`,\n        width: convertToUnit(this.computedWidth),\n      }\n    },\n  },\n\n  watch: {\n    $route: 'onRouteChange',\n    isActive (val) {\n      this.$emit('input', val)\n    },\n    /**\n     * When mobile changes, adjust the active state\n     * only when there has been a previous value\n     */\n    isMobile (val, prev) {\n      !val &&\n        this.isActive &&\n        !this.temporary &&\n        this.removeOverlay()\n\n      if (prev == null ||\n        !this.reactsToResize ||\n        !this.reactsToMobile\n      ) return\n\n      this.isActive = !val\n    },\n    permanent (val) {\n      // If enabling prop enable the drawer\n      if (val) this.isActive = true\n    },\n    showOverlay (val) {\n      if (val) this.genOverlay()\n      else this.removeOverlay()\n    },\n    value (val) {\n      if (this.permanent) return\n\n      if (val == null) {\n        this.init()\n        return\n      }\n\n      if (val !== this.isActive) this.isActive = val\n    },\n    expandOnHover: 'updateMiniVariant',\n    isMouseover (val) {\n      this.updateMiniVariant(!val)\n    },\n  },\n\n  beforeMount () {\n    this.init()\n  },\n\n  methods: {\n    calculateTouchArea () {\n      const parent = this.$el.parentNode as Element\n\n      if (!parent) return\n\n      const parentRect = parent.getBoundingClientRect()\n\n      this.touchArea = {\n        left: parentRect.left + 50,\n        right: parentRect.right - 50,\n      }\n    },\n    closeConditional () {\n      return this.isActive && !this._isDestroyed && this.reactsToClick\n    },\n    genAppend () {\n      return this.genPosition('append')\n    },\n    genBackground () {\n      const props = {\n        height: '100%',\n        width: '100%',\n        src: this.src,\n      }\n\n      const image = this.$scopedSlots.img\n        ? this.$scopedSlots.img(props)\n        : this.$createElement(VImg, { props })\n\n      return this.$createElement('div', {\n        staticClass: 'v-navigation-drawer__image',\n      }, [image])\n    },\n    genDirectives (): VNodeDirective[] {\n      const directives = [{\n        name: 'click-outside',\n        value: {\n          handler: () => { this.isActive = false },\n          closeConditional: this.closeConditional,\n          include: this.getOpenDependentElements,\n        },\n      }]\n\n      if (!this.touchless && !this.stateless) {\n        directives.push({\n          name: 'touch',\n          value: {\n            parent: true,\n            left: this.swipeLeft,\n            right: this.swipeRight,\n          },\n        } as any)\n      }\n\n      return directives\n    },\n    genListeners () {\n      const on: Record<string, (e: Event) => void> = {\n        mouseenter: () => (this.isMouseover = true),\n        mouseleave: () => (this.isMouseover = false),\n        transitionend: (e: Event) => {\n          if (e.target !== e.currentTarget) return\n          this.$emit('transitionend', e)\n\n          // IE11 does not support new Event('resize')\n          const resizeEvent = document.createEvent('UIEvents')\n          resizeEvent.initUIEvent('resize', true, false, window, 0)\n          window.dispatchEvent(resizeEvent)\n        },\n      }\n\n      if (this.miniVariant) {\n        on.click = () => this.$emit('update:mini-variant', false)\n      }\n\n      return on\n    },\n    genPosition (name: 'prepend' | 'append') {\n      const slot = getSlot(this, name)\n\n      if (!slot) return slot\n\n      return this.$createElement('div', {\n        staticClass: `v-navigation-drawer__${name}`,\n      }, slot)\n    },\n    genPrepend () {\n      return this.genPosition('prepend')\n    },\n    genContent () {\n      return this.$createElement('div', {\n        staticClass: 'v-navigation-drawer__content',\n      }, this.$slots.default)\n    },\n    genBorder () {\n      return this.$createElement('div', {\n        staticClass: 'v-navigation-drawer__border',\n      })\n    },\n    init () {\n      if (this.permanent) {\n        this.isActive = true\n      } else if (this.stateless ||\n        this.value != null\n      ) {\n        this.isActive = this.value\n      } else if (!this.temporary) {\n        this.isActive = !this.isMobile\n      }\n    },\n    onRouteChange () {\n      if (this.reactsToRoute && this.closeConditional()) {\n        this.isActive = false\n      }\n    },\n    swipeLeft (e: TouchWrapper) {\n      if (this.isActive && this.right) return\n      this.calculateTouchArea()\n\n      if (Math.abs(e.touchendX - e.touchstartX) < 100) return\n      if (this.right &&\n        e.touchstartX >= this.touchArea.right\n      ) this.isActive = true\n      else if (!this.right && this.isActive) this.isActive = false\n    },\n    swipeRight (e: TouchWrapper) {\n      if (this.isActive && !this.right) return\n      this.calculateTouchArea()\n\n      if (Math.abs(e.touchendX - e.touchstartX) < 100) return\n      if (!this.right &&\n        e.touchstartX <= this.touchArea.left\n      ) this.isActive = true\n      else if (this.right && this.isActive) this.isActive = false\n    },\n    /**\n     * Update the application layout\n     */\n    updateApplication () {\n      if (\n        !this.isActive ||\n        this.isMobile ||\n        this.temporary ||\n        !this.$el\n      ) return 0\n\n      const width = Number(this.miniVariant ? this.miniVariantWidth : this.width)\n\n      return isNaN(width) ? this.$el.clientWidth : width\n    },\n    updateMiniVariant (val: boolean) {\n      if (this.expandOnHover && this.miniVariant !== val) this.$emit('update:mini-variant', val)\n    },\n  },\n\n  render (h): VNode {\n    const children = [\n      this.genPrepend(),\n      this.genContent(),\n      this.genAppend(),\n      this.genBorder(),\n    ]\n\n    if (this.src || getSlot(this, 'img')) children.unshift(this.genBackground())\n\n    return h(this.tag, this.setBackgroundColor(this.color, {\n      class: this.classes,\n      style: this.styles,\n      directives: this.genDirectives(),\n      on: this.genListeners(),\n    }), children)\n  },\n})\n","// Styles\nimport './VSheet.sass'\n\n// Mixins\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport Colorable from '../../mixins/colorable'\nimport Elevatable from '../../mixins/elevatable'\nimport Measurable from '../../mixins/measurable'\nimport Roundable from '../../mixins/roundable'\nimport Themeable from '../../mixins/themeable'\n\n// Helpers\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default mixins(\n  BindsAttrs,\n  Colorable,\n  Elevatable,\n  Measurable,\n  Roundable,\n  Themeable\n).extend({\n  name: 'v-sheet',\n\n  props: {\n    outlined: Boolean,\n    shaped: Boolean,\n    tag: {\n      type: String,\n      default: 'div',\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-sheet': true,\n        'v-sheet--outlined': this.outlined,\n        'v-sheet--shaped': this.shaped,\n        ...this.themeClasses,\n        ...this.elevationClasses,\n        ...this.roundedClasses,\n      }\n    },\n    styles (): object {\n      return this.measurableStyles\n    },\n  },\n\n  render (h): VNode {\n    const data = {\n      class: this.classes,\n      style: this.styles,\n      on: this.listeners$,\n    }\n\n    return h(\n      this.tag,\n      this.setBackgroundColor(this.color, data),\n      this.$slots.default\n    )\n  },\n})\n","import VSheet from './VSheet'\n\nexport { VSheet }\nexport default VSheet\n","// Styles\nimport './VSubheader.sass'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nexport default mixins(\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-subheader',\n\n  props: {\n    inset: Boolean,\n  },\n\n  render (h): VNode {\n    return h('div', {\n      staticClass: 'v-subheader',\n      class: {\n        'v-subheader--inset': this.inset,\n        ...this.themeClasses,\n      },\n      attrs: this.$attrs,\n      on: this.$listeners,\n    }, this.$slots.default)\n  },\n})\n","// Mixins\nimport { factory as GroupableFactory } from '../../mixins/groupable'\nimport Routable from '../../mixins/routable'\nimport Themeable from '../../mixins/themeable'\n\n// Utilities\nimport { keyCodes } from './../../util/helpers'\nimport mixins from '../../util/mixins'\nimport { ExtractVue } from './../../util/mixins'\n\n// Types\nimport { VNode } from 'vue/types'\n\n// Components\nimport VTabsBar from '../VTabs/VTabsBar'\n\nconst baseMixins = mixins(\n  Routable,\n  // Must be after routable\n  // to overwrite activeClass\n  GroupableFactory('tabsBar'),\n  Themeable\n)\n\ntype VTabBarInstance = InstanceType<typeof VTabsBar>\n\ninterface options extends ExtractVue<typeof baseMixins> {\n  $el: HTMLElement\n  tabsBar: VTabBarInstance\n}\n\nexport default baseMixins.extend<options>().extend(\n  /* @vue/component */\n).extend({\n  name: 'v-tab',\n\n  props: {\n    ripple: {\n      type: [Boolean, Object],\n      default: true,\n    },\n  },\n\n  data: () => ({\n    proxyClass: 'v-tab--active',\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        'v-tab': true,\n        ...Routable.options.computed.classes.call(this),\n        'v-tab--disabled': this.disabled,\n        ...this.groupClasses,\n      }\n    },\n    value (): any {\n      let to = this.to || this.href\n\n      if (to == null) return to\n\n      if (this.$router &&\n        this.to === Object(this.to)\n      ) {\n        const resolve = this.$router.resolve(\n          this.to,\n          this.$route,\n          this.append\n        )\n\n        to = resolve.href\n      }\n\n      return to.replace('#', '')\n    },\n  },\n\n  methods: {\n    click (e: KeyboardEvent | MouseEvent): void {\n      // Prevent keyboard actions\n      // from children elements\n      // within disabled tabs\n      if (this.disabled) {\n        e.preventDefault()\n        return\n      }\n\n      // If user provides an\n      // actual link, do not\n      // prevent default\n      if (this.href &&\n        this.href.indexOf('#') > -1\n      ) e.preventDefault()\n\n      if (e.detail) this.$el.blur()\n\n      this.$emit('click', e)\n\n      this.to || this.toggle()\n    },\n    toggle () {\n      // VItemGroup treats a change event as a click\n      if (!this.isActive || (!this.tabsBar.mandatory && !this.to)) {\n        this.$emit('change')\n      }\n    },\n  },\n\n  render (h): VNode {\n    const { tag, data } = this.generateRouteLink()\n\n    data.attrs = {\n      ...data.attrs,\n      'aria-selected': String(this.isActive),\n      role: 'tab',\n      tabindex: this.disabled ? -1 : 0,\n    }\n    data.on = {\n      ...data.on,\n      keydown: (e: KeyboardEvent) => {\n        if (e.keyCode === keyCodes.enter) this.click(e)\n\n        this.$emit('keydown', e)\n      },\n    }\n\n    return h(tag, data, this.$slots.default)\n  },\n})\n","// Components\nimport VWindow from './VWindow'\n\n// Mixins\nimport Bootable from '../../mixins/bootable'\nimport { factory as GroupableFactory } from '../../mixins/groupable'\n\n// Directives\nimport Touch from '../../directives/touch'\n\n// Utilities\nimport { convertToUnit } from '../../util/helpers'\nimport mixins, { ExtractVue } from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\nconst baseMixins = mixins(\n  Bootable,\n  GroupableFactory('windowGroup', 'v-window-item', 'v-window')\n)\n\ninterface options extends ExtractVue<typeof baseMixins> {\n  $el: HTMLElement\n  windowGroup: InstanceType<typeof VWindow>\n}\n\nexport default baseMixins.extend<options>().extend(\n  /* @vue/component */\n).extend({\n  name: 'v-window-item',\n\n  directives: {\n    Touch,\n  },\n\n  props: {\n    disabled: Boolean,\n    reverseTransition: {\n      type: [Boolean, String],\n      default: undefined,\n    },\n    transition: {\n      type: [Boolean, String],\n      default: undefined,\n    },\n    value: {\n      required: false,\n    },\n  },\n\n  data () {\n    return {\n      isActive: false,\n      inTransition: false,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return this.groupClasses\n    },\n    computedTransition (): string | boolean {\n      if (!this.windowGroup.internalReverse) {\n        return typeof this.transition !== 'undefined'\n          ? this.transition || ''\n          : this.windowGroup.computedTransition\n      }\n\n      return typeof this.reverseTransition !== 'undefined'\n        ? this.reverseTransition || ''\n        : this.windowGroup.computedTransition\n    },\n  },\n\n  methods: {\n    genDefaultSlot () {\n      return this.$slots.default\n    },\n    genWindowItem () {\n      return this.$createElement('div', {\n        staticClass: 'v-window-item',\n        class: this.classes,\n        directives: [{\n          name: 'show',\n          value: this.isActive,\n        }],\n        on: this.$listeners,\n      }, this.genDefaultSlot())\n    },\n    onAfterTransition () {\n      if (!this.inTransition) {\n        return\n      }\n\n      // Finalize transition state.\n      this.inTransition = false\n      if (this.windowGroup.transitionCount > 0) {\n        this.windowGroup.transitionCount--\n\n        // Remove container height if we are out of transition.\n        if (this.windowGroup.transitionCount === 0) {\n          this.windowGroup.transitionHeight = undefined\n        }\n      }\n    },\n    onBeforeTransition () {\n      if (this.inTransition) {\n        return\n      }\n\n      // Initialize transition state here.\n      this.inTransition = true\n      if (this.windowGroup.transitionCount === 0) {\n        // Set initial height for height transition.\n        this.windowGroup.transitionHeight = convertToUnit(this.windowGroup.$el.clientHeight)\n      }\n      this.windowGroup.transitionCount++\n    },\n    onTransitionCancelled () {\n      this.onAfterTransition() // This should have the same path as normal transition end.\n    },\n    onEnter (el: HTMLElement) {\n      if (!this.inTransition) {\n        return\n      }\n\n      this.$nextTick(() => {\n        // Do not set height if no transition or cancelled.\n        if (!this.computedTransition || !this.inTransition) {\n          return\n        }\n\n        // Set transition target height.\n        this.windowGroup.transitionHeight = convertToUnit(el.clientHeight)\n      })\n    },\n  },\n\n  render (h): VNode {\n    return h('transition', {\n      props: {\n        name: this.computedTransition,\n      },\n      on: {\n        // Handlers for enter windows.\n        beforeEnter: this.onBeforeTransition,\n        afterEnter: this.onAfterTransition,\n        enterCancelled: this.onTransitionCancelled,\n\n        // Handlers for leave windows.\n        beforeLeave: this.onBeforeTransition,\n        afterLeave: this.onAfterTransition,\n        leaveCancelled: this.onTransitionCancelled,\n\n        // Enter handler for height transition.\n        enter: this.onEnter,\n      },\n    }, this.showLazyContent(() => [this.genWindowItem()]))\n  },\n})\n","// Extensions\nimport VWindowItem from '../VWindow/VWindowItem'\n\n/* @vue/component */\nexport default VWindowItem.extend({\n  name: 'v-tab-item',\n\n  props: {\n    id: String,\n  },\n\n  methods: {\n    genWindowItem () {\n      const item = VWindowItem.options.methods.genWindowItem.call(this)\n\n      item.data!.domProps = item.data!.domProps || {}\n      item.data!.domProps.id = this.id || this.value\n\n      return item\n    },\n  },\n})\n","// Styles\nimport './VSlideGroup.sass'\n\n// Components\nimport VIcon from '../VIcon'\nimport { VFadeTransition } from '../transitions'\n\n// Extensions\nimport { BaseItemGroup } from '../VItemGroup/VItemGroup'\n\n// Mixins\nimport Mobile from '../../mixins/mobile'\n\n// Directives\nimport Resize from '../../directives/resize'\nimport Touch from '../../directives/touch'\n\n// Utilities\nimport mixins, { ExtractVue } from '../../util/mixins'\n\n// Types\nimport Vue, { VNode } from 'vue'\nimport { composedPath } from '../../util/helpers'\n\ninterface TouchEvent {\n  touchstartX: number\n  touchstartY: number\n  touchmoveX: number\n  touchmoveY: number\n  stopPropagation: Function\n}\n\ninterface Widths {\n  content: number\n  wrapper: number\n}\n\ninterface options extends Vue {\n  $refs: {\n    content: HTMLElement\n    wrapper: HTMLElement\n  }\n}\n\nfunction bias (val: number) {\n  const c = 0.501\n  const x = Math.abs(val)\n  return Math.sign(val) * (x / ((1 / c - 2) * (1 - x) + 1))\n}\n\nexport function calculateUpdatedOffset (\n  selectedElement: HTMLElement,\n  widths: Widths,\n  rtl: boolean,\n  currentScrollOffset: number\n): number {\n  const clientWidth = selectedElement.clientWidth\n  const offsetLeft = rtl\n    ? (widths.content - selectedElement.offsetLeft - clientWidth)\n    : selectedElement.offsetLeft\n\n  if (rtl) {\n    currentScrollOffset = -currentScrollOffset\n  }\n\n  const totalWidth = widths.wrapper + currentScrollOffset\n  const itemOffset = clientWidth + offsetLeft\n  const additionalOffset = clientWidth * 0.4\n\n  if (offsetLeft <= currentScrollOffset) {\n    currentScrollOffset = Math.max(offsetLeft - additionalOffset, 0)\n  } else if (totalWidth <= itemOffset) {\n    currentScrollOffset = Math.min(currentScrollOffset - (totalWidth - itemOffset - additionalOffset), widths.content - widths.wrapper)\n  }\n\n  return rtl ? -currentScrollOffset : currentScrollOffset\n}\n\nexport function calculateCenteredOffset (\n  selectedElement: HTMLElement,\n  widths: Widths,\n  rtl: boolean\n): number {\n  const { offsetLeft, clientWidth } = selectedElement\n\n  if (rtl) {\n    const offsetCentered = widths.content - offsetLeft - clientWidth / 2 - widths.wrapper / 2\n    return -Math.min(widths.content - widths.wrapper, Math.max(0, offsetCentered))\n  } else {\n    const offsetCentered = offsetLeft + clientWidth / 2 - widths.wrapper / 2\n    return Math.min(widths.content - widths.wrapper, Math.max(0, offsetCentered))\n  }\n}\n\nexport const BaseSlideGroup = mixins<options &\n/* eslint-disable indent */\n  ExtractVue<[\n    typeof BaseItemGroup,\n    typeof Mobile,\n  ]>\n/* eslint-enable indent */\n>(\n  BaseItemGroup,\n  Mobile,\n  /* @vue/component */\n).extend({\n  name: 'base-slide-group',\n\n  directives: {\n    Resize,\n    Touch,\n  },\n\n  props: {\n    activeClass: {\n      type: String,\n      default: 'v-slide-item--active',\n    },\n    centerActive: Boolean,\n    nextIcon: {\n      type: String,\n      default: '$next',\n    },\n    prevIcon: {\n      type: String,\n      default: '$prev',\n    },\n    showArrows: {\n      type: [Boolean, String],\n      validator: v => (\n        typeof v === 'boolean' || [\n          'always',\n          'desktop',\n          'mobile',\n        ].includes(v)\n      ),\n    },\n  },\n\n  data: () => ({\n    internalItemsLength: 0,\n    isOverflowing: false,\n    resizeTimeout: 0,\n    startX: 0,\n    isSwipingHorizontal: false,\n    isSwiping: false,\n    scrollOffset: 0,\n    widths: {\n      content: 0,\n      wrapper: 0,\n    },\n  }),\n\n  computed: {\n    canTouch (): boolean {\n      return typeof window !== 'undefined'\n    },\n    __cachedNext (): VNode {\n      return this.genTransition('next')\n    },\n    __cachedPrev (): VNode {\n      return this.genTransition('prev')\n    },\n    classes (): object {\n      return {\n        ...BaseItemGroup.options.computed.classes.call(this),\n        'v-slide-group': true,\n        'v-slide-group--has-affixes': this.hasAffixes,\n        'v-slide-group--is-overflowing': this.isOverflowing,\n      }\n    },\n    hasAffixes (): Boolean {\n      switch (this.showArrows) {\n        // Always show arrows on desktop & mobile\n        case 'always': return true\n\n        // Always show arrows on desktop\n        case 'desktop': return !this.isMobile\n\n        // Show arrows on mobile when overflowing.\n        // This matches the default 2.2 behavior\n        case true: return this.isOverflowing || Math.abs(this.scrollOffset) > 0\n\n        // Always show on mobile\n        case 'mobile': return (\n          this.isMobile ||\n          (this.isOverflowing || Math.abs(this.scrollOffset) > 0)\n        )\n\n        // https://material.io/components/tabs#scrollable-tabs\n        // Always show arrows when\n        // overflowed on desktop\n        default: return (\n          !this.isMobile &&\n          (this.isOverflowing || Math.abs(this.scrollOffset) > 0)\n        )\n      }\n    },\n    hasNext (): boolean {\n      if (!this.hasAffixes) return false\n\n      const { content, wrapper } = this.widths\n\n      // Check one scroll ahead to know the width of right-most item\n      return content > Math.abs(this.scrollOffset) + wrapper\n    },\n    hasPrev (): boolean {\n      return this.hasAffixes && this.scrollOffset !== 0\n    },\n  },\n\n  watch: {\n    internalValue: 'setWidths',\n    // When overflow changes, the arrows alter\n    // the widths of the content and wrapper\n    // and need to be recalculated\n    isOverflowing: 'setWidths',\n    scrollOffset (val) {\n      if (this.$vuetify.rtl) val = -val\n\n      let scroll =\n        val <= 0\n          ? bias(-val)\n          : val > this.widths.content - this.widths.wrapper\n            ? -(this.widths.content - this.widths.wrapper) + bias(this.widths.content - this.widths.wrapper - val)\n            : -val\n\n      if (this.$vuetify.rtl) scroll = -scroll\n\n      this.$refs.content.style.transform = `translateX(${scroll}px)`\n    },\n  },\n\n  beforeUpdate () {\n    this.internalItemsLength = (this.$children || []).length\n  },\n\n  updated () {\n    if (this.internalItemsLength === (this.$children || []).length) return\n    this.setWidths()\n  },\n\n  methods: {\n    onScroll () {\n      this.$refs.wrapper.scrollLeft = 0\n    },\n    onFocusin (e: FocusEvent) {\n      if (!this.isOverflowing) return\n\n      // Focused element is likely to be the root of an item, so a\n      // breadth-first search will probably find it in the first iteration\n      for (const el of composedPath(e)) {\n        for (const vm of this.items) {\n          if (vm.$el === el) {\n            this.scrollOffset = calculateUpdatedOffset(\n              vm.$el as HTMLElement,\n              this.widths,\n              this.$vuetify.rtl,\n              this.scrollOffset\n            )\n            return\n          }\n        }\n      }\n    },\n    // Always generate next for scrollable hint\n    genNext (): VNode | null {\n      const slot = this.$scopedSlots.next\n        ? this.$scopedSlots.next({})\n        : this.$slots.next || this.__cachedNext\n\n      return this.$createElement('div', {\n        staticClass: 'v-slide-group__next',\n        class: {\n          'v-slide-group__next--disabled': !this.hasNext,\n        },\n        on: {\n          click: () => this.onAffixClick('next'),\n        },\n        key: 'next',\n      }, [slot])\n    },\n    genContent (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-slide-group__content',\n        ref: 'content',\n        on: {\n          focusin: this.onFocusin,\n        },\n      }, this.$slots.default)\n    },\n    genData (): object {\n      return {\n        class: this.classes,\n        directives: [{\n          name: 'resize',\n          value: this.onResize,\n        }],\n      }\n    },\n    genIcon (location: 'prev' | 'next'): VNode | null {\n      let icon = location\n\n      if (this.$vuetify.rtl && location === 'prev') {\n        icon = 'next'\n      } else if (this.$vuetify.rtl && location === 'next') {\n        icon = 'prev'\n      }\n\n      const upperLocation = `${location[0].toUpperCase()}${location.slice(1)}`\n      const hasAffix = (this as any)[`has${upperLocation}`]\n\n      if (\n        !this.showArrows &&\n        !hasAffix\n      ) return null\n\n      return this.$createElement(VIcon, {\n        props: {\n          disabled: !hasAffix,\n        },\n      }, (this as any)[`${icon}Icon`])\n    },\n    // Always generate prev for scrollable hint\n    genPrev (): VNode | null {\n      const slot = this.$scopedSlots.prev\n        ? this.$scopedSlots.prev({})\n        : this.$slots.prev || this.__cachedPrev\n\n      return this.$createElement('div', {\n        staticClass: 'v-slide-group__prev',\n        class: {\n          'v-slide-group__prev--disabled': !this.hasPrev,\n        },\n        on: {\n          click: () => this.onAffixClick('prev'),\n        },\n        key: 'prev',\n      }, [slot])\n    },\n    genTransition (location: 'prev' | 'next') {\n      return this.$createElement(VFadeTransition, [this.genIcon(location)])\n    },\n    genWrapper (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-slide-group__wrapper',\n        directives: [{\n          name: 'touch',\n          value: {\n            start: (e: TouchEvent) => this.overflowCheck(e, this.onTouchStart),\n            move: (e: TouchEvent) => this.overflowCheck(e, this.onTouchMove),\n            end: (e: TouchEvent) => this.overflowCheck(e, this.onTouchEnd),\n          },\n        }],\n        ref: 'wrapper',\n        on: {\n          scroll: this.onScroll,\n        },\n      }, [this.genContent()])\n    },\n    calculateNewOffset (direction: 'prev' | 'next', widths: Widths, rtl: boolean, currentScrollOffset: number) {\n      const sign = rtl ? -1 : 1\n      const newAbosluteOffset = sign * currentScrollOffset +\n        (direction === 'prev' ? -1 : 1) * widths.wrapper\n\n      return sign * Math.max(Math.min(newAbosluteOffset, widths.content - widths.wrapper), 0)\n    },\n    onAffixClick (location: 'prev' | 'next') {\n      this.$emit(`click:${location}`)\n      this.scrollTo(location)\n    },\n    onResize () {\n      /* istanbul ignore next */\n      if (this._isDestroyed) return\n\n      this.setWidths()\n    },\n    onTouchStart (e: TouchEvent) {\n      const { content } = this.$refs\n\n      this.startX = this.scrollOffset + e.touchstartX as number\n\n      content.style.setProperty('transition', 'none')\n      content.style.setProperty('willChange', 'transform')\n    },\n    onTouchMove (e: TouchEvent) {\n      if (!this.canTouch) return\n\n      if (!this.isSwiping) {\n        // only calculate disableSwipeHorizontal during the first onTouchMove invoke\n        // in order to ensure disableSwipeHorizontal value is consistent between onTouchStart and onTouchEnd\n        const diffX = e.touchmoveX - e.touchstartX\n        const diffY = e.touchmoveY - e.touchstartY\n        this.isSwipingHorizontal = Math.abs(diffX) > Math.abs(diffY)\n        this.isSwiping = true\n      }\n\n      if (this.isSwipingHorizontal) {\n        // sliding horizontally\n        this.scrollOffset = this.startX - e.touchmoveX\n        // temporarily disable window vertical scrolling\n        document.documentElement.style.overflowY = 'hidden'\n      }\n    },\n    onTouchEnd () {\n      if (!this.canTouch) return\n\n      const { content, wrapper } = this.$refs\n      const maxScrollOffset = content.clientWidth - wrapper.clientWidth\n\n      content.style.setProperty('transition', null)\n      content.style.setProperty('willChange', null)\n\n      if (this.$vuetify.rtl) {\n        /* istanbul ignore else */\n        if (this.scrollOffset > 0 || !this.isOverflowing) {\n          this.scrollOffset = 0\n        } else if (this.scrollOffset <= -maxScrollOffset) {\n          this.scrollOffset = -maxScrollOffset\n        }\n      } else {\n        /* istanbul ignore else */\n        if (this.scrollOffset < 0 || !this.isOverflowing) {\n          this.scrollOffset = 0\n        } else if (this.scrollOffset >= maxScrollOffset) {\n          this.scrollOffset = maxScrollOffset\n        }\n      }\n\n      this.isSwiping = false\n      // rollback whole page scrolling to default\n      document.documentElement.style.removeProperty('overflow-y')\n    },\n    overflowCheck (e: TouchEvent, fn: (e: TouchEvent) => void) {\n      e.stopPropagation()\n      this.isOverflowing && fn(e)\n    },\n    scrollIntoView /* istanbul ignore next */ () {\n      if (!this.selectedItem && this.items.length) {\n        const lastItemPosition = this.items[this.items.length - 1].$el.getBoundingClientRect()\n        const wrapperPosition = this.$refs.wrapper.getBoundingClientRect()\n\n        if (\n          (this.$vuetify.rtl && wrapperPosition.right < lastItemPosition.right) ||\n          (!this.$vuetify.rtl && wrapperPosition.left > lastItemPosition.left)\n        ) {\n          this.scrollTo('prev')\n        }\n      }\n\n      if (!this.selectedItem) {\n        return\n      }\n\n      if (\n        this.selectedIndex === 0 ||\n        (!this.centerActive && !this.isOverflowing)\n      ) {\n        this.scrollOffset = 0\n      } else if (this.centerActive) {\n        this.scrollOffset = calculateCenteredOffset(\n          this.selectedItem.$el as HTMLElement,\n          this.widths,\n          this.$vuetify.rtl\n        )\n      } else if (this.isOverflowing) {\n        this.scrollOffset = calculateUpdatedOffset(\n          this.selectedItem.$el as HTMLElement,\n          this.widths,\n          this.$vuetify.rtl,\n          this.scrollOffset\n        )\n      }\n    },\n    scrollTo /* istanbul ignore next */ (location: 'prev' | 'next') {\n      this.scrollOffset = this.calculateNewOffset(location, {\n        // Force reflow\n        content: this.$refs.content ? this.$refs.content.clientWidth : 0,\n        wrapper: this.$refs.wrapper ? this.$refs.wrapper.clientWidth : 0,\n      }, this.$vuetify.rtl, this.scrollOffset)\n    },\n    setWidths () {\n      window.requestAnimationFrame(() => {\n        if (this._isDestroyed) return\n\n        const { content, wrapper } = this.$refs\n\n        this.widths = {\n          content: content ? content.clientWidth : 0,\n          wrapper: wrapper ? wrapper.clientWidth : 0,\n        }\n\n        // https://github.com/vuetifyjs/vuetify/issues/13212\n        // We add +1 to the wrappers width to prevent an issue where the `clientWidth`\n        // gets calculated wrongly by the browser if using a different zoom-level.\n        this.isOverflowing = this.widths.wrapper + 1 < this.widths.content\n\n        this.scrollIntoView()\n      })\n    },\n  },\n\n  render (h): VNode {\n    return h('div', this.genData(), [\n      this.genPrev(),\n      this.genWrapper(),\n      this.genNext(),\n    ])\n  },\n})\n\nexport default BaseSlideGroup.extend({\n  name: 'v-slide-group',\n\n  provide (): object {\n    return {\n      slideGroup: this,\n    }\n  },\n})\n","// Extensions\nimport { BaseSlideGroup } from '../VSlideGroup/VSlideGroup'\n\n// Components\nimport VTab from './VTab'\n\n// Mixins\nimport Themeable from '../../mixins/themeable'\nimport SSRBootable from '../../mixins/ssr-bootable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport { Route } from 'vue-router'\nimport { VNode } from 'vue'\n\ntype VTabInstance = InstanceType<typeof VTab>\n\nexport default mixins(\n  BaseSlideGroup,\n  SSRBootable,\n  Themeable\n  /* @vue/component */\n).extend({\n  name: 'v-tabs-bar',\n\n  provide () {\n    return {\n      tabsBar: this,\n    }\n  },\n\n  computed: {\n    classes () {\n      return {\n        ...BaseSlideGroup.options.computed.classes.call(this),\n        'v-tabs-bar': true,\n        'v-tabs-bar--is-mobile': this.isMobile,\n        // TODO: Remove this and move to v-slide-group\n        'v-tabs-bar--show-arrows': this.showArrows,\n        ...this.themeClasses,\n      }\n    },\n  },\n\n  watch: {\n    items: 'callSlider',\n    internalValue: 'callSlider',\n    $route: 'onRouteChange',\n  },\n\n  methods: {\n    callSlider () {\n      if (!this.isBooted) return\n\n      this.$emit('call:slider')\n    },\n    genContent () {\n      const render = BaseSlideGroup.options.methods.genContent.call(this)\n\n      render.data = render.data || {}\n      render.data.staticClass += ' v-tabs-bar__content'\n\n      return render\n    },\n    onRouteChange (val: Route, oldVal: Route) {\n      /* istanbul ignore next */\n      if (this.mandatory) return\n\n      const items = this.items as unknown as VTabInstance[]\n      const newPath = val.path\n      const oldPath = oldVal.path\n\n      let hasNew = false\n      let hasOld = false\n\n      for (const item of items) {\n        if (item.to === oldPath) hasOld = true\n        else if (item.to === newPath) hasNew = true\n\n        if (hasNew && hasOld) break\n      }\n\n      // If we have an old item and not a new one\n      // it's assumed that the user navigated to\n      // a path that is not present in the items\n      if (!hasNew && hasOld) this.internalValue = undefined\n    },\n  },\n\n  render (h): VNode {\n    const render = BaseSlideGroup.options.render.call(this, h)\n\n    render.data!.attrs = {\n      role: 'tablist',\n    }\n\n    return render\n  },\n})\n","// Styles\nimport './VTabs.sass'\n\n// Components\nimport VTabsBar from './VTabsBar'\nimport VTabsItems from './VTabsItems'\nimport VTabsSlider from './VTabsSlider'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport Proxyable from '../../mixins/proxyable'\nimport Themeable from '../../mixins/themeable'\n\n// Directives\nimport Resize from '../../directives/resize'\n\n// Utilities\nimport { convertToUnit } from '../../util/helpers'\nimport { ExtractVue } from './../../util/mixins'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue/types'\n\nconst baseMixins = mixins(\n  Colorable,\n  Proxyable,\n  Themeable\n)\n\ninterface options extends ExtractVue<typeof baseMixins> {\n  $refs: {\n    items: InstanceType<typeof VTabsBar>\n  }\n}\n\nexport default baseMixins.extend<options>().extend({\n  name: 'v-tabs',\n\n  directives: {\n    Resize,\n  },\n\n  props: {\n    activeClass: {\n      type: String,\n      default: '',\n    },\n    alignWithTitle: Boolean,\n    backgroundColor: String,\n    centerActive: Boolean,\n    centered: Boolean,\n    fixedTabs: Boolean,\n    grow: Boolean,\n    height: {\n      type: [Number, String],\n      default: undefined,\n    },\n    hideSlider: Boolean,\n    iconsAndText: Boolean,\n    mobileBreakpoint: [String, Number],\n    nextIcon: {\n      type: String,\n      default: '$next',\n    },\n    optional: Boolean,\n    prevIcon: {\n      type: String,\n      default: '$prev',\n    },\n    right: Boolean,\n    showArrows: [Boolean, String],\n    sliderColor: String,\n    sliderSize: {\n      type: [Number, String],\n      default: 2,\n    },\n    vertical: Boolean,\n  },\n\n  data () {\n    return {\n      resizeTimeout: 0,\n      slider: {\n        height: null as null | number,\n        left: null as null | number,\n        right: null as null | number,\n        top: null as null | number,\n        width: null as null | number,\n      },\n      transitionTime: 300,\n    }\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-tabs--align-with-title': this.alignWithTitle,\n        'v-tabs--centered': this.centered,\n        'v-tabs--fixed-tabs': this.fixedTabs,\n        'v-tabs--grow': this.grow,\n        'v-tabs--icons-and-text': this.iconsAndText,\n        'v-tabs--right': this.right,\n        'v-tabs--vertical': this.vertical,\n        ...this.themeClasses,\n      }\n    },\n    isReversed (): boolean {\n      return this.$vuetify.rtl && this.vertical\n    },\n    sliderStyles (): object {\n      return {\n        height: convertToUnit(this.slider.height),\n        left: this.isReversed ? undefined : convertToUnit(this.slider.left),\n        right: this.isReversed ? convertToUnit(this.slider.right) : undefined,\n        top: this.vertical ? convertToUnit(this.slider.top) : undefined,\n        transition: this.slider.left != null ? null : 'none',\n        width: convertToUnit(this.slider.width),\n      }\n    },\n    computedColor (): string {\n      if (this.color) return this.color\n      else if (this.isDark && !this.appIsDark) return 'white'\n      else return 'primary'\n    },\n  },\n\n  watch: {\n    alignWithTitle: 'callSlider',\n    centered: 'callSlider',\n    centerActive: 'callSlider',\n    fixedTabs: 'callSlider',\n    grow: 'callSlider',\n    iconsAndText: 'callSlider',\n    right: 'callSlider',\n    showArrows: 'callSlider',\n    vertical: 'callSlider',\n    '$vuetify.application.left': 'onResize',\n    '$vuetify.application.right': 'onResize',\n    '$vuetify.rtl': 'onResize',\n  },\n\n  mounted () {\n    this.$nextTick(() => {\n      window.setTimeout(this.callSlider, 30)\n    })\n  },\n\n  methods: {\n    callSlider () {\n      if (\n        this.hideSlider ||\n        !this.$refs.items ||\n        !this.$refs.items.selectedItems.length\n      ) {\n        this.slider.width = 0\n        return false\n      }\n\n      this.$nextTick(() => {\n        // Give screen time to paint\n        const activeTab = this.$refs.items.selectedItems[0]\n        /* istanbul ignore if */\n        if (!activeTab || !activeTab.$el) {\n          this.slider.width = 0\n          this.slider.left = 0\n          return\n        }\n        const el = activeTab.$el as HTMLElement\n\n        this.slider = {\n          height: !this.vertical ? Number(this.sliderSize) : el.scrollHeight,\n          left: this.vertical ? 0 : el.offsetLeft,\n          right: this.vertical ? 0 : el.offsetLeft + el.offsetWidth,\n          top: el.offsetTop,\n          width: this.vertical ? Number(this.sliderSize) : el.scrollWidth,\n        }\n      })\n\n      return true\n    },\n    genBar (items: VNode[], slider: VNode | null) {\n      const data = {\n        style: {\n          height: convertToUnit(this.height),\n        },\n        props: {\n          activeClass: this.activeClass,\n          centerActive: this.centerActive,\n          dark: this.dark,\n          light: this.light,\n          mandatory: !this.optional,\n          mobileBreakpoint: this.mobileBreakpoint,\n          nextIcon: this.nextIcon,\n          prevIcon: this.prevIcon,\n          showArrows: this.showArrows,\n          value: this.internalValue,\n        },\n        on: {\n          'call:slider': this.callSlider,\n          change: (val: any) => {\n            this.internalValue = val\n          },\n        },\n        ref: 'items',\n      }\n\n      this.setTextColor(this.computedColor, data)\n      this.setBackgroundColor(this.backgroundColor, data)\n\n      return this.$createElement(VTabsBar, data, [\n        this.genSlider(slider),\n        items,\n      ])\n    },\n    genItems (items: VNode | null, item: VNode[]) {\n      // If user provides items\n      // opt to use theirs\n      if (items) return items\n\n      // If no tabs are provided\n      // render nothing\n      if (!item.length) return null\n\n      return this.$createElement(VTabsItems, {\n        props: {\n          value: this.internalValue,\n        },\n        on: {\n          change: (val: any) => {\n            this.internalValue = val\n          },\n        },\n      }, item)\n    },\n    genSlider (slider: VNode | null) {\n      if (this.hideSlider) return null\n\n      if (!slider) {\n        slider = this.$createElement(VTabsSlider, {\n          props: { color: this.sliderColor },\n        })\n      }\n\n      return this.$createElement('div', {\n        staticClass: 'v-tabs-slider-wrapper',\n        style: this.sliderStyles,\n      }, [slider])\n    },\n    onResize () {\n      if (this._isDestroyed) return\n\n      clearTimeout(this.resizeTimeout)\n      this.resizeTimeout = window.setTimeout(this.callSlider, 0)\n    },\n    parseNodes () {\n      let items = null\n      let slider = null\n      const item = []\n      const tab = []\n      const slot = this.$slots.default || []\n      const length = slot.length\n\n      for (let i = 0; i < length; i++) {\n        const vnode = slot[i]\n\n        if (vnode.componentOptions) {\n          switch (vnode.componentOptions.Ctor.options.name) {\n            case 'v-tabs-slider': slider = vnode\n              break\n            case 'v-tabs-items': items = vnode\n              break\n            case 'v-tab-item': item.push(vnode)\n              break\n            // case 'v-tab' - intentionally omitted\n            default: tab.push(vnode)\n          }\n        } else {\n          tab.push(vnode)\n        }\n      }\n\n      /**\n       * tab: array of `v-tab`\n       * slider: single `v-tabs-slider`\n       * items: single `v-tabs-items`\n       * item: array of `v-tab-item`\n       */\n      return { tab, slider, items, item }\n    },\n  },\n\n  render (h): VNode {\n    const { tab, slider, items, item } = this.parseNodes()\n\n    return h('div', {\n      staticClass: 'v-tabs',\n      class: this.classes,\n      directives: [{\n        name: 'resize',\n        modifiers: { quiet: true },\n        value: this.onResize,\n      }],\n    }, [\n      this.genBar(tab, slider),\n      this.genItems(items, item),\n    ])\n  },\n})\n","import VBtn from './VBtn'\n\nexport { VBtn }\nexport default VBtn\n","// Styles\nimport './VWindow.sass'\n\n// Types\nimport { VNode, VNodeDirective } from 'vue/types/vnode'\nimport { PropType } from 'vue'\nimport { TouchHandlers } from 'vuetify/types'\n\n// Directives\nimport Touch from '../../directives/touch'\n\n// Components\nimport VBtn from '../VBtn'\nimport VIcon from '../VIcon'\nimport { BaseItemGroup } from '../VItemGroup/VItemGroup'\n\n/* @vue/component */\nexport default BaseItemGroup.extend({\n  name: 'v-window',\n\n  directives: { Touch },\n\n  provide (): object {\n    return {\n      windowGroup: this,\n    }\n  },\n\n  props: {\n    activeClass: {\n      type: String,\n      default: 'v-window-item--active',\n    },\n    continuous: Boolean,\n    mandatory: {\n      type: Boolean,\n      default: true,\n    },\n    nextIcon: {\n      type: [Boolean, String],\n      default: '$next',\n    },\n    prevIcon: {\n      type: [Boolean, String],\n      default: '$prev',\n    },\n    reverse: Boolean,\n    showArrows: Boolean,\n    showArrowsOnHover: Boolean,\n    touch: Object as PropType<TouchHandlers>,\n    touchless: Boolean,\n    value: {\n      required: false,\n    },\n    vertical: Boolean,\n  },\n\n  data () {\n    return {\n      changedByDelimiters: false,\n      internalHeight: undefined as undefined | string, // This can be fixed by child class.\n      transitionHeight: undefined as undefined | string, // Intermediate height during transition.\n      transitionCount: 0, // Number of windows in transition state.\n      isBooted: false,\n      isReverse: false,\n    }\n  },\n\n  computed: {\n    isActive (): boolean {\n      return this.transitionCount > 0\n    },\n    classes (): object {\n      return {\n        ...BaseItemGroup.options.computed.classes.call(this),\n        'v-window--show-arrows-on-hover': this.showArrowsOnHover,\n      }\n    },\n    computedTransition (): string {\n      if (!this.isBooted) return ''\n\n      const axis = this.vertical ? 'y' : 'x'\n      const reverse = this.internalReverse ? !this.isReverse : this.isReverse\n      const direction = reverse ? '-reverse' : ''\n\n      return `v-window-${axis}${direction}-transition`\n    },\n    hasActiveItems (): boolean {\n      return Boolean(\n        this.items.find(item => !item.disabled)\n      )\n    },\n    hasNext (): boolean {\n      return this.continuous || this.internalIndex < this.items.length - 1\n    },\n    hasPrev (): boolean {\n      return this.continuous || this.internalIndex > 0\n    },\n    internalIndex (): number {\n      return this.items.findIndex((item, i) => {\n        return this.internalValue === this.getValue(item, i)\n      })\n    },\n    internalReverse (): boolean {\n      return this.$vuetify.rtl ? !this.reverse : this.reverse\n    },\n  },\n\n  watch: {\n    internalIndex (val, oldVal) {\n      this.isReverse = this.updateReverse(val, oldVal)\n    },\n  },\n\n  mounted () {\n    window.requestAnimationFrame(() => (this.isBooted = true))\n  },\n\n  methods: {\n    genDefaultSlot () {\n      return this.$slots.default\n    },\n    genContainer (): VNode {\n      const children = [this.genDefaultSlot()]\n\n      if (this.showArrows) {\n        children.push(this.genControlIcons())\n      }\n\n      return this.$createElement('div', {\n        staticClass: 'v-window__container',\n        class: {\n          'v-window__container--is-active': this.isActive,\n        },\n        style: {\n          height: this.internalHeight || this.transitionHeight,\n        },\n      }, children)\n    },\n    genIcon (\n      direction: 'prev' | 'next',\n      icon: string,\n      click: () => void\n    ) {\n      const on = {\n        click: (e: Event) => {\n          e.stopPropagation()\n          this.changedByDelimiters = true\n          click()\n        },\n      }\n      const attrs = {\n        'aria-label': this.$vuetify.lang.t(`$vuetify.carousel.${direction}`),\n      }\n      const children = this.$scopedSlots[direction]?.({\n        on,\n        attrs,\n      }) ?? [this.$createElement(VBtn, {\n        props: { icon: true },\n        attrs,\n        on,\n      }, [\n        this.$createElement(VIcon, {\n          props: { large: true },\n        }, icon),\n      ])]\n\n      return this.$createElement('div', {\n        staticClass: `v-window__${direction}`,\n      }, children)\n    },\n    genControlIcons () {\n      const icons = []\n\n      const prevIcon = this.$vuetify.rtl\n        ? this.nextIcon\n        : this.prevIcon\n\n      /* istanbul ignore else */\n      if (\n        this.hasPrev &&\n        prevIcon &&\n        typeof prevIcon === 'string'\n      ) {\n        const icon = this.genIcon('prev', prevIcon, this.prev)\n        icon && icons.push(icon)\n      }\n\n      const nextIcon = this.$vuetify.rtl\n        ? this.prevIcon\n        : this.nextIcon\n\n      /* istanbul ignore else */\n      if (\n        this.hasNext &&\n        nextIcon &&\n        typeof nextIcon === 'string'\n      ) {\n        const icon = this.genIcon('next', nextIcon, this.next)\n        icon && icons.push(icon)\n      }\n\n      return icons\n    },\n    getNextIndex (index: number): number {\n      const nextIndex = (index + 1) % this.items.length\n      const item = this.items[nextIndex]\n\n      if (item.disabled) return this.getNextIndex(nextIndex)\n\n      return nextIndex\n    },\n    getPrevIndex (index: number): number {\n      const prevIndex = (index + this.items.length - 1) % this.items.length\n      const item = this.items[prevIndex]\n\n      if (item.disabled) return this.getPrevIndex(prevIndex)\n\n      return prevIndex\n    },\n    next () {\n      /* istanbul ignore if */\n      if (!this.hasActiveItems || !this.hasNext) return\n\n      const nextIndex = this.getNextIndex(this.internalIndex)\n      const item = this.items[nextIndex]\n\n      this.internalValue = this.getValue(item, nextIndex)\n    },\n    prev () {\n      /* istanbul ignore if */\n      if (!this.hasActiveItems || !this.hasPrev) return\n\n      const lastIndex = this.getPrevIndex(this.internalIndex)\n      const item = this.items[lastIndex]\n\n      this.internalValue = this.getValue(item, lastIndex)\n    },\n    updateReverse (val: number, oldVal: number) {\n      const itemsLength = this.items.length\n      const lastIndex = itemsLength - 1\n\n      if (itemsLength <= 2) return val < oldVal\n\n      if (val === lastIndex && oldVal === 0) {\n        return true\n      } else if (val === 0 && oldVal === lastIndex) {\n        return false\n      } else {\n        return val < oldVal\n      }\n    },\n  },\n\n  render (h): VNode {\n    const data = {\n      staticClass: 'v-window',\n      class: this.classes,\n      directives: [] as VNodeDirective[],\n    }\n\n    if (!this.touchless) {\n      const value = this.touch || {\n        left: () => {\n          this.$vuetify.rtl ? this.prev() : this.next()\n        },\n        right: () => {\n          this.$vuetify.rtl ? this.next() : this.prev()\n        },\n        end: (e: TouchEvent) => {\n          e.stopPropagation()\n        },\n        start: (e: TouchEvent) => {\n          e.stopPropagation()\n        },\n      }\n\n      data.directives.push({\n        name: 'touch',\n        value,\n      })\n    }\n\n    return h('div', data, [this.genContainer()])\n  },\n})\n","// Extensions\nimport VWindow from '../VWindow/VWindow'\n\n// Types & Components\nimport { BaseItemGroup, GroupableInstance } from './../VItemGroup/VItemGroup'\n\n/* @vue/component */\nexport default VWindow.extend({\n  name: 'v-tabs-items',\n\n  props: {\n    mandatory: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        ...VWindow.options.computed.classes.call(this),\n        'v-tabs-items': true,\n      }\n    },\n    isDark (): boolean {\n      return this.rootIsDark\n    },\n  },\n\n  methods: {\n    getValue (item: GroupableInstance, i: number) {\n      return item.id || BaseItemGroup.options.methods.getValue.call(this, item, i)\n    },\n  },\n})\n","// Mixins\nimport Colorable from '../../mixins/colorable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue/types'\n\n/* @vue/component */\nexport default mixins(Colorable).extend({\n  name: 'v-tabs-slider',\n\n  render (h): VNode {\n    return h('div', this.setBackgroundColor(this.color, {\n      staticClass: 'v-tabs-slider',\n    }))\n  },\n})\n","// Styles\nimport './VCounter.sass'\n\n// Mixins\nimport Themeable, { functionalThemeClasses } from '../../mixins/themeable'\n\n// Types\nimport { VNode } from 'vue'\nimport mixins from '../../util/mixins'\n\n/* @vue/component */\nexport default mixins(Themeable).extend({\n  name: 'v-counter',\n\n  functional: true,\n\n  props: {\n    value: {\n      type: [Number, String],\n      default: '',\n    },\n    max: [Number, String],\n  },\n\n  render (h, ctx): VNode {\n    const { props } = ctx\n    const max = parseInt(props.max, 10)\n    const value = parseInt(props.value, 10)\n    const content = max ? `${value} / ${max}` : String(props.value)\n    const isGreater = max && (value > max)\n\n    return h('div', {\n      staticClass: 'v-counter',\n      class: {\n        'error--text': isGreater,\n        ...functionalThemeClasses(ctx),\n      },\n    }, content)\n  },\n})\n","import VCounter from './VCounter'\n\nexport { VCounter }\nexport default VCounter\n","// Directives\nimport Intersect from '../../directives/intersect'\n\n// Utilities\nimport { consoleWarn } from '../../util/console'\n\n// Types\nimport Vue from 'vue'\n\nexport default function intersectable (options: { onVisible: string[] }) {\n  return Vue.extend({\n    name: 'intersectable',\n\n    data: () => ({\n      isIntersecting: false,\n    }),\n\n    mounted () {\n      Intersect.inserted(this.$el as HTMLElement, {\n        name: 'intersect',\n        value: this.onObserve,\n      }, this.$vnode)\n    },\n\n    destroyed () {\n      Intersect.unbind(this.$el as HTMLElement, {\n        name: 'intersect',\n        value: this.onObserve,\n      }, this.$vnode)\n    },\n\n    methods: {\n      onObserve (entries: IntersectionObserverEntry[], observer: IntersectionObserver, isIntersecting: boolean) {\n        this.isIntersecting = isIntersecting\n\n        if (!isIntersecting) return\n\n        for (let i = 0, length = options.onVisible.length; i < length; i++) {\n          const callback = (this as any)[options.onVisible[i]]\n\n          if (typeof callback === 'function') {\n            callback()\n            continue\n          }\n\n          consoleWarn(options.onVisible[i] + ' method is not available on the instance but referenced in intersectable mixin options')\n        }\n      },\n    },\n  })\n}\n","// Styles\nimport './VTextField.sass'\n\n// Extensions\nimport VInput from '../VInput'\n\n// Components\nimport VCounter from '../VCounter'\nimport VLabel from '../VLabel'\n\n// Mixins\nimport Intersectable from '../../mixins/intersectable'\nimport Loadable from '../../mixins/loadable'\nimport Validatable from '../../mixins/validatable'\n\n// Directives\nimport resize from '../../directives/resize'\nimport ripple from '../../directives/ripple'\n\n// Utilities\nimport { attachedRoot } from '../../util/dom'\nimport { convertToUnit, keyCodes } from '../../util/helpers'\nimport { breaking, consoleWarn } from '../../util/console'\n\n// Types\nimport mixins from '../../util/mixins'\nimport { VNode, PropType } from 'vue/types'\n\nconst baseMixins = mixins(\n  VInput,\n  Intersectable({\n    onVisible: [\n      'onResize',\n      'tryAutofocus',\n    ],\n  }),\n  Loadable,\n)\ninterface options extends InstanceType<typeof baseMixins> {\n  $refs: {\n    label: HTMLElement\n    input: HTMLInputElement\n    'prepend-inner': HTMLElement\n    prefix: HTMLElement\n    suffix: HTMLElement\n  }\n}\n\nconst dirtyTypes = ['color', 'file', 'time', 'date', 'datetime-local', 'week', 'month']\n\n/* @vue/component */\nexport default baseMixins.extend<options>().extend({\n  name: 'v-text-field',\n\n  directives: {\n    resize,\n    ripple,\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    appendOuterIcon: String,\n    autofocus: Boolean,\n    clearable: Boolean,\n    clearIcon: {\n      type: String,\n      default: '$clear',\n    },\n    counter: [Boolean, Number, String],\n    counterValue: Function as PropType<(value: any) => number>,\n    filled: Boolean,\n    flat: Boolean,\n    fullWidth: Boolean,\n    label: String,\n    outlined: Boolean,\n    placeholder: String,\n    prefix: String,\n    prependInnerIcon: String,\n    persistentPlaceholder: Boolean,\n    reverse: Boolean,\n    rounded: Boolean,\n    shaped: Boolean,\n    singleLine: Boolean,\n    solo: Boolean,\n    soloInverted: Boolean,\n    suffix: String,\n    type: {\n      type: String,\n      default: 'text',\n    },\n  },\n\n  data: () => ({\n    badInput: false,\n    labelWidth: 0,\n    prefixWidth: 0,\n    prependWidth: 0,\n    initialValue: null,\n    isBooted: false,\n    isClearing: false,\n  }),\n\n  computed: {\n    classes (): object {\n      return {\n        ...VInput.options.computed.classes.call(this),\n        'v-text-field': true,\n        'v-text-field--full-width': this.fullWidth,\n        'v-text-field--prefix': this.prefix,\n        'v-text-field--single-line': this.isSingle,\n        'v-text-field--solo': this.isSolo,\n        'v-text-field--solo-inverted': this.soloInverted,\n        'v-text-field--solo-flat': this.flat,\n        'v-text-field--filled': this.filled,\n        'v-text-field--is-booted': this.isBooted,\n        'v-text-field--enclosed': this.isEnclosed,\n        'v-text-field--reverse': this.reverse,\n        'v-text-field--outlined': this.outlined,\n        'v-text-field--placeholder': this.placeholder,\n        'v-text-field--rounded': this.rounded,\n        'v-text-field--shaped': this.shaped,\n      }\n    },\n    computedColor (): string | undefined {\n      const computedColor = Validatable.options.computed.computedColor.call(this)\n\n      if (!this.soloInverted || !this.isFocused) return computedColor\n\n      return this.color || 'primary'\n    },\n    computedCounterValue (): number {\n      if (typeof this.counterValue === 'function') {\n        return this.counterValue(this.internalValue)\n      }\n      return [...(this.internalValue || '').toString()].length\n    },\n    hasCounter (): boolean {\n      return this.counter !== false && this.counter != null\n    },\n    hasDetails (): boolean {\n      return VInput.options.computed.hasDetails.call(this) || this.hasCounter\n    },\n    internalValue: {\n      get (): any {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n        this.$emit('input', this.lazyValue)\n      },\n    },\n    isDirty (): boolean {\n      return this.lazyValue?.toString().length > 0 || this.badInput\n    },\n    isEnclosed (): boolean {\n      return (\n        this.filled ||\n        this.isSolo ||\n        this.outlined\n      )\n    },\n    isLabelActive (): boolean {\n      return this.isDirty || dirtyTypes.includes(this.type)\n    },\n    isSingle (): boolean {\n      return (\n        this.isSolo ||\n        this.singleLine ||\n        this.fullWidth ||\n        // https://material.io/components/text-fields/#filled-text-field\n        (this.filled && !this.hasLabel)\n      )\n    },\n    isSolo (): boolean {\n      return this.solo || this.soloInverted\n    },\n    labelPosition (): Record<'left' | 'right', string | number | undefined> {\n      let offset = (this.prefix && !this.labelValue) ? this.prefixWidth : 0\n\n      if (this.labelValue && this.prependWidth) offset -= this.prependWidth\n\n      return (this.$vuetify.rtl === this.reverse) ? {\n        left: offset,\n        right: 'auto',\n      } : {\n        left: 'auto',\n        right: offset,\n      }\n    },\n    showLabel (): boolean {\n      return this.hasLabel && !(this.isSingle && this.labelValue)\n    },\n    labelValue (): boolean {\n      return this.isFocused || this.isLabelActive || this.persistentPlaceholder\n    },\n  },\n\n  watch: {\n    // labelValue: 'setLabelWidth', // moved to mounted, see #11533\n    outlined: 'setLabelWidth',\n    label () {\n      this.$nextTick(this.setLabelWidth)\n    },\n    prefix () {\n      this.$nextTick(this.setPrefixWidth)\n    },\n    isFocused: 'updateValue',\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('box')) {\n      breaking('box', 'filled', this)\n    }\n\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('browser-autocomplete')) {\n      breaking('browser-autocomplete', 'autocomplete', this)\n    }\n\n    /* istanbul ignore if */\n    if (this.shaped && !(this.filled || this.outlined || this.isSolo)) {\n      consoleWarn('shaped should be used with either filled or outlined', this)\n    }\n  },\n\n  mounted () {\n    // #11533\n    this.$watch(() => this.labelValue, this.setLabelWidth)\n    this.autofocus && this.tryAutofocus()\n    requestAnimationFrame(() => {\n      this.isBooted = true\n      requestAnimationFrame(() => {\n        if (!this.isIntersecting) {\n          this.onResize()\n        }\n      })\n    })\n  },\n\n  methods: {\n    /** @public */\n    focus () {\n      this.onFocus()\n    },\n    /** @public */\n    blur (e?: Event) {\n      // https://github.com/vuetifyjs/vuetify/issues/5913\n      // Safari tab order gets broken if called synchronous\n      window.requestAnimationFrame(() => {\n        this.$refs.input && this.$refs.input.blur()\n      })\n    },\n    clearableCallback () {\n      this.$refs.input && this.$refs.input.focus()\n      this.$nextTick(() => this.internalValue = null)\n    },\n    genAppendSlot () {\n      const slot = []\n\n      if (this.$slots['append-outer']) {\n        slot.push(this.$slots['append-outer'] as VNode[])\n      } else if (this.appendOuterIcon) {\n        slot.push(this.genIcon('appendOuter'))\n      }\n\n      return this.genSlot('append', 'outer', slot)\n    },\n    genPrependInnerSlot () {\n      const slot = []\n\n      if (this.$slots['prepend-inner']) {\n        slot.push(this.$slots['prepend-inner'] as VNode[])\n      } else if (this.prependInnerIcon) {\n        slot.push(this.genIcon('prependInner'))\n      }\n\n      return this.genSlot('prepend', 'inner', slot)\n    },\n    genIconSlot () {\n      const slot = []\n\n      if (this.$slots.append) {\n        slot.push(this.$slots.append as VNode[])\n      } else if (this.appendIcon) {\n        slot.push(this.genIcon('append'))\n      }\n\n      return this.genSlot('append', 'inner', slot)\n    },\n    genInputSlot () {\n      const input = VInput.options.methods.genInputSlot.call(this)\n\n      const prepend = this.genPrependInnerSlot()\n\n      if (prepend) {\n        input.children = input.children || []\n        input.children.unshift(prepend)\n      }\n\n      return input\n    },\n    genClearIcon () {\n      if (!this.clearable) return null\n\n      // if the text field has no content then don't display the clear icon.\n      // We add an empty div because other controls depend on a ref to append inner\n      if (!this.isDirty) {\n        return this.genSlot('append', 'inner', [\n          this.$createElement('div'),\n        ])\n      }\n\n      return this.genSlot('append', 'inner', [\n        this.genIcon('clear', this.clearableCallback),\n      ])\n    },\n    genCounter () {\n      if (!this.hasCounter) return null\n\n      const max = this.counter === true ? this.attrs$.maxlength : this.counter\n\n      const props = {\n        dark: this.dark,\n        light: this.light,\n        max,\n        value: this.computedCounterValue,\n      }\n\n      return this.$scopedSlots.counter?.({ props }) ?? this.$createElement(VCounter, { props })\n    },\n    genControl () {\n      return VInput.options.methods.genControl.call(this)\n    },\n    genDefaultSlot () {\n      return [\n        this.genFieldset(),\n        this.genTextFieldSlot(),\n        this.genClearIcon(),\n        this.genIconSlot(),\n        this.genProgress(),\n      ]\n    },\n    genFieldset () {\n      if (!this.outlined) return null\n\n      return this.$createElement('fieldset', {\n        attrs: {\n          'aria-hidden': true,\n        },\n      }, [this.genLegend()])\n    },\n    genLabel () {\n      if (!this.showLabel) return null\n\n      const data = {\n        props: {\n          absolute: true,\n          color: this.validationState,\n          dark: this.dark,\n          disabled: this.isDisabled,\n          focused: !this.isSingle && (this.isFocused || !!this.validationState),\n          for: this.computedId,\n          left: this.labelPosition.left,\n          light: this.light,\n          right: this.labelPosition.right,\n          value: this.labelValue,\n        },\n      }\n\n      return this.$createElement(VLabel, data, this.$slots.label || this.label)\n    },\n    genLegend () {\n      const width = !this.singleLine && (this.labelValue || this.isDirty) ? this.labelWidth : 0\n      const span = this.$createElement('span', {\n        domProps: { innerHTML: '&#8203;' },\n        staticClass: 'notranslate',\n      })\n\n      return this.$createElement('legend', {\n        style: {\n          width: !this.isSingle ? convertToUnit(width) : undefined,\n        },\n      }, [span])\n    },\n    genInput () {\n      const listeners = Object.assign({}, this.listeners$)\n      delete listeners.change // Change should not be bound externally\n      const { title, ...inputAttrs } = this.attrs$\n\n      return this.$createElement('input', {\n        style: {},\n        domProps: {\n          value: (this.type === 'number' && Object.is(this.lazyValue, -0)) ? '-0' : this.lazyValue,\n        },\n        attrs: {\n          ...inputAttrs,\n          autofocus: this.autofocus,\n          disabled: this.isDisabled,\n          id: this.computedId,\n          placeholder: this.persistentPlaceholder || this.isFocused || !this.hasLabel ? this.placeholder : undefined,\n          readonly: this.isReadonly,\n          type: this.type,\n        },\n        on: Object.assign(listeners, {\n          blur: this.onBlur,\n          input: this.onInput,\n          focus: this.onFocus,\n          keydown: this.onKeyDown,\n        }),\n        ref: 'input',\n        directives: [{\n          name: 'resize',\n          modifiers: { quiet: true },\n          value: this.onResize,\n        }],\n      })\n    },\n    genMessages () {\n      if (!this.showDetails) return null\n\n      const messagesNode = VInput.options.methods.genMessages.call(this)\n      const counterNode = this.genCounter()\n\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__details',\n      }, [\n        messagesNode,\n        counterNode,\n      ])\n    },\n    genTextFieldSlot () {\n      return this.$createElement('div', {\n        staticClass: 'v-text-field__slot',\n      }, [\n        this.genLabel(),\n        this.prefix ? this.genAffix('prefix') : null,\n        this.genInput(),\n        this.suffix ? this.genAffix('suffix') : null,\n      ])\n    },\n    genAffix (type: 'prefix' | 'suffix') {\n      return this.$createElement('div', {\n        class: `v-text-field__${type}`,\n        ref: type,\n      }, this[type])\n    },\n    onBlur (e?: Event) {\n      this.isFocused = false\n      e && this.$nextTick(() => this.$emit('blur', e))\n    },\n    onClick () {\n      if (this.isFocused || this.isDisabled || !this.$refs.input) return\n\n      this.$refs.input.focus()\n    },\n    onFocus (e?: Event) {\n      if (!this.$refs.input) return\n\n      const root = attachedRoot(this.$el)\n      if (!root) return\n\n      if (root.activeElement !== this.$refs.input) {\n        return this.$refs.input.focus()\n      }\n\n      if (!this.isFocused) {\n        this.isFocused = true\n        e && this.$emit('focus', e)\n      }\n    },\n    onInput (e: Event) {\n      const target = e.target as HTMLInputElement\n      this.internalValue = target.value\n      this.badInput = target.validity && target.validity.badInput\n    },\n    onKeyDown (e: KeyboardEvent) {\n      if (\n        e.keyCode === keyCodes.enter &&\n        this.lazyValue !== this.initialValue\n      ) {\n        this.initialValue = this.lazyValue\n        this.$emit('change', this.initialValue)\n      }\n\n      this.$emit('keydown', e)\n    },\n    onMouseDown (e: Event) {\n      // Prevent input from being blurred\n      if (e.target !== this.$refs.input) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n\n      VInput.options.methods.onMouseDown.call(this, e)\n    },\n    onMouseUp (e: Event) {\n      if (this.hasMouseDown) this.focus()\n\n      VInput.options.methods.onMouseUp.call(this, e)\n    },\n    setLabelWidth () {\n      if (!this.outlined) return\n\n      this.labelWidth = this.$refs.label\n        ? Math.min(this.$refs.label.scrollWidth * 0.75 + 6, (this.$el as HTMLElement).offsetWidth - 24)\n        : 0\n    },\n    setPrefixWidth () {\n      if (!this.$refs.prefix) return\n\n      this.prefixWidth = this.$refs.prefix.offsetWidth\n    },\n    setPrependWidth () {\n      if (!this.outlined || !this.$refs['prepend-inner']) return\n\n      this.prependWidth = this.$refs['prepend-inner'].offsetWidth\n    },\n    tryAutofocus () {\n      if (\n        !this.autofocus ||\n        typeof document === 'undefined' ||\n        !this.$refs.input) return false\n\n      const root = attachedRoot(this.$el)\n      if (!root || root.activeElement === this.$refs.input) return false\n\n      this.$refs.input.focus()\n\n      return true\n    },\n    updateValue (val: boolean) {\n      // Sets validationState from validatable\n      this.hasColor = val\n\n      if (val) {\n        this.initialValue = this.lazyValue\n      } else if (this.initialValue !== this.lazyValue) {\n        this.$emit('change', this.lazyValue)\n      }\n    },\n    onResize () {\n      this.setLabelWidth()\n      this.setPrefixWidth()\n      this.setPrependWidth()\n    },\n  },\n})\n","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    autoGrow (val: boolean) {\n      this.$nextTick(() => {\n        val\n          ? this.calculateInputHeight()\n          : this.$refs.input?.style.removeProperty('height')\n      })\n    },\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n","// Styles\nimport './VToolbar.sass'\n\n// Extensions\nimport VSheet from '../VSheet/VSheet'\n\n// Components\nimport VImg, { srcObject } from '../VImg/VImg'\n\n// Utilities\nimport { convertToUnit, getSlot } from '../../util/helpers'\nimport { breaking } from '../../util/console'\n\n// Types\nimport { VNode, PropType } from 'vue'\n\n/* @vue/component */\nexport default VSheet.extend({\n  name: 'v-toolbar',\n\n  props: {\n    absolute: Boolean,\n    bottom: Boolean,\n    collapse: Boolean,\n    dense: Boolean,\n    extended: Boolean,\n    extensionHeight: {\n      default: 48,\n      type: [Number, String],\n    },\n    flat: Boolean,\n    floating: Boolean,\n    prominent: Boolean,\n    short: Boolean,\n    src: {\n      type: [String, Object] as PropType<string | srcObject>,\n      default: '',\n    },\n    tag: {\n      type: String,\n      default: 'header',\n    },\n  },\n\n  data: () => ({\n    isExtended: false,\n  }),\n\n  computed: {\n    computedHeight (): number {\n      const height = this.computedContentHeight\n\n      if (!this.isExtended) return height\n\n      const extensionHeight = parseInt(this.extensionHeight)\n\n      return this.isCollapsed\n        ? height\n        : height + (!isNaN(extensionHeight) ? extensionHeight : 0)\n    },\n    computedContentHeight (): number {\n      if (this.height) return parseInt(this.height)\n      if (this.isProminent && this.dense) return 96\n      if (this.isProminent && this.short) return 112\n      if (this.isProminent) return 128\n      if (this.dense) return 48\n      if (this.short || this.$vuetify.breakpoint.smAndDown) return 56\n      return 64\n    },\n    classes (): object {\n      return {\n        ...VSheet.options.computed.classes.call(this),\n        'v-toolbar': true,\n        'v-toolbar--absolute': this.absolute,\n        'v-toolbar--bottom': this.bottom,\n        'v-toolbar--collapse': this.collapse,\n        'v-toolbar--collapsed': this.isCollapsed,\n        'v-toolbar--dense': this.dense,\n        'v-toolbar--extended': this.isExtended,\n        'v-toolbar--flat': this.flat,\n        'v-toolbar--floating': this.floating,\n        'v-toolbar--prominent': this.isProminent,\n      }\n    },\n    isCollapsed (): boolean {\n      return this.collapse\n    },\n    isProminent (): boolean {\n      return this.prominent\n    },\n    styles (): object {\n      return {\n        ...this.measurableStyles,\n        height: convertToUnit(this.computedHeight),\n      }\n    },\n  },\n\n  created () {\n    const breakingProps = [\n      ['app', '<v-app-bar app>'],\n      ['manual-scroll', '<v-app-bar :value=\"false\">'],\n      ['clipped-left', '<v-app-bar clipped-left>'],\n      ['clipped-right', '<v-app-bar clipped-right>'],\n      ['inverted-scroll', '<v-app-bar inverted-scroll>'],\n      ['scroll-off-screen', '<v-app-bar scroll-off-screen>'],\n      ['scroll-target', '<v-app-bar scroll-target>'],\n      ['scroll-threshold', '<v-app-bar scroll-threshold>'],\n      ['card', '<v-app-bar flat>'],\n    ]\n\n    /* istanbul ignore next */\n    breakingProps.forEach(([original, replacement]) => {\n      if (this.$attrs.hasOwnProperty(original)) breaking(original, replacement, this)\n    })\n  },\n\n  methods: {\n    genBackground () {\n      const props = {\n        height: convertToUnit(this.computedHeight),\n        src: this.src,\n      }\n\n      const image = this.$scopedSlots.img\n        ? this.$scopedSlots.img({ props })\n        : this.$createElement(VImg, { props })\n\n      return this.$createElement('div', {\n        staticClass: 'v-toolbar__image',\n      }, [image])\n    },\n    genContent () {\n      return this.$createElement('div', {\n        staticClass: 'v-toolbar__content',\n        style: {\n          height: convertToUnit(this.computedContentHeight),\n        },\n      }, getSlot(this))\n    },\n    genExtension () {\n      return this.$createElement('div', {\n        staticClass: 'v-toolbar__extension',\n        style: {\n          height: convertToUnit(this.extensionHeight),\n        },\n      }, getSlot(this, 'extension'))\n    },\n  },\n\n  render (h): VNode {\n    this.isExtended = this.extended || !!this.$scopedSlots.extension\n\n    const children = [this.genContent()]\n    const data = this.setBackgroundColor(this.color, {\n      class: this.classes,\n      style: this.styles,\n      on: this.$listeners,\n    })\n\n    if (this.isExtended) children.push(this.genExtension())\n    if (this.src || this.$scopedSlots.img) children.unshift(this.genBackground())\n\n    return h(this.tag, data, children)\n  },\n})\n","// Components\nimport VToolbar from './VToolbar'\n\n// Utilities\nimport { createSimpleFunctional } from '../../util/helpers'\n\nconst VToolbarTitle = createSimpleFunctional('v-toolbar__title')\nconst VToolbarItems = createSimpleFunctional('v-toolbar__items')\n\nexport {\n  VToolbar,\n  VToolbarItems,\n  VToolbarTitle,\n}\n\nexport default {\n  $_vuetify_subcomponents: {\n    VToolbar,\n    VToolbarItems,\n    VToolbarTitle,\n  },\n}\n","import { FunctionalComponentOptions, VNode, VNodeData } from 'vue'\nimport mergeData from '../../util/mergeData'\n\nfunction mergeTransitions (\n  dest: Function | Function[] = [],\n  ...transitions: (Function | Function[])[]\n) {\n  /* eslint-disable-next-line no-array-constructor */\n  return Array<Function>().concat(dest, ...transitions)\n}\n\nexport function createSimpleTransition (\n  name: string,\n  origin = 'top center 0',\n  mode?: string\n): FunctionalComponentOptions {\n  return {\n    name,\n\n    functional: true,\n\n    props: {\n      group: {\n        type: Boolean,\n        default: false,\n      },\n      hideOnLeave: {\n        type: Boolean,\n        default: false,\n      },\n      leaveAbsolute: {\n        type: Boolean,\n        default: false,\n      },\n      mode: {\n        type: String,\n        default: mode,\n      },\n      origin: {\n        type: String,\n        default: origin,\n      },\n    },\n\n    render (h, context): VNode {\n      const tag = `transition${context.props.group ? '-group' : ''}`\n      const data: VNodeData = {\n        props: {\n          name,\n          mode: context.props.mode,\n        },\n        on: {\n          beforeEnter (el: HTMLElement) {\n            el.style.transformOrigin = context.props.origin\n            el.style.webkitTransformOrigin = context.props.origin\n          },\n        },\n      }\n\n      if (context.props.leaveAbsolute) {\n        data.on!.leave = mergeTransitions(data.on!.leave, (el: HTMLElement) => {\n          const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = el\n          el._transitionInitialStyles = {\n            position: el.style.position,\n            top: el.style.top,\n            left: el.style.left,\n            width: el.style.width,\n            height: el.style.height,\n          }\n          el.style.position = 'absolute'\n          el.style.top = offsetTop + 'px'\n          el.style.left = offsetLeft + 'px'\n          el.style.width = offsetWidth + 'px'\n          el.style.height = offsetHeight + 'px'\n        })\n        data.on!.afterLeave = mergeTransitions(data.on!.afterLeave, (el?: HTMLElement) => {\n          if (el && el._transitionInitialStyles) {\n            const { position, top, left, width, height } = el._transitionInitialStyles\n            delete el._transitionInitialStyles\n            el.style.position = position || ''\n            el.style.top = top || ''\n            el.style.left = left || ''\n            el.style.width = width || ''\n            el.style.height = height || ''\n          }\n        })\n      }\n      if (context.props.hideOnLeave) {\n        data.on!.leave = mergeTransitions(data.on!.leave, (el: HTMLElement) => {\n          el.style.setProperty('display', 'none', 'important')\n        })\n      }\n\n      return h(tag, mergeData(context.data, data), context.children)\n    },\n  }\n}\n\nexport function createJavascriptTransition (\n  name: string,\n  functions: Record<string, any>,\n  mode = 'in-out'\n): FunctionalComponentOptions {\n  return {\n    name,\n\n    functional: true,\n\n    props: {\n      mode: {\n        type: String,\n        default: mode,\n      },\n    },\n\n    render (h, context): VNode {\n      return h(\n        'transition',\n        mergeData(context.data, {\n          props: { name },\n          on: functions,\n        }),\n        context.children\n      )\n    },\n  }\n}\n","import { upperFirst } from '../../util/helpers'\n\ninterface HTMLExpandElement extends HTMLElement {\n  _parent?: (Node & ParentNode & HTMLElement) | null\n  _initialStyle?: {\n    transition: string\n    overflow: string\n    height?: string | null\n    width?: string | null\n  }\n}\n\nexport default function (expandedParentClass = '', x = false) {\n  const sizeProperty = x ? 'width' : 'height' as 'width' | 'height'\n  const offsetProperty = `offset${upperFirst(sizeProperty)}` as 'offsetHeight' | 'offsetWidth'\n\n  return {\n    beforeEnter (el: HTMLExpandElement) {\n      el._parent = el.parentNode as (Node & ParentNode & HTMLElement) | null\n      el._initialStyle = {\n        transition: el.style.transition,\n        overflow: el.style.overflow,\n        [sizeProperty]: el.style[sizeProperty],\n      }\n    },\n\n    enter (el: HTMLExpandElement) {\n      const initialStyle = el._initialStyle!\n\n      el.style.setProperty('transition', 'none', 'important')\n      // Hide overflow to account for collapsed margins in the calculated height\n      el.style.overflow = 'hidden'\n      const offset = `${el[offsetProperty]}px`\n\n      el.style[sizeProperty] = '0'\n\n      void el.offsetHeight // force reflow\n\n      el.style.transition = initialStyle.transition\n\n      if (expandedParentClass && el._parent) {\n        el._parent.classList.add(expandedParentClass)\n      }\n\n      requestAnimationFrame(() => {\n        el.style[sizeProperty] = offset\n      })\n    },\n\n    afterEnter: resetStyles,\n    enterCancelled: resetStyles,\n\n    leave (el: HTMLExpandElement) {\n      el._initialStyle = {\n        transition: '',\n        overflow: el.style.overflow,\n        [sizeProperty]: el.style[sizeProperty],\n      }\n\n      el.style.overflow = 'hidden'\n      el.style[sizeProperty] = `${el[offsetProperty]}px`\n      void el.offsetHeight // force reflow\n\n      requestAnimationFrame(() => (el.style[sizeProperty] = '0'))\n    },\n\n    afterLeave,\n    leaveCancelled: afterLeave,\n  }\n\n  function afterLeave (el: HTMLExpandElement) {\n    if (expandedParentClass && el._parent) {\n      el._parent.classList.remove(expandedParentClass)\n    }\n    resetStyles(el)\n  }\n\n  function resetStyles (el: HTMLExpandElement) {\n    const size = el._initialStyle![sizeProperty]\n    el.style.overflow = el._initialStyle!.overflow\n    if (size != null) el.style[sizeProperty] = size\n    delete el._initialStyle\n  }\n}\n","import {\n  createSimpleTransition,\n  createJavascriptTransition,\n} from './createTransition'\n\nimport ExpandTransitionGenerator from './expand-transition'\n\n// Component specific transitions\nexport const VCarouselTransition = createSimpleTransition('carousel-transition')\nexport const VCarouselReverseTransition = createSimpleTransition('carousel-reverse-transition')\nexport const VTabTransition = createSimpleTransition('tab-transition')\nexport const VTabReverseTransition = createSimpleTransition('tab-reverse-transition')\nexport const VMenuTransition = createSimpleTransition('menu-transition')\nexport const VFabTransition = createSimpleTransition('fab-transition', 'center center', 'out-in')\n\n// Generic transitions\nexport const VDialogTransition = createSimpleTransition('dialog-transition')\nexport const VDialogBottomTransition = createSimpleTransition('dialog-bottom-transition')\nexport const VDialogTopTransition = createSimpleTransition('dialog-top-transition')\nexport const VFadeTransition = createSimpleTransition('fade-transition')\nexport const VScaleTransition = createSimpleTransition('scale-transition')\nexport const VScrollXTransition = createSimpleTransition('scroll-x-transition')\nexport const VScrollXReverseTransition = createSimpleTransition('scroll-x-reverse-transition')\nexport const VScrollYTransition = createSimpleTransition('scroll-y-transition')\nexport const VScrollYReverseTransition = createSimpleTransition('scroll-y-reverse-transition')\nexport const VSlideXTransition = createSimpleTransition('slide-x-transition')\nexport const VSlideXReverseTransition = createSimpleTransition('slide-x-reverse-transition')\nexport const VSlideYTransition = createSimpleTransition('slide-y-transition')\nexport const VSlideYReverseTransition = createSimpleTransition('slide-y-reverse-transition')\n\n// Javascript transitions\nexport const VExpandTransition = createJavascriptTransition('expand-transition', ExpandTransitionGenerator())\nexport const VExpandXTransition = createJavascriptTransition('expand-x-transition', ExpandTransitionGenerator('', true))\n\nexport default {\n  $_vuetify_subcomponents: {\n    VCarouselTransition,\n    VCarouselReverseTransition,\n    VDialogTransition,\n    VDialogBottomTransition,\n    VDialogTopTransition,\n    VFabTransition,\n    VFadeTransition,\n    VMenuTransition,\n    VScaleTransition,\n    VScrollXTransition,\n    VScrollXReverseTransition,\n    VScrollYTransition,\n    VScrollYReverseTransition,\n    VSlideXTransition,\n    VSlideXReverseTransition,\n    VSlideYTransition,\n    VSlideYReverseTransition,\n    VTabReverseTransition,\n    VTabTransition,\n    VExpandTransition,\n    VExpandXTransition,\n  },\n}\n","import { attachedRoot } from '../../util/dom'\nimport { VNodeDirective } from 'vue/types/vnode'\nimport { VNode } from 'vue'\n\ninterface ClickOutsideBindingArgs {\n  handler: (e: Event) => void\n  closeConditional?: (e: Event) => boolean\n  include?: () => HTMLElement[]\n}\n\ninterface ClickOutsideDirective extends VNodeDirective {\n  value?: ((e: Event) => void) | ClickOutsideBindingArgs\n}\n\nfunction defaultConditional () {\n  return true\n}\n\nfunction checkEvent (e: PointerEvent, el: HTMLElement, binding: ClickOutsideDirective): boolean {\n  // The include element callbacks below can be expensive\n  // so we should avoid calling them when we're not active.\n  // Explicitly check for false to allow fallback compatibility\n  // with non-toggleable components\n  if (!e || checkIsActive(e, binding) === false) return false\n\n  // If we're clicking inside the shadowroot, then the app root doesn't get the same\n  // level of introspection as to _what_ we're clicking. We want to check to see if\n  // our target is the shadowroot parent container, and if it is, ignore.\n  const root = attachedRoot(el)\n  if (\n    typeof ShadowRoot !== 'undefined' &&\n    root instanceof ShadowRoot &&\n    root.host === e.target\n  ) return false\n\n  // Check if additional elements were passed to be included in check\n  // (click must be outside all included elements, if any)\n  const elements = ((typeof binding.value === 'object' && binding.value.include) || (() => []))()\n  // Add the root element for the component this directive was defined on\n  elements.push(el)\n\n  // Check if it's a click outside our elements, and then if our callback returns true.\n  // Non-toggleable components should take action in their callback and return falsy.\n  // Toggleable can return true if it wants to deactivate.\n  // Note that, because we're in the capture phase, this callback will occur before\n  // the bubbling click event on any outside elements.\n  return !elements.some(el => el.contains(e.target as Node))\n}\n\nfunction checkIsActive (e: PointerEvent, binding: ClickOutsideDirective): boolean | void {\n  const isActive = (typeof binding.value === 'object' && binding.value.closeConditional) || defaultConditional\n\n  return isActive(e)\n}\n\nfunction directive (e: PointerEvent, el: HTMLElement, binding: ClickOutsideDirective, vnode: VNode) {\n  const handler = typeof binding.value === 'function' ? binding.value : binding.value!.handler\n\n  el._clickOutside!.lastMousedownWasOutside && checkEvent(e, el, binding) && setTimeout(() => {\n    checkIsActive(e, binding) && handler && handler(e)\n  }, 0)\n}\n\nfunction handleShadow (el: HTMLElement, callback: Function): void {\n  const root = attachedRoot(el)\n\n  callback(document)\n\n  if (typeof ShadowRoot !== 'undefined' && root instanceof ShadowRoot) {\n    callback(root)\n  }\n}\n\nexport const ClickOutside = {\n  // [data-app] may not be found\n  // if using bind, inserted makes\n  // sure that the root element is\n  // available, iOS does not support\n  // clicks on body\n  inserted (el: HTMLElement, binding: ClickOutsideDirective, vnode: VNode) {\n    const onClick = (e: Event) => directive(e as PointerEvent, el, binding, vnode)\n    const onMousedown = (e: Event) => {\n      el._clickOutside!.lastMousedownWasOutside = checkEvent(e as PointerEvent, el, binding)\n    }\n\n    handleShadow(el, (app: HTMLElement) => {\n      app.addEventListener('click', onClick, true)\n      app.addEventListener('mousedown', onMousedown, true)\n    })\n\n    if (!el._clickOutside) {\n      el._clickOutside = {\n        lastMousedownWasOutside: true,\n      }\n    }\n\n    el._clickOutside[vnode.context!._uid] = {\n      onClick,\n      onMousedown,\n    }\n  },\n\n  unbind (el: HTMLElement, binding: ClickOutsideDirective, vnode: VNode) {\n    if (!el._clickOutside) return\n\n    handleShadow(el, (app: HTMLElement) => {\n      if (!app || !el._clickOutside?.[vnode.context!._uid]) return\n\n      const { onClick, onMousedown } = el._clickOutside[vnode.context!._uid]!\n\n      app.removeEventListener('click', onClick, true)\n      app.removeEventListener('mousedown', onMousedown, true)\n    })\n\n    delete el._clickOutside[vnode.context!._uid]\n  },\n}\n\nexport default ClickOutside\n","import { VNodeDirective } from 'vue/types/vnode'\nimport { VNode } from 'vue'\n\ntype ObserveHandler = (\n  entries: IntersectionObserverEntry[],\n  observer: IntersectionObserver,\n  isIntersecting: boolean,\n) => void\n\ninterface ObserveVNodeDirective extends Omit<VNodeDirective, 'modifiers'> {\n  value?: ObserveHandler | { handler: ObserveHandler, options?: IntersectionObserverInit }\n  modifiers?: {\n    once?: boolean\n    quiet?: boolean\n  }\n}\n\nfunction inserted (el: HTMLElement, binding: ObserveVNodeDirective, vnode: VNode) {\n  if (typeof window === 'undefined' || !('IntersectionObserver' in window)) return\n\n  const modifiers = binding.modifiers || {}\n  const value = binding.value\n  const { handler, options } = typeof value === 'object'\n    ? value\n    : { handler: value, options: {} }\n  const observer = new IntersectionObserver((\n    entries: IntersectionObserverEntry[] = [],\n    observer: IntersectionObserver\n  ) => {\n    const _observe = el._observe?.[vnode.context!._uid]\n    if (!_observe) return // Just in case, should never fire\n\n    const isIntersecting = entries.some(entry => entry.isIntersecting)\n\n    // If is not quiet or has already been\n    // initted, invoke the user callback\n    if (\n      handler && (\n        !modifiers.quiet ||\n        _observe.init\n      ) && (\n        !modifiers.once ||\n        isIntersecting ||\n        _observe.init\n      )\n    ) {\n      handler(entries, observer, isIntersecting)\n    }\n\n    if (isIntersecting && modifiers.once) unbind(el, binding, vnode)\n    else _observe.init = true\n  }, options)\n\n  el._observe = Object(el._observe)\n  el._observe![vnode.context!._uid] = { init: false, observer }\n\n  observer.observe(el)\n}\n\nfunction unbind (el: HTMLElement, binding: ObserveVNodeDirective, vnode: VNode) {\n  const observe = el._observe?.[vnode.context!._uid]\n  if (!observe) return\n\n  observe.observer.unobserve(el)\n  delete el._observe![vnode.context!._uid]\n}\n\nexport const Intersect = {\n  inserted,\n  unbind,\n}\n\nexport default Intersect\n","import { VNodeDirective } from 'vue/types/vnode'\nimport { VNode } from 'vue'\n\ninterface ResizeVNodeDirective extends VNodeDirective {\n  value?: () => void\n  options?: boolean | AddEventListenerOptions\n}\n\nfunction inserted (el: HTMLElement, binding: ResizeVNodeDirective, vnode: VNode) {\n  const callback = binding.value!\n  const options = binding.options || { passive: true }\n\n  window.addEventListener('resize', callback, options)\n\n  el._onResize = Object(el._onResize)\n  el._onResize![vnode.context!._uid] = {\n    callback,\n    options,\n  }\n\n  if (!binding.modifiers || !binding.modifiers.quiet) {\n    callback()\n  }\n}\n\nfunction unbind (el: HTMLElement, binding: ResizeVNodeDirective, vnode: VNode) {\n  if (!el._onResize?.[vnode.context!._uid]) return\n\n  const { callback, options } = el._onResize[vnode.context!._uid]!\n\n  window.removeEventListener('resize', callback, options)\n\n  delete el._onResize[vnode.context!._uid]\n}\n\nexport const Resize = {\n  inserted,\n  unbind,\n}\n\nexport default Resize\n","// Styles\nimport './VRipple.sass'\n\n// Utilities\nimport { consoleWarn } from '../../util/console'\nimport { keyCodes } from '../../util/helpers'\n\n// Types\nimport { VNode, VNodeDirective } from 'vue'\n\ntype VuetifyRippleEvent = (MouseEvent | TouchEvent | KeyboardEvent) & { rippleStop?: boolean }\n\nconst DELAY_RIPPLE = 80\n\nfunction transform (el: HTMLElement, value: string) {\n  el.style.transform = value\n  el.style.webkitTransform = value\n}\n\nexport interface RippleOptions {\n  class?: string\n  center?: boolean\n  circle?: boolean\n}\n\nfunction isTouchEvent (e: VuetifyRippleEvent): e is TouchEvent {\n  return e.constructor.name === 'TouchEvent'\n}\n\nfunction isKeyboardEvent (e: VuetifyRippleEvent): e is KeyboardEvent {\n  return e.constructor.name === 'KeyboardEvent'\n}\n\nconst calculate = (\n  e: VuetifyRippleEvent,\n  el: HTMLElement,\n  value: RippleOptions = {}\n) => {\n  let localX = 0\n  let localY = 0\n\n  if (!isKeyboardEvent(e)) {\n    const offset = el.getBoundingClientRect()\n    const target = isTouchEvent(e) ? e.touches[e.touches.length - 1] : e\n\n    localX = target.clientX - offset.left\n    localY = target.clientY - offset.top\n  }\n\n  let radius = 0\n  let scale = 0.3\n  if (el._ripple && el._ripple.circle) {\n    scale = 0.15\n    radius = el.clientWidth / 2\n    radius = value.center ? radius : radius + Math.sqrt((localX - radius) ** 2 + (localY - radius) ** 2) / 4\n  } else {\n    radius = Math.sqrt(el.clientWidth ** 2 + el.clientHeight ** 2) / 2\n  }\n\n  const centerX = `${(el.clientWidth - (radius * 2)) / 2}px`\n  const centerY = `${(el.clientHeight - (radius * 2)) / 2}px`\n\n  const x = value.center ? centerX : `${localX - radius}px`\n  const y = value.center ? centerY : `${localY - radius}px`\n\n  return { radius, scale, x, y, centerX, centerY }\n}\n\nconst ripples = {\n  /* eslint-disable max-statements */\n  show (\n    e: VuetifyRippleEvent,\n    el: HTMLElement,\n    value: RippleOptions = {}\n  ) {\n    if (!el._ripple || !el._ripple.enabled) {\n      return\n    }\n\n    const container = document.createElement('span')\n    const animation = document.createElement('span')\n\n    container.appendChild(animation)\n    container.className = 'v-ripple__container'\n\n    if (value.class) {\n      container.className += ` ${value.class}`\n    }\n\n    const { radius, scale, x, y, centerX, centerY } = calculate(e, el, value)\n\n    const size = `${radius * 2}px`\n    animation.className = 'v-ripple__animation'\n    animation.style.width = size\n    animation.style.height = size\n\n    el.appendChild(container)\n\n    const computed = window.getComputedStyle(el)\n    if (computed && computed.position === 'static') {\n      el.style.position = 'relative'\n      el.dataset.previousPosition = 'static'\n    }\n\n    animation.classList.add('v-ripple__animation--enter')\n    animation.classList.add('v-ripple__animation--visible')\n    transform(animation, `translate(${x}, ${y}) scale3d(${scale},${scale},${scale})`)\n    animation.dataset.activated = String(performance.now())\n\n    setTimeout(() => {\n      animation.classList.remove('v-ripple__animation--enter')\n      animation.classList.add('v-ripple__animation--in')\n      transform(animation, `translate(${centerX}, ${centerY}) scale3d(1,1,1)`)\n    }, 0)\n  },\n\n  hide (el: HTMLElement | null) {\n    if (!el || !el._ripple || !el._ripple.enabled) return\n\n    const ripples = el.getElementsByClassName('v-ripple__animation')\n\n    if (ripples.length === 0) return\n    const animation = ripples[ripples.length - 1]\n\n    if (animation.dataset.isHiding) return\n    else animation.dataset.isHiding = 'true'\n\n    const diff = performance.now() - Number(animation.dataset.activated)\n    const delay = Math.max(250 - diff, 0)\n\n    setTimeout(() => {\n      animation.classList.remove('v-ripple__animation--in')\n      animation.classList.add('v-ripple__animation--out')\n\n      setTimeout(() => {\n        const ripples = el.getElementsByClassName('v-ripple__animation')\n        if (ripples.length === 1 && el.dataset.previousPosition) {\n          el.style.position = el.dataset.previousPosition\n          delete el.dataset.previousPosition\n        }\n\n        animation.parentNode && el.removeChild(animation.parentNode)\n      }, 300)\n    }, delay)\n  },\n}\n\nfunction isRippleEnabled (value: any): value is true {\n  return typeof value === 'undefined' || !!value\n}\n\nfunction rippleShow (e: VuetifyRippleEvent) {\n  const value: RippleOptions = {}\n  const element = e.currentTarget as HTMLElement\n\n  if (!element || !element._ripple || element._ripple.touched || e.rippleStop) return\n\n  // Don't allow the event to trigger ripples on any other elements\n  e.rippleStop = true\n\n  if (isTouchEvent(e)) {\n    element._ripple.touched = true\n    element._ripple.isTouch = true\n  } else {\n    // It's possible for touch events to fire\n    // as mouse events on Android/iOS, this\n    // will skip the event call if it has\n    // already been registered as touch\n    if (element._ripple.isTouch) return\n  }\n  value.center = element._ripple.centered || isKeyboardEvent(e)\n  if (element._ripple.class) {\n    value.class = element._ripple.class\n  }\n\n  if (isTouchEvent(e)) {\n    // already queued that shows or hides the ripple\n    if (element._ripple.showTimerCommit) return\n\n    element._ripple.showTimerCommit = () => {\n      ripples.show(e, element, value)\n    }\n    element._ripple.showTimer = window.setTimeout(() => {\n      if (element && element._ripple && element._ripple.showTimerCommit) {\n        element._ripple.showTimerCommit()\n        element._ripple.showTimerCommit = null\n      }\n    }, DELAY_RIPPLE)\n  } else {\n    ripples.show(e, element, value)\n  }\n}\n\nfunction rippleHide (e: Event) {\n  const element = e.currentTarget as HTMLElement | null\n  if (!element || !element._ripple) return\n\n  window.clearTimeout(element._ripple.showTimer)\n\n  // The touch interaction occurs before the show timer is triggered.\n  // We still want to show ripple effect.\n  if (e.type === 'touchend' && element._ripple.showTimerCommit) {\n    element._ripple.showTimerCommit()\n    element._ripple.showTimerCommit = null\n\n    // re-queue ripple hiding\n    element._ripple.showTimer = setTimeout(() => {\n      rippleHide(e)\n    })\n    return\n  }\n\n  window.setTimeout(() => {\n    if (element._ripple) {\n      element._ripple.touched = false\n    }\n  })\n  ripples.hide(element)\n}\n\nfunction rippleCancelShow (e: MouseEvent | TouchEvent) {\n  const element = e.currentTarget as HTMLElement | undefined\n\n  if (!element || !element._ripple) return\n\n  if (element._ripple.showTimerCommit) {\n    element._ripple.showTimerCommit = null\n  }\n\n  window.clearTimeout(element._ripple.showTimer)\n}\n\nlet keyboardRipple = false\n\nfunction keyboardRippleShow (e: KeyboardEvent) {\n  if (!keyboardRipple && (e.keyCode === keyCodes.enter || e.keyCode === keyCodes.space)) {\n    keyboardRipple = true\n    rippleShow(e)\n  }\n}\n\nfunction keyboardRippleHide (e: KeyboardEvent) {\n  keyboardRipple = false\n  rippleHide(e)\n}\n\nfunction focusRippleHide (e: FocusEvent) {\n  if (keyboardRipple === true) {\n    keyboardRipple = false\n    rippleHide(e)\n  }\n}\n\nfunction updateRipple (el: HTMLElement, binding: VNodeDirective, wasEnabled: boolean) {\n  const enabled = isRippleEnabled(binding.value)\n  if (!enabled) {\n    ripples.hide(el)\n  }\n  el._ripple = el._ripple || {}\n  el._ripple.enabled = enabled\n  const value = binding.value || {}\n  if (value.center) {\n    el._ripple.centered = true\n  }\n  if (value.class) {\n    el._ripple.class = binding.value.class\n  }\n  if (value.circle) {\n    el._ripple.circle = value.circle\n  }\n  if (enabled && !wasEnabled) {\n    el.addEventListener('touchstart', rippleShow, { passive: true })\n    el.addEventListener('touchend', rippleHide, { passive: true })\n    el.addEventListener('touchmove', rippleCancelShow, { passive: true })\n    el.addEventListener('touchcancel', rippleHide)\n\n    el.addEventListener('mousedown', rippleShow)\n    el.addEventListener('mouseup', rippleHide)\n    el.addEventListener('mouseleave', rippleHide)\n\n    el.addEventListener('keydown', keyboardRippleShow)\n    el.addEventListener('keyup', keyboardRippleHide)\n\n    el.addEventListener('blur', focusRippleHide)\n\n    // Anchor tags can be dragged, causes other hides to fail - #1537\n    el.addEventListener('dragstart', rippleHide, { passive: true })\n  } else if (!enabled && wasEnabled) {\n    removeListeners(el)\n  }\n}\n\nfunction removeListeners (el: HTMLElement) {\n  el.removeEventListener('mousedown', rippleShow)\n  el.removeEventListener('touchstart', rippleShow)\n  el.removeEventListener('touchend', rippleHide)\n  el.removeEventListener('touchmove', rippleCancelShow)\n  el.removeEventListener('touchcancel', rippleHide)\n  el.removeEventListener('mouseup', rippleHide)\n  el.removeEventListener('mouseleave', rippleHide)\n  el.removeEventListener('keydown', keyboardRippleShow)\n  el.removeEventListener('keyup', keyboardRippleHide)\n  el.removeEventListener('dragstart', rippleHide)\n  el.removeEventListener('blur', focusRippleHide)\n}\n\nfunction directive (el: HTMLElement, binding: VNodeDirective, node: VNode) {\n  updateRipple(el, binding, false)\n\n  if (process.env.NODE_ENV === 'development') {\n    // warn if an inline element is used, waiting for el to be in the DOM first\n    node.context && node.context.$nextTick(() => {\n      const computed = window.getComputedStyle(el)\n      if (computed && computed.display === 'inline') {\n        const context = (node as any).fnOptions ? [(node as any).fnOptions, node.context] : [node.componentInstance]\n        consoleWarn('v-ripple can only be used on block-level elements', ...context)\n      }\n    })\n  }\n}\n\nfunction unbind (el: HTMLElement) {\n  delete el._ripple\n  removeListeners(el)\n}\n\nfunction update (el: HTMLElement, binding: VNodeDirective) {\n  if (binding.value === binding.oldValue) {\n    return\n  }\n\n  const wasEnabled = isRippleEnabled(binding.oldValue)\n  updateRipple(el, binding, wasEnabled)\n}\n\nexport const Ripple = {\n  bind: directive,\n  unbind,\n  update,\n}\n\nexport default Ripple\n","import { VNodeDirective, VNode } from 'vue/types/vnode'\nimport { keys } from '../../util/helpers'\nimport { TouchHandlers, TouchValue, TouchWrapper } from 'vuetify/types'\n\nexport interface TouchStoredHandlers {\n  touchstart: (e: TouchEvent) => void\n  touchend: (e: TouchEvent) => void\n  touchmove: (e: TouchEvent) => void\n}\n\ninterface TouchVNodeDirective extends VNodeDirective {\n  value?: TouchValue\n}\n\nconst handleGesture = (wrapper: TouchWrapper) => {\n  const { touchstartX, touchendX, touchstartY, touchendY } = wrapper\n  const dirRatio = 0.5\n  const minDistance = 16\n  wrapper.offsetX = touchendX - touchstartX\n  wrapper.offsetY = touchendY - touchstartY\n\n  if (Math.abs(wrapper.offsetY) < dirRatio * Math.abs(wrapper.offsetX)) {\n    wrapper.left && (touchendX < touchstartX - minDistance) && wrapper.left(wrapper)\n    wrapper.right && (touchendX > touchstartX + minDistance) && wrapper.right(wrapper)\n  }\n\n  if (Math.abs(wrapper.offsetX) < dirRatio * Math.abs(wrapper.offsetY)) {\n    wrapper.up && (touchendY < touchstartY - minDistance) && wrapper.up(wrapper)\n    wrapper.down && (touchendY > touchstartY + minDistance) && wrapper.down(wrapper)\n  }\n}\n\nfunction touchstart (event: TouchEvent, wrapper: TouchWrapper) {\n  const touch = event.changedTouches[0]\n  wrapper.touchstartX = touch.clientX\n  wrapper.touchstartY = touch.clientY\n\n  wrapper.start &&\n    wrapper.start(Object.assign(event, wrapper))\n}\n\nfunction touchend (event: TouchEvent, wrapper: TouchWrapper) {\n  const touch = event.changedTouches[0]\n  wrapper.touchendX = touch.clientX\n  wrapper.touchendY = touch.clientY\n\n  wrapper.end &&\n    wrapper.end(Object.assign(event, wrapper))\n\n  handleGesture(wrapper)\n}\n\nfunction touchmove (event: TouchEvent, wrapper: TouchWrapper) {\n  const touch = event.changedTouches[0]\n  wrapper.touchmoveX = touch.clientX\n  wrapper.touchmoveY = touch.clientY\n\n  wrapper.move && wrapper.move(Object.assign(event, wrapper))\n}\n\nfunction createHandlers (value: TouchHandlers): TouchStoredHandlers {\n  const wrapper = {\n    touchstartX: 0,\n    touchstartY: 0,\n    touchendX: 0,\n    touchendY: 0,\n    touchmoveX: 0,\n    touchmoveY: 0,\n    offsetX: 0,\n    offsetY: 0,\n    left: value.left,\n    right: value.right,\n    up: value.up,\n    down: value.down,\n    start: value.start,\n    move: value.move,\n    end: value.end,\n  }\n\n  return {\n    touchstart: (e: TouchEvent) => touchstart(e, wrapper),\n    touchend: (e: TouchEvent) => touchend(e, wrapper),\n    touchmove: (e: TouchEvent) => touchmove(e, wrapper),\n  }\n}\n\nfunction inserted (el: HTMLElement, binding: TouchVNodeDirective, vnode: VNode) {\n  const value = binding.value!\n  const target = value.parent ? el.parentElement : el\n  const options = value.options || { passive: true }\n\n  // Needed to pass unit tests\n  if (!target) return\n\n  const handlers = createHandlers(binding.value!)\n  target._touchHandlers = Object(target._touchHandlers)\n  target._touchHandlers![vnode.context!._uid] = handlers\n\n  keys(handlers).forEach(eventName => {\n    target.addEventListener(eventName, handlers[eventName] as EventListener, options)\n  })\n}\n\nfunction unbind (el: HTMLElement, binding: TouchVNodeDirective, vnode: VNode) {\n  const target = binding.value!.parent ? el.parentElement : el\n  if (!target || !target._touchHandlers) return\n\n  const handlers = target._touchHandlers[vnode.context!._uid]\n  keys(handlers).forEach(eventName => {\n    target.removeEventListener(eventName, handlers[eventName])\n  })\n  delete target._touchHandlers[vnode.context!._uid]\n}\n\nexport const Touch = {\n  inserted,\n  unbind,\n}\n\nexport default Touch\n","import OurVue, { VueConstructor } from 'vue'\nimport { VuetifyUseOptions } from 'vuetify/types'\nimport { consoleError } from './util/console'\n\nexport function install (Vue: VueConstructor, args: VuetifyUseOptions = {}) {\n  if ((install as any).installed) return\n  (install as any).installed = true\n\n  if (OurVue !== Vue) {\n    consoleError(`Multiple instances of Vue detected\nSee https://github.com/vuetifyjs/vuetify/issues/4068\n\nIf you're seeing \"$attrs is readonly\", it's caused by this`)\n  }\n\n  const components = args.components || {}\n  const directives = args.directives || {}\n\n  for (const name in directives) {\n    const directive = directives[name]\n\n    Vue.directive(name, directive)\n  }\n\n  (function registerComponents (components: any) {\n    if (components) {\n      for (const key in components) {\n        const component = components[key]\n        if (component && !registerComponents(component.$_vuetify_subcomponents)) {\n          Vue.component(key, component as typeof Vue)\n        }\n      }\n      return true\n    }\n    return false\n  })(components)\n\n  // Used to avoid multiple mixins being setup\n  // when in dev mode and hot module reload\n  // https://github.com/vuejs/vue/issues/5089#issuecomment-284260111\n  if (Vue.$_vuetify_installed) return\n  Vue.$_vuetify_installed = true\n\n  Vue.mixin({\n    beforeCreate () {\n      const options = this.$options as any\n\n      if (options.vuetify) {\n        options.vuetify.init(this, this.$ssrContext)\n        this.$vuetify = Vue.observable(options.vuetify.framework)\n      } else {\n        this.$vuetify = (options.parent && options.parent.$vuetify) || this\n      }\n    },\n    beforeMount () {\n      // @ts-ignore\n      if (this.$options.vuetify && this.$el && this.$el.hasAttribute('data-server-rendered')) {\n        // @ts-ignore\n        this.$vuetify.isHydrating = true\n        // @ts-ignore\n        this.$vuetify.breakpoint.update(true)\n      }\n    },\n    mounted () {\n      // @ts-ignore\n      if (this.$options.vuetify && this.$vuetify.isHydrating) {\n        // @ts-ignore\n        this.$vuetify.isHydrating = false\n        // @ts-ignore\n        this.$vuetify.breakpoint.update()\n      }\n    },\n  })\n}\n","export default {\n  badge: 'Badge',\n  close: 'Close',\n  dataIterator: {\n    noResultsText: 'No matching records found',\n    loadingText: 'Loading items...',\n  },\n  dataTable: {\n    itemsPerPageText: 'Rows per page:',\n    ariaLabel: {\n      sortDescending: 'Sorted descending.',\n      sortAscending: 'Sorted ascending.',\n      sortNone: 'Not sorted.',\n      activateNone: 'Activate to remove sorting.',\n      activateDescending: 'Activate to sort descending.',\n      activateAscending: 'Activate to sort ascending.',\n    },\n    sortBy: 'Sort by',\n  },\n  dataFooter: {\n    itemsPerPageText: 'Items per page:',\n    itemsPerPageAll: 'All',\n    nextPage: 'Next page',\n    prevPage: 'Previous page',\n    firstPage: 'First page',\n    lastPage: 'Last page',\n    pageText: '{0}-{1} of {2}',\n  },\n  datePicker: {\n    itemsSelected: '{0} selected',\n    nextMonthAriaLabel: 'Next month',\n    nextYearAriaLabel: 'Next year',\n    prevMonthAriaLabel: 'Previous month',\n    prevYearAriaLabel: 'Previous year',\n  },\n  noDataText: 'No data available',\n  carousel: {\n    prev: 'Previous visual',\n    next: 'Next visual',\n    ariaLabel: {\n      delimiter: 'Carousel slide {0} of {1}',\n    },\n  },\n  calendar: {\n    moreEvents: '{0} more',\n  },\n  fileInput: {\n    counter: '{0} files',\n    counterSize: '{0} files ({1} in total)',\n  },\n  timePicker: {\n    am: 'AM',\n    pm: 'PM',\n  },\n  pagination: {\n    ariaLabel: {\n      wrapper: 'Pagination Navigation',\n      next: 'Next page',\n      previous: 'Previous page',\n      page: 'Goto Page {0}',\n      currentPage: 'Current Page, Page {0}',\n    },\n  },\n  rating: {\n    ariaLabel: {\n      icon: 'Rating {0} of {1}',\n    },\n  },\n}\n","// Styles\nimport '../../styles/main.sass'\n\n// Locale\nimport { en } from '../../locale'\n\n// Icons\n// TODO: Enable for v3\n// import mdi from '../../services/icons/presets/mdi'\n\n// Types\nimport { VuetifyPreset } from 'vuetify/types/services/presets'\n\nexport const preset: VuetifyPreset = {\n  breakpoint: {\n    // TODO: update to MD2 spec in v3 - 1280\n    mobileBreakpoint: 1264,\n    scrollBarWidth: 16,\n    thresholds: {\n      xs: 600,\n      sm: 960,\n      md: 1280,\n      lg: 1920,\n    },\n  },\n  icons: {\n    // TODO: remove v3\n    iconfont: 'mdi',\n    values: {},\n  },\n  lang: {\n    current: 'en',\n    locales: { en },\n    // Default translator exists in lang service\n    t: undefined as any,\n  },\n  rtl: false,\n  theme: {\n    dark: false,\n    default: 'light',\n    disable: false,\n    options: {\n      cspNonce: undefined,\n      customProperties: undefined,\n      minifyTheme: undefined,\n      themeCache: undefined,\n      variations: true,\n    },\n    themes: {\n      light: {\n        primary: '#1976D2',\n        secondary: '#424242',\n        accent: '#82B1FF',\n        error: '#FF5252',\n        info: '#2196F3',\n        success: '#4CAF50',\n        warning: '#FB8C00',\n      },\n      dark: {\n        primary: '#2196F3',\n        secondary: '#424242',\n        accent: '#FF4081',\n        error: '#FF5252',\n        info: '#2196F3',\n        success: '#4CAF50',\n        warning: '#FB8C00',\n      },\n    },\n  },\n}\n","// Contracts\nimport { VuetifyServiceContract } from 'vuetify/types/services/index'\n\n// Types\nimport Vue from 'vue'\n\nexport class Service implements VuetifyServiceContract {\n  framework = {}\n\n  init (root: Vue, ssrContext?: object) {}\n}\n","// Preset\nimport { preset as Preset } from '../../presets/default'\n\n// Utilities\nimport { consoleWarn } from '../../util/console'\nimport { mergeDeep } from '../../util/helpers'\n\n// Types\nimport Vuetify from 'vuetify/types'\nimport { Service } from '../service'\nimport {\n  UserVuetifyPreset,\n  VuetifyPreset,\n} from 'vuetify/types/services/presets'\n\nexport class Presets extends Service {\n  static property: 'presets' = 'presets'\n\n  constructor (\n    parentPreset: Partial<UserVuetifyPreset>,\n    parent: Vuetify,\n  ) {\n    super()\n\n    // The default preset\n    const defaultPreset = mergeDeep({}, Preset)\n    // The user provided preset\n    const { userPreset } = parent\n    // The user provided global preset\n    const {\n      preset: globalPreset = {},\n      ...preset\n    } = userPreset\n\n    if (globalPreset.preset != null) {\n      consoleWarn('Global presets do not support the **preset** option, it can be safely omitted')\n    }\n\n    parent.preset = mergeDeep(\n      mergeDeep(defaultPreset, globalPreset),\n      preset\n    ) as VuetifyPreset\n  }\n}\n","// Extensions\nimport { Service } from '../service'\n\n// Types\nimport { TargetPropValues, TargetProp, Application as IApplication } from 'vuetify/types/services/application'\n\nexport class Application extends Service implements IApplication {\n  static property: 'application' = 'application'\n\n  bar = 0\n\n  top = 0\n\n  left = 0\n\n  insetFooter = 0\n\n  right = 0\n\n  bottom = 0\n\n  footer = 0\n\n  application: Dictionary<TargetPropValues> = {\n    bar: {},\n    top: {},\n    left: {},\n    insetFooter: {},\n    right: {},\n    bottom: {},\n    footer: {},\n  }\n\n  register (\n    uid: number,\n    location: TargetProp,\n    size: number\n  ) {\n    this.application[location][uid] = size\n\n    this.update(location)\n  }\n\n  unregister (uid: number, location: TargetProp) {\n    if (this.application[location][uid] == null) return\n\n    delete this.application[location][uid]\n    this.update(location)\n  }\n\n  update (location: TargetProp) {\n    this[location] = Object.values(this.application[location])\n      .reduce((acc: number, cur: number): number => (acc + cur), 0)\n  }\n}\n","// Extensions\nimport { Service } from '../service'\n\n// Types\nimport { VuetifyPreset } from 'vuetify/types/services/presets'\nimport { Breakpoint as IBreakpoint } from 'vuetify/types/services/breakpoint'\n\nexport class Breakpoint extends Service implements IBreakpoint {\n  public static property: 'breakpoint' = 'breakpoint'\n\n  // Public\n  public xs = false\n\n  public sm = false\n\n  public md = false\n\n  public lg = false\n\n  public xl = false\n\n  public xsOnly = false\n\n  public smOnly = false\n\n  public smAndDown = false\n\n  public smAndUp = false\n\n  public mdOnly = false\n\n  public mdAndDown = false\n\n  public mdAndUp = false\n\n  public lgOnly = false\n\n  public lgAndDown = false\n\n  public lgAndUp = false\n\n  public xlOnly = false\n\n  // Value is xs to match v2.x functionality\n  public name: IBreakpoint['name'] = 'xs'\n\n  public height = 0\n\n  public width = 0\n\n  // TODO: Add functionality to detect this dynamically in v3\n  // Value is true to match v2.x functionality\n  public mobile = true\n\n  public mobileBreakpoint: IBreakpoint['mobileBreakpoint']\n\n  public thresholds: IBreakpoint['thresholds']\n\n  public scrollBarWidth: IBreakpoint['scrollBarWidth']\n\n  private resizeTimeout = 0\n\n  constructor (preset: VuetifyPreset) {\n    super()\n\n    const {\n      mobileBreakpoint,\n      scrollBarWidth,\n      thresholds,\n    } = preset[Breakpoint.property]\n\n    this.mobileBreakpoint = mobileBreakpoint\n    this.scrollBarWidth = scrollBarWidth\n    this.thresholds = thresholds\n  }\n\n  public init () {\n    this.update()\n\n    /* istanbul ignore if */\n    if (typeof window === 'undefined') return\n\n    window.addEventListener(\n      'resize',\n      this.onResize.bind(this),\n      { passive: true }\n    )\n  }\n\n  /* eslint-disable-next-line max-statements */\n  public update (ssr = false) {\n    const height = ssr ? 0 : this.getClientHeight()\n    const width = ssr ? 0 : this.getClientWidth()\n\n    const xs = width < this.thresholds.xs\n    const sm = width < this.thresholds.sm && !xs\n    const md = width < (this.thresholds.md - this.scrollBarWidth) && !(sm || xs)\n    const lg = width < (this.thresholds.lg - this.scrollBarWidth) && !(md || sm || xs)\n    const xl = width >= (this.thresholds.lg - this.scrollBarWidth)\n\n    this.height = height\n    this.width = width\n\n    this.xs = xs\n    this.sm = sm\n    this.md = md\n    this.lg = lg\n    this.xl = xl\n\n    this.xsOnly = xs\n    this.smOnly = sm\n    this.smAndDown = (xs || sm) && !(md || lg || xl)\n    this.smAndUp = !xs && (sm || md || lg || xl)\n    this.mdOnly = md\n    this.mdAndDown = (xs || sm || md) && !(lg || xl)\n    this.mdAndUp = !(xs || sm) && (md || lg || xl)\n    this.lgOnly = lg\n    this.lgAndDown = (xs || sm || md || lg) && !xl\n    this.lgAndUp = !(xs || sm || md) && (lg || xl)\n    this.xlOnly = xl\n\n    switch (true) {\n      case (xs):\n        this.name = 'xs'\n        break\n      case (sm):\n        this.name = 'sm'\n        break\n      case (md):\n        this.name = 'md'\n        break\n      case (lg):\n        this.name = 'lg'\n        break\n      default:\n        this.name = 'xl'\n        break\n    }\n\n    if (typeof this.mobileBreakpoint === 'number') {\n      this.mobile = width < parseInt(this.mobileBreakpoint, 10)\n\n      return\n    }\n\n    const breakpoints = {\n      xs: 0,\n      sm: 1,\n      md: 2,\n      lg: 3,\n      xl: 4,\n    } as const\n\n    const current = breakpoints[this.name]\n    const max = breakpoints[this.mobileBreakpoint]\n\n    this.mobile = current <= max\n  }\n\n  private onResize () {\n    clearTimeout(this.resizeTimeout)\n\n    // Added debounce to match what\n    // v-resize used to do but was\n    // removed due to a memory leak\n    // https://github.com/vuetifyjs/vuetify/pull/2997\n    this.resizeTimeout = window.setTimeout(this.update.bind(this), 200)\n  }\n\n  // Cross-browser support as described in:\n  // https://stackoverflow.com/questions/1248081\n  private getClientWidth () {\n    /* istanbul ignore if */\n    if (typeof document === 'undefined') return 0 // SSR\n    return Math.max(\n      document.documentElement!.clientWidth,\n      window.innerWidth || 0\n    )\n  }\n\n  private getClientHeight () {\n    /* istanbul ignore if */\n    if (typeof document === 'undefined') return 0 // SSR\n    return Math.max(\n      document.documentElement!.clientHeight,\n      window.innerHeight || 0\n    )\n  }\n}\n","export type EasingFunction = (t: number) => number\n\n// linear\nexport const linear = (t: number) => t\n// accelerating from zero velocity\nexport const easeInQuad = (t: number) => t ** 2\n// decelerating to zero velocity\nexport const easeOutQuad = (t: number) => t * (2 - t)\n// acceleration until halfway, then deceleration\nexport const easeInOutQuad = (t: number) => (t < 0.5 ? 2 * t ** 2 : -1 + (4 - 2 * t) * t)\n// accelerating from zero velocity\nexport const easeInCubic = (t: number) => t ** 3\n// decelerating to zero velocity\nexport const easeOutCubic = (t: number) => --t ** 3 + 1\n// acceleration until halfway, then deceleration\nexport const easeInOutCubic = (t: number) => t < 0.5 ? 4 * t ** 3 : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1\n// accelerating from zero velocity\nexport const easeInQuart = (t: number) => t ** 4\n// decelerating to zero velocity\nexport const easeOutQuart = (t: number) => 1 - --t ** 4\n// acceleration until halfway, then deceleration\nexport const easeInOutQuart = (t: number) => (t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t)\n// accelerating from zero velocity\nexport const easeInQuint = (t: number) => t ** 5\n// decelerating to zero velocity\nexport const easeOutQuint = (t: number) => 1 + --t ** 5\n// acceleration until halfway, then deceleration\nexport const easeInOutQuint = (t: number) => t < 0.5 ? 16 * t ** 5 : 1 + 16 * --t ** 5\n","import Vue from 'vue'\n\n// Return target's cumulative offset from the top\nexport function getOffset (target: any): number {\n  if (typeof target === 'number') {\n    return target\n  }\n\n  let el = $(target)\n  if (!el) {\n    throw typeof target === 'string'\n      ? new Error(`Target element \"${target}\" not found.`)\n      : new TypeError(`Target must be a Number/Selector/HTMLElement/VueComponent, received ${type(target)} instead.`)\n  }\n\n  let totalOffset = 0\n  while (el) {\n    totalOffset += el.offsetTop\n    el = el.offsetParent as HTMLElement\n  }\n\n  return totalOffset\n}\n\nexport function getContainer (container: any): HTMLElement {\n  const el = $(container)\n\n  if (el) return el\n\n  throw typeof container === 'string'\n    ? new Error(`Container element \"${container}\" not found.`)\n    : new TypeError(`Container must be a Selector/HTMLElement/VueComponent, received ${type(container)} instead.`)\n}\n\nfunction type (el: any) {\n  return el == null ? el : el.constructor.name\n}\n\nfunction $ (el: any): HTMLElement | null {\n  if (typeof el === 'string') {\n    return document.querySelector<HTMLElement>(el)\n  } else if (el && el._isVue) {\n    return (el as Vue).$el as HTMLElement\n  } else if (el instanceof HTMLElement) {\n    return el\n  } else {\n    return null\n  }\n}\n","// Extensions\nimport { Service } from '../service'\n\n// Utilities\nimport * as easingPatterns from './easing-patterns'\nimport {\n  getContainer,\n  getOffset,\n} from './util'\n\n// Types\nimport { GoToOptions, VuetifyGoToTarget } from 'vuetify/types/services/goto'\n\nimport { VuetifyServiceContract } from 'vuetify/types/services'\n\nexport default function goTo (\n  _target: VuetifyGoToTarget,\n  _settings: GoToOptions = {}\n): Promise<number> {\n  const settings: GoToOptions = {\n    container: (document.scrollingElement as HTMLElement | null) || document.body || document.documentElement,\n    duration: 500,\n    offset: 0,\n    easing: 'easeInOutCubic',\n    appOffset: true,\n    ..._settings,\n  }\n  const container = getContainer(settings.container)\n\n  /* istanbul ignore else */\n  if (settings.appOffset && goTo.framework.application) {\n    const isDrawer = container.classList.contains('v-navigation-drawer')\n    const isClipped = container.classList.contains('v-navigation-drawer--clipped')\n    const { bar, top } = goTo.framework.application as any\n\n    settings.offset += bar\n    /* istanbul ignore else */\n    if (!isDrawer || isClipped) settings.offset += top\n  }\n\n  const startTime = performance.now()\n\n  let targetLocation: number\n  if (typeof _target === 'number') {\n    targetLocation = getOffset(_target) - settings.offset!\n  } else {\n    targetLocation = getOffset(_target) - getOffset(container) - settings.offset!\n  }\n\n  const startLocation = container.scrollTop\n  if (targetLocation === startLocation) return Promise.resolve(targetLocation)\n\n  const ease = typeof settings.easing === 'function'\n    ? settings.easing\n    : easingPatterns[settings.easing!]\n  /* istanbul ignore else */\n  if (!ease) throw new TypeError(`Easing function \"${settings.easing}\" not found.`)\n\n  // Cannot be tested properly in jsdom\n  /* istanbul ignore next */\n  return new Promise(resolve => requestAnimationFrame(function step (currentTime: number) {\n    const timeElapsed = currentTime - startTime\n    const progress = Math.abs(settings.duration ? Math.min(timeElapsed / settings.duration, 1) : 1)\n\n    container.scrollTop = Math.floor(startLocation + (targetLocation - startLocation) * ease(progress))\n\n    const clientHeight = container === document.body ? document.documentElement.clientHeight : container.clientHeight\n    const reachBottom = clientHeight + container.scrollTop >= container.scrollHeight\n    if (\n      progress === 1 ||\n      // Need to go lower but reach bottom\n      (targetLocation > container.scrollTop && reachBottom)\n    ) {\n      return resolve(targetLocation)\n    }\n\n    requestAnimationFrame(step)\n  }))\n}\n\ngoTo.framework = {} as Record<string, VuetifyServiceContract>\ngoTo.init = () => {}\n\nexport class Goto extends Service {\n  public static property: 'goTo' = 'goTo'\n\n  constructor () {\n    super()\n\n    return goTo\n  }\n}\n","import { VuetifyIcons } from 'vuetify/types/services/icons'\n\nconst icons: VuetifyIcons = {\n  complete: 'M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z',\n  cancel: 'M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z',\n  close: 'M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z',\n  delete: 'M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z', // delete (e.g. v-chip close)\n  clear: 'M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z',\n  success: 'M12,2C17.52,2 22,6.48 22,12C22,17.52 17.52,22 12,22C6.48,22 2,17.52 2,12C2,6.48 6.48,2 12,2M11,16.5L18,9.5L16.59,8.09L11,13.67L7.91,10.59L6.5,12L11,16.5Z',\n  info: 'M13,9H11V7H13M13,17H11V11H13M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z',\n  warning: 'M11,4.5H13V15.5H11V4.5M13,17.5V19.5H11V17.5H13Z',\n  error: 'M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z',\n  prev: 'M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z',\n  next: 'M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z',\n  checkboxOn: 'M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z',\n  checkboxOff: 'M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z',\n  checkboxIndeterminate: 'M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z',\n  delimiter: 'M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z', // for carousel\n  sort: 'M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z',\n  expand: 'M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z',\n  menu: 'M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z',\n  subgroup: 'M7,10L12,15L17,10H7Z',\n  dropdown: 'M7,10L12,15L17,10H7Z',\n  radioOn: 'M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,7C9.24,7 7,9.24 7,12C7,14.76 9.24,17 12,17C14.76,17 17,14.76 17,12C17,9.24 14.76,7 12,7Z',\n  radioOff: 'M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z',\n  edit: 'M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z',\n  ratingEmpty: 'M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z',\n  ratingFull: 'M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z',\n  ratingHalf: 'M12,15.4V6.1L13.71,10.13L18.09,10.5L14.77,13.39L15.76,17.67M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z',\n  loading: 'M19,8L15,12H18C18,15.31 15.31,18 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20C16.42,20 20,16.42 20,12H23M6,12C6,8.69 8.69,6 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4C7.58,4 4,7.58 4,12H1L5,16L9,12',\n  first: 'M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z',\n  last: 'M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z',\n  unfold: 'M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z',\n  file: 'M16.5,6V17.5C16.5,19.71 14.71,21.5 12.5,21.5C10.29,21.5 8.5,19.71 8.5,17.5V5C8.5,3.62 9.62,2.5 11,2.5C12.38,2.5 13.5,3.62 13.5,5V15.5C13.5,16.05 13.05,16.5 12.5,16.5C11.95,16.5 11.5,16.05 11.5,15.5V6H10V15.5C10,16.88 11.12,18 12.5,18C13.88,18 15,16.88 15,15.5V5C15,2.79 13.21,1 11,1C8.79,1 7,2.79 7,5V17.5C7,20.54 9.46,23 12.5,23C15.54,23 18,20.54 18,17.5V6H16.5Z',\n  plus: 'M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z',\n  minus: 'M19,13H5V11H19V13Z',\n}\n\nexport default icons\n","import { VuetifyIcons } from 'vuetify/types/services/icons'\n\nconst icons: VuetifyIcons = {\n  complete: 'check',\n  cancel: 'cancel',\n  close: 'close',\n  delete: 'cancel', // delete (e.g. v-chip close)\n  clear: 'clear',\n  success: 'check_circle',\n  info: 'info',\n  warning: 'priority_high',\n  error: 'warning',\n  prev: 'chevron_left',\n  next: 'chevron_right',\n  checkboxOn: 'check_box',\n  checkboxOff: 'check_box_outline_blank',\n  checkboxIndeterminate: 'indeterminate_check_box',\n  delimiter: 'fiber_manual_record', // for carousel\n  sort: 'arrow_upward',\n  expand: 'keyboard_arrow_down',\n  menu: 'menu',\n  subgroup: 'arrow_drop_down',\n  dropdown: 'arrow_drop_down',\n  radioOn: 'radio_button_checked',\n  radioOff: 'radio_button_unchecked',\n  edit: 'edit',\n  ratingEmpty: 'star_border',\n  ratingFull: 'star',\n  ratingHalf: 'star_half',\n  loading: 'cached',\n  first: 'first_page',\n  last: 'last_page',\n  unfold: 'unfold_more',\n  file: 'attach_file',\n  plus: 'add',\n  minus: 'remove',\n}\n\nexport default icons\n","import { VuetifyIcons } from 'vuetify/types/services/icons'\n\nconst icons: VuetifyIcons = {\n  complete: 'mdi-check',\n  cancel: 'mdi-close-circle',\n  close: 'mdi-close',\n  delete: 'mdi-close-circle', // delete (e.g. v-chip close)\n  clear: 'mdi-close',\n  success: 'mdi-check-circle',\n  info: 'mdi-information',\n  warning: 'mdi-exclamation',\n  error: 'mdi-alert',\n  prev: 'mdi-chevron-left',\n  next: 'mdi-chevron-right',\n  checkboxOn: 'mdi-checkbox-marked',\n  checkboxOff: 'mdi-checkbox-blank-outline',\n  checkboxIndeterminate: 'mdi-minus-box',\n  delimiter: 'mdi-circle', // for carousel\n  sort: 'mdi-arrow-up',\n  expand: 'mdi-chevron-down',\n  menu: 'mdi-menu',\n  subgroup: 'mdi-menu-down',\n  dropdown: 'mdi-menu-down',\n  radioOn: 'mdi-radiobox-marked',\n  radioOff: 'mdi-radiobox-blank',\n  edit: 'mdi-pencil',\n  ratingEmpty: 'mdi-star-outline',\n  ratingFull: 'mdi-star',\n  ratingHalf: 'mdi-star-half-full',\n  loading: 'mdi-cached',\n  first: 'mdi-page-first',\n  last: 'mdi-page-last',\n  unfold: 'mdi-unfold-more-horizontal',\n  file: 'mdi-paperclip',\n  plus: 'mdi-plus',\n  minus: 'mdi-minus',\n}\n\nexport default icons\n","import { VuetifyIcons } from 'vuetify/types/services/icons'\n\nconst icons: VuetifyIcons = {\n  complete: 'fas fa-check',\n  cancel: 'fas fa-times-circle',\n  close: 'fas fa-times',\n  delete: 'fas fa-times-circle', // delete (e.g. v-chip close)\n  clear: 'fas fa-times-circle', // delete (e.g. v-chip close)\n  success: 'fas fa-check-circle',\n  info: 'fas fa-info-circle',\n  warning: 'fas fa-exclamation',\n  error: 'fas fa-exclamation-triangle',\n  prev: 'fas fa-chevron-left',\n  next: 'fas fa-chevron-right',\n  checkboxOn: 'fas fa-check-square',\n  checkboxOff: 'far fa-square', // note 'far'\n  checkboxIndeterminate: 'fas fa-minus-square',\n  delimiter: 'fas fa-circle', // for carousel\n  sort: 'fas fa-sort-up',\n  expand: 'fas fa-chevron-down',\n  menu: 'fas fa-bars',\n  subgroup: 'fas fa-caret-down',\n  dropdown: 'fas fa-caret-down',\n  radioOn: 'far fa-dot-circle',\n  radioOff: 'far fa-circle',\n  edit: 'fas fa-edit',\n  ratingEmpty: 'far fa-star',\n  ratingFull: 'fas fa-star',\n  ratingHalf: 'fas fa-star-half',\n  loading: 'fas fa-sync',\n  first: 'fas fa-step-backward',\n  last: 'fas fa-step-forward',\n  unfold: 'fas fa-arrows-alt-v',\n  file: 'fas fa-paperclip',\n  plus: 'fas fa-plus',\n  minus: 'fas fa-minus',\n}\n\nexport default icons\n","import { VuetifyIcons } from 'vuetify/types/services/icons'\n\nconst icons: VuetifyIcons = {\n  complete: 'fa fa-check',\n  cancel: 'fa fa-times-circle',\n  close: 'fa fa-times',\n  delete: 'fa fa-times-circle', // delete (e.g. v-chip close)\n  clear: 'fa fa-times-circle', // delete (e.g. v-chip close)\n  success: 'fa fa-check-circle',\n  info: 'fa fa-info-circle',\n  warning: 'fa fa-exclamation',\n  error: 'fa fa-exclamation-triangle',\n  prev: 'fa fa-chevron-left',\n  next: 'fa fa-chevron-right',\n  checkboxOn: 'fa fa-check-square',\n  checkboxOff: 'fa fa-square-o',\n  checkboxIndeterminate: 'fa fa-minus-square',\n  delimiter: 'fa fa-circle', // for carousel\n  sort: 'fa fa-sort-up',\n  expand: 'fa fa-chevron-down',\n  menu: 'fa fa-bars',\n  subgroup: 'fa fa-caret-down',\n  dropdown: 'fa fa-caret-down',\n  radioOn: 'fa fa-dot-circle-o',\n  radioOff: 'fa fa-circle-o',\n  edit: 'fa fa-pencil',\n  ratingEmpty: 'fa fa-star-o',\n  ratingFull: 'fa fa-star',\n  ratingHalf: 'fa fa-star-half-o',\n  loading: 'fa fa-refresh',\n  first: 'fa fa-step-backward',\n  last: 'fa fa-step-forward',\n  unfold: 'fa fa-angle-double-down',\n  file: 'fa fa-paperclip',\n  plus: 'fa fa-plus',\n  minus: 'fa fa-minus',\n}\n\nexport default icons\n","import { VuetifyIcons } from 'vuetify/types/services/icons'\nimport { Component } from 'vue'\nimport icons from './fa'\n\nexport function convertToComponentDeclarations (\n  component: Component | string,\n  iconSet: VuetifyIcons,\n) {\n  const result: Partial<VuetifyIcons> = {}\n\n  for (const key in iconSet) {\n    result[key] = {\n      component,\n      props: {\n        icon: (iconSet[key] as string).split(' fa-'),\n      },\n    }\n  }\n\n  return result as VuetifyIcons\n}\n\nexport default convertToComponentDeclarations('font-awesome-icon', icons)\n","import mdiSvg from './mdi-svg'\nimport md from './md'\nimport mdi from './mdi'\nimport fa from './fa'\nimport fa4 from './fa4'\nimport faSvg from './fa-svg'\n\nexport default Object.freeze({\n  mdiSvg,\n  md,\n  mdi,\n  fa,\n  fa4,\n  faSvg,\n})\n","// Extensions\nimport { Service } from '../service'\n\n// Utilities\nimport { mergeDeep } from '../../util/helpers'\n\n// Types\nimport { VuetifyPreset } from 'vuetify/types/services/presets'\nimport { Icons as IIcons } from 'vuetify/types/services/icons'\n\n// Presets\nimport presets from './presets'\n\nexport class Icons extends Service implements IIcons {\n  static property: 'icons' = 'icons'\n\n  public iconfont: IIcons['iconfont']\n\n  public values: IIcons['values']\n\n  public component: IIcons['component']\n\n  constructor (preset: VuetifyPreset) {\n    super()\n\n    const {\n      iconfont,\n      values,\n      component,\n    } = preset[Icons.property]\n\n    this.component = component\n    this.iconfont = iconfont\n    this.values = mergeDeep(\n      presets[iconfont],\n      values\n    ) as IIcons['values']\n  }\n}\n","// Extensions\nimport { Service } from '../service'\n\n// Utilities\nimport { getObjectValueByPath } from '../../util/helpers'\nimport { consoleError, consoleWarn } from '../../util/console'\n\n// Types\nimport { VuetifyPreset } from 'vuetify/types/services/presets'\nimport {\n  VuetifyLocale,\n  Lang as ILang,\n} from 'vuetify/types/services/lang'\n\nconst LANG_PREFIX = '$vuetify.'\nconst fallback = Symbol('Lang fallback')\n\nfunction getTranslation (\n  locale: VuetifyLocale,\n  key: string,\n  usingDefault = false,\n  defaultLocale: VuetifyLocale\n): string {\n  const shortKey = key.replace(LANG_PREFIX, '')\n  let translation = getObjectValueByPath(locale, shortKey, fallback) as string | typeof fallback\n\n  if (translation === fallback) {\n    if (usingDefault) {\n      consoleError(`Translation key \"${shortKey}\" not found in fallback`)\n      translation = key\n    } else {\n      consoleWarn(`Translation key \"${shortKey}\" not found, falling back to default`)\n      translation = getTranslation(defaultLocale, key, true, defaultLocale)\n    }\n  }\n\n  return translation\n}\n\nexport class Lang extends Service implements ILang {\n  static property: 'lang' = 'lang'\n\n  public current: ILang['current']\n\n  public defaultLocale = 'en'\n\n  public locales: ILang['locales']\n\n  private translator: ILang['t']\n\n  constructor (preset: VuetifyPreset) {\n    super()\n\n    const {\n      current,\n      locales,\n      t,\n    } = preset[Lang.property]\n\n    this.current = current\n    this.locales = locales\n    this.translator = t || this.defaultTranslator\n  }\n\n  public currentLocale (key: string) {\n    const translation = this.locales[this.current]\n    const defaultLocale = this.locales[this.defaultLocale]\n\n    return getTranslation(translation, key, false, defaultLocale)\n  }\n\n  public t (key: string, ...params: any[]) {\n    if (!key.startsWith(LANG_PREFIX)) return this.replace(key, params)\n\n    return this.translator(key, ...params)\n  }\n\n  private defaultTranslator (key: string, ...params: any[]) {\n    return this.replace(this.currentLocale(key), params)\n  }\n\n  private replace (str: string, params: any[]) {\n    return str.replace(/\\{(\\d+)\\}/g, (match: string, index: string) => {\n      /* istanbul ignore next */\n      return String(params[+index])\n    })\n  }\n}\n","import { ColorInt, XYZ } from '../colorUtils'\nimport { clamp } from '../../util/helpers'\n\n// For converting XYZ to sRGB\nconst srgbForwardMatrix = [\n  [3.2406, -1.5372, -0.4986],\n  [-0.9689, 1.8758, 0.0415],\n  [0.0557, -0.2040, 1.0570],\n]\n\n// Forward gamma adjust\nconst srgbForwardTransform = (C: number): number => (\n  C <= 0.0031308\n    ? C * 12.92\n    : 1.055 * C ** (1 / 2.4) - 0.055\n)\n\n// For converting sRGB to XYZ\nconst srgbReverseMatrix = [\n  [0.4124, 0.3576, 0.1805],\n  [0.2126, 0.7152, 0.0722],\n  [0.0193, 0.1192, 0.9505],\n]\n\n// Reverse gamma adjust\nconst srgbReverseTransform = (C: number): number => (\n  C <= 0.04045\n    ? C / 12.92\n    : ((C + 0.055) / 1.055) ** 2.4\n)\n\nexport function fromXYZ (xyz: XYZ): ColorInt {\n  const rgb = Array(3)\n  const transform = srgbForwardTransform\n  const matrix = srgbForwardMatrix\n\n  // Matrix transform, then gamma adjustment\n  for (let i = 0; i < 3; ++i) {\n    rgb[i] = Math.round(clamp(transform(\n      matrix[i][0] * xyz[0] +\n      matrix[i][1] * xyz[1] +\n      matrix[i][2] * xyz[2]\n    )) * 255)\n  }\n\n  // Rescale back to [0, 255]\n  return (rgb[0] << 16) + (rgb[1] << 8) + (rgb[2] << 0)\n}\n\nexport function toXYZ (rgb: ColorInt): XYZ {\n  const xyz: XYZ = [0, 0, 0]\n  const transform = srgbReverseTransform\n  const matrix = srgbReverseMatrix\n\n  // Rescale from [0, 255] to [0, 1] then adjust sRGB gamma to linear RGB\n  const r = transform((rgb >> 16 & 0xff) / 255)\n  const g = transform((rgb >> 8 & 0xff) / 255)\n  const b = transform((rgb >> 0 & 0xff) / 255)\n\n  // Matrix color space transform\n  for (let i = 0; i < 3; ++i) {\n    xyz[i] = matrix[i][0] * r + matrix[i][1] * g + matrix[i][2] * b\n  }\n\n  return xyz\n}\n","import { XYZ, LAB } from '../colorUtils'\n\nconst delta = 0.20689655172413793 // 629\n\nconst cielabForwardTransform = (t: number): number => (\n  t > delta ** 3\n    ? Math.cbrt(t)\n    : (t / (3 * delta ** 2)) + 4 / 29\n)\n\nconst cielabReverseTransform = (t: number): number => (\n  t > delta\n    ? t ** 3\n    : (3 * delta ** 2) * (t - 4 / 29)\n)\n\nexport function fromXYZ (xyz: XYZ): LAB {\n  const transform = cielabForwardTransform\n  const transformedY = transform(xyz[1])\n\n  return [\n    116 * transformedY - 16,\n    500 * (transform(xyz[0] / 0.95047) - transformedY),\n    200 * (transformedY - transform(xyz[2] / 1.08883)),\n  ]\n}\n\nexport function toXYZ (lab: LAB): XYZ {\n  const transform = cielabReverseTransform\n  const Ln = (lab[0] + 16) / 116\n  return [\n    transform(Ln + lab[1] / 500) * 0.95047,\n    transform(Ln),\n    transform(Ln - lab[2] / 200) * 1.08883,\n  ]\n}\n","import { keys } from '../../util/helpers'\nimport { colorToInt, intToHex, colorToHex, ColorInt } from '../../util/colorUtils'\nimport * as sRGB from '../../util/color/transformSRGB'\nimport * as LAB from '../../util/color/transformCIELAB'\nimport {\n  VuetifyParsedTheme,\n  VuetifyThemeItem,\n} from 'vuetify/types/services/theme'\n\nexport function parse (\n  theme: Record<string, VuetifyThemeItem>,\n  isItem = false,\n  variations = true,\n): VuetifyParsedTheme {\n  const { anchor, ...variant } = theme\n  const colors = Object.keys(variant)\n  const parsedTheme: any = {}\n\n  for (let i = 0; i < colors.length; ++i) {\n    const name = colors[i]\n    const value = theme[name]\n\n    if (value == null) continue\n\n    if (!variations) {\n      parsedTheme[name] = { base: intToHex(colorToInt(value)) }\n    } else if (isItem) {\n      /* istanbul ignore else */\n      if (name === 'base' || name.startsWith('lighten') || name.startsWith('darken')) {\n        parsedTheme[name] = colorToHex(value)\n      }\n    } else if (typeof value === 'object') {\n      parsedTheme[name] = parse(value, true, variations)\n    } else {\n      parsedTheme[name] = genVariations(name, colorToInt(value))\n    }\n  }\n\n  if (!isItem) {\n    parsedTheme.anchor = anchor || parsedTheme.base || parsedTheme.primary.base\n  }\n\n  return parsedTheme\n}\n\n/**\n * Generate the CSS for a base color (.primary)\n */\nconst genBaseColor = (name: string, value: string): string => {\n  return `\n.v-application .${name} {\n  background-color: ${value} !important;\n  border-color: ${value} !important;\n}\n.v-application .${name}--text {\n  color: ${value} !important;\n  caret-color: ${value} !important;\n}`\n}\n\n/**\n * Generate the CSS for a variant color (.primary.darken-2)\n */\nconst genVariantColor = (name: string, variant: string, value: string): string => {\n  const [type, n] = variant.split(/(\\d)/, 2)\n  return `\n.v-application .${name}.${type}-${n} {\n  background-color: ${value} !important;\n  border-color: ${value} !important;\n}\n.v-application .${name}--text.text--${type}-${n} {\n  color: ${value} !important;\n  caret-color: ${value} !important;\n}`\n}\n\nconst genColorVariableName = (name: string, variant = 'base'): string => `--v-${name}-${variant}`\n\nconst genColorVariable = (name: string, variant = 'base'): string => `var(${genColorVariableName(name, variant)})`\n\nexport function genStyles (theme: VuetifyParsedTheme, cssVar = false): string {\n  const { anchor, ...variant } = theme\n  const colors = Object.keys(variant)\n\n  if (!colors.length) return ''\n\n  let variablesCss = ''\n  let css = ''\n\n  const aColor = cssVar ? genColorVariable('anchor') : anchor\n  css += `.v-application a { color: ${aColor}; }`\n  cssVar && (variablesCss += `  ${genColorVariableName('anchor')}: ${anchor};\\n`)\n\n  for (let i = 0; i < colors.length; ++i) {\n    const name = colors[i]\n    const value = theme[name]\n\n    css += genBaseColor(name, cssVar ? genColorVariable(name) : value.base)\n    cssVar && (variablesCss += `  ${genColorVariableName(name)}: ${value.base};\\n`)\n\n    const variants = keys(value)\n    for (let i = 0; i < variants.length; ++i) {\n      const variant = variants[i]\n      const variantValue = value[variant]\n      if (variant === 'base') continue\n\n      css += genVariantColor(name, variant, cssVar ? genColorVariable(name, variant) : variantValue)\n      cssVar && (variablesCss += `  ${genColorVariableName(name, variant)}: ${variantValue};\\n`)\n    }\n  }\n\n  if (cssVar) {\n    variablesCss = `:root {\\n${variablesCss}}\\n\\n`\n  }\n\n  return variablesCss + css\n}\n\nexport function genVariations (name: string, value: ColorInt): Record<string, string> {\n  const values: Record<string, string> = {\n    base: intToHex(value),\n  }\n\n  for (let i = 5; i > 0; --i) {\n    values[`lighten${i}`] = intToHex(lighten(value, i))\n  }\n\n  for (let i = 1; i <= 4; ++i) {\n    values[`darken${i}`] = intToHex(darken(value, i))\n  }\n\n  return values\n}\n\nexport function lighten (value: ColorInt, amount: number): ColorInt {\n  const lab = LAB.fromXYZ(sRGB.toXYZ(value))\n  lab[0] = lab[0] + amount * 10\n  return sRGB.fromXYZ(LAB.toXYZ(lab))\n}\n\nexport function darken (value: ColorInt, amount: number): ColorInt {\n  const lab = LAB.fromXYZ(sRGB.toXYZ(value))\n  lab[0] = lab[0] - amount * 10\n  return sRGB.fromXYZ(LAB.toXYZ(lab))\n}\n","/* eslint-disable no-multi-spaces */\n// Extensions\nimport { Service } from '../service'\n\n// Utilities\nimport * as ThemeUtils from './utils'\nimport { getNestedValue } from '../../util/helpers'\n\n// Types\nimport Vue from 'vue'\nimport { VuetifyPreset } from 'vuetify/types/services/presets'\nimport {\n  VuetifyParsedTheme,\n  VuetifyThemes,\n  VuetifyThemeVariant,\n  Theme as ITheme,\n} from 'vuetify/types/services/theme'\n\nexport class Theme extends Service {\n  static property: 'theme' = 'theme'\n\n  public disabled = false\n\n  public options: ITheme['options']\n\n  public styleEl?: HTMLStyleElement\n\n  public themes: VuetifyThemes\n\n  public defaults: VuetifyThemes\n\n  private isDark = null as boolean | null\n\n  private unwatch = null as (() => void) | null\n\n  private vueMeta = null as any | null\n\n  constructor (preset: VuetifyPreset) {\n    super()\n\n    const {\n      dark,\n      disable,\n      options,\n      themes,\n    } = preset[Theme.property]\n\n    this.dark = Boolean(dark)\n    this.defaults = this.themes = themes\n    this.options = options\n\n    if (disable) {\n      this.disabled = true\n\n      return\n    }\n\n    this.themes = {\n      dark: this.fillVariant(themes.dark, true),\n      light: this.fillVariant(themes.light, false),\n    }\n  }\n\n  // When setting css, check for element and apply new values\n  /* eslint-disable-next-line accessor-pairs */\n  set css (val: string) {\n    if (this.vueMeta) {\n      if (this.isVueMeta23) {\n        this.applyVueMeta23()\n      }\n      return\n    }\n    this.checkOrCreateStyleElement() && (this.styleEl!.innerHTML = val)\n  }\n\n  set dark (val: boolean) {\n    const oldDark = this.isDark\n\n    this.isDark = val\n    // Only apply theme after dark\n    // has already been set before\n    oldDark != null && this.applyTheme()\n  }\n\n  get dark () {\n    return Boolean(this.isDark)\n  }\n\n  // Apply current theme default\n  // only called on client side\n  public applyTheme (): void {\n    if (this.disabled) return this.clearCss()\n\n    this.css = this.generatedStyles\n  }\n\n  public clearCss (): void {\n    this.css = ''\n  }\n\n  // Initialize theme for SSR and SPA\n  // Attach to ssrContext head or\n  // apply new theme to document\n  public init (root: Vue, ssrContext?: any): void {\n    if (this.disabled) return\n\n    /* istanbul ignore else */\n    if ((root as any).$meta) {\n      this.initVueMeta(root)\n    } else if (ssrContext) {\n      this.initSSR(ssrContext)\n    }\n\n    this.initTheme(root)\n  }\n\n  // Allows for you to set target theme\n  public setTheme (theme: 'light' | 'dark', value: object) {\n    this.themes[theme] = Object.assign(this.themes[theme], value)\n    this.applyTheme()\n  }\n\n  // Reset theme defaults\n  public resetThemes () {\n    this.themes.light = Object.assign({}, this.defaults.light)\n    this.themes.dark = Object.assign({}, this.defaults.dark)\n    this.applyTheme()\n  }\n\n  // Check for existence of style element\n  private checkOrCreateStyleElement (): boolean {\n    this.styleEl = document.getElementById('vuetify-theme-stylesheet') as HTMLStyleElement\n\n    /* istanbul ignore next */\n    if (this.styleEl) return true\n\n    this.genStyleElement() // If doesn't have it, create it\n\n    return Boolean(this.styleEl)\n  }\n\n  private fillVariant (\n    theme: Partial<VuetifyThemeVariant> = {},\n    dark: boolean\n  ): VuetifyThemeVariant {\n    const defaultTheme = this.themes[dark ? 'dark' : 'light']\n\n    return Object.assign({},\n      defaultTheme,\n      theme\n    )\n  }\n\n  // Generate the style element\n  // if applicable\n  private genStyleElement (): void {\n    /* istanbul ignore if */\n    if (typeof document === 'undefined') return\n\n    /* istanbul ignore next */\n    this.styleEl = document.createElement('style')\n    this.styleEl.type = 'text/css'\n    this.styleEl.id = 'vuetify-theme-stylesheet'\n\n    if (this.options.cspNonce) {\n      this.styleEl.setAttribute('nonce', this.options.cspNonce)\n    }\n\n    document.head.appendChild(this.styleEl)\n  }\n\n  private initVueMeta (root: any) {\n    this.vueMeta = root.$meta()\n    if (this.isVueMeta23) {\n      // vue-meta needs to apply after mounted()\n      root.$nextTick(() => {\n        this.applyVueMeta23()\n      })\n      return\n    }\n\n    const metaKeyName = typeof this.vueMeta.getOptions === 'function' ? this.vueMeta.getOptions().keyName : 'metaInfo'\n    const metaInfo = root.$options[metaKeyName] || {}\n\n    root.$options[metaKeyName] = () => {\n      metaInfo.style = metaInfo.style || []\n\n      const vuetifyStylesheet = metaInfo.style.find((s: any) => s.id === 'vuetify-theme-stylesheet')\n\n      if (!vuetifyStylesheet) {\n        metaInfo.style.push({\n          cssText: this.generatedStyles,\n          type: 'text/css',\n          id: 'vuetify-theme-stylesheet',\n          nonce: (this.options || {}).cspNonce,\n        })\n      } else {\n        vuetifyStylesheet.cssText = this.generatedStyles\n      }\n\n      return metaInfo\n    }\n  }\n\n  private applyVueMeta23 () {\n    const { set } = this.vueMeta.addApp('vuetify')\n\n    set({\n      style: [{\n        cssText: this.generatedStyles,\n        type: 'text/css',\n        id: 'vuetify-theme-stylesheet',\n        nonce: this.options.cspNonce,\n      }],\n    })\n  }\n\n  private initSSR (ssrContext?: any) {\n    // SSR\n    const nonce = this.options.cspNonce ? ` nonce=\"${this.options.cspNonce}\"` : ''\n    ssrContext.head = ssrContext.head || ''\n    ssrContext.head += `<style type=\"text/css\" id=\"vuetify-theme-stylesheet\"${nonce}>${this.generatedStyles}</style>`\n  }\n\n  private initTheme (root: Vue) {\n    // Only watch for reactivity on client side\n    if (typeof document === 'undefined') return\n\n    // If we get here somehow, ensure\n    // existing instance is removed\n    if (this.unwatch) {\n      this.unwatch()\n      this.unwatch = null\n    }\n\n    // TODO: Update to use RFC if merged\n    // https://github.com/vuejs/rfcs/blob/advanced-reactivity-api/active-rfcs/0000-advanced-reactivity-api.md\n    root.$once('hook:created', () => {\n      const obs = Vue.observable({ themes: this.themes })\n      this.unwatch = root.$watch(() => obs.themes, () => this.applyTheme(), { deep: true })\n    })\n    this.applyTheme()\n  }\n\n  get currentTheme () {\n    const target = this.dark ? 'dark' : 'light'\n\n    return this.themes[target]\n  }\n\n  get generatedStyles (): string {\n    const theme = this.parsedTheme\n    /* istanbul ignore next */\n    const options = this.options || {}\n    let css\n\n    if (options.themeCache != null) {\n      css = options.themeCache.get(theme)\n      /* istanbul ignore if */\n      if (css != null) return css\n    }\n\n    css = ThemeUtils.genStyles(theme, options.customProperties)\n\n    if (options.minifyTheme != null) {\n      css = options.minifyTheme(css)\n    }\n\n    if (options.themeCache != null) {\n      options.themeCache.set(theme, css)\n    }\n\n    return css\n  }\n\n  get parsedTheme (): VuetifyParsedTheme {\n    return ThemeUtils.parse(\n      this.currentTheme || {},\n      undefined,\n      getNestedValue(this.options, ['variations'], true)\n    )\n  }\n\n  // Is using v2.3 of vue-meta\n  // https://github.com/nuxt/vue-meta/releases/tag/v2.3.0\n  private get isVueMeta23 (): boolean {\n    return typeof this.vueMeta.addApp === 'function'\n  }\n}\n","import { install } from './install'\n\n// Types\nimport Vue from 'vue'\nimport {\n  UserVuetifyPreset,\n  VuetifyPreset,\n} from 'vuetify/types/services/presets'\nimport {\n  VuetifyService,\n  VuetifyServiceContract,\n} from 'vuetify/types/services'\n\n// Services\nimport * as services from './services'\n\nexport default class Vuetify {\n  static install = install\n\n  static installed = false\n\n  static version = __VUETIFY_VERSION__\n\n  static config = {\n    silent: false,\n  }\n\n  public framework: Dictionary<VuetifyServiceContract> = {\n    isHydrating: false,\n  } as any\n\n  public installed: string[] = []\n\n  public preset = {} as VuetifyPreset\n\n  public userPreset: UserVuetifyPreset = {}\n\n  constructor (userPreset: UserVuetifyPreset = {}) {\n    this.userPreset = userPreset\n\n    this.use(services.Presets)\n    this.use(services.Application)\n    this.use(services.Breakpoint)\n    this.use(services.Goto)\n    this.use(services.Icons)\n    this.use(services.Lang)\n    this.use(services.Theme)\n  }\n\n  // Called on the new vuetify instance\n  // bootstrap in install beforeCreate\n  // Exposes ssrContext if available\n  init (root: Vue, ssrContext?: object) {\n    this.installed.forEach(property => {\n      const service = this.framework[property]\n\n      service.framework = this.framework\n\n      service.init(root, ssrContext)\n    })\n\n    // rtl is not installed and\n    // will never be called by\n    // the init process\n    this.framework.rtl = Boolean(this.preset.rtl) as any\n  }\n\n  // Instantiate a VuetifyService\n  use (Service: VuetifyService) {\n    const property = Service.property\n\n    if (this.installed.includes(property)) return\n\n    // TODO maybe a specific type for arg 2?\n    this.framework[property] = new Service(this.preset, this as any)\n    this.installed.push(property)\n  }\n}\n","import { factory as PositionableFactory } from '../positionable'\nimport { TargetProp } from 'vuetify/types/services/application'\n\n// Util\nimport mixins from '../../util/mixins'\n\nexport default function applicationable (value: TargetProp, events: string[] = []) {\n  /* @vue/component */\n  return mixins(PositionableFactory(['absolute', 'fixed'])).extend({\n    name: 'applicationable',\n\n    props: {\n      app: Boolean,\n    },\n\n    computed: {\n      applicationProperty (): TargetProp {\n        return value\n      },\n    },\n\n    watch: {\n      // If previous value was app\n      // reset the provided prop\n      app (x: boolean, prev: boolean) {\n        prev\n          ? this.removeApplication(true)\n          : this.callUpdate()\n      },\n      applicationProperty (newVal, oldVal) {\n        this.$vuetify.application.unregister(this._uid, oldVal)\n      },\n    },\n\n    activated () {\n      this.callUpdate()\n    },\n\n    created () {\n      for (let i = 0, length = events.length; i < length; i++) {\n        this.$watch(events[i], this.callUpdate)\n      }\n      this.callUpdate()\n    },\n\n    mounted () {\n      this.callUpdate()\n    },\n\n    deactivated () {\n      this.removeApplication()\n    },\n\n    destroyed () {\n      this.removeApplication()\n    },\n\n    methods: {\n      callUpdate () {\n        if (!this.app) return\n\n        this.$vuetify.application.register(\n          this._uid,\n          this.applicationProperty,\n          this.updateApplication()\n        )\n      },\n      removeApplication (force = false) {\n        if (!force && !this.app) return\n\n        this.$vuetify.application.unregister(\n          this._uid,\n          this.applicationProperty\n        )\n      },\n      updateApplication: () => 0,\n    },\n  })\n}\n","import Vue, { WatchHandler } from 'vue'\n\n/**\n * This mixin provides `attrs$` and `listeners$` to work around\n * vue bug https://github.com/vuejs/vue/issues/10115\n */\n\nfunction makeWatcher (property: string): ThisType<Vue> & WatchHandler<any> {\n  return function (this: Vue, val, oldVal) {\n    for (const attr in oldVal) {\n      if (!Object.prototype.hasOwnProperty.call(val, attr)) {\n        this.$delete(this.$data[property], attr)\n      }\n    }\n    for (const attr in val) {\n      this.$set(this.$data[property], attr, val[attr])\n    }\n  }\n}\n\nexport default Vue.extend({\n  data: () => ({\n    attrs$: {} as Dictionary<string>,\n    listeners$: {} as Dictionary<Function | Function[]>,\n  }),\n\n  created () {\n    // Work around unwanted re-renders: https://github.com/vuejs/vue/issues/10115\n    // Make sure to use `attrs$` instead of `$attrs` (confusing right?)\n    this.$watch('$attrs', makeWatcher('attrs$'), { immediate: true })\n    this.$watch('$listeners', makeWatcher('listeners$'), { immediate: true })\n  },\n})\n","// Utilities\nimport { removed } from '../../util/console'\n\n// Types\nimport Vue, { VNode } from 'vue'\ninterface Toggleable extends Vue {\n  isActive?: boolean\n}\n\n/**\n * Bootable\n * @mixin\n *\n * Used to add lazy content functionality to components\n * Looks for change in \"isActive\" to automatically boot\n * Otherwise can be set manually\n */\n/* @vue/component */\nexport default Vue.extend<Vue & Toggleable>().extend({\n  name: 'bootable',\n\n  props: {\n    eager: Boolean,\n  },\n\n  data: () => ({\n    isBooted: false,\n  }),\n\n  computed: {\n    hasContent (): boolean | undefined {\n      return this.isBooted || this.eager || this.isActive\n    },\n  },\n\n  watch: {\n    isActive () {\n      this.isBooted = true\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if ('lazy' in this.$attrs) {\n      removed('lazy', this)\n    }\n  },\n\n  methods: {\n    showLazyContent (content?: () => VNode[]): VNode[] {\n      return (this.hasContent && content) ? content() : [this.$createElement()]\n    },\n  },\n})\n","import Vue from 'vue'\nimport { VNodeData } from 'vue/types/vnode'\nimport { consoleError } from '../../util/console'\nimport { isCssColor } from '../../util/colorUtils'\n\nexport default Vue.extend({\n  name: 'colorable',\n\n  props: {\n    color: String,\n  },\n\n  methods: {\n    setBackgroundColor (color?: string | false, data: VNodeData = {}): VNodeData {\n      if (typeof data.style === 'string') {\n        // istanbul ignore next\n        consoleError('style must be an object', this)\n        // istanbul ignore next\n        return data\n      }\n      if (typeof data.class === 'string') {\n        // istanbul ignore next\n        consoleError('class must be an object', this)\n        // istanbul ignore next\n        return data\n      }\n      if (isCssColor(color)) {\n        data.style = {\n          ...data.style as object,\n          'background-color': `${color}`,\n          'border-color': `${color}`,\n        }\n      } else if (color) {\n        data.class = {\n          ...data.class,\n          [color]: true,\n        }\n      }\n\n      return data\n    },\n\n    setTextColor (color?: string | false, data: VNodeData = {}): VNodeData {\n      if (typeof data.style === 'string') {\n        // istanbul ignore next\n        consoleError('style must be an object', this)\n        // istanbul ignore next\n        return data\n      }\n      if (typeof data.class === 'string') {\n        // istanbul ignore next\n        consoleError('class must be an object', this)\n        // istanbul ignore next\n        return data\n      }\n      if (isCssColor(color)) {\n        data.style = {\n          ...data.style as object,\n          color: `${color}`,\n          'caret-color': `${color}`,\n        }\n      } else if (color) {\n        const [colorName, colorModifier] = color.toString().trim().split(' ', 2) as (string | undefined)[]\n        data.class = {\n          ...data.class,\n          [colorName + '--text']: true,\n        }\n        if (colorModifier) {\n          data.class['text--' + colorModifier] = true\n        }\n      }\n      return data\n    },\n  },\n})\n","import Vue from 'vue'\nimport { PropValidator } from 'vue/types/options'\nimport { deepEqual } from '../../util/helpers'\n\nexport default Vue.extend({\n  name: 'comparable',\n  props: {\n    valueComparator: {\n      type: Function,\n      default: deepEqual,\n    } as PropValidator<typeof deepEqual>,\n  },\n})\n","import Vue from 'vue'\n\nimport mixins from '../../util/mixins'\nimport { VOverlay } from '../../components/VOverlay'\n\ninterface options extends Vue {\n  $el: HTMLElement\n  $refs: {\n    content: HTMLElement\n  }\n  overlay?: InstanceType<typeof VOverlay>\n}\n\ninterface DependentInstance extends Vue {\n  isActive?: boolean\n  isDependent?: boolean\n}\n\nfunction searchChildren (children: Vue[]): DependentInstance[] {\n  const results = []\n  for (let index = 0; index < children.length; index++) {\n    const child = children[index] as DependentInstance\n    if (child.isActive && child.isDependent) {\n      results.push(child)\n    } else {\n      results.push(...searchChildren(child.$children))\n    }\n  }\n\n  return results\n}\n\n/* @vue/component */\nexport default mixins<options>().extend({\n  name: 'dependent',\n\n  data () {\n    return {\n      closeDependents: true,\n      isActive: false,\n      isDependent: true,\n    }\n  },\n\n  watch: {\n    isActive (val) {\n      if (val) return\n\n      const openDependents = this.getOpenDependents()\n      for (let index = 0; index < openDependents.length; index++) {\n        openDependents[index].isActive = false\n      }\n    },\n  },\n\n  methods: {\n    getOpenDependents (): any[] {\n      if (this.closeDependents) return searchChildren(this.$children)\n\n      return []\n    },\n    getOpenDependentElements (): HTMLElement[] {\n      const result = []\n      const openDependents = this.getOpenDependents()\n\n      for (let index = 0; index < openDependents.length; index++) {\n        result.push(...openDependents[index].getClickableDependentElements())\n      }\n\n      return result\n    },\n    getClickableDependentElements (): HTMLElement[] {\n      const result = [this.$el]\n      if (this.$refs.content) result.push(this.$refs.content)\n      if (this.overlay) result.push(this.overlay.$el as HTMLElement)\n      result.push(...this.getOpenDependentElements())\n\n      return result\n    },\n  },\n})\n","import Vue from 'vue'\n\nexport default Vue.extend({\n  name: 'elevatable',\n\n  props: {\n    elevation: [Number, String],\n  },\n\n  computed: {\n    computedElevation (): string | number | undefined {\n      return this.elevation\n    },\n    elevationClasses (): Record<string, boolean> {\n      const elevation = this.computedElevation\n\n      if (elevation == null) return {}\n      if (isNaN(parseInt(elevation))) return {}\n      return { [`elevation-${this.elevation}`]: true }\n    },\n  },\n})\n","// Mixins\nimport { Registrable, inject as RegistrableInject } from '../registrable'\n\n// Utilities\nimport { ExtractVue } from '../../util/mixins'\nimport { VueConstructor } from 'vue'\nimport { PropValidator } from 'vue/types/options'\n\nexport type Groupable<T extends string, C extends VueConstructor | null = null> = VueConstructor<ExtractVue<Registrable<T, C>> & {\n  activeClass: string\n  isActive: boolean\n  disabled: boolean\n  groupClasses: object\n  toggle (): void\n}>\n\nexport function factory<T extends string, C extends VueConstructor | null = null> (\n  namespace: T,\n  child?: string,\n  parent?: string\n): Groupable<T, C> {\n  return RegistrableInject<T, C>(namespace, child, parent).extend({\n    name: 'groupable',\n\n    props: {\n      activeClass: {\n        type: String,\n        default (): string | undefined {\n          if (!this[namespace]) return undefined\n\n          return this[namespace].activeClass\n        },\n      } as any as PropValidator<string>,\n      disabled: Boolean,\n    },\n\n    data () {\n      return {\n        isActive: false,\n      }\n    },\n\n    computed: {\n      groupClasses (): object {\n        if (!this.activeClass) return {}\n\n        return {\n          [this.activeClass]: this.isActive,\n        }\n      },\n    },\n\n    created () {\n      this[namespace] && (this[namespace] as any).register(this)\n    },\n\n    beforeDestroy () {\n      this[namespace] && (this[namespace] as any).unregister(this)\n    },\n\n    methods: {\n      toggle () {\n        this.$emit('change')\n      },\n    },\n  })\n}\n\n/* eslint-disable-next-line @typescript-eslint/no-redeclare */\nconst Groupable = factory('itemGroup')\n\nexport default Groupable\n","import './VProgressLinear.sass'\n\n// Components\nimport {\n  VFadeTransition,\n  VSlideXTransition,\n} from '../transitions'\n\n// Directives\nimport intersect from '../../directives/intersect'\n\n// Mixins\nimport Colorable from '../../mixins/colorable'\nimport { factory as PositionableFactory } from '../../mixins/positionable'\nimport Proxyable from '../../mixins/proxyable'\nimport Themeable from '../../mixins/themeable'\n\n// Utilities\nimport { convertToUnit, getSlot } from '../../util/helpers'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { FunctionalComponentOptions } from 'vue/types'\nimport { VNode } from 'vue'\n\nconst baseMixins = mixins(\n  Colorable,\n  PositionableFactory(['absolute', 'fixed', 'top', 'bottom']),\n  Proxyable,\n  Themeable\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-progress-linear',\n\n  directives: { intersect },\n\n  props: {\n    active: {\n      type: Boolean,\n      default: true,\n    },\n    backgroundColor: {\n      type: String,\n      default: null,\n    },\n    backgroundOpacity: {\n      type: [Number, String],\n      default: null,\n    },\n    bufferValue: {\n      type: [Number, String],\n      default: 100,\n    },\n    color: {\n      type: String,\n      default: 'primary',\n    },\n    height: {\n      type: [Number, String],\n      default: 4,\n    },\n    indeterminate: Boolean,\n    query: Boolean,\n    reverse: Boolean,\n    rounded: Boolean,\n    stream: Boolean,\n    striped: Boolean,\n    value: {\n      type: [Number, String],\n      default: 0,\n    },\n  },\n\n  data () {\n    return {\n      internalLazyValue: this.value || 0,\n      isVisible: true,\n    }\n  },\n\n  computed: {\n    __cachedBackground (): VNode {\n      return this.$createElement('div', this.setBackgroundColor(this.backgroundColor || this.color, {\n        staticClass: 'v-progress-linear__background',\n        style: this.backgroundStyle,\n      }))\n    },\n    __cachedBar (): VNode {\n      return this.$createElement(this.computedTransition, [this.__cachedBarType])\n    },\n    __cachedBarType (): VNode {\n      return this.indeterminate ? this.__cachedIndeterminate : this.__cachedDeterminate\n    },\n    __cachedBuffer (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-progress-linear__buffer',\n        style: this.styles,\n      })\n    },\n    __cachedDeterminate (): VNode {\n      return this.$createElement('div', this.setBackgroundColor(this.color, {\n        staticClass: `v-progress-linear__determinate`,\n        style: {\n          width: convertToUnit(this.normalizedValue, '%'),\n        },\n      }))\n    },\n    __cachedIndeterminate (): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-progress-linear__indeterminate',\n        class: {\n          'v-progress-linear__indeterminate--active': this.active,\n        },\n      }, [\n        this.genProgressBar('long'),\n        this.genProgressBar('short'),\n      ])\n    },\n    __cachedStream (): VNode | null {\n      if (!this.stream) return null\n\n      return this.$createElement('div', this.setTextColor(this.color, {\n        staticClass: 'v-progress-linear__stream',\n        style: {\n          width: convertToUnit(100 - this.normalizedBuffer, '%'),\n        },\n      }))\n    },\n    backgroundStyle (): object {\n      const backgroundOpacity = this.backgroundOpacity == null\n        ? (this.backgroundColor ? 1 : 0.3)\n        : parseFloat(this.backgroundOpacity)\n\n      return {\n        opacity: backgroundOpacity,\n        [this.isReversed ? 'right' : 'left']: convertToUnit(this.normalizedValue, '%'),\n        width: convertToUnit(Math.max(0, this.normalizedBuffer - this.normalizedValue), '%'),\n      }\n    },\n    classes (): object {\n      return {\n        'v-progress-linear--absolute': this.absolute,\n        'v-progress-linear--fixed': this.fixed,\n        'v-progress-linear--query': this.query,\n        'v-progress-linear--reactive': this.reactive,\n        'v-progress-linear--reverse': this.isReversed,\n        'v-progress-linear--rounded': this.rounded,\n        'v-progress-linear--striped': this.striped,\n        'v-progress-linear--visible': this.isVisible,\n        ...this.themeClasses,\n      }\n    },\n    computedTransition (): FunctionalComponentOptions {\n      return this.indeterminate ? VFadeTransition : VSlideXTransition\n    },\n    isReversed (): boolean {\n      return this.$vuetify.rtl !== this.reverse\n    },\n    normalizedBuffer (): number {\n      return this.normalize(this.bufferValue)\n    },\n    normalizedValue (): number {\n      return this.normalize(this.internalLazyValue)\n    },\n    reactive (): boolean {\n      return Boolean(this.$listeners.change)\n    },\n    styles (): object {\n      const styles: Record<string, any> = {}\n\n      if (!this.active) {\n        styles.height = 0\n      }\n\n      if (!this.indeterminate && parseFloat(this.normalizedBuffer) !== 100) {\n        styles.width = convertToUnit(this.normalizedBuffer, '%')\n      }\n\n      return styles\n    },\n  },\n\n  methods: {\n    genContent () {\n      const slot = getSlot(this, 'default', { value: this.internalLazyValue })\n\n      if (!slot) return null\n\n      return this.$createElement('div', {\n        staticClass: 'v-progress-linear__content',\n      }, slot)\n    },\n    genListeners () {\n      const listeners = this.$listeners\n\n      if (this.reactive) {\n        listeners.click = this.onClick\n      }\n\n      return listeners\n    },\n    genProgressBar (name: 'long' | 'short') {\n      return this.$createElement('div', this.setBackgroundColor(this.color, {\n        staticClass: 'v-progress-linear__indeterminate',\n        class: {\n          [name]: true,\n        },\n      }))\n    },\n    onClick (e: MouseEvent) {\n      if (!this.reactive) return\n\n      const { width } = this.$el.getBoundingClientRect()\n\n      this.internalValue = e.offsetX / width * 100\n    },\n    onObserve (entries: IntersectionObserverEntry[], observer: IntersectionObserver, isIntersecting: boolean) {\n      this.isVisible = isIntersecting\n    },\n    normalize (value: string | number) {\n      if (value < 0) return 0\n      if (value > 100) return 100\n      return parseFloat(value)\n    },\n  },\n\n  render (h): VNode {\n    const data = {\n      staticClass: 'v-progress-linear',\n      attrs: {\n        role: 'progressbar',\n        'aria-valuemin': 0,\n        'aria-valuemax': this.normalizedBuffer,\n        'aria-valuenow': this.indeterminate ? undefined : this.normalizedValue,\n      },\n      class: this.classes,\n      directives: [{\n        name: 'intersect',\n        value: this.onObserve,\n      }],\n      style: {\n        bottom: this.bottom ? 0 : undefined,\n        height: this.active ? convertToUnit(this.height) : 0,\n        top: this.top ? 0 : undefined,\n      },\n      on: this.genListeners(),\n    }\n\n    return h('div', data, [\n      this.__cachedStream,\n      this.__cachedBackground,\n      this.__cachedBuffer,\n      this.__cachedBar,\n      this.genContent(),\n    ])\n  },\n})\n","import VProgressLinear from './VProgressLinear'\n\nexport { VProgressLinear }\nexport default VProgressLinear\n","import Vue, { VNode } from 'vue'\nimport VProgressLinear from '../../components/VProgressLinear'\n\ninterface colorable extends Vue {\n  color?: string\n}\n\n/**\n * Loadable\n *\n * @mixin\n *\n * Used to add linear progress bar to components\n * Can use a default bar with a specific color\n * or designate a custom progress linear bar\n */\n/* @vue/component */\nexport default Vue.extend<colorable>().extend({\n  name: 'loadable',\n\n  props: {\n    loading: {\n      type: [Boolean, String],\n      default: false,\n    },\n    loaderHeight: {\n      type: [Number, String],\n      default: 2,\n    },\n  },\n\n  methods: {\n    genProgress (): VNode | VNode[] | null {\n      if (this.loading === false) return null\n\n      return this.$slots.progress || this.$createElement(VProgressLinear, {\n        props: {\n          absolute: true,\n          color: (this.loading === true || this.loading === '')\n            ? (this.color || 'primary')\n            : this.loading,\n          height: this.loaderHeight,\n          indeterminate: true,\n        },\n      })\n    },\n  },\n})\n","// Helpers\nimport { convertToUnit } from '../../util/helpers'\n\n// Types\nimport Vue, { PropType } from 'vue'\n\nexport type NumberOrNumberString = PropType<string | number | undefined>\n\nexport default Vue.extend({\n  name: 'measurable',\n\n  props: {\n    height: [Number, String] as NumberOrNumberString,\n    maxHeight: [Number, String] as NumberOrNumberString,\n    maxWidth: [Number, String] as NumberOrNumberString,\n    minHeight: [Number, String] as NumberOrNumberString,\n    minWidth: [Number, String] as NumberOrNumberString,\n    width: [Number, String] as NumberOrNumberString,\n  },\n\n  computed: {\n    measurableStyles (): object {\n      const styles: Record<string, string> = {}\n\n      const height = convertToUnit(this.height)\n      const minHeight = convertToUnit(this.minHeight)\n      const minWidth = convertToUnit(this.minWidth)\n      const maxHeight = convertToUnit(this.maxHeight)\n      const maxWidth = convertToUnit(this.maxWidth)\n      const width = convertToUnit(this.width)\n\n      if (height) styles.height = height\n      if (minHeight) styles.minHeight = minHeight\n      if (minWidth) styles.minWidth = minWidth\n      if (maxHeight) styles.maxHeight = maxHeight\n      if (maxWidth) styles.maxWidth = maxWidth\n      if (width) styles.width = width\n\n      return styles\n    },\n  },\n})\n","// Types\nimport { BreakpointName } from 'vuetify/types/services/breakpoint'\nimport { deprecate } from '../../util/console'\nimport Vue, { PropType } from 'vue'\n\n/* @vue/component */\nexport default Vue.extend({\n  name: 'mobile',\n\n  props: {\n    mobileBreakpoint: {\n      type: [Number, String] as PropType<number | BreakpointName>,\n      default (): number | BreakpointName | undefined {\n        // Avoid destroying unit\n        // tests for users\n        return this.$vuetify\n          ? this.$vuetify.breakpoint.mobileBreakpoint\n          : undefined\n      },\n      validator: v => (\n        !isNaN(Number(v)) ||\n        ['xs', 'sm', 'md', 'lg', 'xl'].includes(String(v))\n      ),\n    },\n  },\n\n  computed: {\n    isMobile (): boolean {\n      const {\n        mobile,\n        width,\n        name,\n        mobileBreakpoint,\n      } = this.$vuetify.breakpoint\n\n      // Check if local mobileBreakpoint matches\n      // the application's mobileBreakpoint\n      if (mobileBreakpoint === this.mobileBreakpoint) return mobile\n\n      const mobileWidth = parseInt(this.mobileBreakpoint, 10)\n      const isNumber = !isNaN(mobileWidth)\n\n      return isNumber\n        ? width < mobileWidth\n        : name === this.mobileBreakpoint\n    },\n  },\n\n  created () {\n    /* istanbul ignore next */\n    if (this.$attrs.hasOwnProperty('mobile-break-point')) {\n      deprecate('mobile-break-point', 'mobile-breakpoint', this)\n    }\n  },\n})\n","// Styles\nimport './VOverlay.sass'\n\n// Mixins\nimport Colorable from './../../mixins/colorable'\nimport Themeable from '../../mixins/themeable'\nimport Toggleable from './../../mixins/toggleable'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport { VNode } from 'vue'\n\n/* @vue/component */\nexport default mixins(\n  Colorable,\n  Themeable,\n  Toggleable\n).extend({\n  name: 'v-overlay',\n\n  props: {\n    absolute: Boolean,\n    color: {\n      type: String,\n      default: '#212121',\n    },\n    dark: {\n      type: Boolean,\n      default: true,\n    },\n    opacity: {\n      type: [Number, String],\n      default: 0.46,\n    },\n    value: {\n      default: true,\n    },\n    zIndex: {\n      type: [Number, String],\n      default: 5,\n    },\n  },\n\n  computed: {\n    __scrim (): VNode {\n      const data = this.setBackgroundColor(this.color, {\n        staticClass: 'v-overlay__scrim',\n        style: {\n          opacity: this.computedOpacity,\n        },\n      })\n\n      return this.$createElement('div', data)\n    },\n    classes (): object {\n      return {\n        'v-overlay--absolute': this.absolute,\n        'v-overlay--active': this.isActive,\n        ...this.themeClasses,\n      }\n    },\n    computedOpacity (): number {\n      return Number(this.isActive ? this.opacity : 0)\n    },\n    styles (): object {\n      return {\n        zIndex: this.zIndex,\n      }\n    },\n  },\n\n  methods: {\n    genContent () {\n      return this.$createElement('div', {\n        staticClass: 'v-overlay__content',\n      }, this.$slots.default)\n    },\n  },\n\n  render (h): VNode {\n    const children = [this.__scrim]\n\n    if (this.isActive) children.push(this.genContent())\n\n    return h('div', {\n      staticClass: 'v-overlay',\n      on: this.$listeners,\n      class: this.classes,\n      style: this.styles,\n    }, children)\n  },\n})\n","import VOverlay from './VOverlay'\n\nexport { VOverlay }\n\nexport default VOverlay\n","// Components\nimport VOverlay from '../../components/VOverlay'\n\n// Utilities\nimport {\n  keyCodes,\n  addOnceEventListener,\n  addPassiveEventListener,\n  getZIndex,\n  composedPath,\n} from '../../util/helpers'\n\n// Types\nimport Vue from 'vue'\n\ninterface Toggleable extends Vue {\n  isActive?: boolean\n}\n\ninterface Stackable extends Vue {\n  activeZIndex: number\n}\n\ninterface options {\n  absolute?: boolean\n  $refs: {\n    dialog?: HTMLElement\n    content?: HTMLElement\n  }\n}\n\n/* @vue/component */\nexport default Vue.extend<Vue & Toggleable & Stackable & options>().extend({\n  name: 'overlayable',\n\n  props: {\n    hideOverlay: Boolean,\n    overlayColor: String,\n    overlayOpacity: [Number, String],\n  },\n\n  data () {\n    return {\n      animationFrame: 0,\n      overlay: null as InstanceType<typeof VOverlay> | null,\n    }\n  },\n\n  watch: {\n    hideOverlay (value) {\n      if (!this.isActive) return\n\n      if (value) this.removeOverlay()\n      else this.genOverlay()\n    },\n  },\n\n  beforeDestroy () {\n    this.removeOverlay()\n  },\n\n  methods: {\n    createOverlay () {\n      const overlay = new VOverlay({\n        propsData: {\n          absolute: this.absolute,\n          value: false,\n          color: this.overlayColor,\n          opacity: this.overlayOpacity,\n        },\n      })\n\n      overlay.$mount()\n\n      const parent = this.absolute\n        ? this.$el.parentNode\n        : document.querySelector('[data-app]')\n\n      parent && parent.insertBefore(overlay.$el, parent.firstChild)\n\n      this.overlay = overlay\n    },\n    genOverlay () {\n      this.hideScroll()\n\n      if (this.hideOverlay) return\n\n      if (!this.overlay) this.createOverlay()\n\n      this.animationFrame = requestAnimationFrame(() => {\n        if (!this.overlay) return\n\n        if (this.activeZIndex !== undefined) {\n          this.overlay.zIndex = String(this.activeZIndex - 1)\n        } else if (this.$el) {\n          this.overlay.zIndex = getZIndex(this.$el)\n        }\n\n        this.overlay.value = true\n      })\n\n      return true\n    },\n    /** removeOverlay(false) will not restore the scollbar afterwards */\n    removeOverlay (showScroll = true) {\n      if (this.overlay) {\n        addOnceEventListener(this.overlay.$el, 'transitionend', () => {\n          if (\n            !this.overlay ||\n            !this.overlay.$el ||\n            !this.overlay.$el.parentNode ||\n            this.overlay.value ||\n            this.isActive\n          ) return\n\n          this.overlay.$el.parentNode.removeChild(this.overlay.$el)\n          this.overlay.$destroy()\n          this.overlay = null\n        })\n\n        // Cancel animation frame in case\n        // overlay is removed before it\n        // has finished its animation\n        cancelAnimationFrame(this.animationFrame)\n\n        this.overlay.value = false\n      }\n\n      showScroll && this.showScroll()\n    },\n    scrollListener (e: WheelEvent & KeyboardEvent) {\n      if (e.type === 'keydown') {\n        if (\n          ['INPUT', 'TEXTAREA', 'SELECT'].includes((e.target as Element).tagName) ||\n          // https://github.com/vuetifyjs/vuetify/issues/4715\n          (e.target as HTMLElement).isContentEditable\n        ) return\n\n        const up = [keyCodes.up, keyCodes.pageup]\n        const down = [keyCodes.down, keyCodes.pagedown]\n\n        if (up.includes(e.keyCode)) {\n          (e as any).deltaY = -1\n        } else if (down.includes(e.keyCode)) {\n          (e as any).deltaY = 1\n        } else {\n          return\n        }\n      }\n\n      if (e.target === this.overlay ||\n        (e.type !== 'keydown' && e.target === document.body) ||\n        this.checkPath(e)) e.preventDefault()\n    },\n    hasScrollbar (el?: Element) {\n      if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\n\n      const style = window.getComputedStyle(el)\n      return ((['auto', 'scroll'].includes(style.overflowY!) || el.tagName === 'SELECT') && el.scrollHeight > el.clientHeight) ||\n      ((['auto', 'scroll'].includes(style.overflowX!)) && el.scrollWidth > el.clientWidth)\n    },\n    shouldScroll (el: Element, e: WheelEvent): boolean {\n      if (el.hasAttribute('data-app')) return false\n\n      const dir = e.shiftKey || e.deltaX ? 'x' : 'y'\n      const delta = dir === 'y' ? e.deltaY : e.deltaX || e.deltaY\n\n      let alreadyAtStart: boolean\n      let alreadyAtEnd: boolean\n      if (dir === 'y') {\n        alreadyAtStart = el.scrollTop === 0\n        alreadyAtEnd = el.scrollTop + el.clientHeight === el.scrollHeight\n      } else {\n        alreadyAtStart = el.scrollLeft === 0\n        alreadyAtEnd = el.scrollLeft + el.clientWidth === el.scrollWidth\n      }\n\n      const scrollingUp = delta < 0\n      const scrollingDown = delta > 0\n\n      if (!alreadyAtStart && scrollingUp) return true\n      if (!alreadyAtEnd && scrollingDown) return true\n      if ((alreadyAtStart || alreadyAtEnd)) {\n        return this.shouldScroll(el.parentNode as Element, e)\n      }\n\n      return false\n    },\n    isInside (el: Element, parent: Element): boolean {\n      if (el === parent) {\n        return true\n      } else if (el === null || el === document.body) {\n        return false\n      } else {\n        return this.isInside(el.parentNode as Element, parent)\n      }\n    },\n    checkPath (e: WheelEvent) {\n      const path = composedPath(e)\n\n      if (e.type === 'keydown' && path[0] === document.body) {\n        const dialog = this.$refs.dialog\n        // getSelection returns null in firefox in some edge cases, can be ignored\n        const selected = window.getSelection()!.anchorNode as Element\n        if (dialog && this.hasScrollbar(dialog) && this.isInside(selected, dialog)) {\n          return !this.shouldScroll(dialog, e)\n        }\n        return true\n      }\n\n      for (let index = 0; index < path.length; index++) {\n        const el = path[index]\n\n        if (el === document) return true\n        if (el === document.documentElement) return true\n        if (el === this.$refs.content) return true\n\n        if (this.hasScrollbar(el as Element)) return !this.shouldScroll(el as Element, e)\n      }\n\n      return true\n    },\n    hideScroll () {\n      if (this.$vuetify.breakpoint.smAndDown) {\n        document.documentElement!.classList.add('overflow-y-hidden')\n      } else {\n        addPassiveEventListener(window, 'wheel', this.scrollListener as EventHandlerNonNull, { passive: false })\n        window.addEventListener('keydown', this.scrollListener as EventHandlerNonNull)\n      }\n    },\n    showScroll () {\n      document.documentElement!.classList.remove('overflow-y-hidden')\n      window.removeEventListener('wheel', this.scrollListener as EventHandlerNonNull)\n      window.removeEventListener('keydown', this.scrollListener as EventHandlerNonNull)\n    },\n  },\n})\n","import Vue from 'vue'\nimport { filterObjectOnKeys } from '../../util/helpers'\nimport { OptionsVue, VueConstructor } from 'vue/types/vue'\n\nconst availableProps = {\n  absolute: Boolean,\n  bottom: Boolean,\n  fixed: Boolean,\n  left: Boolean,\n  right: Boolean,\n  top: Boolean,\n}\ntype props = Record<keyof typeof availableProps, boolean>\n\nexport type Positionable<S extends keyof props> = VueConstructor<Vue & { [P in S]: boolean }, { [P in S]: BooleanConstructor }>\n\nexport function factory <S extends keyof props> (selected?: S[]): Positionable<S>\nexport function factory (selected: undefined): OptionsVue<Vue, {}, {}, {}, props, typeof availableProps>\nexport function factory (selected: any[] = []): any {\n  return Vue.extend({\n    name: 'positionable',\n    props: selected.length ? filterObjectOnKeys(availableProps, selected) : availableProps,\n  })\n}\n\nexport default factory()\n\n// Add a `*` before the second `/`\n/* Tests /\nlet single = factory(['top']).extend({\n  created () {\n    this.top\n    this.bottom\n    this.absolute\n  }\n})\n\nlet some = factory(['top', 'bottom']).extend({\n  created () {\n    this.top\n    this.bottom\n    this.absolute\n  }\n})\n\nlet all = factory().extend({\n  created () {\n    this.top\n    this.bottom\n    this.absolute\n    this.foobar\n  }\n})\n/**/\n","import Vue, { VueConstructor } from 'vue'\n\nexport type Proxyable<T extends string = 'value'> = VueConstructor<Vue & {\n  internalLazyValue: unknown\n  internalValue: unknown\n} & Record<T, any>>\n\nexport function factory<T extends string = 'value'> (prop?: T, event?: string): Proxyable<T>\nexport function factory (\n  prop = 'value',\n  event = 'change'\n) {\n  return Vue.extend({\n    name: 'proxyable',\n\n    model: {\n      prop,\n      event,\n    },\n\n    props: {\n      [prop]: {\n        required: false,\n      },\n    },\n\n    data () {\n      return {\n        internalLazyValue: this[prop] as unknown,\n      }\n    },\n\n    computed: {\n      internalValue: {\n        get (): unknown {\n          return this.internalLazyValue\n        },\n        set (val: any) {\n          if (val === this.internalLazyValue) return\n\n          this.internalLazyValue = val\n\n          this.$emit(event, val)\n        },\n      },\n    },\n\n    watch: {\n      [prop] (val) {\n        this.internalLazyValue = val\n      },\n    },\n  })\n}\n\n/* eslint-disable-next-line @typescript-eslint/no-redeclare */\nconst Proxyable = factory()\n\nexport default Proxyable\n","import Vue from 'vue'\nimport { VueConstructor } from 'vue/types/vue'\nimport { consoleWarn } from '../../util/console'\n\nfunction generateWarning (child: string, parent: string) {\n  return () => consoleWarn(`The ${child} component must be used inside a ${parent}`)\n}\n\nexport type Registrable<T extends string, C extends VueConstructor | null = null> = VueConstructor<Vue & {\n  [K in T]: C extends VueConstructor ? InstanceType<C> : {\n    register (...props: any[]): void\n    unregister (self: any): void\n  }\n}>\n\nexport function inject<\n  T extends string, C extends VueConstructor | null = null\n> (namespace: T, child?: string, parent?: string): Registrable<T, C> {\n  const defaultImpl = child && parent ? {\n    register: generateWarning(child, parent),\n    unregister: generateWarning(child, parent),\n  } : null\n\n  return Vue.extend({\n    name: 'registrable-inject',\n\n    inject: {\n      [namespace]: {\n        default: defaultImpl,\n      },\n    },\n  })\n}\n\nexport function provide (namespace: string, self = false) {\n  return Vue.extend({\n    name: 'registrable-provide',\n\n    provide (): object {\n      return {\n        [namespace]: self ? this : {\n          register: (this as any).register,\n          unregister: (this as any).unregister,\n        },\n      }\n    },\n  })\n}\n","import Vue from 'vue'\n\n/* @vue/component */\nexport default Vue.extend({\n  name: 'roundable',\n\n  props: {\n    rounded: [Boolean, String],\n    tile: Boolean,\n  },\n\n  computed: {\n    roundedClasses (): Record<string, boolean> {\n      const composite = []\n      const rounded = typeof this.rounded === 'string'\n        ? String(this.rounded)\n        : this.rounded === true\n\n      if (this.tile) {\n        composite.push('rounded-0')\n      } else if (typeof rounded === 'string') {\n        const values = rounded.split(' ')\n\n        for (const value of values) {\n          composite.push(`rounded-${value}`)\n        }\n      } else if (rounded) {\n        composite.push('rounded')\n      }\n\n      return composite.length > 0 ? {\n        [composite.join(' ')]: true,\n      } : {}\n    },\n  },\n})\n","import Vue, { VNodeData, PropType } from 'vue'\n\n// Directives\nimport Ripple, { RippleOptions } from '../../directives/ripple'\n\n// Utilities\nimport { getObjectValueByPath } from '../../util/helpers'\n\nexport default Vue.extend({\n  name: 'routable',\n\n  directives: {\n    Ripple,\n  },\n\n  props: {\n    activeClass: String,\n    append: Boolean,\n    disabled: Boolean,\n    exact: {\n      type: Boolean as PropType<boolean | undefined>,\n      default: undefined,\n    },\n    exactPath: Boolean,\n    exactActiveClass: String,\n    link: Boolean,\n    href: [String, Object],\n    to: [String, Object],\n    nuxt: Boolean,\n    replace: Boolean,\n    ripple: {\n      type: [Boolean, Object],\n      default: null,\n    },\n    tag: String,\n    target: String,\n  },\n\n  data: () => ({\n    isActive: false,\n    proxyClass: '',\n  }),\n\n  computed: {\n    classes (): object {\n      const classes: Record<string, boolean> = {}\n\n      if (this.to) return classes\n\n      if (this.activeClass) classes[this.activeClass] = this.isActive\n      if (this.proxyClass) classes[this.proxyClass] = this.isActive\n\n      return classes\n    },\n    computedRipple (): RippleOptions | boolean {\n      return this.ripple ?? (!this.disabled && this.isClickable)\n    },\n    isClickable (): boolean {\n      if (this.disabled) return false\n\n      return Boolean(\n        this.isLink ||\n        this.$listeners.click ||\n        this.$listeners['!click'] ||\n        this.$attrs.tabindex\n      )\n    },\n    isLink (): boolean {\n      return this.to || this.href || this.link\n    },\n    styles: () => ({}),\n  },\n\n  watch: {\n    $route: 'onRouteChange',\n  },\n\n  mounted () {\n    this.onRouteChange()\n  },\n\n  methods: {\n    generateRouteLink () {\n      let exact = this.exact\n      let tag\n\n      const data: VNodeData = {\n        attrs: {\n          tabindex: 'tabindex' in this.$attrs ? this.$attrs.tabindex : undefined,\n        },\n        class: this.classes,\n        style: this.styles,\n        props: {},\n        directives: [{\n          name: 'ripple',\n          value: this.computedRipple,\n        }],\n        [this.to ? 'nativeOn' : 'on']: {\n          ...this.$listeners,\n          ...('click' in this ? { click: (this as any).click } : undefined), // #14447\n        },\n        ref: 'link',\n      }\n\n      if (typeof this.exact === 'undefined') {\n        exact = this.to === '/' ||\n          (this.to === Object(this.to) && this.to.path === '/')\n      }\n\n      if (this.to) {\n        // Add a special activeClass hook\n        // for component level styles\n        let activeClass = this.activeClass\n        let exactActiveClass = this.exactActiveClass || activeClass\n\n        if (this.proxyClass) {\n          activeClass = `${activeClass} ${this.proxyClass}`.trim()\n          exactActiveClass = `${exactActiveClass} ${this.proxyClass}`.trim()\n        }\n\n        tag = this.nuxt ? 'nuxt-link' : 'router-link'\n        Object.assign(data.props, {\n          to: this.to,\n          exact,\n          exactPath: this.exactPath,\n          activeClass,\n          exactActiveClass,\n          append: this.append,\n          replace: this.replace,\n        })\n      } else {\n        tag = (this.href && 'a') || this.tag || 'div'\n\n        if (tag === 'a' && this.href) data.attrs!.href = this.href\n      }\n\n      if (this.target) data.attrs!.target = this.target\n\n      return { tag, data }\n    },\n    onRouteChange () {\n      if (!this.to || !this.$refs.link || !this.$route) return\n      const activeClass = `${this.activeClass || ''} ${this.proxyClass || ''}`.trim()\n      const exactActiveClass = `${this.exactActiveClass || ''} ${this.proxyClass || ''}`.trim() || activeClass\n\n      const path = '_vnode.data.class.' + (this.exact ? exactActiveClass : activeClass)\n\n      this.$nextTick(() => {\n        /* istanbul ignore else */\n        if (!getObjectValueByPath(this.$refs.link, path) === this.isActive) {\n          this.toggle()\n        }\n      })\n    },\n    toggle () {\n      this.isActive = !this.isActive\n    },\n  },\n})\n","import Vue from 'vue'\n\nexport default Vue.extend({\n  name: 'sizeable',\n\n  props: {\n    large: Boolean,\n    small: Boolean,\n    xLarge: Boolean,\n    xSmall: Boolean,\n  },\n\n  computed: {\n    medium (): boolean {\n      return Boolean(\n        !this.xSmall &&\n        !this.small &&\n        !this.large &&\n        !this.xLarge\n      )\n    },\n    sizeableClasses (): object {\n      return {\n        'v-size--x-small': this.xSmall,\n        'v-size--small': this.small,\n        'v-size--default': this.medium,\n        'v-size--large': this.large,\n        'v-size--x-large': this.xLarge,\n      }\n    },\n  },\n})\n","import Vue from 'vue'\n\n/**\n * SSRBootable\n *\n * @mixin\n *\n * Used in layout components (drawer, toolbar, content)\n * to avoid an entry animation when using SSR\n */\nexport default Vue.extend({\n  name: 'ssr-bootable',\n\n  data: () => ({\n    isBooted: false,\n  }),\n\n  mounted () {\n    // Use setAttribute instead of dataset\n    // because dataset does not work well\n    // with unit tests\n    window.requestAnimationFrame(() => {\n      this.$el.setAttribute('data-booted', 'true')\n      this.isBooted = true\n    })\n  },\n})\n","import Vue from 'vue'\nimport { PropType, RenderContext } from 'vue/types/options'\n\ninterface options extends Vue {\n  theme: {\n    isDark: boolean\n  }\n}\n\n/* @vue/component */\nconst Themeable = Vue.extend<options>().extend({\n  name: 'themeable',\n\n  provide (): object {\n    return {\n      theme: this.themeableProvide,\n    }\n  },\n\n  inject: {\n    theme: {\n      default: {\n        isDark: false,\n      },\n    },\n  },\n\n  props: {\n    dark: {\n      type: Boolean as PropType<boolean | null>,\n      default: null,\n    },\n    light: {\n      type: Boolean as PropType<boolean | null>,\n      default: null,\n    },\n  },\n\n  data () {\n    return {\n      themeableProvide: {\n        isDark: false,\n      },\n    }\n  },\n\n  computed: {\n    appIsDark (): boolean {\n      return this.$vuetify.theme.dark || false\n    },\n    isDark (): boolean {\n      if (this.dark === true) {\n        // explicitly dark\n        return true\n      } else if (this.light === true) {\n        // explicitly light\n        return false\n      } else {\n        // inherit from parent, or default false if there is none\n        return this.theme.isDark\n      }\n    },\n    themeClasses (): object {\n      return {\n        'theme--dark': this.isDark,\n        'theme--light': !this.isDark,\n      }\n    },\n    /** Used by menus and dialogs, inherits from v-app instead of the parent */\n    rootIsDark (): boolean {\n      if (this.dark === true) {\n        // explicitly dark\n        return true\n      } else if (this.light === true) {\n        // explicitly light\n        return false\n      } else {\n        // inherit from v-app\n        return this.appIsDark\n      }\n    },\n    rootThemeClasses (): Dictionary<boolean> {\n      return {\n        'theme--dark': this.rootIsDark,\n        'theme--light': !this.rootIsDark,\n      }\n    },\n  },\n\n  watch: {\n    isDark: {\n      handler (newVal, oldVal) {\n        if (newVal !== oldVal) {\n          this.themeableProvide.isDark = this.isDark\n        }\n      },\n      immediate: true,\n    },\n  },\n})\n\nexport default Themeable\n\nexport function functionalThemeClasses (context: RenderContext): object {\n  const vm = {\n    ...context.props,\n    ...context.injections,\n  }\n  const isDark = Themeable.options.computed.isDark.call(vm)\n  return Themeable.options.computed.themeClasses.call({ isDark })\n}\n","import Vue, { VueConstructor } from 'vue'\n\nexport type Toggleable<T extends string = 'value'> = VueConstructor<Vue & { isActive: boolean } & Record<T, any>>\n\nexport function factory<T extends string = 'value'> (prop?: T, event?: string): Toggleable<T>\nexport function factory (prop = 'value', event = 'input') {\n  return Vue.extend({\n    name: 'toggleable',\n\n    model: { prop, event },\n\n    props: {\n      [prop]: { required: false },\n    },\n\n    data () {\n      return {\n        isActive: !!this[prop],\n      }\n    },\n\n    watch: {\n      [prop] (val) {\n        this.isActive = !!val\n      },\n      isActive (val) {\n        !!val !== this[prop] && this.$emit(event, val)\n      },\n    },\n  })\n}\n\n/* eslint-disable-next-line @typescript-eslint/no-redeclare */\nconst Toggleable = factory()\n\nexport default Toggleable\n","// Mixins\nimport Colorable from '../colorable'\nimport Themeable from '../themeable'\nimport { inject as RegistrableInject } from '../registrable'\n\n// Utilities\nimport { deepEqual } from '../../util/helpers'\nimport { consoleError } from '../../util/console'\nimport mixins from '../../util/mixins'\n\n// Types\nimport { PropValidator } from 'vue/types/options'\nimport { InputMessage, InputValidationRules } from 'vuetify/types'\n\nconst baseMixins = mixins(\n  Colorable,\n  RegistrableInject<'form', any>('form'),\n  Themeable,\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'validatable',\n\n  props: {\n    disabled: Boolean,\n    error: Boolean,\n    errorCount: {\n      type: [Number, String],\n      default: 1,\n    },\n    errorMessages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<InputMessage | null>,\n    messages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<InputMessage | null>,\n    readonly: Boolean,\n    rules: {\n      type: Array,\n      default: () => [],\n    } as PropValidator<InputValidationRules>,\n    success: Boolean,\n    successMessages: {\n      type: [String, Array],\n      default: () => [],\n    } as PropValidator<InputMessage | null>,\n    validateOnBlur: Boolean,\n    value: { required: false },\n  },\n\n  data () {\n    return {\n      errorBucket: [] as string[],\n      hasColor: false,\n      hasFocused: false,\n      hasInput: false,\n      isFocused: false,\n      isResetting: false,\n      lazyValue: this.value,\n      valid: false,\n    }\n  },\n\n  computed: {\n    computedColor (): string | undefined {\n      if (this.isDisabled) return undefined\n      if (this.color) return this.color\n      // It's assumed that if the input is on a\n      // dark background, the user will want to\n      // have a white color. If the entire app\n      // is setup to be dark, then they will\n      // like want to use their primary color\n      if (this.isDark && !this.appIsDark) return 'white'\n      else return 'primary'\n    },\n    hasError (): boolean {\n      return (\n        this.internalErrorMessages.length > 0 ||\n        this.errorBucket.length > 0 ||\n        this.error\n      )\n    },\n    // TODO: Add logic that allows the user to enable based\n    // upon a good validation\n    hasSuccess (): boolean {\n      return (\n        this.internalSuccessMessages.length > 0 ||\n        this.success\n      )\n    },\n    externalError (): boolean {\n      return this.internalErrorMessages.length > 0 || this.error\n    },\n    hasMessages (): boolean {\n      return this.validationTarget.length > 0\n    },\n    hasState (): boolean {\n      if (this.isDisabled) return false\n\n      return (\n        this.hasSuccess ||\n        (this.shouldValidate && this.hasError)\n      )\n    },\n    internalErrorMessages (): InputValidationRules {\n      return this.genInternalMessages(this.errorMessages)\n    },\n    internalMessages (): InputValidationRules {\n      return this.genInternalMessages(this.messages)\n    },\n    internalSuccessMessages (): InputValidationRules {\n      return this.genInternalMessages(this.successMessages)\n    },\n    internalValue: {\n      get (): unknown {\n        return this.lazyValue\n      },\n      set (val: any) {\n        this.lazyValue = val\n\n        this.$emit('input', val)\n      },\n    },\n    isDisabled (): boolean {\n      return this.disabled || (\n        !!this.form &&\n        this.form.disabled\n      )\n    },\n    isInteractive (): boolean {\n      return !this.isDisabled && !this.isReadonly\n    },\n    isReadonly (): boolean {\n      return this.readonly || (\n        !!this.form &&\n        this.form.readonly\n      )\n    },\n    shouldValidate (): boolean {\n      if (this.externalError) return true\n      if (this.isResetting) return false\n\n      return this.validateOnBlur\n        ? this.hasFocused && !this.isFocused\n        : (this.hasInput || this.hasFocused)\n    },\n    validations (): InputValidationRules {\n      return this.validationTarget.slice(0, Number(this.errorCount))\n    },\n    validationState (): string | undefined {\n      if (this.isDisabled) return undefined\n      if (this.hasError && this.shouldValidate) return 'error'\n      if (this.hasSuccess) return 'success'\n      if (this.hasColor) return this.computedColor\n      return undefined\n    },\n    validationTarget (): InputValidationRules {\n      if (this.internalErrorMessages.length > 0) {\n        return this.internalErrorMessages\n      } else if (this.successMessages && this.successMessages.length > 0) {\n        return this.internalSuccessMessages\n      } else if (this.messages && this.messages.length > 0) {\n        return this.internalMessages\n      } else if (this.shouldValidate) {\n        return this.errorBucket\n      } else return []\n    },\n  },\n\n  watch: {\n    rules: {\n      handler (newVal, oldVal) {\n        if (deepEqual(newVal, oldVal)) return\n        this.validate()\n      },\n      deep: true,\n    },\n    internalValue () {\n      // If it's the first time we're setting input,\n      // mark it with hasInput\n      this.hasInput = true\n      this.validateOnBlur || this.$nextTick(this.validate)\n    },\n    isFocused (val) {\n      // Should not check validation\n      // if disabled\n      if (\n        !val &&\n        !this.isDisabled\n      ) {\n        this.hasFocused = true\n        this.validateOnBlur && this.$nextTick(this.validate)\n      }\n    },\n    isResetting () {\n      setTimeout(() => {\n        this.hasInput = false\n        this.hasFocused = false\n        this.isResetting = false\n        this.validate()\n      }, 0)\n    },\n    hasError (val) {\n      if (this.shouldValidate) {\n        this.$emit('update:error', val)\n      }\n    },\n    value (val) {\n      this.lazyValue = val\n    },\n  },\n\n  beforeMount () {\n    this.validate()\n  },\n\n  created () {\n    this.form && this.form.register(this)\n  },\n\n  beforeDestroy () {\n    this.form && this.form.unregister(this)\n  },\n\n  methods: {\n    genInternalMessages (messages: InputMessage | null): InputValidationRules {\n      if (!messages) return []\n      else if (Array.isArray(messages)) return messages\n      else return [messages]\n    },\n    /** @public */\n    reset () {\n      this.isResetting = true\n      this.internalValue = Array.isArray(this.internalValue)\n        ? []\n        : null\n    },\n    /** @public */\n    resetValidation () {\n      this.isResetting = true\n    },\n    /** @public */\n    validate (force = false, value?: any): boolean {\n      const errorBucket = []\n      value = value || this.internalValue\n\n      if (force) this.hasInput = this.hasFocused = true\n\n      for (let index = 0; index < this.rules.length; index++) {\n        const rule = this.rules[index]\n        const valid = typeof rule === 'function' ? rule(value) : rule\n\n        if (valid === false || typeof valid === 'string') {\n          errorBucket.push(valid || '')\n        } else if (typeof valid !== 'boolean') {\n          consoleError(`Rules should return a string or boolean, received '${typeof valid}' instead`, this)\n        }\n      }\n\n      this.errorBucket = errorBucket\n      this.valid = errorBucket.length === 0\n\n      return this.valid\n    },\n  },\n})\n","// Utilities\nimport { consoleWarn } from './console'\nimport { chunk, padEnd } from './helpers'\nimport { toXYZ } from './color/transformSRGB'\n\n// Types\nimport { VuetifyThemeVariant } from 'types/services/theme'\n\nexport type ColorInt = number\nexport type XYZ = [number, number, number]\nexport type LAB = [number, number, number]\nexport type HSV = { h: number, s: number, v: number }\nexport type HSVA = HSV & { a: number }\nexport type RGB = { r: number, g: number, b: number }\nexport type RGBA = RGB & { a: number }\nexport type HSL = { h: number, s: number, l: number }\nexport type HSLA = HSL & { a: number }\nexport type Hex = string\nexport type Hexa = string\nexport type Color = string | number | {}\n\nexport function isCssColor (color?: string | false): boolean {\n  return !!color && !!color.match(/^(#|var\\(--|(rgb|hsl)a?\\()/)\n}\n\nexport function colorToInt (color: Color): ColorInt {\n  let rgb\n\n  if (typeof color === 'number') {\n    rgb = color\n  } else if (typeof color === 'string') {\n    let c = color[0] === '#' ? color.substring(1) : color\n    if (c.length === 3) {\n      c = c.split('').map(char => char + char).join('')\n    }\n    if (c.length !== 6) {\n      consoleWarn(`'${color}' is not a valid rgb color`)\n    }\n    rgb = parseInt(c, 16)\n  } else {\n    throw new TypeError(`Colors can only be numbers or strings, recieved ${color == null ? color : color.constructor.name} instead`)\n  }\n\n  if (rgb < 0) {\n    consoleWarn(`Colors cannot be negative: '${color}'`)\n    rgb = 0\n  } else if (rgb > 0xffffff || isNaN(rgb)) {\n    consoleWarn(`'${color}' is not a valid rgb color`)\n    rgb = 0xffffff\n  }\n\n  return rgb\n}\n\nexport function classToHex (\n  color: string,\n  colors: Record<string, Record<string, string>>,\n  currentTheme: Partial<VuetifyThemeVariant>,\n): string {\n  const [colorName, colorModifier] = color\n    .toString().trim().replace('-', '').split(' ', 2) as (string | undefined)[]\n\n  let hexColor = ''\n  if (colorName && colorName in colors) {\n    if (colorModifier && colorModifier in colors[colorName]) {\n      hexColor = colors[colorName][colorModifier]\n    } else if ('base' in colors[colorName]) {\n      hexColor = colors[colorName].base\n    }\n  } else if (colorName && colorName in currentTheme) {\n    hexColor = currentTheme[colorName] as string\n  }\n\n  return hexColor\n}\n\nexport function intToHex (color: ColorInt): string {\n  let hexColor: string = color.toString(16)\n\n  if (hexColor.length < 6) hexColor = '0'.repeat(6 - hexColor.length) + hexColor\n\n  return '#' + hexColor\n}\n\nexport function colorToHex (color: Color): string {\n  return intToHex(colorToInt(color))\n}\n\n/**\n * Converts HSVA to RGBA. Based on formula from https://en.wikipedia.org/wiki/HSL_and_HSV\n *\n * @param color HSVA color as an array [0-360, 0-1, 0-1, 0-1]\n */\nexport function HSVAtoRGBA (hsva: HSVA): RGBA {\n  const { h, s, v, a } = hsva\n  const f = (n: number) => {\n    const k = (n + (h / 60)) % 6\n    return v - v * s * Math.max(Math.min(k, 4 - k, 1), 0)\n  }\n\n  const rgb = [f(5), f(3), f(1)].map(v => Math.round(v * 255))\n\n  return { r: rgb[0], g: rgb[1], b: rgb[2], a }\n}\n\n/**\n * Converts RGBA to HSVA. Based on formula from https://en.wikipedia.org/wiki/HSL_and_HSV\n *\n * @param color RGBA color as an array [0-255, 0-255, 0-255, 0-1]\n */\nexport function RGBAtoHSVA (rgba: RGBA): HSVA {\n  if (!rgba) return { h: 0, s: 1, v: 1, a: 1 }\n\n  const r = rgba.r / 255\n  const g = rgba.g / 255\n  const b = rgba.b / 255\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n\n  let h = 0\n\n  if (max !== min) {\n    if (max === r) {\n      h = 60 * (0 + ((g - b) / (max - min)))\n    } else if (max === g) {\n      h = 60 * (2 + ((b - r) / (max - min)))\n    } else if (max === b) {\n      h = 60 * (4 + ((r - g) / (max - min)))\n    }\n  }\n\n  if (h < 0) h = h + 360\n\n  const s = max === 0 ? 0 : (max - min) / max\n  const hsv = [h, s, max]\n\n  return { h: hsv[0], s: hsv[1], v: hsv[2], a: rgba.a }\n}\n\nexport function HSVAtoHSLA (hsva: HSVA): HSLA {\n  const { h, s, v, a } = hsva\n\n  const l = v - (v * s / 2)\n\n  const sprime = l === 1 || l === 0 ? 0 : (v - l) / Math.min(l, 1 - l)\n\n  return { h, s: sprime, l, a }\n}\n\nexport function HSLAtoHSVA (hsl: HSLA): HSVA {\n  const { h, s, l, a } = hsl\n\n  const v = l + s * Math.min(l, 1 - l)\n\n  const sprime = v === 0 ? 0 : 2 - (2 * l / v)\n\n  return { h, s: sprime, v, a }\n}\n\nexport function RGBAtoCSS (rgba: RGBA): string {\n  return `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`\n}\n\nexport function RGBtoCSS (rgba: RGBA): string {\n  return RGBAtoCSS({ ...rgba, a: 1 })\n}\n\nexport function RGBAtoHex (rgba: RGBA): Hex {\n  const toHex = (v: number) => {\n    const h = Math.round(v).toString(16)\n    return ('00'.substr(0, 2 - h.length) + h).toUpperCase()\n  }\n\n  return `#${[\n    toHex(rgba.r),\n    toHex(rgba.g),\n    toHex(rgba.b),\n    toHex(Math.round(rgba.a * 255)),\n  ].join('')}`\n}\n\nexport function HexToRGBA (hex: Hex): RGBA {\n  const rgba = chunk(hex.slice(1), 2).map((c: string) => parseInt(c, 16))\n\n  return {\n    r: rgba[0],\n    g: rgba[1],\n    b: rgba[2],\n    a: Math.round((rgba[3] / 255) * 100) / 100,\n  }\n}\n\nexport function HexToHSVA (hex: Hex): HSVA {\n  const rgb = HexToRGBA(hex)\n  return RGBAtoHSVA(rgb)\n}\n\nexport function HSVAtoHex (hsva: HSVA): Hex {\n  return RGBAtoHex(HSVAtoRGBA(hsva))\n}\n\nexport function parseHex (hex: string): Hex {\n  if (hex.startsWith('#')) {\n    hex = hex.slice(1)\n  }\n\n  hex = hex.replace(/([^0-9a-f])/gi, 'F')\n\n  if (hex.length === 3 || hex.length === 4) {\n    hex = hex.split('').map(x => x + x).join('')\n  }\n\n  if (hex.length === 6) {\n    hex = padEnd(hex, 8, 'F')\n  } else {\n    hex = padEnd(padEnd(hex, 6), 8, 'F')\n  }\n\n  return `#${hex}`.toUpperCase().substr(0, 9)\n}\n\nexport function parseGradient (\n  gradient: string,\n  colors: Record<string, Record<string, string>>,\n  currentTheme: Partial<VuetifyThemeVariant>,\n) {\n  return gradient.replace(/([a-z]+(\\s[a-z]+-[1-5])?)(?=$|,)/gi, x => {\n    return classToHex(x, colors, currentTheme) || x\n  }).replace(/(rgba\\()#[0-9a-f]+(?=,)/gi, x => {\n    return 'rgba(' + Object.values(HexToRGBA(parseHex(x.replace(/rgba\\(/, '')))).slice(0, 3).join(',')\n  })\n}\n\nexport function RGBtoInt (rgba: RGBA): ColorInt {\n  return (rgba.r << 16) + (rgba.g << 8) + rgba.b\n}\n\n/**\n * Returns the contrast ratio (1-21) between two colors.\n *\n * @param c1 First color\n * @param c2 Second color\n */\nexport function contrastRatio (c1: RGBA, c2: RGBA): number {\n  const [, y1] = toXYZ(RGBtoInt(c1))\n  const [, y2] = toXYZ(RGBtoInt(c2))\n\n  return (Math.max(y1, y2) + 0.05) / (Math.min(y1, y2) + 0.05)\n}\n","/* eslint-disable no-console */\nimport Vuetify from '../framework'\n\nfunction createMessage (message: string, vm?: any, parent?: any): string | void {\n  if (Vuetify.config.silent) return\n\n  if (parent) {\n    vm = {\n      _isVue: true,\n      $parent: parent,\n      $options: vm,\n    }\n  }\n\n  if (vm) {\n    // Only show each message once per instance\n    vm.$_alreadyWarned = vm.$_alreadyWarned || []\n    if (vm.$_alreadyWarned.includes(message)) return\n    vm.$_alreadyWarned.push(message)\n  }\n\n  return `[Vuetify] ${message}` + (\n    vm ? generateComponentTrace(vm) : ''\n  )\n}\n\nexport function consoleInfo (message: string, vm?: any, parent?: any): void {\n  const newMessage = createMessage(message, vm, parent)\n  newMessage != null && console.info(newMessage)\n}\n\nexport function consoleWarn (message: string, vm?: any, parent?: any): void {\n  const newMessage = createMessage(message, vm, parent)\n  newMessage != null && console.warn(newMessage)\n}\n\nexport function consoleError (message: string, vm?: any, parent?: any): void {\n  const newMessage = createMessage(message, vm, parent)\n  newMessage != null && console.error(newMessage)\n}\n\nexport function deprecate (original: string, replacement: string, vm?: any, parent?: any) {\n  consoleWarn(`[UPGRADE] '${original}' is deprecated, use '${replacement}' instead.`, vm, parent)\n}\nexport function breaking (original: string, replacement: string, vm?: any, parent?: any) {\n  consoleError(`[BREAKING] '${original}' has been removed, use '${replacement}' instead. For more information, see the upgrade guide https://github.com/vuetifyjs/vuetify/releases/tag/v2.0.0#user-content-upgrade-guide`, vm, parent)\n}\nexport function removed (original: string, vm?: any, parent?: any) {\n  consoleWarn(`[REMOVED] '${original}' has been removed. You can safely omit it.`, vm, parent)\n}\n\n/**\n * Shamelessly stolen from vuejs/vue/blob/dev/src/core/util/debug.js\n */\n\nconst classifyRE = /(?:^|[-_])(\\w)/g\nconst classify = (str: string) => str\n  .replace(classifyRE, c => c.toUpperCase())\n  .replace(/[-_]/g, '')\n\nfunction formatComponentName (vm: any, includeFile?: boolean): string {\n  if (vm.$root === vm) {\n    return '<Root>'\n  }\n  const options = typeof vm === 'function' && vm.cid != null\n    ? vm.options\n    : vm._isVue\n      ? vm.$options || vm.constructor.options\n      : vm || {}\n  let name = options.name || options._componentTag\n  const file = options.__file\n  if (!name && file) {\n    const match = file.match(/([^/\\\\]+)\\.vue$/)\n    name = match && match[1]\n  }\n\n  return (\n    (name ? `<${classify(name)}>` : `<Anonymous>`) +\n    (file && includeFile !== false ? ` at ${file}` : '')\n  )\n}\n\nfunction generateComponentTrace (vm: any): string {\n  if (vm._isVue && vm.$parent) {\n    const tree: any[] = []\n    let currentRecursiveSequence = 0\n    while (vm) {\n      if (tree.length > 0) {\n        const last: any = tree[tree.length - 1]\n        if (last.constructor === vm.constructor) {\n          currentRecursiveSequence++\n          vm = vm.$parent\n          continue\n        } else if (currentRecursiveSequence > 0) {\n          tree[tree.length - 1] = [last, currentRecursiveSequence]\n          currentRecursiveSequence = 0\n        }\n      }\n      tree.push(vm)\n      vm = vm.$parent\n    }\n    return '\\n\\nfound in\\n\\n' + tree\n      .map((vm, i) => `${\n        i === 0 ? '---> ' : ' '.repeat(5 + i * 2)\n      }${\n        Array.isArray(vm)\n          ? `${formatComponentName(vm[0])}... (${vm[1]} recursive calls)`\n          : formatComponentName(vm)\n      }`)\n      .join('\\n')\n  } else {\n    return `\\n\\n(found in ${formatComponentName(vm)})`\n  }\n}\n","/**\n * Returns:\n *  - 'null' if the node is not attached to the DOM\n *  - the root node (HTMLDocument | ShadowRoot) otherwise\n */\nexport function attachedRoot (node: Node): null | HTMLDocument | ShadowRoot {\n  /* istanbul ignore next */\n  if (typeof node.getRootNode !== 'function') {\n    // Shadow DOM not supported (IE11), lets find the root of this node\n    while (node.parentNode) node = node.parentNode\n\n    // The root parent is the document if the node is attached to the DOM\n    if (node !== document) return null\n\n    return document\n  }\n\n  const root = node.getRootNode()\n\n  // The composed root node is the document if the node is attached to the DOM\n  if (root !== document && root.getRootNode({ composed: true }) !== document) return null\n\n  return root as HTMLDocument | ShadowRoot\n}\n","import Vue from 'vue'\nimport { VNode, VNodeDirective } from 'vue/types'\nimport { VuetifyIcon } from 'vuetify/types/services/icons'\nimport { DataTableCompareFunction, SelectItemKey, ItemGroup } from 'vuetify/types'\n\nexport function createSimpleFunctional (\n  c: string,\n  el = 'div',\n  name?: string\n) {\n  return Vue.extend({\n    name: name || c.replace(/__/g, '-'),\n\n    functional: true,\n\n    props: {\n      tag: {\n        type: String,\n        default: el,\n      },\n    },\n\n    render (h, { data, props, children }): VNode {\n      data.staticClass = (`${c} ${data.staticClass || ''}`).trim()\n\n      return h(props.tag, data, children)\n    },\n  })\n}\n\nexport type BindingConfig = Pick<VNodeDirective, 'arg' | 'modifiers' | 'value'>\nexport function directiveConfig (binding: BindingConfig, defaults = {}): VNodeDirective {\n  return {\n    ...defaults,\n    ...binding.modifiers,\n    value: binding.arg,\n    ...(binding.value || {}),\n  }\n}\n\nexport function addOnceEventListener (\n  el: EventTarget,\n  eventName: string,\n  cb: (event: Event) => void,\n  options: boolean | AddEventListenerOptions = false\n): void {\n  const once = (event: Event) => {\n    cb(event)\n    el.removeEventListener(eventName, once, options)\n  }\n\n  el.addEventListener(eventName, once, options)\n}\n\nlet passiveSupported = false\ntry {\n  if (typeof window !== 'undefined') {\n    const testListenerOpts = Object.defineProperty({}, 'passive', {\n      get: () => {\n        passiveSupported = true\n      },\n    })\n\n    window.addEventListener('testListener', testListenerOpts, testListenerOpts)\n    window.removeEventListener('testListener', testListenerOpts, testListenerOpts)\n  }\n} catch (e) { console.warn(e) } /* eslint-disable-line no-console */\nexport { passiveSupported }\n\nexport function addPassiveEventListener (\n  el: EventTarget,\n  event: string,\n  cb: EventHandlerNonNull | (() => void),\n  options: {}\n): void {\n  el.addEventListener(event, cb, passiveSupported ? options : false)\n}\n\nexport function getNestedValue (obj: any, path: (string | number)[], fallback?: any): any {\n  const last = path.length - 1\n\n  if (last < 0) return obj === undefined ? fallback : obj\n\n  for (let i = 0; i < last; i++) {\n    if (obj == null) {\n      return fallback\n    }\n    obj = obj[path[i]]\n  }\n\n  if (obj == null) return fallback\n\n  return obj[path[last]] === undefined ? fallback : obj[path[last]]\n}\n\nexport function deepEqual (a: any, b: any): boolean {\n  if (a === b) return true\n\n  if (\n    a instanceof Date &&\n    b instanceof Date &&\n    a.getTime() !== b.getTime()\n  ) {\n    // If the values are Date, compare them as timestamps\n    return false\n  }\n\n  if (a !== Object(a) || b !== Object(b)) {\n    // If the values aren't objects, they were already checked for equality\n    return false\n  }\n\n  const props = Object.keys(a)\n\n  if (props.length !== Object.keys(b).length) {\n    // Different number of props, don't bother to check\n    return false\n  }\n\n  return props.every(p => deepEqual(a[p], b[p]))\n}\n\nexport function getObjectValueByPath (obj: any, path: string, fallback?: any): any {\n  // credit: http://stackoverflow.com/questions/6491463/accessing-nested-javascript-objects-with-string-key#comment55278413_6491621\n  if (obj == null || !path || typeof path !== 'string') return fallback\n  if (obj[path] !== undefined) return obj[path]\n  path = path.replace(/\\[(\\w+)\\]/g, '.$1') // convert indexes to properties\n  path = path.replace(/^\\./, '') // strip a leading dot\n  return getNestedValue(obj, path.split('.'), fallback)\n}\n\nexport function getPropertyFromItem (\n  item: object,\n  property: SelectItemKey,\n  fallback?: any\n): any {\n  if (property == null) return item === undefined ? fallback : item\n\n  if (item !== Object(item)) return fallback === undefined ? item : fallback\n\n  if (typeof property === 'string') return getObjectValueByPath(item, property, fallback)\n\n  if (Array.isArray(property)) return getNestedValue(item, property, fallback)\n\n  if (typeof property !== 'function') return fallback\n\n  const value = property(item, fallback)\n\n  return typeof value === 'undefined' ? fallback : value\n}\n\nexport function createRange (length: number): number[] {\n  return Array.from({ length }, (v, k) => k)\n}\n\nexport function getZIndex (el?: Element | null): number {\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return 0\n\n  const index = +window.getComputedStyle(el).getPropertyValue('z-index')\n\n  if (!index) return getZIndex(el.parentNode as Element)\n  return index\n}\n\nconst tagsToReplace = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n} as any\n\nexport function escapeHTML (str: string): string {\n  return str.replace(/[&<>]/g, tag => tagsToReplace[tag] || tag)\n}\n\nexport function filterObjectOnKeys<T, K extends keyof T> (obj: T, keys: K[]): { [N in K]: T[N] } {\n  const filtered = {} as { [N in K]: T[N] }\n\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i]\n    if (typeof obj[key] !== 'undefined') {\n      filtered[key] = obj[key]\n    }\n  }\n\n  return filtered\n}\n\nexport function convertToUnit (str: string | number | null | undefined, unit = 'px'): string | undefined {\n  if (str == null || str === '') {\n    return undefined\n  } else if (isNaN(+str!)) {\n    return String(str)\n  } else {\n    return `${Number(str)}${unit}`\n  }\n}\n\nexport function kebabCase (str: string): string {\n  return (str || '').replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase()\n}\n\nexport function isObject (obj: any): obj is object {\n  return obj !== null && typeof obj === 'object'\n}\n\n// KeyboardEvent.keyCode aliases\nexport const keyCodes = Object.freeze({\n  enter: 13,\n  tab: 9,\n  delete: 46,\n  esc: 27,\n  space: 32,\n  up: 38,\n  down: 40,\n  left: 37,\n  right: 39,\n  end: 35,\n  home: 36,\n  del: 46,\n  backspace: 8,\n  insert: 45,\n  pageup: 33,\n  pagedown: 34,\n  shift: 16,\n})\n\n/**\n * This remaps internal names like '$cancel' or '$vuetify.icons.cancel'\n * to the current name or component for that icon.\n */\nexport function remapInternalIcon (vm: Vue, iconName: string): VuetifyIcon {\n  // Look for custom component in the configuration\n  const component = vm.$vuetify.icons.component\n\n  // Look for overrides\n  if (iconName.startsWith('$')) {\n    // Get the target icon name\n    const iconPath = `$vuetify.icons.values.${iconName.split('$').pop()!.split('.').pop()}`\n\n    // Now look up icon indirection name,\n    // e.g. '$vuetify.icons.values.cancel'\n    const override = getObjectValueByPath(vm, iconPath, iconName)\n\n    if (typeof override === 'string') iconName = override\n    else return override\n  }\n\n  if (component == null) {\n    return iconName\n  }\n\n  return {\n    component,\n    props: {\n      icon: iconName,\n    },\n  }\n}\n\nexport function keys<O> (o: O) {\n  return Object.keys(o) as (keyof O)[]\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nconst camelizeRE = /-(\\w)/g\nexport const camelize = (str: string): string => {\n  return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : '')\n}\n\n/**\n * Returns the set difference of B and A, i.e. the set of elements in B but not in A\n */\nexport function arrayDiff (a: any[], b: any[]): any[] {\n  const diff: any[] = []\n  for (let i = 0; i < b.length; i++) {\n    if (a.indexOf(b[i]) < 0) diff.push(b[i])\n  }\n  return diff\n}\n\n/**\n * Makes the first character of a string uppercase\n */\nexport function upperFirst (str: string): string {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n}\n\nexport function groupItems<T extends any = any> (\n  items: T[],\n  groupBy: string[],\n  groupDesc: boolean[]\n): ItemGroup<T>[] {\n  const key = groupBy[0]\n  const groups: ItemGroup<T>[] = []\n  let current\n  for (let i = 0; i < items.length; i++) {\n    const item = items[i]\n    const val = getObjectValueByPath(item, key, null)\n    if (current !== val) {\n      current = val\n      groups.push({\n        name: val ?? '',\n        items: [],\n      })\n    }\n    groups[groups.length - 1].items.push(item)\n  }\n  return groups\n}\n\nexport function wrapInArray<T> (v: T | T[] | null | undefined): T[] { return v != null ? Array.isArray(v) ? v : [v] : [] }\n\nexport function sortItems<T extends any = any> (\n  items: T[],\n  sortBy: string[],\n  sortDesc: boolean[],\n  locale: string,\n  customSorters?: Record<string, DataTableCompareFunction<T>>\n): T[] {\n  if (sortBy === null || !sortBy.length) return items\n  const stringCollator = new Intl.Collator(locale, { sensitivity: 'accent', usage: 'sort' })\n\n  return items.sort((a, b) => {\n    for (let i = 0; i < sortBy.length; i++) {\n      const sortKey = sortBy[i]\n\n      let sortA = getObjectValueByPath(a, sortKey)\n      let sortB = getObjectValueByPath(b, sortKey)\n\n      if (sortDesc[i]) {\n        [sortA, sortB] = [sortB, sortA]\n      }\n\n      if (customSorters && customSorters[sortKey]) {\n        const customResult = customSorters[sortKey](sortA, sortB)\n\n        if (!customResult) continue\n\n        return customResult\n      }\n\n      // Check if both cannot be evaluated\n      if (sortA === null && sortB === null) {\n        continue\n      }\n\n      // Dates should be compared numerically\n      if (sortA instanceof Date && sortB instanceof Date) {\n        return sortA.getTime() - sortB.getTime()\n      }\n\n      [sortA, sortB] = [sortA, sortB].map(s => (s || '').toString().toLocaleLowerCase())\n\n      if (sortA !== sortB) {\n        if (!isNaN(sortA) && !isNaN(sortB)) return Number(sortA) - Number(sortB)\n        return stringCollator.compare(sortA, sortB)\n      }\n    }\n\n    return 0\n  })\n}\n\nexport function defaultFilter (value: any, search: string | null, item: any) {\n  return value != null &&\n    search != null &&\n    typeof value !== 'boolean' &&\n    value.toString().toLocaleLowerCase().indexOf(search.toLocaleLowerCase()) !== -1\n}\n\nexport function searchItems<T extends any = any> (items: T[], search: string): T[] {\n  if (!search) return items\n  search = search.toString().toLowerCase()\n  if (search.trim() === '') return items\n\n  return items.filter((item: any) => Object.keys(item).some(key => defaultFilter(getObjectValueByPath(item, key), search, item)))\n}\n\n/**\n * Returns:\n *  - 'normal' for old style slots - `<template slot=\"default\">`\n *  - 'scoped' for old style scoped slots (`<template slot=\"default\" slot-scope=\"data\">`) or bound v-slot (`#default=\"data\"`)\n *  - 'v-slot' for unbound v-slot (`#default`) - only if the third param is true, otherwise counts as scoped\n */\nexport function getSlotType<T extends boolean = false> (vm: Vue, name: string, split?: T): (T extends true ? 'v-slot' : never) | 'normal' | 'scoped' | void {\n  if (vm.$slots.hasOwnProperty(name) && vm.$scopedSlots.hasOwnProperty(name) && (vm.$scopedSlots[name] as any).name) {\n    return split ? 'v-slot' as any : 'scoped'\n  }\n  if (vm.$slots.hasOwnProperty(name)) return 'normal'\n  if (vm.$scopedSlots.hasOwnProperty(name)) return 'scoped'\n}\n\nexport function debounce (fn: Function, delay: number) {\n  let timeoutId = 0 as any\n  return (...args: any[]) => {\n    clearTimeout(timeoutId)\n    timeoutId = setTimeout(() => fn(...args), delay)\n  }\n}\n\nexport function throttle<T extends (...args: any[]) => any> (fn: T, limit: number) {\n  let throttling = false\n  return (...args: Parameters<T>): void | ReturnType<T> => {\n    if (!throttling) {\n      throttling = true\n      setTimeout(() => throttling = false, limit)\n      return fn(...args)\n    }\n  }\n}\n\nexport function getPrefixedScopedSlots (prefix: string, scopedSlots: any) {\n  return Object.keys(scopedSlots).filter(k => k.startsWith(prefix)).reduce((obj: any, k: string) => {\n    obj[k.replace(prefix, '')] = scopedSlots[k]\n    return obj\n  }, {})\n}\n\nexport function getSlot (vm: Vue, name = 'default', data?: object | (() => object), optional = false) {\n  if (vm.$scopedSlots.hasOwnProperty(name)) {\n    return vm.$scopedSlots[name]!(data instanceof Function ? data() : data)\n  } else if (vm.$slots.hasOwnProperty(name) && (!data || optional)) {\n    return vm.$slots[name]\n  }\n  return undefined\n}\n\nexport function clamp (value: number, min = 0, max = 1) {\n  return Math.max(min, Math.min(max, value))\n}\n\nexport function padEnd (str: string, length: number, char = '0') {\n  return str + char.repeat(Math.max(0, length - str.length))\n}\n\nexport function chunk (str: string, size = 1) {\n  const chunked: string[] = []\n  let index = 0\n  while (index < str.length) {\n    chunked.push(str.substr(index, size))\n    index += size\n  }\n  return chunked\n}\n\nexport function humanReadableFileSize (bytes: number, binary = false): string {\n  const base = binary ? 1024 : 1000\n  if (bytes < base) {\n    return `${bytes} B`\n  }\n\n  const prefix = binary ? ['Ki', 'Mi', 'Gi'] : ['k', 'M', 'G']\n  let unit = -1\n  while (Math.abs(bytes) >= base && unit < prefix.length - 1) {\n    bytes /= base\n    ++unit\n  }\n  return `${bytes.toFixed(1)} ${prefix[unit]}B`\n}\n\nexport function camelizeObjectKeys (obj: Record<string, any> | null | undefined) {\n  if (!obj) return {}\n\n  return Object.keys(obj).reduce((o: any, key: string) => {\n    o[camelize(key)] = obj[key]\n    return o\n  }, {})\n}\n\nexport function mergeDeep (\n  source: Dictionary<any> = {},\n  target: Dictionary<any> = {}\n) {\n  for (const key in target) {\n    const sourceProperty = source[key]\n    const targetProperty = target[key]\n\n    // Only continue deep merging if\n    // both properties are objects\n    if (\n      isObject(sourceProperty) &&\n      isObject(targetProperty)\n    ) {\n      source[key] = mergeDeep(sourceProperty, targetProperty)\n\n      continue\n    }\n\n    source[key] = targetProperty\n  }\n\n  return source\n}\n\nexport function fillArray<T> (length: number, obj: T) {\n  return Array(length).fill(obj)\n}\n\n/**  Polyfill for Event.prototype.composedPath */\nexport function composedPath (e: Event): EventTarget[] {\n  if (e.composedPath) return e.composedPath()\n\n  const path = []\n  let el = e.target as Element\n\n  while (el) {\n    path.push(el)\n\n    if (el.tagName === 'HTML') {\n      path.push(document)\n      path.push(window)\n\n      return path\n    }\n\n    el = el.parentElement!\n  }\n  return path\n}\n","/**\n * @copyright 2017 Alex Regan\n * @license MIT\n * @see https://github.com/alexsasharegan/vue-functional-data-merge\n */\n/* eslint-disable max-statements */\nimport { VNodeData } from 'vue'\nimport { camelize, wrapInArray } from './helpers'\n\nconst pattern = {\n  styleList: /;(?![^(]*\\))/g,\n  styleProp: /:(.*)/,\n} as const\n\nfunction parseStyle (style: string) {\n  const styleMap: Dictionary<any> = {}\n\n  for (const s of style.split(pattern.styleList)) {\n    let [key, val] = s.split(pattern.styleProp)\n    key = key.trim()\n    if (!key) {\n      continue\n    }\n    // May be undefined if the `key: value` pair is incomplete.\n    if (typeof val === 'string') {\n      val = val.trim()\n    }\n    styleMap[camelize(key)] = val\n  }\n\n  return styleMap\n}\n\n/**\n * Intelligently merges data for createElement.\n * Merges arguments left to right, preferring the right argument.\n * Returns new VNodeData object.\n */\nexport default function mergeData (...vNodeData: VNodeData[]): VNodeData\nexport default function mergeData (): VNodeData {\n  const mergeTarget: VNodeData & Dictionary<any> = {}\n  let i: number = arguments.length\n  let prop: string\n\n  // Allow for variadic argument length.\n  while (i--) {\n    // Iterate through the data properties and execute merge strategies\n    // Object.keys eliminates need for hasOwnProperty call\n    for (prop of Object.keys(arguments[i])) {\n      switch (prop) {\n        // Array merge strategy (array concatenation)\n        case 'class':\n        case 'directives':\n          if (arguments[i][prop]) {\n            mergeTarget[prop] = mergeClasses(mergeTarget[prop], arguments[i][prop])\n          }\n          break\n        case 'style':\n          if (arguments[i][prop]) {\n            mergeTarget[prop] = mergeStyles(mergeTarget[prop], arguments[i][prop])\n          }\n          break\n        // Space delimited string concatenation strategy\n        case 'staticClass':\n          if (!arguments[i][prop]) {\n            break\n          }\n          if (mergeTarget[prop] === undefined) {\n            mergeTarget[prop] = ''\n          }\n          if (mergeTarget[prop]) {\n            // Not an empty string, so concatenate\n            mergeTarget[prop] += ' '\n          }\n          mergeTarget[prop] += arguments[i][prop].trim()\n          break\n        // Object, the properties of which to merge via array merge strategy (array concatenation).\n        // Callback merge strategy merges callbacks to the beginning of the array,\n        // so that the last defined callback will be invoked first.\n        // This is done since to mimic how Object.assign merging\n        // uses the last given value to assign.\n        case 'on':\n        case 'nativeOn':\n          if (arguments[i][prop]) {\n            mergeTarget[prop] = mergeListeners(mergeTarget[prop], arguments[i][prop])\n          }\n          break\n        // Object merge strategy\n        case 'attrs':\n        case 'props':\n        case 'domProps':\n        case 'scopedSlots':\n        case 'staticStyle':\n        case 'hook':\n        case 'transition':\n          if (!arguments[i][prop]) {\n            break\n          }\n          if (!mergeTarget[prop]) {\n            mergeTarget[prop] = {}\n          }\n          mergeTarget[prop] = { ...arguments[i][prop], ...mergeTarget[prop] }\n          break\n        // Reassignment strategy (no merge)\n        default: // slot, key, ref, tag, show, keepAlive\n          if (!mergeTarget[prop]) {\n            mergeTarget[prop] = arguments[i][prop]\n          }\n      }\n    }\n  }\n\n  return mergeTarget\n}\n\nexport function mergeStyles (\n  target: undefined | string | object[] | object,\n  source: undefined | string | object[] | object\n) {\n  if (!target) return source\n  if (!source) return target\n\n  target = wrapInArray(typeof target === 'string' ? parseStyle(target) : target)\n\n  return (target as object[]).concat(typeof source === 'string' ? parseStyle(source) : source)\n}\n\nexport function mergeClasses (target: any, source: any) {\n  if (!source) return target\n  if (!target) return source\n\n  return target ? wrapInArray(target).concat(source) : source\n}\n\nexport function mergeListeners (...args: [\n  { [key: string]: Function | Function[] } | undefined,\n  { [key: string]: Function | Function[] } | undefined\n]) {\n  if (!args[0]) return args[1]\n  if (!args[1]) return args[0]\n\n  const dest: { [key: string]: Function | Function[] } = {}\n\n  for (let i = 2; i--;) {\n    const arg = args[i]\n    for (const event in arg) {\n      if (!arg[event]) continue\n\n      if (dest[event]) {\n        // Merge current listeners before (because we are iterating backwards).\n        // Note that neither \"target\" or \"source\" must be altered.\n        dest[event] = ([] as Function[]).concat(arg[event], dest[event])\n      } else {\n        // Straight assign.\n        dest[event] = arg[event]\n      }\n    }\n  }\n\n  return dest\n}\n","/* eslint-disable max-len, import/export, no-use-before-define */\nimport Vue, { VueConstructor } from 'vue'\n\nexport default function mixins<T extends VueConstructor[]> (...args: T): ExtractVue<T> extends infer V ? V extends Vue ? VueConstructor<V> : never : never\nexport default function mixins<T extends Vue> (...args: VueConstructor[]): VueConstructor<T>\nexport default function mixins (...args: VueConstructor[]): VueConstructor {\n  return Vue.extend({ mixins: args })\n}\n\n/**\n * Returns the instance type from a VueConstructor\n * Useful for adding types when using mixins().extend()\n */\nexport type ExtractVue<T extends VueConstructor | VueConstructor[]> = T extends (infer U)[]\n  ? UnionToIntersection<\n    U extends VueConstructor<infer V> ? V : never\n  >\n  : T extends VueConstructor<infer V> ? V : never\n\ntype UnionToIntersection<U> =\n  (U extends any ? (k: U) => void : never) extends ((k: infer I) => void) ? I : never\n","/*!\n  * vue-router v3.5.4\n  * (c) 2022 Evan You\n  * @license MIT\n  */\n/*  */\n\nfunction assert (condition, message) {\n  if (!condition) {\n    throw new Error((\"[vue-router] \" + message))\n  }\n}\n\nfunction warn (condition, message) {\n  if (!condition) {\n    typeof console !== 'undefined' && console.warn((\"[vue-router] \" + message));\n  }\n}\n\nfunction extend (a, b) {\n  for (var key in b) {\n    a[key] = b[key];\n  }\n  return a\n}\n\n/*  */\n\nvar encodeReserveRE = /[!'()*]/g;\nvar encodeReserveReplacer = function (c) { return '%' + c.charCodeAt(0).toString(16); };\nvar commaRE = /%2C/g;\n\n// fixed encodeURIComponent which is more conformant to RFC3986:\n// - escapes [!'()*]\n// - preserve commas\nvar encode = function (str) { return encodeURIComponent(str)\n    .replace(encodeReserveRE, encodeReserveReplacer)\n    .replace(commaRE, ','); };\n\nfunction decode (str) {\n  try {\n    return decodeURIComponent(str)\n  } catch (err) {\n    if (process.env.NODE_ENV !== 'production') {\n      warn(false, (\"Error decoding \\\"\" + str + \"\\\". Leaving it intact.\"));\n    }\n  }\n  return str\n}\n\nfunction resolveQuery (\n  query,\n  extraQuery,\n  _parseQuery\n) {\n  if ( extraQuery === void 0 ) extraQuery = {};\n\n  var parse = _parseQuery || parseQuery;\n  var parsedQuery;\n  try {\n    parsedQuery = parse(query || '');\n  } catch (e) {\n    process.env.NODE_ENV !== 'production' && warn(false, e.message);\n    parsedQuery = {};\n  }\n  for (var key in extraQuery) {\n    var value = extraQuery[key];\n    parsedQuery[key] = Array.isArray(value)\n      ? value.map(castQueryParamValue)\n      : castQueryParamValue(value);\n  }\n  return parsedQuery\n}\n\nvar castQueryParamValue = function (value) { return (value == null || typeof value === 'object' ? value : String(value)); };\n\nfunction parseQuery (query) {\n  var res = {};\n\n  query = query.trim().replace(/^(\\?|#|&)/, '');\n\n  if (!query) {\n    return res\n  }\n\n  query.split('&').forEach(function (param) {\n    var parts = param.replace(/\\+/g, ' ').split('=');\n    var key = decode(parts.shift());\n    var val = parts.length > 0 ? decode(parts.join('=')) : null;\n\n    if (res[key] === undefined) {\n      res[key] = val;\n    } else if (Array.isArray(res[key])) {\n      res[key].push(val);\n    } else {\n      res[key] = [res[key], val];\n    }\n  });\n\n  return res\n}\n\nfunction stringifyQuery (obj) {\n  var res = obj\n    ? Object.keys(obj)\n      .map(function (key) {\n        var val = obj[key];\n\n        if (val === undefined) {\n          return ''\n        }\n\n        if (val === null) {\n          return encode(key)\n        }\n\n        if (Array.isArray(val)) {\n          var result = [];\n          val.forEach(function (val2) {\n            if (val2 === undefined) {\n              return\n            }\n            if (val2 === null) {\n              result.push(encode(key));\n            } else {\n              result.push(encode(key) + '=' + encode(val2));\n            }\n          });\n          return result.join('&')\n        }\n\n        return encode(key) + '=' + encode(val)\n      })\n      .filter(function (x) { return x.length > 0; })\n      .join('&')\n    : null;\n  return res ? (\"?\" + res) : ''\n}\n\n/*  */\n\nvar trailingSlashRE = /\\/?$/;\n\nfunction createRoute (\n  record,\n  location,\n  redirectedFrom,\n  router\n) {\n  var stringifyQuery = router && router.options.stringifyQuery;\n\n  var query = location.query || {};\n  try {\n    query = clone(query);\n  } catch (e) {}\n\n  var route = {\n    name: location.name || (record && record.name),\n    meta: (record && record.meta) || {},\n    path: location.path || '/',\n    hash: location.hash || '',\n    query: query,\n    params: location.params || {},\n    fullPath: getFullPath(location, stringifyQuery),\n    matched: record ? formatMatch(record) : []\n  };\n  if (redirectedFrom) {\n    route.redirectedFrom = getFullPath(redirectedFrom, stringifyQuery);\n  }\n  return Object.freeze(route)\n}\n\nfunction clone (value) {\n  if (Array.isArray(value)) {\n    return value.map(clone)\n  } else if (value && typeof value === 'object') {\n    var res = {};\n    for (var key in value) {\n      res[key] = clone(value[key]);\n    }\n    return res\n  } else {\n    return value\n  }\n}\n\n// the starting route that represents the initial state\nvar START = createRoute(null, {\n  path: '/'\n});\n\nfunction formatMatch (record) {\n  var res = [];\n  while (record) {\n    res.unshift(record);\n    record = record.parent;\n  }\n  return res\n}\n\nfunction getFullPath (\n  ref,\n  _stringifyQuery\n) {\n  var path = ref.path;\n  var query = ref.query; if ( query === void 0 ) query = {};\n  var hash = ref.hash; if ( hash === void 0 ) hash = '';\n\n  var stringify = _stringifyQuery || stringifyQuery;\n  return (path || '/') + stringify(query) + hash\n}\n\nfunction isSameRoute (a, b, onlyPath) {\n  if (b === START) {\n    return a === b\n  } else if (!b) {\n    return false\n  } else if (a.path && b.path) {\n    return a.path.replace(trailingSlashRE, '') === b.path.replace(trailingSlashRE, '') && (onlyPath ||\n      a.hash === b.hash &&\n      isObjectEqual(a.query, b.query))\n  } else if (a.name && b.name) {\n    return (\n      a.name === b.name &&\n      (onlyPath || (\n        a.hash === b.hash &&\n      isObjectEqual(a.query, b.query) &&\n      isObjectEqual(a.params, b.params))\n      )\n    )\n  } else {\n    return false\n  }\n}\n\nfunction isObjectEqual (a, b) {\n  if ( a === void 0 ) a = {};\n  if ( b === void 0 ) b = {};\n\n  // handle null value #1566\n  if (!a || !b) { return a === b }\n  var aKeys = Object.keys(a).sort();\n  var bKeys = Object.keys(b).sort();\n  if (aKeys.length !== bKeys.length) {\n    return false\n  }\n  return aKeys.every(function (key, i) {\n    var aVal = a[key];\n    var bKey = bKeys[i];\n    if (bKey !== key) { return false }\n    var bVal = b[key];\n    // query values can be null and undefined\n    if (aVal == null || bVal == null) { return aVal === bVal }\n    // check nested equality\n    if (typeof aVal === 'object' && typeof bVal === 'object') {\n      return isObjectEqual(aVal, bVal)\n    }\n    return String(aVal) === String(bVal)\n  })\n}\n\nfunction isIncludedRoute (current, target) {\n  return (\n    current.path.replace(trailingSlashRE, '/').indexOf(\n      target.path.replace(trailingSlashRE, '/')\n    ) === 0 &&\n    (!target.hash || current.hash === target.hash) &&\n    queryIncludes(current.query, target.query)\n  )\n}\n\nfunction queryIncludes (current, target) {\n  for (var key in target) {\n    if (!(key in current)) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction handleRouteEntered (route) {\n  for (var i = 0; i < route.matched.length; i++) {\n    var record = route.matched[i];\n    for (var name in record.instances) {\n      var instance = record.instances[name];\n      var cbs = record.enteredCbs[name];\n      if (!instance || !cbs) { continue }\n      delete record.enteredCbs[name];\n      for (var i$1 = 0; i$1 < cbs.length; i$1++) {\n        if (!instance._isBeingDestroyed) { cbs[i$1](instance); }\n      }\n    }\n  }\n}\n\nvar View = {\n  name: 'RouterView',\n  functional: true,\n  props: {\n    name: {\n      type: String,\n      default: 'default'\n    }\n  },\n  render: function render (_, ref) {\n    var props = ref.props;\n    var children = ref.children;\n    var parent = ref.parent;\n    var data = ref.data;\n\n    // used by devtools to display a router-view badge\n    data.routerView = true;\n\n    // directly use parent context's createElement() function\n    // so that components rendered by router-view can resolve named slots\n    var h = parent.$createElement;\n    var name = props.name;\n    var route = parent.$route;\n    var cache = parent._routerViewCache || (parent._routerViewCache = {});\n\n    // determine current view depth, also check to see if the tree\n    // has been toggled inactive but kept-alive.\n    var depth = 0;\n    var inactive = false;\n    while (parent && parent._routerRoot !== parent) {\n      var vnodeData = parent.$vnode ? parent.$vnode.data : {};\n      if (vnodeData.routerView) {\n        depth++;\n      }\n      if (vnodeData.keepAlive && parent._directInactive && parent._inactive) {\n        inactive = true;\n      }\n      parent = parent.$parent;\n    }\n    data.routerViewDepth = depth;\n\n    // render previous view if the tree is inactive and kept-alive\n    if (inactive) {\n      var cachedData = cache[name];\n      var cachedComponent = cachedData && cachedData.component;\n      if (cachedComponent) {\n        // #2301\n        // pass props\n        if (cachedData.configProps) {\n          fillPropsinData(cachedComponent, data, cachedData.route, cachedData.configProps);\n        }\n        return h(cachedComponent, data, children)\n      } else {\n        // render previous empty view\n        return h()\n      }\n    }\n\n    var matched = route.matched[depth];\n    var component = matched && matched.components[name];\n\n    // render empty node if no matched route or no config component\n    if (!matched || !component) {\n      cache[name] = null;\n      return h()\n    }\n\n    // cache component\n    cache[name] = { component: component };\n\n    // attach instance registration hook\n    // this will be called in the instance's injected lifecycle hooks\n    data.registerRouteInstance = function (vm, val) {\n      // val could be undefined for unregistration\n      var current = matched.instances[name];\n      if (\n        (val && current !== vm) ||\n        (!val && current === vm)\n      ) {\n        matched.instances[name] = val;\n      }\n    }\n\n    // also register instance in prepatch hook\n    // in case the same component instance is reused across different routes\n    ;(data.hook || (data.hook = {})).prepatch = function (_, vnode) {\n      matched.instances[name] = vnode.componentInstance;\n    };\n\n    // register instance in init hook\n    // in case kept-alive component be actived when routes changed\n    data.hook.init = function (vnode) {\n      if (vnode.data.keepAlive &&\n        vnode.componentInstance &&\n        vnode.componentInstance !== matched.instances[name]\n      ) {\n        matched.instances[name] = vnode.componentInstance;\n      }\n\n      // if the route transition has already been confirmed then we weren't\n      // able to call the cbs during confirmation as the component was not\n      // registered yet, so we call it here.\n      handleRouteEntered(route);\n    };\n\n    var configProps = matched.props && matched.props[name];\n    // save route and configProps in cache\n    if (configProps) {\n      extend(cache[name], {\n        route: route,\n        configProps: configProps\n      });\n      fillPropsinData(component, data, route, configProps);\n    }\n\n    return h(component, data, children)\n  }\n};\n\nfunction fillPropsinData (component, data, route, configProps) {\n  // resolve props\n  var propsToPass = data.props = resolveProps(route, configProps);\n  if (propsToPass) {\n    // clone to prevent mutation\n    propsToPass = data.props = extend({}, propsToPass);\n    // pass non-declared props as attrs\n    var attrs = data.attrs = data.attrs || {};\n    for (var key in propsToPass) {\n      if (!component.props || !(key in component.props)) {\n        attrs[key] = propsToPass[key];\n        delete propsToPass[key];\n      }\n    }\n  }\n}\n\nfunction resolveProps (route, config) {\n  switch (typeof config) {\n    case 'undefined':\n      return\n    case 'object':\n      return config\n    case 'function':\n      return config(route)\n    case 'boolean':\n      return config ? route.params : undefined\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        warn(\n          false,\n          \"props in \\\"\" + (route.path) + \"\\\" is a \" + (typeof config) + \", \" +\n          \"expecting an object, function or boolean.\"\n        );\n      }\n  }\n}\n\n/*  */\n\nfunction resolvePath (\n  relative,\n  base,\n  append\n) {\n  var firstChar = relative.charAt(0);\n  if (firstChar === '/') {\n    return relative\n  }\n\n  if (firstChar === '?' || firstChar === '#') {\n    return base + relative\n  }\n\n  var stack = base.split('/');\n\n  // remove trailing segment if:\n  // - not appending\n  // - appending to trailing slash (last segment is empty)\n  if (!append || !stack[stack.length - 1]) {\n    stack.pop();\n  }\n\n  // resolve relative path\n  var segments = relative.replace(/^\\//, '').split('/');\n  for (var i = 0; i < segments.length; i++) {\n    var segment = segments[i];\n    if (segment === '..') {\n      stack.pop();\n    } else if (segment !== '.') {\n      stack.push(segment);\n    }\n  }\n\n  // ensure leading slash\n  if (stack[0] !== '') {\n    stack.unshift('');\n  }\n\n  return stack.join('/')\n}\n\nfunction parsePath (path) {\n  var hash = '';\n  var query = '';\n\n  var hashIndex = path.indexOf('#');\n  if (hashIndex >= 0) {\n    hash = path.slice(hashIndex);\n    path = path.slice(0, hashIndex);\n  }\n\n  var queryIndex = path.indexOf('?');\n  if (queryIndex >= 0) {\n    query = path.slice(queryIndex + 1);\n    path = path.slice(0, queryIndex);\n  }\n\n  return {\n    path: path,\n    query: query,\n    hash: hash\n  }\n}\n\nfunction cleanPath (path) {\n  return path.replace(/\\/(?:\\s*\\/)+/g, '/')\n}\n\nvar isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^\\\\\\\\()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {string}  str\n * @param  {Object=} options\n * @return {!Array}\n */\nfunction parse (str, options) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var defaultDelimiter = options && options.delimiter || '/';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    var next = str[index];\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var modifier = res[6];\n    var asterisk = res[7];\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var partial = prefix != null && next != null && next !== prefix;\n    var repeat = modifier === '+' || modifier === '*';\n    var optional = modifier === '?' || modifier === '*';\n    var delimiter = res[2] || defaultDelimiter;\n    var pattern = capture || group;\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      partial: partial,\n      asterisk: !!asterisk,\n      pattern: pattern ? escapeGroup(pattern) : (asterisk ? '.*' : '[^' + escapeString(delimiter) + ']+?')\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {string}             str\n * @param  {Object=}            options\n * @return {!function(Object=, Object=)}\n */\nfunction compile (str, options) {\n  return tokensToFunction(parse(str, options), options)\n}\n\n/**\n * Prettier encoding of URI path segments.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeURIComponentPretty (str) {\n  return encodeURI(str).replace(/[\\/?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Encode the asterisk parameter. Similar to `pretty`, but allows slashes.\n *\n * @param  {string}\n * @return {string}\n */\nfunction encodeAsterisk (str) {\n  return encodeURI(str).replace(/[?#]/g, function (c) {\n    return '%' + c.charCodeAt(0).toString(16).toUpperCase()\n  })\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens, options) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^(?:' + tokens[i].pattern + ')$', flags(options));\n    }\n  }\n\n  return function (obj, opts) {\n    var path = '';\n    var data = obj || {};\n    var options = opts || {};\n    var encode = options.pretty ? encodeURIComponentPretty : encodeURIComponent;\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          // Prepend partial segment prefixes.\n          if (token.partial) {\n            path += token.prefix;\n          }\n\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received `' + JSON.stringify(value) + '`')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encode(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received `' + JSON.stringify(segment) + '`')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = token.asterisk ? encodeAsterisk(value) : encode(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {string} str\n * @return {string}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/\\\\])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {string} group\n * @return {string}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {!RegExp} re\n * @param  {Array}   keys\n * @return {!RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {string}\n */\nfunction flags (options) {\n  return options && options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {!RegExp} path\n * @param  {!Array}  keys\n * @return {!RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        partial: false,\n        asterisk: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {!Array}  path\n * @param  {Array}   keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {string}  path\n * @param  {!Array}  keys\n * @param  {!Object} options\n * @return {!RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  return tokensToRegExp(parse(path, options), keys, options)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {!Array}          tokens\n * @param  {(Array|Object)=} keys\n * @param  {Object=}         options\n * @return {!RegExp}\n */\nfunction tokensToRegExp (tokens, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = '(?:' + token.pattern + ')';\n\n      keys.push(token);\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (!token.partial) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = prefix + '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  var delimiter = escapeString(options.delimiter || '/');\n  var endsWithDelimiter = route.slice(-delimiter.length) === delimiter;\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithDelimiter ? route.slice(0, -delimiter.length) : route) + '(?:' + delimiter + '(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithDelimiter ? '' : '(?=' + delimiter + '|$)';\n  }\n\n  return attachKeys(new RegExp('^' + route, flags(options)), keys)\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(string|RegExp|Array)} path\n * @param  {(Array|Object)=}       keys\n * @param  {Object=}               options\n * @return {!RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  if (!isarray(keys)) {\n    options = /** @type {!Object} */ (keys || options);\n    keys = [];\n  }\n\n  options = options || {};\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, /** @type {!Array} */ (keys))\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(/** @type {!Array} */ (path), /** @type {!Array} */ (keys), options)\n  }\n\n  return stringToRegexp(/** @type {string} */ (path), /** @type {!Array} */ (keys), options)\n}\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/*  */\n\n// $flow-disable-line\nvar regexpCompileCache = Object.create(null);\n\nfunction fillParams (\n  path,\n  params,\n  routeMsg\n) {\n  params = params || {};\n  try {\n    var filler =\n      regexpCompileCache[path] ||\n      (regexpCompileCache[path] = pathToRegexp_1.compile(path));\n\n    // Fix #2505 resolving asterisk routes { name: 'not-found', params: { pathMatch: '/not-found' }}\n    // and fix #3106 so that you can work with location descriptor object having params.pathMatch equal to empty string\n    if (typeof params.pathMatch === 'string') { params[0] = params.pathMatch; }\n\n    return filler(params, { pretty: true })\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') {\n      // Fix #3072 no warn if `pathMatch` is string\n      warn(typeof params.pathMatch === 'string', (\"missing param for \" + routeMsg + \": \" + (e.message)));\n    }\n    return ''\n  } finally {\n    // delete the 0 if it was added\n    delete params[0];\n  }\n}\n\n/*  */\n\nfunction normalizeLocation (\n  raw,\n  current,\n  append,\n  router\n) {\n  var next = typeof raw === 'string' ? { path: raw } : raw;\n  // named target\n  if (next._normalized) {\n    return next\n  } else if (next.name) {\n    next = extend({}, raw);\n    var params = next.params;\n    if (params && typeof params === 'object') {\n      next.params = extend({}, params);\n    }\n    return next\n  }\n\n  // relative params\n  if (!next.path && next.params && current) {\n    next = extend({}, next);\n    next._normalized = true;\n    var params$1 = extend(extend({}, current.params), next.params);\n    if (current.name) {\n      next.name = current.name;\n      next.params = params$1;\n    } else if (current.matched.length) {\n      var rawPath = current.matched[current.matched.length - 1].path;\n      next.path = fillParams(rawPath, params$1, (\"path \" + (current.path)));\n    } else if (process.env.NODE_ENV !== 'production') {\n      warn(false, \"relative params navigation requires a current route.\");\n    }\n    return next\n  }\n\n  var parsedPath = parsePath(next.path || '');\n  var basePath = (current && current.path) || '/';\n  var path = parsedPath.path\n    ? resolvePath(parsedPath.path, basePath, append || next.append)\n    : basePath;\n\n  var query = resolveQuery(\n    parsedPath.query,\n    next.query,\n    router && router.options.parseQuery\n  );\n\n  var hash = next.hash || parsedPath.hash;\n  if (hash && hash.charAt(0) !== '#') {\n    hash = \"#\" + hash;\n  }\n\n  return {\n    _normalized: true,\n    path: path,\n    query: query,\n    hash: hash\n  }\n}\n\n/*  */\n\n// work around weird flow bug\nvar toTypes = [String, Object];\nvar eventTypes = [String, Array];\n\nvar noop = function () {};\n\nvar warnedCustomSlot;\nvar warnedTagProp;\nvar warnedEventProp;\n\nvar Link = {\n  name: 'RouterLink',\n  props: {\n    to: {\n      type: toTypes,\n      required: true\n    },\n    tag: {\n      type: String,\n      default: 'a'\n    },\n    custom: Boolean,\n    exact: Boolean,\n    exactPath: Boolean,\n    append: Boolean,\n    replace: Boolean,\n    activeClass: String,\n    exactActiveClass: String,\n    ariaCurrentValue: {\n      type: String,\n      default: 'page'\n    },\n    event: {\n      type: eventTypes,\n      default: 'click'\n    }\n  },\n  render: function render (h) {\n    var this$1 = this;\n\n    var router = this.$router;\n    var current = this.$route;\n    var ref = router.resolve(\n      this.to,\n      current,\n      this.append\n    );\n    var location = ref.location;\n    var route = ref.route;\n    var href = ref.href;\n\n    var classes = {};\n    var globalActiveClass = router.options.linkActiveClass;\n    var globalExactActiveClass = router.options.linkExactActiveClass;\n    // Support global empty active class\n    var activeClassFallback =\n      globalActiveClass == null ? 'router-link-active' : globalActiveClass;\n    var exactActiveClassFallback =\n      globalExactActiveClass == null\n        ? 'router-link-exact-active'\n        : globalExactActiveClass;\n    var activeClass =\n      this.activeClass == null ? activeClassFallback : this.activeClass;\n    var exactActiveClass =\n      this.exactActiveClass == null\n        ? exactActiveClassFallback\n        : this.exactActiveClass;\n\n    var compareTarget = route.redirectedFrom\n      ? createRoute(null, normalizeLocation(route.redirectedFrom), null, router)\n      : route;\n\n    classes[exactActiveClass] = isSameRoute(current, compareTarget, this.exactPath);\n    classes[activeClass] = this.exact || this.exactPath\n      ? classes[exactActiveClass]\n      : isIncludedRoute(current, compareTarget);\n\n    var ariaCurrentValue = classes[exactActiveClass] ? this.ariaCurrentValue : null;\n\n    var handler = function (e) {\n      if (guardEvent(e)) {\n        if (this$1.replace) {\n          router.replace(location, noop);\n        } else {\n          router.push(location, noop);\n        }\n      }\n    };\n\n    var on = { click: guardEvent };\n    if (Array.isArray(this.event)) {\n      this.event.forEach(function (e) {\n        on[e] = handler;\n      });\n    } else {\n      on[this.event] = handler;\n    }\n\n    var data = { class: classes };\n\n    var scopedSlot =\n      !this.$scopedSlots.$hasNormal &&\n      this.$scopedSlots.default &&\n      this.$scopedSlots.default({\n        href: href,\n        route: route,\n        navigate: handler,\n        isActive: classes[activeClass],\n        isExactActive: classes[exactActiveClass]\n      });\n\n    if (scopedSlot) {\n      if (process.env.NODE_ENV !== 'production' && !this.custom) {\n        !warnedCustomSlot && warn(false, 'In Vue Router 4, the v-slot API will by default wrap its content with an <a> element. Use the custom prop to remove this warning:\\n<router-link v-slot=\"{ navigate, href }\" custom></router-link>\\n');\n        warnedCustomSlot = true;\n      }\n      if (scopedSlot.length === 1) {\n        return scopedSlot[0]\n      } else if (scopedSlot.length > 1 || !scopedSlot.length) {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(\n            false,\n            (\"<router-link> with to=\\\"\" + (this.to) + \"\\\" is trying to use a scoped slot but it didn't provide exactly one child. Wrapping the content with a span element.\")\n          );\n        }\n        return scopedSlot.length === 0 ? h() : h('span', {}, scopedSlot)\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if ('tag' in this.$options.propsData && !warnedTagProp) {\n        warn(\n          false,\n          \"<router-link>'s tag prop is deprecated and has been removed in Vue Router 4. Use the v-slot API to remove this warning: https://next.router.vuejs.org/guide/migration/#removal-of-event-and-tag-props-in-router-link.\"\n        );\n        warnedTagProp = true;\n      }\n      if ('event' in this.$options.propsData && !warnedEventProp) {\n        warn(\n          false,\n          \"<router-link>'s event prop is deprecated and has been removed in Vue Router 4. Use the v-slot API to remove this warning: https://next.router.vuejs.org/guide/migration/#removal-of-event-and-tag-props-in-router-link.\"\n        );\n        warnedEventProp = true;\n      }\n    }\n\n    if (this.tag === 'a') {\n      data.on = on;\n      data.attrs = { href: href, 'aria-current': ariaCurrentValue };\n    } else {\n      // find the first <a> child and apply listener and href\n      var a = findAnchor(this.$slots.default);\n      if (a) {\n        // in case the <a> is a static node\n        a.isStatic = false;\n        var aData = (a.data = extend({}, a.data));\n        aData.on = aData.on || {};\n        // transform existing events in both objects into arrays so we can push later\n        for (var event in aData.on) {\n          var handler$1 = aData.on[event];\n          if (event in on) {\n            aData.on[event] = Array.isArray(handler$1) ? handler$1 : [handler$1];\n          }\n        }\n        // append new listeners for router-link\n        for (var event$1 in on) {\n          if (event$1 in aData.on) {\n            // on[event] is always a function\n            aData.on[event$1].push(on[event$1]);\n          } else {\n            aData.on[event$1] = handler;\n          }\n        }\n\n        var aAttrs = (a.data.attrs = extend({}, a.data.attrs));\n        aAttrs.href = href;\n        aAttrs['aria-current'] = ariaCurrentValue;\n      } else {\n        // doesn't have <a> child, apply listener to self\n        data.on = on;\n      }\n    }\n\n    return h(this.tag, data, this.$slots.default)\n  }\n};\n\nfunction guardEvent (e) {\n  // don't redirect with control keys\n  if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) { return }\n  // don't redirect when preventDefault called\n  if (e.defaultPrevented) { return }\n  // don't redirect on right click\n  if (e.button !== undefined && e.button !== 0) { return }\n  // don't redirect if `target=\"_blank\"`\n  if (e.currentTarget && e.currentTarget.getAttribute) {\n    var target = e.currentTarget.getAttribute('target');\n    if (/\\b_blank\\b/i.test(target)) { return }\n  }\n  // this may be a Weex event which doesn't have this method\n  if (e.preventDefault) {\n    e.preventDefault();\n  }\n  return true\n}\n\nfunction findAnchor (children) {\n  if (children) {\n    var child;\n    for (var i = 0; i < children.length; i++) {\n      child = children[i];\n      if (child.tag === 'a') {\n        return child\n      }\n      if (child.children && (child = findAnchor(child.children))) {\n        return child\n      }\n    }\n  }\n}\n\nvar _Vue;\n\nfunction install (Vue) {\n  if (install.installed && _Vue === Vue) { return }\n  install.installed = true;\n\n  _Vue = Vue;\n\n  var isDef = function (v) { return v !== undefined; };\n\n  var registerInstance = function (vm, callVal) {\n    var i = vm.$options._parentVnode;\n    if (isDef(i) && isDef(i = i.data) && isDef(i = i.registerRouteInstance)) {\n      i(vm, callVal);\n    }\n  };\n\n  Vue.mixin({\n    beforeCreate: function beforeCreate () {\n      if (isDef(this.$options.router)) {\n        this._routerRoot = this;\n        this._router = this.$options.router;\n        this._router.init(this);\n        Vue.util.defineReactive(this, '_route', this._router.history.current);\n      } else {\n        this._routerRoot = (this.$parent && this.$parent._routerRoot) || this;\n      }\n      registerInstance(this, this);\n    },\n    destroyed: function destroyed () {\n      registerInstance(this);\n    }\n  });\n\n  Object.defineProperty(Vue.prototype, '$router', {\n    get: function get () { return this._routerRoot._router }\n  });\n\n  Object.defineProperty(Vue.prototype, '$route', {\n    get: function get () { return this._routerRoot._route }\n  });\n\n  Vue.component('RouterView', View);\n  Vue.component('RouterLink', Link);\n\n  var strats = Vue.config.optionMergeStrategies;\n  // use the same hook merging strategy for route hooks\n  strats.beforeRouteEnter = strats.beforeRouteLeave = strats.beforeRouteUpdate = strats.created;\n}\n\n/*  */\n\nvar inBrowser = typeof window !== 'undefined';\n\n/*  */\n\nfunction createRouteMap (\n  routes,\n  oldPathList,\n  oldPathMap,\n  oldNameMap,\n  parentRoute\n) {\n  // the path list is used to control path matching priority\n  var pathList = oldPathList || [];\n  // $flow-disable-line\n  var pathMap = oldPathMap || Object.create(null);\n  // $flow-disable-line\n  var nameMap = oldNameMap || Object.create(null);\n\n  routes.forEach(function (route) {\n    addRouteRecord(pathList, pathMap, nameMap, route, parentRoute);\n  });\n\n  // ensure wildcard routes are always at the end\n  for (var i = 0, l = pathList.length; i < l; i++) {\n    if (pathList[i] === '*') {\n      pathList.push(pathList.splice(i, 1)[0]);\n      l--;\n      i--;\n    }\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    // warn if routes do not include leading slashes\n    var found = pathList\n    // check for missing leading slash\n      .filter(function (path) { return path && path.charAt(0) !== '*' && path.charAt(0) !== '/'; });\n\n    if (found.length > 0) {\n      var pathNames = found.map(function (path) { return (\"- \" + path); }).join('\\n');\n      warn(false, (\"Non-nested routes must include a leading slash character. Fix the following routes: \\n\" + pathNames));\n    }\n  }\n\n  return {\n    pathList: pathList,\n    pathMap: pathMap,\n    nameMap: nameMap\n  }\n}\n\nfunction addRouteRecord (\n  pathList,\n  pathMap,\n  nameMap,\n  route,\n  parent,\n  matchAs\n) {\n  var path = route.path;\n  var name = route.name;\n  if (process.env.NODE_ENV !== 'production') {\n    assert(path != null, \"\\\"path\\\" is required in a route configuration.\");\n    assert(\n      typeof route.component !== 'string',\n      \"route config \\\"component\\\" for path: \" + (String(\n        path || name\n      )) + \" cannot be a \" + \"string id. Use an actual component instead.\"\n    );\n\n    warn(\n      // eslint-disable-next-line no-control-regex\n      !/[^\\u0000-\\u007F]+/.test(path),\n      \"Route with path \\\"\" + path + \"\\\" contains unencoded characters, make sure \" +\n        \"your path is correctly encoded before passing it to the router. Use \" +\n        \"encodeURI to encode static segments of your path.\"\n    );\n  }\n\n  var pathToRegexpOptions =\n    route.pathToRegexpOptions || {};\n  var normalizedPath = normalizePath(path, parent, pathToRegexpOptions.strict);\n\n  if (typeof route.caseSensitive === 'boolean') {\n    pathToRegexpOptions.sensitive = route.caseSensitive;\n  }\n\n  var record = {\n    path: normalizedPath,\n    regex: compileRouteRegex(normalizedPath, pathToRegexpOptions),\n    components: route.components || { default: route.component },\n    alias: route.alias\n      ? typeof route.alias === 'string'\n        ? [route.alias]\n        : route.alias\n      : [],\n    instances: {},\n    enteredCbs: {},\n    name: name,\n    parent: parent,\n    matchAs: matchAs,\n    redirect: route.redirect,\n    beforeEnter: route.beforeEnter,\n    meta: route.meta || {},\n    props:\n      route.props == null\n        ? {}\n        : route.components\n          ? route.props\n          : { default: route.props }\n  };\n\n  if (route.children) {\n    // Warn if route is named, does not redirect and has a default child route.\n    // If users navigate to this route by name, the default child will\n    // not be rendered (GH Issue #629)\n    if (process.env.NODE_ENV !== 'production') {\n      if (\n        route.name &&\n        !route.redirect &&\n        route.children.some(function (child) { return /^\\/?$/.test(child.path); })\n      ) {\n        warn(\n          false,\n          \"Named Route '\" + (route.name) + \"' has a default child route. \" +\n            \"When navigating to this named route (:to=\\\"{name: '\" + (route.name) + \"'}\\\"), \" +\n            \"the default child route will not be rendered. Remove the name from \" +\n            \"this route and use the name of the default child route for named \" +\n            \"links instead.\"\n        );\n      }\n    }\n    route.children.forEach(function (child) {\n      var childMatchAs = matchAs\n        ? cleanPath((matchAs + \"/\" + (child.path)))\n        : undefined;\n      addRouteRecord(pathList, pathMap, nameMap, child, record, childMatchAs);\n    });\n  }\n\n  if (!pathMap[record.path]) {\n    pathList.push(record.path);\n    pathMap[record.path] = record;\n  }\n\n  if (route.alias !== undefined) {\n    var aliases = Array.isArray(route.alias) ? route.alias : [route.alias];\n    for (var i = 0; i < aliases.length; ++i) {\n      var alias = aliases[i];\n      if (process.env.NODE_ENV !== 'production' && alias === path) {\n        warn(\n          false,\n          (\"Found an alias with the same value as the path: \\\"\" + path + \"\\\". You have to remove that alias. It will be ignored in development.\")\n        );\n        // skip in dev to make it work\n        continue\n      }\n\n      var aliasRoute = {\n        path: alias,\n        children: route.children\n      };\n      addRouteRecord(\n        pathList,\n        pathMap,\n        nameMap,\n        aliasRoute,\n        parent,\n        record.path || '/' // matchAs\n      );\n    }\n  }\n\n  if (name) {\n    if (!nameMap[name]) {\n      nameMap[name] = record;\n    } else if (process.env.NODE_ENV !== 'production' && !matchAs) {\n      warn(\n        false,\n        \"Duplicate named routes definition: \" +\n          \"{ name: \\\"\" + name + \"\\\", path: \\\"\" + (record.path) + \"\\\" }\"\n      );\n    }\n  }\n}\n\nfunction compileRouteRegex (\n  path,\n  pathToRegexpOptions\n) {\n  var regex = pathToRegexp_1(path, [], pathToRegexpOptions);\n  if (process.env.NODE_ENV !== 'production') {\n    var keys = Object.create(null);\n    regex.keys.forEach(function (key) {\n      warn(\n        !keys[key.name],\n        (\"Duplicate param keys in route with path: \\\"\" + path + \"\\\"\")\n      );\n      keys[key.name] = true;\n    });\n  }\n  return regex\n}\n\nfunction normalizePath (\n  path,\n  parent,\n  strict\n) {\n  if (!strict) { path = path.replace(/\\/$/, ''); }\n  if (path[0] === '/') { return path }\n  if (parent == null) { return path }\n  return cleanPath(((parent.path) + \"/\" + path))\n}\n\n/*  */\n\n\n\nfunction createMatcher (\n  routes,\n  router\n) {\n  var ref = createRouteMap(routes);\n  var pathList = ref.pathList;\n  var pathMap = ref.pathMap;\n  var nameMap = ref.nameMap;\n\n  function addRoutes (routes) {\n    createRouteMap(routes, pathList, pathMap, nameMap);\n  }\n\n  function addRoute (parentOrRoute, route) {\n    var parent = (typeof parentOrRoute !== 'object') ? nameMap[parentOrRoute] : undefined;\n    // $flow-disable-line\n    createRouteMap([route || parentOrRoute], pathList, pathMap, nameMap, parent);\n\n    // add aliases of parent\n    if (parent && parent.alias.length) {\n      createRouteMap(\n        // $flow-disable-line route is defined if parent is\n        parent.alias.map(function (alias) { return ({ path: alias, children: [route] }); }),\n        pathList,\n        pathMap,\n        nameMap,\n        parent\n      );\n    }\n  }\n\n  function getRoutes () {\n    return pathList.map(function (path) { return pathMap[path]; })\n  }\n\n  function match (\n    raw,\n    currentRoute,\n    redirectedFrom\n  ) {\n    var location = normalizeLocation(raw, currentRoute, false, router);\n    var name = location.name;\n\n    if (name) {\n      var record = nameMap[name];\n      if (process.env.NODE_ENV !== 'production') {\n        warn(record, (\"Route with name '\" + name + \"' does not exist\"));\n      }\n      if (!record) { return _createRoute(null, location) }\n      var paramNames = record.regex.keys\n        .filter(function (key) { return !key.optional; })\n        .map(function (key) { return key.name; });\n\n      if (typeof location.params !== 'object') {\n        location.params = {};\n      }\n\n      if (currentRoute && typeof currentRoute.params === 'object') {\n        for (var key in currentRoute.params) {\n          if (!(key in location.params) && paramNames.indexOf(key) > -1) {\n            location.params[key] = currentRoute.params[key];\n          }\n        }\n      }\n\n      location.path = fillParams(record.path, location.params, (\"named route \\\"\" + name + \"\\\"\"));\n      return _createRoute(record, location, redirectedFrom)\n    } else if (location.path) {\n      location.params = {};\n      for (var i = 0; i < pathList.length; i++) {\n        var path = pathList[i];\n        var record$1 = pathMap[path];\n        if (matchRoute(record$1.regex, location.path, location.params)) {\n          return _createRoute(record$1, location, redirectedFrom)\n        }\n      }\n    }\n    // no match\n    return _createRoute(null, location)\n  }\n\n  function redirect (\n    record,\n    location\n  ) {\n    var originalRedirect = record.redirect;\n    var redirect = typeof originalRedirect === 'function'\n      ? originalRedirect(createRoute(record, location, null, router))\n      : originalRedirect;\n\n    if (typeof redirect === 'string') {\n      redirect = { path: redirect };\n    }\n\n    if (!redirect || typeof redirect !== 'object') {\n      if (process.env.NODE_ENV !== 'production') {\n        warn(\n          false, (\"invalid redirect option: \" + (JSON.stringify(redirect)))\n        );\n      }\n      return _createRoute(null, location)\n    }\n\n    var re = redirect;\n    var name = re.name;\n    var path = re.path;\n    var query = location.query;\n    var hash = location.hash;\n    var params = location.params;\n    query = re.hasOwnProperty('query') ? re.query : query;\n    hash = re.hasOwnProperty('hash') ? re.hash : hash;\n    params = re.hasOwnProperty('params') ? re.params : params;\n\n    if (name) {\n      // resolved named direct\n      var targetRecord = nameMap[name];\n      if (process.env.NODE_ENV !== 'production') {\n        assert(targetRecord, (\"redirect failed: named route \\\"\" + name + \"\\\" not found.\"));\n      }\n      return match({\n        _normalized: true,\n        name: name,\n        query: query,\n        hash: hash,\n        params: params\n      }, undefined, location)\n    } else if (path) {\n      // 1. resolve relative redirect\n      var rawPath = resolveRecordPath(path, record);\n      // 2. resolve params\n      var resolvedPath = fillParams(rawPath, params, (\"redirect route with path \\\"\" + rawPath + \"\\\"\"));\n      // 3. rematch with existing query and hash\n      return match({\n        _normalized: true,\n        path: resolvedPath,\n        query: query,\n        hash: hash\n      }, undefined, location)\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        warn(false, (\"invalid redirect option: \" + (JSON.stringify(redirect))));\n      }\n      return _createRoute(null, location)\n    }\n  }\n\n  function alias (\n    record,\n    location,\n    matchAs\n  ) {\n    var aliasedPath = fillParams(matchAs, location.params, (\"aliased route with path \\\"\" + matchAs + \"\\\"\"));\n    var aliasedMatch = match({\n      _normalized: true,\n      path: aliasedPath\n    });\n    if (aliasedMatch) {\n      var matched = aliasedMatch.matched;\n      var aliasedRecord = matched[matched.length - 1];\n      location.params = aliasedMatch.params;\n      return _createRoute(aliasedRecord, location)\n    }\n    return _createRoute(null, location)\n  }\n\n  function _createRoute (\n    record,\n    location,\n    redirectedFrom\n  ) {\n    if (record && record.redirect) {\n      return redirect(record, redirectedFrom || location)\n    }\n    if (record && record.matchAs) {\n      return alias(record, location, record.matchAs)\n    }\n    return createRoute(record, location, redirectedFrom, router)\n  }\n\n  return {\n    match: match,\n    addRoute: addRoute,\n    getRoutes: getRoutes,\n    addRoutes: addRoutes\n  }\n}\n\nfunction matchRoute (\n  regex,\n  path,\n  params\n) {\n  var m = path.match(regex);\n\n  if (!m) {\n    return false\n  } else if (!params) {\n    return true\n  }\n\n  for (var i = 1, len = m.length; i < len; ++i) {\n    var key = regex.keys[i - 1];\n    if (key) {\n      // Fix #1994: using * with props: true generates a param named 0\n      params[key.name || 'pathMatch'] = typeof m[i] === 'string' ? decode(m[i]) : m[i];\n    }\n  }\n\n  return true\n}\n\nfunction resolveRecordPath (path, record) {\n  return resolvePath(path, record.parent ? record.parent.path : '/', true)\n}\n\n/*  */\n\n// use User Timing api (if present) for more accurate key precision\nvar Time =\n  inBrowser && window.performance && window.performance.now\n    ? window.performance\n    : Date;\n\nfunction genStateKey () {\n  return Time.now().toFixed(3)\n}\n\nvar _key = genStateKey();\n\nfunction getStateKey () {\n  return _key\n}\n\nfunction setStateKey (key) {\n  return (_key = key)\n}\n\n/*  */\n\nvar positionStore = Object.create(null);\n\nfunction setupScroll () {\n  // Prevent browser scroll behavior on History popstate\n  if ('scrollRestoration' in window.history) {\n    window.history.scrollRestoration = 'manual';\n  }\n  // Fix for #1585 for Firefox\n  // Fix for #2195 Add optional third attribute to workaround a bug in safari https://bugs.webkit.org/show_bug.cgi?id=182678\n  // Fix for #2774 Support for apps loaded from Windows file shares not mapped to network drives: replaced location.origin with\n  // window.location.protocol + '//' + window.location.host\n  // location.host contains the port and location.hostname doesn't\n  var protocolAndPath = window.location.protocol + '//' + window.location.host;\n  var absolutePath = window.location.href.replace(protocolAndPath, '');\n  // preserve existing history state as it could be overriden by the user\n  var stateCopy = extend({}, window.history.state);\n  stateCopy.key = getStateKey();\n  window.history.replaceState(stateCopy, '', absolutePath);\n  window.addEventListener('popstate', handlePopState);\n  return function () {\n    window.removeEventListener('popstate', handlePopState);\n  }\n}\n\nfunction handleScroll (\n  router,\n  to,\n  from,\n  isPop\n) {\n  if (!router.app) {\n    return\n  }\n\n  var behavior = router.options.scrollBehavior;\n  if (!behavior) {\n    return\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    assert(typeof behavior === 'function', \"scrollBehavior must be a function\");\n  }\n\n  // wait until re-render finishes before scrolling\n  router.app.$nextTick(function () {\n    var position = getScrollPosition();\n    var shouldScroll = behavior.call(\n      router,\n      to,\n      from,\n      isPop ? position : null\n    );\n\n    if (!shouldScroll) {\n      return\n    }\n\n    if (typeof shouldScroll.then === 'function') {\n      shouldScroll\n        .then(function (shouldScroll) {\n          scrollToPosition((shouldScroll), position);\n        })\n        .catch(function (err) {\n          if (process.env.NODE_ENV !== 'production') {\n            assert(false, err.toString());\n          }\n        });\n    } else {\n      scrollToPosition(shouldScroll, position);\n    }\n  });\n}\n\nfunction saveScrollPosition () {\n  var key = getStateKey();\n  if (key) {\n    positionStore[key] = {\n      x: window.pageXOffset,\n      y: window.pageYOffset\n    };\n  }\n}\n\nfunction handlePopState (e) {\n  saveScrollPosition();\n  if (e.state && e.state.key) {\n    setStateKey(e.state.key);\n  }\n}\n\nfunction getScrollPosition () {\n  var key = getStateKey();\n  if (key) {\n    return positionStore[key]\n  }\n}\n\nfunction getElementPosition (el, offset) {\n  var docEl = document.documentElement;\n  var docRect = docEl.getBoundingClientRect();\n  var elRect = el.getBoundingClientRect();\n  return {\n    x: elRect.left - docRect.left - offset.x,\n    y: elRect.top - docRect.top - offset.y\n  }\n}\n\nfunction isValidPosition (obj) {\n  return isNumber(obj.x) || isNumber(obj.y)\n}\n\nfunction normalizePosition (obj) {\n  return {\n    x: isNumber(obj.x) ? obj.x : window.pageXOffset,\n    y: isNumber(obj.y) ? obj.y : window.pageYOffset\n  }\n}\n\nfunction normalizeOffset (obj) {\n  return {\n    x: isNumber(obj.x) ? obj.x : 0,\n    y: isNumber(obj.y) ? obj.y : 0\n  }\n}\n\nfunction isNumber (v) {\n  return typeof v === 'number'\n}\n\nvar hashStartsWithNumberRE = /^#\\d/;\n\nfunction scrollToPosition (shouldScroll, position) {\n  var isObject = typeof shouldScroll === 'object';\n  if (isObject && typeof shouldScroll.selector === 'string') {\n    // getElementById would still fail if the selector contains a more complicated query like #main[data-attr]\n    // but at the same time, it doesn't make much sense to select an element with an id and an extra selector\n    var el = hashStartsWithNumberRE.test(shouldScroll.selector) // $flow-disable-line\n      ? document.getElementById(shouldScroll.selector.slice(1)) // $flow-disable-line\n      : document.querySelector(shouldScroll.selector);\n\n    if (el) {\n      var offset =\n        shouldScroll.offset && typeof shouldScroll.offset === 'object'\n          ? shouldScroll.offset\n          : {};\n      offset = normalizeOffset(offset);\n      position = getElementPosition(el, offset);\n    } else if (isValidPosition(shouldScroll)) {\n      position = normalizePosition(shouldScroll);\n    }\n  } else if (isObject && isValidPosition(shouldScroll)) {\n    position = normalizePosition(shouldScroll);\n  }\n\n  if (position) {\n    // $flow-disable-line\n    if ('scrollBehavior' in document.documentElement.style) {\n      window.scrollTo({\n        left: position.x,\n        top: position.y,\n        // $flow-disable-line\n        behavior: shouldScroll.behavior\n      });\n    } else {\n      window.scrollTo(position.x, position.y);\n    }\n  }\n}\n\n/*  */\n\nvar supportsPushState =\n  inBrowser &&\n  (function () {\n    var ua = window.navigator.userAgent;\n\n    if (\n      (ua.indexOf('Android 2.') !== -1 || ua.indexOf('Android 4.0') !== -1) &&\n      ua.indexOf('Mobile Safari') !== -1 &&\n      ua.indexOf('Chrome') === -1 &&\n      ua.indexOf('Windows Phone') === -1\n    ) {\n      return false\n    }\n\n    return window.history && typeof window.history.pushState === 'function'\n  })();\n\nfunction pushState (url, replace) {\n  saveScrollPosition();\n  // try...catch the pushState call to get around Safari\n  // DOM Exception 18 where it limits to 100 pushState calls\n  var history = window.history;\n  try {\n    if (replace) {\n      // preserve existing history state as it could be overriden by the user\n      var stateCopy = extend({}, history.state);\n      stateCopy.key = getStateKey();\n      history.replaceState(stateCopy, '', url);\n    } else {\n      history.pushState({ key: setStateKey(genStateKey()) }, '', url);\n    }\n  } catch (e) {\n    window.location[replace ? 'replace' : 'assign'](url);\n  }\n}\n\nfunction replaceState (url) {\n  pushState(url, true);\n}\n\n/*  */\n\nfunction runQueue (queue, fn, cb) {\n  var step = function (index) {\n    if (index >= queue.length) {\n      cb();\n    } else {\n      if (queue[index]) {\n        fn(queue[index], function () {\n          step(index + 1);\n        });\n      } else {\n        step(index + 1);\n      }\n    }\n  };\n  step(0);\n}\n\n// When changing thing, also edit router.d.ts\nvar NavigationFailureType = {\n  redirected: 2,\n  aborted: 4,\n  cancelled: 8,\n  duplicated: 16\n};\n\nfunction createNavigationRedirectedError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.redirected,\n    (\"Redirected when going from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (stringifyRoute(\n      to\n    )) + \"\\\" via a navigation guard.\")\n  )\n}\n\nfunction createNavigationDuplicatedError (from, to) {\n  var error = createRouterError(\n    from,\n    to,\n    NavigationFailureType.duplicated,\n    (\"Avoided redundant navigation to current location: \\\"\" + (from.fullPath) + \"\\\".\")\n  );\n  // backwards compatible with the first introduction of Errors\n  error.name = 'NavigationDuplicated';\n  return error\n}\n\nfunction createNavigationCancelledError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.cancelled,\n    (\"Navigation cancelled from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (to.fullPath) + \"\\\" with a new navigation.\")\n  )\n}\n\nfunction createNavigationAbortedError (from, to) {\n  return createRouterError(\n    from,\n    to,\n    NavigationFailureType.aborted,\n    (\"Navigation aborted from \\\"\" + (from.fullPath) + \"\\\" to \\\"\" + (to.fullPath) + \"\\\" via a navigation guard.\")\n  )\n}\n\nfunction createRouterError (from, to, type, message) {\n  var error = new Error(message);\n  error._isRouter = true;\n  error.from = from;\n  error.to = to;\n  error.type = type;\n\n  return error\n}\n\nvar propertiesToLog = ['params', 'query', 'hash'];\n\nfunction stringifyRoute (to) {\n  if (typeof to === 'string') { return to }\n  if ('path' in to) { return to.path }\n  var location = {};\n  propertiesToLog.forEach(function (key) {\n    if (key in to) { location[key] = to[key]; }\n  });\n  return JSON.stringify(location, null, 2)\n}\n\nfunction isError (err) {\n  return Object.prototype.toString.call(err).indexOf('Error') > -1\n}\n\nfunction isNavigationFailure (err, errorType) {\n  return (\n    isError(err) &&\n    err._isRouter &&\n    (errorType == null || err.type === errorType)\n  )\n}\n\n/*  */\n\nfunction resolveAsyncComponents (matched) {\n  return function (to, from, next) {\n    var hasAsync = false;\n    var pending = 0;\n    var error = null;\n\n    flatMapComponents(matched, function (def, _, match, key) {\n      // if it's a function and doesn't have cid attached,\n      // assume it's an async component resolve function.\n      // we are not using Vue's default async resolving mechanism because\n      // we want to halt the navigation until the incoming component has been\n      // resolved.\n      if (typeof def === 'function' && def.cid === undefined) {\n        hasAsync = true;\n        pending++;\n\n        var resolve = once(function (resolvedDef) {\n          if (isESModule(resolvedDef)) {\n            resolvedDef = resolvedDef.default;\n          }\n          // save resolved on async factory in case it's used elsewhere\n          def.resolved = typeof resolvedDef === 'function'\n            ? resolvedDef\n            : _Vue.extend(resolvedDef);\n          match.components[key] = resolvedDef;\n          pending--;\n          if (pending <= 0) {\n            next();\n          }\n        });\n\n        var reject = once(function (reason) {\n          var msg = \"Failed to resolve async component \" + key + \": \" + reason;\n          process.env.NODE_ENV !== 'production' && warn(false, msg);\n          if (!error) {\n            error = isError(reason)\n              ? reason\n              : new Error(msg);\n            next(error);\n          }\n        });\n\n        var res;\n        try {\n          res = def(resolve, reject);\n        } catch (e) {\n          reject(e);\n        }\n        if (res) {\n          if (typeof res.then === 'function') {\n            res.then(resolve, reject);\n          } else {\n            // new syntax in Vue 2.3\n            var comp = res.component;\n            if (comp && typeof comp.then === 'function') {\n              comp.then(resolve, reject);\n            }\n          }\n        }\n      }\n    });\n\n    if (!hasAsync) { next(); }\n  }\n}\n\nfunction flatMapComponents (\n  matched,\n  fn\n) {\n  return flatten(matched.map(function (m) {\n    return Object.keys(m.components).map(function (key) { return fn(\n      m.components[key],\n      m.instances[key],\n      m, key\n    ); })\n  }))\n}\n\nfunction flatten (arr) {\n  return Array.prototype.concat.apply([], arr)\n}\n\nvar hasSymbol =\n  typeof Symbol === 'function' &&\n  typeof Symbol.toStringTag === 'symbol';\n\nfunction isESModule (obj) {\n  return obj.__esModule || (hasSymbol && obj[Symbol.toStringTag] === 'Module')\n}\n\n// in Webpack 2, require.ensure now also returns a Promise\n// so the resolve/reject functions may get called an extra time\n// if the user uses an arrow function shorthand that happens to\n// return that Promise.\nfunction once (fn) {\n  var called = false;\n  return function () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    if (called) { return }\n    called = true;\n    return fn.apply(this, args)\n  }\n}\n\n/*  */\n\nvar History = function History (router, base) {\n  this.router = router;\n  this.base = normalizeBase(base);\n  // start with a route object that stands for \"nowhere\"\n  this.current = START;\n  this.pending = null;\n  this.ready = false;\n  this.readyCbs = [];\n  this.readyErrorCbs = [];\n  this.errorCbs = [];\n  this.listeners = [];\n};\n\nHistory.prototype.listen = function listen (cb) {\n  this.cb = cb;\n};\n\nHistory.prototype.onReady = function onReady (cb, errorCb) {\n  if (this.ready) {\n    cb();\n  } else {\n    this.readyCbs.push(cb);\n    if (errorCb) {\n      this.readyErrorCbs.push(errorCb);\n    }\n  }\n};\n\nHistory.prototype.onError = function onError (errorCb) {\n  this.errorCbs.push(errorCb);\n};\n\nHistory.prototype.transitionTo = function transitionTo (\n  location,\n  onComplete,\n  onAbort\n) {\n    var this$1 = this;\n\n  var route;\n  // catch redirect option https://github.com/vuejs/vue-router/issues/3201\n  try {\n    route = this.router.match(location, this.current);\n  } catch (e) {\n    this.errorCbs.forEach(function (cb) {\n      cb(e);\n    });\n    // Exception should still be thrown\n    throw e\n  }\n  var prev = this.current;\n  this.confirmTransition(\n    route,\n    function () {\n      this$1.updateRoute(route);\n      onComplete && onComplete(route);\n      this$1.ensureURL();\n      this$1.router.afterHooks.forEach(function (hook) {\n        hook && hook(route, prev);\n      });\n\n      // fire ready cbs once\n      if (!this$1.ready) {\n        this$1.ready = true;\n        this$1.readyCbs.forEach(function (cb) {\n          cb(route);\n        });\n      }\n    },\n    function (err) {\n      if (onAbort) {\n        onAbort(err);\n      }\n      if (err && !this$1.ready) {\n        // Initial redirection should not mark the history as ready yet\n        // because it's triggered by the redirection instead\n        // https://github.com/vuejs/vue-router/issues/3225\n        // https://github.com/vuejs/vue-router/issues/3331\n        if (!isNavigationFailure(err, NavigationFailureType.redirected) || prev !== START) {\n          this$1.ready = true;\n          this$1.readyErrorCbs.forEach(function (cb) {\n            cb(err);\n          });\n        }\n      }\n    }\n  );\n};\n\nHistory.prototype.confirmTransition = function confirmTransition (route, onComplete, onAbort) {\n    var this$1 = this;\n\n  var current = this.current;\n  this.pending = route;\n  var abort = function (err) {\n    // changed after adding errors with\n    // https://github.com/vuejs/vue-router/pull/3047 before that change,\n    // redirect and aborted navigation would produce an err == null\n    if (!isNavigationFailure(err) && isError(err)) {\n      if (this$1.errorCbs.length) {\n        this$1.errorCbs.forEach(function (cb) {\n          cb(err);\n        });\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          warn(false, 'uncaught error during route navigation:');\n        }\n        console.error(err);\n      }\n    }\n    onAbort && onAbort(err);\n  };\n  var lastRouteIndex = route.matched.length - 1;\n  var lastCurrentIndex = current.matched.length - 1;\n  if (\n    isSameRoute(route, current) &&\n    // in the case the route map has been dynamically appended to\n    lastRouteIndex === lastCurrentIndex &&\n    route.matched[lastRouteIndex] === current.matched[lastCurrentIndex]\n  ) {\n    this.ensureURL();\n    if (route.hash) {\n      handleScroll(this.router, current, route, false);\n    }\n    return abort(createNavigationDuplicatedError(current, route))\n  }\n\n  var ref = resolveQueue(\n    this.current.matched,\n    route.matched\n  );\n    var updated = ref.updated;\n    var deactivated = ref.deactivated;\n    var activated = ref.activated;\n\n  var queue = [].concat(\n    // in-component leave guards\n    extractLeaveGuards(deactivated),\n    // global before hooks\n    this.router.beforeHooks,\n    // in-component update hooks\n    extractUpdateHooks(updated),\n    // in-config enter guards\n    activated.map(function (m) { return m.beforeEnter; }),\n    // async components\n    resolveAsyncComponents(activated)\n  );\n\n  var iterator = function (hook, next) {\n    if (this$1.pending !== route) {\n      return abort(createNavigationCancelledError(current, route))\n    }\n    try {\n      hook(route, current, function (to) {\n        if (to === false) {\n          // next(false) -> abort navigation, ensure current URL\n          this$1.ensureURL(true);\n          abort(createNavigationAbortedError(current, route));\n        } else if (isError(to)) {\n          this$1.ensureURL(true);\n          abort(to);\n        } else if (\n          typeof to === 'string' ||\n          (typeof to === 'object' &&\n            (typeof to.path === 'string' || typeof to.name === 'string'))\n        ) {\n          // next('/') or next({ path: '/' }) -> redirect\n          abort(createNavigationRedirectedError(current, route));\n          if (typeof to === 'object' && to.replace) {\n            this$1.replace(to);\n          } else {\n            this$1.push(to);\n          }\n        } else {\n          // confirm transition and pass on the value\n          next(to);\n        }\n      });\n    } catch (e) {\n      abort(e);\n    }\n  };\n\n  runQueue(queue, iterator, function () {\n    // wait until async components are resolved before\n    // extracting in-component enter guards\n    var enterGuards = extractEnterGuards(activated);\n    var queue = enterGuards.concat(this$1.router.resolveHooks);\n    runQueue(queue, iterator, function () {\n      if (this$1.pending !== route) {\n        return abort(createNavigationCancelledError(current, route))\n      }\n      this$1.pending = null;\n      onComplete(route);\n      if (this$1.router.app) {\n        this$1.router.app.$nextTick(function () {\n          handleRouteEntered(route);\n        });\n      }\n    });\n  });\n};\n\nHistory.prototype.updateRoute = function updateRoute (route) {\n  this.current = route;\n  this.cb && this.cb(route);\n};\n\nHistory.prototype.setupListeners = function setupListeners () {\n  // Default implementation is empty\n};\n\nHistory.prototype.teardown = function teardown () {\n  // clean up event listeners\n  // https://github.com/vuejs/vue-router/issues/2341\n  this.listeners.forEach(function (cleanupListener) {\n    cleanupListener();\n  });\n  this.listeners = [];\n\n  // reset current history route\n  // https://github.com/vuejs/vue-router/issues/3294\n  this.current = START;\n  this.pending = null;\n};\n\nfunction normalizeBase (base) {\n  if (!base) {\n    if (inBrowser) {\n      // respect <base> tag\n      var baseEl = document.querySelector('base');\n      base = (baseEl && baseEl.getAttribute('href')) || '/';\n      // strip full URL origin\n      base = base.replace(/^https?:\\/\\/[^\\/]+/, '');\n    } else {\n      base = '/';\n    }\n  }\n  // make sure there's the starting slash\n  if (base.charAt(0) !== '/') {\n    base = '/' + base;\n  }\n  // remove trailing slash\n  return base.replace(/\\/$/, '')\n}\n\nfunction resolveQueue (\n  current,\n  next\n) {\n  var i;\n  var max = Math.max(current.length, next.length);\n  for (i = 0; i < max; i++) {\n    if (current[i] !== next[i]) {\n      break\n    }\n  }\n  return {\n    updated: next.slice(0, i),\n    activated: next.slice(i),\n    deactivated: current.slice(i)\n  }\n}\n\nfunction extractGuards (\n  records,\n  name,\n  bind,\n  reverse\n) {\n  var guards = flatMapComponents(records, function (def, instance, match, key) {\n    var guard = extractGuard(def, name);\n    if (guard) {\n      return Array.isArray(guard)\n        ? guard.map(function (guard) { return bind(guard, instance, match, key); })\n        : bind(guard, instance, match, key)\n    }\n  });\n  return flatten(reverse ? guards.reverse() : guards)\n}\n\nfunction extractGuard (\n  def,\n  key\n) {\n  if (typeof def !== 'function') {\n    // extend now so that global mixins are applied.\n    def = _Vue.extend(def);\n  }\n  return def.options[key]\n}\n\nfunction extractLeaveGuards (deactivated) {\n  return extractGuards(deactivated, 'beforeRouteLeave', bindGuard, true)\n}\n\nfunction extractUpdateHooks (updated) {\n  return extractGuards(updated, 'beforeRouteUpdate', bindGuard)\n}\n\nfunction bindGuard (guard, instance) {\n  if (instance) {\n    return function boundRouteGuard () {\n      return guard.apply(instance, arguments)\n    }\n  }\n}\n\nfunction extractEnterGuards (\n  activated\n) {\n  return extractGuards(\n    activated,\n    'beforeRouteEnter',\n    function (guard, _, match, key) {\n      return bindEnterGuard(guard, match, key)\n    }\n  )\n}\n\nfunction bindEnterGuard (\n  guard,\n  match,\n  key\n) {\n  return function routeEnterGuard (to, from, next) {\n    return guard(to, from, function (cb) {\n      if (typeof cb === 'function') {\n        if (!match.enteredCbs[key]) {\n          match.enteredCbs[key] = [];\n        }\n        match.enteredCbs[key].push(cb);\n      }\n      next(cb);\n    })\n  }\n}\n\n/*  */\n\nvar HTML5History = /*@__PURE__*/(function (History) {\n  function HTML5History (router, base) {\n    History.call(this, router, base);\n\n    this._startLocation = getLocation(this.base);\n  }\n\n  if ( History ) HTML5History.__proto__ = History;\n  HTML5History.prototype = Object.create( History && History.prototype );\n  HTML5History.prototype.constructor = HTML5History;\n\n  HTML5History.prototype.setupListeners = function setupListeners () {\n    var this$1 = this;\n\n    if (this.listeners.length > 0) {\n      return\n    }\n\n    var router = this.router;\n    var expectScroll = router.options.scrollBehavior;\n    var supportsScroll = supportsPushState && expectScroll;\n\n    if (supportsScroll) {\n      this.listeners.push(setupScroll());\n    }\n\n    var handleRoutingEvent = function () {\n      var current = this$1.current;\n\n      // Avoiding first `popstate` event dispatched in some browsers but first\n      // history route not updated since async guard at the same time.\n      var location = getLocation(this$1.base);\n      if (this$1.current === START && location === this$1._startLocation) {\n        return\n      }\n\n      this$1.transitionTo(location, function (route) {\n        if (supportsScroll) {\n          handleScroll(router, route, current, true);\n        }\n      });\n    };\n    window.addEventListener('popstate', handleRoutingEvent);\n    this.listeners.push(function () {\n      window.removeEventListener('popstate', handleRoutingEvent);\n    });\n  };\n\n  HTML5History.prototype.go = function go (n) {\n    window.history.go(n);\n  };\n\n  HTML5History.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(location, function (route) {\n      pushState(cleanPath(this$1.base + route.fullPath));\n      handleScroll(this$1.router, route, fromRoute, false);\n      onComplete && onComplete(route);\n    }, onAbort);\n  };\n\n  HTML5History.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(location, function (route) {\n      replaceState(cleanPath(this$1.base + route.fullPath));\n      handleScroll(this$1.router, route, fromRoute, false);\n      onComplete && onComplete(route);\n    }, onAbort);\n  };\n\n  HTML5History.prototype.ensureURL = function ensureURL (push) {\n    if (getLocation(this.base) !== this.current.fullPath) {\n      var current = cleanPath(this.base + this.current.fullPath);\n      push ? pushState(current) : replaceState(current);\n    }\n  };\n\n  HTML5History.prototype.getCurrentLocation = function getCurrentLocation () {\n    return getLocation(this.base)\n  };\n\n  return HTML5History;\n}(History));\n\nfunction getLocation (base) {\n  var path = window.location.pathname;\n  var pathLowerCase = path.toLowerCase();\n  var baseLowerCase = base.toLowerCase();\n  // base=\"/a\" shouldn't turn path=\"/app\" into \"/a/pp\"\n  // https://github.com/vuejs/vue-router/issues/3555\n  // so we ensure the trailing slash in the base\n  if (base && ((pathLowerCase === baseLowerCase) ||\n    (pathLowerCase.indexOf(cleanPath(baseLowerCase + '/')) === 0))) {\n    path = path.slice(base.length);\n  }\n  return (path || '/') + window.location.search + window.location.hash\n}\n\n/*  */\n\nvar HashHistory = /*@__PURE__*/(function (History) {\n  function HashHistory (router, base, fallback) {\n    History.call(this, router, base);\n    // check history fallback deeplinking\n    if (fallback && checkFallback(this.base)) {\n      return\n    }\n    ensureSlash();\n  }\n\n  if ( History ) HashHistory.__proto__ = History;\n  HashHistory.prototype = Object.create( History && History.prototype );\n  HashHistory.prototype.constructor = HashHistory;\n\n  // this is delayed until the app mounts\n  // to avoid the hashchange listener being fired too early\n  HashHistory.prototype.setupListeners = function setupListeners () {\n    var this$1 = this;\n\n    if (this.listeners.length > 0) {\n      return\n    }\n\n    var router = this.router;\n    var expectScroll = router.options.scrollBehavior;\n    var supportsScroll = supportsPushState && expectScroll;\n\n    if (supportsScroll) {\n      this.listeners.push(setupScroll());\n    }\n\n    var handleRoutingEvent = function () {\n      var current = this$1.current;\n      if (!ensureSlash()) {\n        return\n      }\n      this$1.transitionTo(getHash(), function (route) {\n        if (supportsScroll) {\n          handleScroll(this$1.router, route, current, true);\n        }\n        if (!supportsPushState) {\n          replaceHash(route.fullPath);\n        }\n      });\n    };\n    var eventType = supportsPushState ? 'popstate' : 'hashchange';\n    window.addEventListener(\n      eventType,\n      handleRoutingEvent\n    );\n    this.listeners.push(function () {\n      window.removeEventListener(eventType, handleRoutingEvent);\n    });\n  };\n\n  HashHistory.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(\n      location,\n      function (route) {\n        pushHash(route.fullPath);\n        handleScroll(this$1.router, route, fromRoute, false);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  HashHistory.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    var ref = this;\n    var fromRoute = ref.current;\n    this.transitionTo(\n      location,\n      function (route) {\n        replaceHash(route.fullPath);\n        handleScroll(this$1.router, route, fromRoute, false);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  HashHistory.prototype.go = function go (n) {\n    window.history.go(n);\n  };\n\n  HashHistory.prototype.ensureURL = function ensureURL (push) {\n    var current = this.current.fullPath;\n    if (getHash() !== current) {\n      push ? pushHash(current) : replaceHash(current);\n    }\n  };\n\n  HashHistory.prototype.getCurrentLocation = function getCurrentLocation () {\n    return getHash()\n  };\n\n  return HashHistory;\n}(History));\n\nfunction checkFallback (base) {\n  var location = getLocation(base);\n  if (!/^\\/#/.test(location)) {\n    window.location.replace(cleanPath(base + '/#' + location));\n    return true\n  }\n}\n\nfunction ensureSlash () {\n  var path = getHash();\n  if (path.charAt(0) === '/') {\n    return true\n  }\n  replaceHash('/' + path);\n  return false\n}\n\nfunction getHash () {\n  // We can't use window.location.hash here because it's not\n  // consistent across browsers - Firefox will pre-decode it!\n  var href = window.location.href;\n  var index = href.indexOf('#');\n  // empty path\n  if (index < 0) { return '' }\n\n  href = href.slice(index + 1);\n\n  return href\n}\n\nfunction getUrl (path) {\n  var href = window.location.href;\n  var i = href.indexOf('#');\n  var base = i >= 0 ? href.slice(0, i) : href;\n  return (base + \"#\" + path)\n}\n\nfunction pushHash (path) {\n  if (supportsPushState) {\n    pushState(getUrl(path));\n  } else {\n    window.location.hash = path;\n  }\n}\n\nfunction replaceHash (path) {\n  if (supportsPushState) {\n    replaceState(getUrl(path));\n  } else {\n    window.location.replace(getUrl(path));\n  }\n}\n\n/*  */\n\nvar AbstractHistory = /*@__PURE__*/(function (History) {\n  function AbstractHistory (router, base) {\n    History.call(this, router, base);\n    this.stack = [];\n    this.index = -1;\n  }\n\n  if ( History ) AbstractHistory.__proto__ = History;\n  AbstractHistory.prototype = Object.create( History && History.prototype );\n  AbstractHistory.prototype.constructor = AbstractHistory;\n\n  AbstractHistory.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    this.transitionTo(\n      location,\n      function (route) {\n        this$1.stack = this$1.stack.slice(0, this$1.index + 1).concat(route);\n        this$1.index++;\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  AbstractHistory.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n    this.transitionTo(\n      location,\n      function (route) {\n        this$1.stack = this$1.stack.slice(0, this$1.index).concat(route);\n        onComplete && onComplete(route);\n      },\n      onAbort\n    );\n  };\n\n  AbstractHistory.prototype.go = function go (n) {\n    var this$1 = this;\n\n    var targetIndex = this.index + n;\n    if (targetIndex < 0 || targetIndex >= this.stack.length) {\n      return\n    }\n    var route = this.stack[targetIndex];\n    this.confirmTransition(\n      route,\n      function () {\n        var prev = this$1.current;\n        this$1.index = targetIndex;\n        this$1.updateRoute(route);\n        this$1.router.afterHooks.forEach(function (hook) {\n          hook && hook(route, prev);\n        });\n      },\n      function (err) {\n        if (isNavigationFailure(err, NavigationFailureType.duplicated)) {\n          this$1.index = targetIndex;\n        }\n      }\n    );\n  };\n\n  AbstractHistory.prototype.getCurrentLocation = function getCurrentLocation () {\n    var current = this.stack[this.stack.length - 1];\n    return current ? current.fullPath : '/'\n  };\n\n  AbstractHistory.prototype.ensureURL = function ensureURL () {\n    // noop\n  };\n\n  return AbstractHistory;\n}(History));\n\n/*  */\n\nvar VueRouter = function VueRouter (options) {\n  if ( options === void 0 ) options = {};\n\n  if (process.env.NODE_ENV !== 'production') {\n    warn(this instanceof VueRouter, \"Router must be called with the new operator.\");\n  }\n  this.app = null;\n  this.apps = [];\n  this.options = options;\n  this.beforeHooks = [];\n  this.resolveHooks = [];\n  this.afterHooks = [];\n  this.matcher = createMatcher(options.routes || [], this);\n\n  var mode = options.mode || 'hash';\n  this.fallback =\n    mode === 'history' && !supportsPushState && options.fallback !== false;\n  if (this.fallback) {\n    mode = 'hash';\n  }\n  if (!inBrowser) {\n    mode = 'abstract';\n  }\n  this.mode = mode;\n\n  switch (mode) {\n    case 'history':\n      this.history = new HTML5History(this, options.base);\n      break\n    case 'hash':\n      this.history = new HashHistory(this, options.base, this.fallback);\n      break\n    case 'abstract':\n      this.history = new AbstractHistory(this, options.base);\n      break\n    default:\n      if (process.env.NODE_ENV !== 'production') {\n        assert(false, (\"invalid mode: \" + mode));\n      }\n  }\n};\n\nvar prototypeAccessors = { currentRoute: { configurable: true } };\n\nVueRouter.prototype.match = function match (raw, current, redirectedFrom) {\n  return this.matcher.match(raw, current, redirectedFrom)\n};\n\nprototypeAccessors.currentRoute.get = function () {\n  return this.history && this.history.current\n};\n\nVueRouter.prototype.init = function init (app /* Vue component instance */) {\n    var this$1 = this;\n\n  process.env.NODE_ENV !== 'production' &&\n    assert(\n      install.installed,\n      \"not installed. Make sure to call `Vue.use(VueRouter)` \" +\n        \"before creating root instance.\"\n    );\n\n  this.apps.push(app);\n\n  // set up app destroyed handler\n  // https://github.com/vuejs/vue-router/issues/2639\n  app.$once('hook:destroyed', function () {\n    // clean out app from this.apps array once destroyed\n    var index = this$1.apps.indexOf(app);\n    if (index > -1) { this$1.apps.splice(index, 1); }\n    // ensure we still have a main app or null if no apps\n    // we do not release the router so it can be reused\n    if (this$1.app === app) { this$1.app = this$1.apps[0] || null; }\n\n    if (!this$1.app) { this$1.history.teardown(); }\n  });\n\n  // main app previously initialized\n  // return as we don't need to set up new history listener\n  if (this.app) {\n    return\n  }\n\n  this.app = app;\n\n  var history = this.history;\n\n  if (history instanceof HTML5History || history instanceof HashHistory) {\n    var handleInitialScroll = function (routeOrError) {\n      var from = history.current;\n      var expectScroll = this$1.options.scrollBehavior;\n      var supportsScroll = supportsPushState && expectScroll;\n\n      if (supportsScroll && 'fullPath' in routeOrError) {\n        handleScroll(this$1, routeOrError, from, false);\n      }\n    };\n    var setupListeners = function (routeOrError) {\n      history.setupListeners();\n      handleInitialScroll(routeOrError);\n    };\n    history.transitionTo(\n      history.getCurrentLocation(),\n      setupListeners,\n      setupListeners\n    );\n  }\n\n  history.listen(function (route) {\n    this$1.apps.forEach(function (app) {\n      app._route = route;\n    });\n  });\n};\n\nVueRouter.prototype.beforeEach = function beforeEach (fn) {\n  return registerHook(this.beforeHooks, fn)\n};\n\nVueRouter.prototype.beforeResolve = function beforeResolve (fn) {\n  return registerHook(this.resolveHooks, fn)\n};\n\nVueRouter.prototype.afterEach = function afterEach (fn) {\n  return registerHook(this.afterHooks, fn)\n};\n\nVueRouter.prototype.onReady = function onReady (cb, errorCb) {\n  this.history.onReady(cb, errorCb);\n};\n\nVueRouter.prototype.onError = function onError (errorCb) {\n  this.history.onError(errorCb);\n};\n\nVueRouter.prototype.push = function push (location, onComplete, onAbort) {\n    var this$1 = this;\n\n  // $flow-disable-line\n  if (!onComplete && !onAbort && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve, reject) {\n      this$1.history.push(location, resolve, reject);\n    })\n  } else {\n    this.history.push(location, onComplete, onAbort);\n  }\n};\n\nVueRouter.prototype.replace = function replace (location, onComplete, onAbort) {\n    var this$1 = this;\n\n  // $flow-disable-line\n  if (!onComplete && !onAbort && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve, reject) {\n      this$1.history.replace(location, resolve, reject);\n    })\n  } else {\n    this.history.replace(location, onComplete, onAbort);\n  }\n};\n\nVueRouter.prototype.go = function go (n) {\n  this.history.go(n);\n};\n\nVueRouter.prototype.back = function back () {\n  this.go(-1);\n};\n\nVueRouter.prototype.forward = function forward () {\n  this.go(1);\n};\n\nVueRouter.prototype.getMatchedComponents = function getMatchedComponents (to) {\n  var route = to\n    ? to.matched\n      ? to\n      : this.resolve(to).route\n    : this.currentRoute;\n  if (!route) {\n    return []\n  }\n  return [].concat.apply(\n    [],\n    route.matched.map(function (m) {\n      return Object.keys(m.components).map(function (key) {\n        return m.components[key]\n      })\n    })\n  )\n};\n\nVueRouter.prototype.resolve = function resolve (\n  to,\n  current,\n  append\n) {\n  current = current || this.history.current;\n  var location = normalizeLocation(to, current, append, this);\n  var route = this.match(location, current);\n  var fullPath = route.redirectedFrom || route.fullPath;\n  var base = this.history.base;\n  var href = createHref(base, fullPath, this.mode);\n  return {\n    location: location,\n    route: route,\n    href: href,\n    // for backwards compat\n    normalizedTo: location,\n    resolved: route\n  }\n};\n\nVueRouter.prototype.getRoutes = function getRoutes () {\n  return this.matcher.getRoutes()\n};\n\nVueRouter.prototype.addRoute = function addRoute (parentOrRoute, route) {\n  this.matcher.addRoute(parentOrRoute, route);\n  if (this.history.current !== START) {\n    this.history.transitionTo(this.history.getCurrentLocation());\n  }\n};\n\nVueRouter.prototype.addRoutes = function addRoutes (routes) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn(false, 'router.addRoutes() is deprecated and has been removed in Vue Router 4. Use router.addRoute() instead.');\n  }\n  this.matcher.addRoutes(routes);\n  if (this.history.current !== START) {\n    this.history.transitionTo(this.history.getCurrentLocation());\n  }\n};\n\nObject.defineProperties( VueRouter.prototype, prototypeAccessors );\n\nfunction registerHook (list, fn) {\n  list.push(fn);\n  return function () {\n    var i = list.indexOf(fn);\n    if (i > -1) { list.splice(i, 1); }\n  }\n}\n\nfunction createHref (base, fullPath, mode) {\n  var path = mode === 'hash' ? '#' + fullPath : fullPath;\n  return base ? cleanPath(base + '/' + path) : path\n}\n\nVueRouter.install = install;\nVueRouter.version = '3.5.4';\nVueRouter.isNavigationFailure = isNavigationFailure;\nVueRouter.NavigationFailureType = NavigationFailureType;\nVueRouter.START_LOCATION = START;\n\nif (inBrowser && window.Vue) {\n  window.Vue.use(VueRouter);\n}\n\nexport default VueRouter;\n","/*!\n * Vue.js v2.6.14\n * (c) 2014-2021 Evan You\n * Released under the MIT License.\n */\n/*  */\n\nvar emptyObject = Object.freeze({});\n\n// These helpers produce better VM code in JS engines due to their\n// explicitness and function inlining.\nfunction isUndef (v) {\n  return v === undefined || v === null\n}\n\nfunction isDef (v) {\n  return v !== undefined && v !== null\n}\n\nfunction isTrue (v) {\n  return v === true\n}\n\nfunction isFalse (v) {\n  return v === false\n}\n\n/**\n * Check if value is primitive.\n */\nfunction isPrimitive (value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * Get the raw type string of a value, e.g., [object Object].\n */\nvar _toString = Object.prototype.toString;\n\nfunction toRawType (value) {\n  return _toString.call(value).slice(8, -1)\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nfunction isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\nfunction isRegExp (v) {\n  return _toString.call(v) === '[object RegExp]'\n}\n\n/**\n * Check if val is a valid array index.\n */\nfunction isValidArrayIndex (val) {\n  var n = parseFloat(String(val));\n  return n >= 0 && Math.floor(n) === n && isFinite(val)\n}\n\nfunction isPromise (val) {\n  return (\n    isDef(val) &&\n    typeof val.then === 'function' &&\n    typeof val.catch === 'function'\n  )\n}\n\n/**\n * Convert a value to a string that is actually rendered.\n */\nfunction toString (val) {\n  return val == null\n    ? ''\n    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n      ? JSON.stringify(val, null, 2)\n      : String(val)\n}\n\n/**\n * Convert an input value to a number for persistence.\n * If the conversion fails, return original string.\n */\nfunction toNumber (val) {\n  var n = parseFloat(val);\n  return isNaN(n) ? val : n\n}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nfunction makeMap (\n  str,\n  expectsLowerCase\n) {\n  var map = Object.create(null);\n  var list = str.split(',');\n  for (var i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return expectsLowerCase\n    ? function (val) { return map[val.toLowerCase()]; }\n    : function (val) { return map[val]; }\n}\n\n/**\n * Check if a tag is a built-in tag.\n */\nvar isBuiltInTag = makeMap('slot,component', true);\n\n/**\n * Check if an attribute is a reserved attribute.\n */\nvar isReservedAttribute = makeMap('key,ref,slot,slot-scope,is');\n\n/**\n * Remove an item from an array.\n */\nfunction remove (arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * Check whether an object has the property.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\n/**\n * Create a cached version of a pure function.\n */\nfunction cached (fn) {\n  var cache = Object.create(null);\n  return (function cachedFn (str) {\n    var hit = cache[str];\n    return hit || (cache[str] = fn(str))\n  })\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nvar camelizeRE = /-(\\w)/g;\nvar camelize = cached(function (str) {\n  return str.replace(camelizeRE, function (_, c) { return c ? c.toUpperCase() : ''; })\n});\n\n/**\n * Capitalize a string.\n */\nvar capitalize = cached(function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n});\n\n/**\n * Hyphenate a camelCase string.\n */\nvar hyphenateRE = /\\B([A-Z])/g;\nvar hyphenate = cached(function (str) {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n});\n\n/**\n * Simple bind polyfill for environments that do not support it,\n * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n * since native bind is now performant enough in most browsers.\n * But removing it would mean breaking code that was able to run in\n * PhantomJS 1.x, so this must be kept for backward compatibility.\n */\n\n/* istanbul ignore next */\nfunction polyfillBind (fn, ctx) {\n  function boundFn (a) {\n    var l = arguments.length;\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n\n  boundFn._length = fn.length;\n  return boundFn\n}\n\nfunction nativeBind (fn, ctx) {\n  return fn.bind(ctx)\n}\n\nvar bind = Function.prototype.bind\n  ? nativeBind\n  : polyfillBind;\n\n/**\n * Convert an Array-like object to a real Array.\n */\nfunction toArray (list, start) {\n  start = start || 0;\n  var i = list.length - start;\n  var ret = new Array(i);\n  while (i--) {\n    ret[i] = list[i + start];\n  }\n  return ret\n}\n\n/**\n * Mix properties into target object.\n */\nfunction extend (to, _from) {\n  for (var key in _from) {\n    to[key] = _from[key];\n  }\n  return to\n}\n\n/**\n * Merge an Array of Objects into a single Object.\n */\nfunction toObject (arr) {\n  var res = {};\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i]);\n    }\n  }\n  return res\n}\n\n/* eslint-disable no-unused-vars */\n\n/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nfunction noop (a, b, c) {}\n\n/**\n * Always return false.\n */\nvar no = function (a, b, c) { return false; };\n\n/* eslint-enable no-unused-vars */\n\n/**\n * Return the same value.\n */\nvar identity = function (_) { return _; };\n\n/**\n * Check if two values are loosely equal - that is,\n * if they are plain objects, do they have the same shape?\n */\nfunction looseEqual (a, b) {\n  if (a === b) { return true }\n  var isObjectA = isObject(a);\n  var isObjectB = isObject(b);\n  if (isObjectA && isObjectB) {\n    try {\n      var isArrayA = Array.isArray(a);\n      var isArrayB = Array.isArray(b);\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every(function (e, i) {\n          return looseEqual(e, b[i])\n        })\n      } else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime()\n      } else if (!isArrayA && !isArrayB) {\n        var keysA = Object.keys(a);\n        var keysB = Object.keys(b);\n        return keysA.length === keysB.length && keysA.every(function (key) {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Return the first index at which a loosely equal value can be\n * found in the array (if value is a plain object, the array must\n * contain an object of the same shape), or -1 if it is not present.\n */\nfunction looseIndexOf (arr, val) {\n  for (var i = 0; i < arr.length; i++) {\n    if (looseEqual(arr[i], val)) { return i }\n  }\n  return -1\n}\n\n/**\n * Ensure a function is called only once.\n */\nfunction once (fn) {\n  var called = false;\n  return function () {\n    if (!called) {\n      called = true;\n      fn.apply(this, arguments);\n    }\n  }\n}\n\nvar SSR_ATTR = 'data-server-rendered';\n\nvar ASSET_TYPES = [\n  'component',\n  'directive',\n  'filter'\n];\n\nvar LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n];\n\n/*  */\n\n\n\nvar config = ({\n  /**\n   * Option merge strategies (used in core/util/options)\n   */\n  // $flow-disable-line\n  optionMergeStrategies: Object.create(null),\n\n  /**\n   * Whether to suppress warnings.\n   */\n  silent: false,\n\n  /**\n   * Show production mode tip message on boot?\n   */\n  productionTip: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to enable devtools\n   */\n  devtools: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to record perf\n   */\n  performance: false,\n\n  /**\n   * Error handler for watcher errors\n   */\n  errorHandler: null,\n\n  /**\n   * Warn handler for watcher warns\n   */\n  warnHandler: null,\n\n  /**\n   * Ignore certain custom elements\n   */\n  ignoredElements: [],\n\n  /**\n   * Custom user key aliases for v-on\n   */\n  // $flow-disable-line\n  keyCodes: Object.create(null),\n\n  /**\n   * Check if a tag is reserved so that it cannot be registered as a\n   * component. This is platform-dependent and may be overwritten.\n   */\n  isReservedTag: no,\n\n  /**\n   * Check if an attribute is reserved so that it cannot be used as a component\n   * prop. This is platform-dependent and may be overwritten.\n   */\n  isReservedAttr: no,\n\n  /**\n   * Check if a tag is an unknown element.\n   * Platform-dependent.\n   */\n  isUnknownElement: no,\n\n  /**\n   * Get the namespace of an element\n   */\n  getTagNamespace: noop,\n\n  /**\n   * Parse the real tag name for the specific platform.\n   */\n  parsePlatformTagName: identity,\n\n  /**\n   * Check if an attribute must be bound using property, e.g. value\n   * Platform-dependent.\n   */\n  mustUseProp: no,\n\n  /**\n   * Perform updates asynchronously. Intended to be used by Vue Test Utils\n   * This will significantly reduce performance if set to false.\n   */\n  async: true,\n\n  /**\n   * Exposed for legacy reasons\n   */\n  _lifecycleHooks: LIFECYCLE_HOOKS\n});\n\n/*  */\n\n/**\n * unicode letters used for parsing html tags, component names and property paths.\n * using https://www.w3.org/TR/html53/semantics-scripting.html#potentialcustomelementname\n * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n */\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\n/**\n * Check if a string starts with $ or _\n */\nfunction isReserved (str) {\n  var c = (str + '').charCodeAt(0);\n  return c === 0x24 || c === 0x5F\n}\n\n/**\n * Define a property.\n */\nfunction def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  });\n}\n\n/**\n * Parse simple path.\n */\nvar bailRE = new RegExp((\"[^\" + (unicodeRegExp.source) + \".$_\\\\d]\"));\nfunction parsePath (path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  var segments = path.split('.');\n  return function (obj) {\n    for (var i = 0; i < segments.length; i++) {\n      if (!obj) { return }\n      obj = obj[segments[i]];\n    }\n    return obj\n  }\n}\n\n/*  */\n\n// can we use __proto__?\nvar hasProto = '__proto__' in {};\n\n// Browser environment sniffing\nvar inBrowser = typeof window !== 'undefined';\nvar inWeex = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform;\nvar weexPlatform = inWeex && WXEnvironment.platform.toLowerCase();\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\nvar isIE = UA && /msie|trident/.test(UA);\nvar isIE9 = UA && UA.indexOf('msie 9.0') > 0;\nvar isEdge = UA && UA.indexOf('edge/') > 0;\nvar isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android');\nvar isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA)) || (weexPlatform === 'ios');\nvar isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge;\nvar isPhantomJS = UA && /phantomjs/.test(UA);\nvar isFF = UA && UA.match(/firefox\\/(\\d+)/);\n\n// Firefox has a \"watch\" function on Object.prototype...\nvar nativeWatch = ({}).watch;\n\nvar supportsPassive = false;\nif (inBrowser) {\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', ({\n      get: function get () {\n        /* istanbul ignore next */\n        supportsPassive = true;\n      }\n    })); // https://github.com/facebook/flow/issues/285\n    window.addEventListener('test-passive', null, opts);\n  } catch (e) {}\n}\n\n// this needs to be lazy-evaled because vue may be required before\n// vue-server-renderer can set VUE_ENV\nvar _isServer;\nvar isServerRendering = function () {\n  if (_isServer === undefined) {\n    /* istanbul ignore if */\n    if (!inBrowser && !inWeex && typeof global !== 'undefined') {\n      // detect presence of vue-server-renderer and avoid\n      // Webpack shimming the process\n      _isServer = global['process'] && global['process'].env.VUE_ENV === 'server';\n    } else {\n      _isServer = false;\n    }\n  }\n  return _isServer\n};\n\n// detect devtools\nvar devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;\n\n/* istanbul ignore next */\nfunction isNative (Ctor) {\n  return typeof Ctor === 'function' && /native code/.test(Ctor.toString())\n}\n\nvar hasSymbol =\n  typeof Symbol !== 'undefined' && isNative(Symbol) &&\n  typeof Reflect !== 'undefined' && isNative(Reflect.ownKeys);\n\nvar _Set;\n/* istanbul ignore if */ // $flow-disable-line\nif (typeof Set !== 'undefined' && isNative(Set)) {\n  // use native Set when available.\n  _Set = Set;\n} else {\n  // a non-standard Set polyfill that only works with primitive keys.\n  _Set = /*@__PURE__*/(function () {\n    function Set () {\n      this.set = Object.create(null);\n    }\n    Set.prototype.has = function has (key) {\n      return this.set[key] === true\n    };\n    Set.prototype.add = function add (key) {\n      this.set[key] = true;\n    };\n    Set.prototype.clear = function clear () {\n      this.set = Object.create(null);\n    };\n\n    return Set;\n  }());\n}\n\n/*  */\n\nvar warn = noop;\nvar tip = noop;\nvar generateComponentTrace = (noop); // work around flow check\nvar formatComponentName = (noop);\n\nif (process.env.NODE_ENV !== 'production') {\n  var hasConsole = typeof console !== 'undefined';\n  var classifyRE = /(?:^|[-_])(\\w)/g;\n  var classify = function (str) { return str\n    .replace(classifyRE, function (c) { return c.toUpperCase(); })\n    .replace(/[-_]/g, ''); };\n\n  warn = function (msg, vm) {\n    var trace = vm ? generateComponentTrace(vm) : '';\n\n    if (config.warnHandler) {\n      config.warnHandler.call(null, msg, vm, trace);\n    } else if (hasConsole && (!config.silent)) {\n      console.error((\"[Vue warn]: \" + msg + trace));\n    }\n  };\n\n  tip = function (msg, vm) {\n    if (hasConsole && (!config.silent)) {\n      console.warn(\"[Vue tip]: \" + msg + (\n        vm ? generateComponentTrace(vm) : ''\n      ));\n    }\n  };\n\n  formatComponentName = function (vm, includeFile) {\n    if (vm.$root === vm) {\n      return '<Root>'\n    }\n    var options = typeof vm === 'function' && vm.cid != null\n      ? vm.options\n      : vm._isVue\n        ? vm.$options || vm.constructor.options\n        : vm;\n    var name = options.name || options._componentTag;\n    var file = options.__file;\n    if (!name && file) {\n      var match = file.match(/([^/\\\\]+)\\.vue$/);\n      name = match && match[1];\n    }\n\n    return (\n      (name ? (\"<\" + (classify(name)) + \">\") : \"<Anonymous>\") +\n      (file && includeFile !== false ? (\" at \" + file) : '')\n    )\n  };\n\n  var repeat = function (str, n) {\n    var res = '';\n    while (n) {\n      if (n % 2 === 1) { res += str; }\n      if (n > 1) { str += str; }\n      n >>= 1;\n    }\n    return res\n  };\n\n  generateComponentTrace = function (vm) {\n    if (vm._isVue && vm.$parent) {\n      var tree = [];\n      var currentRecursiveSequence = 0;\n      while (vm) {\n        if (tree.length > 0) {\n          var last = tree[tree.length - 1];\n          if (last.constructor === vm.constructor) {\n            currentRecursiveSequence++;\n            vm = vm.$parent;\n            continue\n          } else if (currentRecursiveSequence > 0) {\n            tree[tree.length - 1] = [last, currentRecursiveSequence];\n            currentRecursiveSequence = 0;\n          }\n        }\n        tree.push(vm);\n        vm = vm.$parent;\n      }\n      return '\\n\\nfound in\\n\\n' + tree\n        .map(function (vm, i) { return (\"\" + (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) + (Array.isArray(vm)\n            ? ((formatComponentName(vm[0])) + \"... (\" + (vm[1]) + \" recursive calls)\")\n            : formatComponentName(vm))); })\n        .join('\\n')\n    } else {\n      return (\"\\n\\n(found in \" + (formatComponentName(vm)) + \")\")\n    }\n  };\n}\n\n/*  */\n\nvar uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n */\nvar Dep = function Dep () {\n  this.id = uid++;\n  this.subs = [];\n};\n\nDep.prototype.addSub = function addSub (sub) {\n  this.subs.push(sub);\n};\n\nDep.prototype.removeSub = function removeSub (sub) {\n  remove(this.subs, sub);\n};\n\nDep.prototype.depend = function depend () {\n  if (Dep.target) {\n    Dep.target.addDep(this);\n  }\n};\n\nDep.prototype.notify = function notify () {\n  // stabilize the subscriber list first\n  var subs = this.subs.slice();\n  if (process.env.NODE_ENV !== 'production' && !config.async) {\n    // subs aren't sorted in scheduler if not running async\n    // we need to sort them now to make sure they fire in correct\n    // order\n    subs.sort(function (a, b) { return a.id - b.id; });\n  }\n  for (var i = 0, l = subs.length; i < l; i++) {\n    subs[i].update();\n  }\n};\n\n// The current target watcher being evaluated.\n// This is globally unique because only one watcher\n// can be evaluated at a time.\nDep.target = null;\nvar targetStack = [];\n\nfunction pushTarget (target) {\n  targetStack.push(target);\n  Dep.target = target;\n}\n\nfunction popTarget () {\n  targetStack.pop();\n  Dep.target = targetStack[targetStack.length - 1];\n}\n\n/*  */\n\nvar VNode = function VNode (\n  tag,\n  data,\n  children,\n  text,\n  elm,\n  context,\n  componentOptions,\n  asyncFactory\n) {\n  this.tag = tag;\n  this.data = data;\n  this.children = children;\n  this.text = text;\n  this.elm = elm;\n  this.ns = undefined;\n  this.context = context;\n  this.fnContext = undefined;\n  this.fnOptions = undefined;\n  this.fnScopeId = undefined;\n  this.key = data && data.key;\n  this.componentOptions = componentOptions;\n  this.componentInstance = undefined;\n  this.parent = undefined;\n  this.raw = false;\n  this.isStatic = false;\n  this.isRootInsert = true;\n  this.isComment = false;\n  this.isCloned = false;\n  this.isOnce = false;\n  this.asyncFactory = asyncFactory;\n  this.asyncMeta = undefined;\n  this.isAsyncPlaceholder = false;\n};\n\nvar prototypeAccessors = { child: { configurable: true } };\n\n// DEPRECATED: alias for componentInstance for backwards compat.\n/* istanbul ignore next */\nprototypeAccessors.child.get = function () {\n  return this.componentInstance\n};\n\nObject.defineProperties( VNode.prototype, prototypeAccessors );\n\nvar createEmptyVNode = function (text) {\n  if ( text === void 0 ) text = '';\n\n  var node = new VNode();\n  node.text = text;\n  node.isComment = true;\n  return node\n};\n\nfunction createTextVNode (val) {\n  return new VNode(undefined, undefined, undefined, String(val))\n}\n\n// optimized shallow clone\n// used for static nodes and slot nodes because they may be reused across\n// multiple renders, cloning them avoids errors when DOM manipulations rely\n// on their elm reference.\nfunction cloneVNode (vnode) {\n  var cloned = new VNode(\n    vnode.tag,\n    vnode.data,\n    // #7975\n    // clone children array to avoid mutating original in case of cloning\n    // a child.\n    vnode.children && vnode.children.slice(),\n    vnode.text,\n    vnode.elm,\n    vnode.context,\n    vnode.componentOptions,\n    vnode.asyncFactory\n  );\n  cloned.ns = vnode.ns;\n  cloned.isStatic = vnode.isStatic;\n  cloned.key = vnode.key;\n  cloned.isComment = vnode.isComment;\n  cloned.fnContext = vnode.fnContext;\n  cloned.fnOptions = vnode.fnOptions;\n  cloned.fnScopeId = vnode.fnScopeId;\n  cloned.asyncMeta = vnode.asyncMeta;\n  cloned.isCloned = true;\n  return cloned\n}\n\n/*\n * not type checking this file because flow doesn't play well with\n * dynamically accessing methods on Array prototype\n */\n\nvar arrayProto = Array.prototype;\nvar arrayMethods = Object.create(arrayProto);\n\nvar methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  var original = arrayProto[method];\n  def(arrayMethods, method, function mutator () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    var result = original.apply(this, args);\n    var ob = this.__ob__;\n    var inserted;\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2);\n        break\n    }\n    if (inserted) { ob.observeArray(inserted); }\n    // notify change\n    ob.dep.notify();\n    return result\n  });\n});\n\n/*  */\n\nvar arrayKeys = Object.getOwnPropertyNames(arrayMethods);\n\n/**\n * In some cases we may want to disable observation inside a component's\n * update computation.\n */\nvar shouldObserve = true;\n\nfunction toggleObserving (value) {\n  shouldObserve = value;\n}\n\n/**\n * Observer class that is attached to each observed\n * object. Once attached, the observer converts the target\n * object's property keys into getter/setters that\n * collect dependencies and dispatch updates.\n */\nvar Observer = function Observer (value) {\n  this.value = value;\n  this.dep = new Dep();\n  this.vmCount = 0;\n  def(value, '__ob__', this);\n  if (Array.isArray(value)) {\n    if (hasProto) {\n      protoAugment(value, arrayMethods);\n    } else {\n      copyAugment(value, arrayMethods, arrayKeys);\n    }\n    this.observeArray(value);\n  } else {\n    this.walk(value);\n  }\n};\n\n/**\n * Walk through all properties and convert them into\n * getter/setters. This method should only be called when\n * value type is Object.\n */\nObserver.prototype.walk = function walk (obj) {\n  var keys = Object.keys(obj);\n  for (var i = 0; i < keys.length; i++) {\n    defineReactive$$1(obj, keys[i]);\n  }\n};\n\n/**\n * Observe a list of Array items.\n */\nObserver.prototype.observeArray = function observeArray (items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    observe(items[i]);\n  }\n};\n\n// helpers\n\n/**\n * Augment a target Object or Array by intercepting\n * the prototype chain using __proto__\n */\nfunction protoAugment (target, src) {\n  /* eslint-disable no-proto */\n  target.__proto__ = src;\n  /* eslint-enable no-proto */\n}\n\n/**\n * Augment a target Object or Array by defining\n * hidden properties.\n */\n/* istanbul ignore next */\nfunction copyAugment (target, src, keys) {\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    def(target, key, src[key]);\n  }\n}\n\n/**\n * Attempt to create an observer instance for a value,\n * returns the new observer if successfully observed,\n * or the existing observer if the value already has one.\n */\nfunction observe (value, asRootData) {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  var ob;\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__;\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob\n}\n\n/**\n * Define a reactive property on an Object.\n */\nfunction defineReactive$$1 (\n  obj,\n  key,\n  val,\n  customSetter,\n  shallow\n) {\n  var dep = new Dep();\n\n  var property = Object.getOwnPropertyDescriptor(obj, key);\n  if (property && property.configurable === false) {\n    return\n  }\n\n  // cater for pre-defined getter/setters\n  var getter = property && property.get;\n  var setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n\n  var childOb = !shallow && observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter () {\n      var value = getter ? getter.call(obj) : val;\n      if (Dep.target) {\n        dep.depend();\n        if (childOb) {\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value\n    },\n    set: function reactiveSetter (newVal) {\n      var value = getter ? getter.call(obj) : val;\n      /* eslint-disable no-self-compare */\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return\n      }\n      /* eslint-enable no-self-compare */\n      if (process.env.NODE_ENV !== 'production' && customSetter) {\n        customSetter();\n      }\n      // #7981: for accessor properties without setter\n      if (getter && !setter) { return }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n      childOb = !shallow && observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * Set a property on an object. Adds the new property and\n * triggers change notification if the property doesn't\n * already exist.\n */\nfunction set (target, key, val) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot set reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.length = Math.max(target.length, key);\n    target.splice(key, 1, val);\n    return val\n  }\n  if (key in target && !(key in Object.prototype)) {\n    target[key] = val;\n    return val\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid adding reactive properties to a Vue instance or its root $data ' +\n      'at runtime - declare it upfront in the data option.'\n    );\n    return val\n  }\n  if (!ob) {\n    target[key] = val;\n    return val\n  }\n  defineReactive$$1(ob.value, key, val);\n  ob.dep.notify();\n  return val\n}\n\n/**\n * Delete a property and trigger change if necessary.\n */\nfunction del (target, key) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot delete reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.splice(key, 1);\n    return\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid deleting properties on a Vue instance or its root $data ' +\n      '- just set it to null.'\n    );\n    return\n  }\n  if (!hasOwn(target, key)) {\n    return\n  }\n  delete target[key];\n  if (!ob) {\n    return\n  }\n  ob.dep.notify();\n}\n\n/**\n * Collect dependencies on array elements when the array is touched, since\n * we cannot intercept array element access like property getters.\n */\nfunction dependArray (value) {\n  for (var e = (void 0), i = 0, l = value.length; i < l; i++) {\n    e = value[i];\n    e && e.__ob__ && e.__ob__.dep.depend();\n    if (Array.isArray(e)) {\n      dependArray(e);\n    }\n  }\n}\n\n/*  */\n\n/**\n * Option overwriting strategies are functions that handle\n * how to merge a parent option value and a child option\n * value into the final value.\n */\nvar strats = config.optionMergeStrategies;\n\n/**\n * Options with restrictions\n */\nif (process.env.NODE_ENV !== 'production') {\n  strats.el = strats.propsData = function (parent, child, vm, key) {\n    if (!vm) {\n      warn(\n        \"option \\\"\" + key + \"\\\" can only be used during instance \" +\n        'creation with the `new` keyword.'\n      );\n    }\n    return defaultStrat(parent, child)\n  };\n}\n\n/**\n * Helper that recursively merges two data objects together.\n */\nfunction mergeData (to, from) {\n  if (!from) { return to }\n  var key, toVal, fromVal;\n\n  var keys = hasSymbol\n    ? Reflect.ownKeys(from)\n    : Object.keys(from);\n\n  for (var i = 0; i < keys.length; i++) {\n    key = keys[i];\n    // in case the object is already observed...\n    if (key === '__ob__') { continue }\n    toVal = to[key];\n    fromVal = from[key];\n    if (!hasOwn(to, key)) {\n      set(to, key, fromVal);\n    } else if (\n      toVal !== fromVal &&\n      isPlainObject(toVal) &&\n      isPlainObject(fromVal)\n    ) {\n      mergeData(toVal, fromVal);\n    }\n  }\n  return to\n}\n\n/**\n * Data\n */\nfunction mergeDataOrFn (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    // in a Vue.extend merge, both should be functions\n    if (!childVal) {\n      return parentVal\n    }\n    if (!parentVal) {\n      return childVal\n    }\n    // when parentVal & childVal are both present,\n    // we need to return a function that returns the\n    // merged result of both functions... no need to\n    // check if parentVal is a function here because\n    // it has to be a function to pass previous merges.\n    return function mergedDataFn () {\n      return mergeData(\n        typeof childVal === 'function' ? childVal.call(this, this) : childVal,\n        typeof parentVal === 'function' ? parentVal.call(this, this) : parentVal\n      )\n    }\n  } else {\n    return function mergedInstanceDataFn () {\n      // instance merge\n      var instanceData = typeof childVal === 'function'\n        ? childVal.call(vm, vm)\n        : childVal;\n      var defaultData = typeof parentVal === 'function'\n        ? parentVal.call(vm, vm)\n        : parentVal;\n      if (instanceData) {\n        return mergeData(instanceData, defaultData)\n      } else {\n        return defaultData\n      }\n    }\n  }\n}\n\nstrats.data = function (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    if (childVal && typeof childVal !== 'function') {\n      process.env.NODE_ENV !== 'production' && warn(\n        'The \"data\" option should be a function ' +\n        'that returns a per-instance value in component ' +\n        'definitions.',\n        vm\n      );\n\n      return parentVal\n    }\n    return mergeDataOrFn(parentVal, childVal)\n  }\n\n  return mergeDataOrFn(parentVal, childVal, vm)\n};\n\n/**\n * Hooks and props are merged as arrays.\n */\nfunction mergeHook (\n  parentVal,\n  childVal\n) {\n  var res = childVal\n    ? parentVal\n      ? parentVal.concat(childVal)\n      : Array.isArray(childVal)\n        ? childVal\n        : [childVal]\n    : parentVal;\n  return res\n    ? dedupeHooks(res)\n    : res\n}\n\nfunction dedupeHooks (hooks) {\n  var res = [];\n  for (var i = 0; i < hooks.length; i++) {\n    if (res.indexOf(hooks[i]) === -1) {\n      res.push(hooks[i]);\n    }\n  }\n  return res\n}\n\nLIFECYCLE_HOOKS.forEach(function (hook) {\n  strats[hook] = mergeHook;\n});\n\n/**\n * Assets\n *\n * When a vm is present (instance creation), we need to do\n * a three-way merge between constructor options, instance\n * options and parent options.\n */\nfunction mergeAssets (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  var res = Object.create(parentVal || null);\n  if (childVal) {\n    process.env.NODE_ENV !== 'production' && assertObjectType(key, childVal, vm);\n    return extend(res, childVal)\n  } else {\n    return res\n  }\n}\n\nASSET_TYPES.forEach(function (type) {\n  strats[type + 's'] = mergeAssets;\n});\n\n/**\n * Watchers.\n *\n * Watchers hashes should not overwrite one\n * another, so we merge them as arrays.\n */\nstrats.watch = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  // work around Firefox's Object.prototype.watch...\n  if (parentVal === nativeWatch) { parentVal = undefined; }\n  if (childVal === nativeWatch) { childVal = undefined; }\n  /* istanbul ignore if */\n  if (!childVal) { return Object.create(parentVal || null) }\n  if (process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = {};\n  extend(ret, parentVal);\n  for (var key$1 in childVal) {\n    var parent = ret[key$1];\n    var child = childVal[key$1];\n    if (parent && !Array.isArray(parent)) {\n      parent = [parent];\n    }\n    ret[key$1] = parent\n      ? parent.concat(child)\n      : Array.isArray(child) ? child : [child];\n  }\n  return ret\n};\n\n/**\n * Other object hashes.\n */\nstrats.props =\nstrats.methods =\nstrats.inject =\nstrats.computed = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  if (childVal && process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = Object.create(null);\n  extend(ret, parentVal);\n  if (childVal) { extend(ret, childVal); }\n  return ret\n};\nstrats.provide = mergeDataOrFn;\n\n/**\n * Default strategy.\n */\nvar defaultStrat = function (parentVal, childVal) {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n};\n\n/**\n * Validate component names\n */\nfunction checkComponents (options) {\n  for (var key in options.components) {\n    validateComponentName(key);\n  }\n}\n\nfunction validateComponentName (name) {\n  if (!new RegExp((\"^[a-zA-Z][\\\\-\\\\.0-9_\" + (unicodeRegExp.source) + \"]*$\")).test(name)) {\n    warn(\n      'Invalid component name: \"' + name + '\". Component names ' +\n      'should conform to valid custom element name in html5 specification.'\n    );\n  }\n  if (isBuiltInTag(name) || config.isReservedTag(name)) {\n    warn(\n      'Do not use built-in or reserved HTML elements as component ' +\n      'id: ' + name\n    );\n  }\n}\n\n/**\n * Ensure all props option syntax are normalized into the\n * Object-based format.\n */\nfunction normalizeProps (options, vm) {\n  var props = options.props;\n  if (!props) { return }\n  var res = {};\n  var i, val, name;\n  if (Array.isArray(props)) {\n    i = props.length;\n    while (i--) {\n      val = props[i];\n      if (typeof val === 'string') {\n        name = camelize(val);\n        res[name] = { type: null };\n      } else if (process.env.NODE_ENV !== 'production') {\n        warn('props must be strings when using array syntax.');\n      }\n    }\n  } else if (isPlainObject(props)) {\n    for (var key in props) {\n      val = props[key];\n      name = camelize(key);\n      res[name] = isPlainObject(val)\n        ? val\n        : { type: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"props\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(props)) + \".\",\n      vm\n    );\n  }\n  options.props = res;\n}\n\n/**\n * Normalize all injections into Object-based format\n */\nfunction normalizeInject (options, vm) {\n  var inject = options.inject;\n  if (!inject) { return }\n  var normalized = options.inject = {};\n  if (Array.isArray(inject)) {\n    for (var i = 0; i < inject.length; i++) {\n      normalized[inject[i]] = { from: inject[i] };\n    }\n  } else if (isPlainObject(inject)) {\n    for (var key in inject) {\n      var val = inject[key];\n      normalized[key] = isPlainObject(val)\n        ? extend({ from: key }, val)\n        : { from: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"inject\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(inject)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Normalize raw function directives into object format.\n */\nfunction normalizeDirectives (options) {\n  var dirs = options.directives;\n  if (dirs) {\n    for (var key in dirs) {\n      var def$$1 = dirs[key];\n      if (typeof def$$1 === 'function') {\n        dirs[key] = { bind: def$$1, update: def$$1 };\n      }\n    }\n  }\n}\n\nfunction assertObjectType (name, value, vm) {\n  if (!isPlainObject(value)) {\n    warn(\n      \"Invalid value for option \\\"\" + name + \"\\\": expected an Object, \" +\n      \"but got \" + (toRawType(value)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Merge two option objects into a new one.\n * Core utility used in both instantiation and inheritance.\n */\nfunction mergeOptions (\n  parent,\n  child,\n  vm\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkComponents(child);\n  }\n\n  if (typeof child === 'function') {\n    child = child.options;\n  }\n\n  normalizeProps(child, vm);\n  normalizeInject(child, vm);\n  normalizeDirectives(child);\n\n  // Apply extends and mixins on the child options,\n  // but only if it is a raw options object that isn't\n  // the result of another mergeOptions call.\n  // Only merged options has the _base property.\n  if (!child._base) {\n    if (child.extends) {\n      parent = mergeOptions(parent, child.extends, vm);\n    }\n    if (child.mixins) {\n      for (var i = 0, l = child.mixins.length; i < l; i++) {\n        parent = mergeOptions(parent, child.mixins[i], vm);\n      }\n    }\n  }\n\n  var options = {};\n  var key;\n  for (key in parent) {\n    mergeField(key);\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField (key) {\n    var strat = strats[key] || defaultStrat;\n    options[key] = strat(parent[key], child[key], vm, key);\n  }\n  return options\n}\n\n/**\n * Resolve an asset.\n * This function is used because child instances need access\n * to assets defined in its ancestor chain.\n */\nfunction resolveAsset (\n  options,\n  type,\n  id,\n  warnMissing\n) {\n  /* istanbul ignore if */\n  if (typeof id !== 'string') {\n    return\n  }\n  var assets = options[type];\n  // check local registration variations first\n  if (hasOwn(assets, id)) { return assets[id] }\n  var camelizedId = camelize(id);\n  if (hasOwn(assets, camelizedId)) { return assets[camelizedId] }\n  var PascalCaseId = capitalize(camelizedId);\n  if (hasOwn(assets, PascalCaseId)) { return assets[PascalCaseId] }\n  // fallback to prototype chain\n  var res = assets[id] || assets[camelizedId] || assets[PascalCaseId];\n  if (process.env.NODE_ENV !== 'production' && warnMissing && !res) {\n    warn(\n      'Failed to resolve ' + type.slice(0, -1) + ': ' + id,\n      options\n    );\n  }\n  return res\n}\n\n/*  */\n\n\n\nfunction validateProp (\n  key,\n  propOptions,\n  propsData,\n  vm\n) {\n  var prop = propOptions[key];\n  var absent = !hasOwn(propsData, key);\n  var value = propsData[key];\n  // boolean casting\n  var booleanIndex = getTypeIndex(Boolean, prop.type);\n  if (booleanIndex > -1) {\n    if (absent && !hasOwn(prop, 'default')) {\n      value = false;\n    } else if (value === '' || value === hyphenate(key)) {\n      // only cast empty string / same name to boolean if\n      // boolean has higher priority\n      var stringIndex = getTypeIndex(String, prop.type);\n      if (stringIndex < 0 || booleanIndex < stringIndex) {\n        value = true;\n      }\n    }\n  }\n  // check default value\n  if (value === undefined) {\n    value = getPropDefaultValue(vm, prop, key);\n    // since the default value is a fresh copy,\n    // make sure to observe it.\n    var prevShouldObserve = shouldObserve;\n    toggleObserving(true);\n    observe(value);\n    toggleObserving(prevShouldObserve);\n  }\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    // skip validation for weex recycle-list child component props\n    !(false)\n  ) {\n    assertProp(prop, key, value, vm, absent);\n  }\n  return value\n}\n\n/**\n * Get the default value of a prop.\n */\nfunction getPropDefaultValue (vm, prop, key) {\n  // no default, return undefined\n  if (!hasOwn(prop, 'default')) {\n    return undefined\n  }\n  var def = prop.default;\n  // warn against non-factory defaults for Object & Array\n  if (process.env.NODE_ENV !== 'production' && isObject(def)) {\n    warn(\n      'Invalid default value for prop \"' + key + '\": ' +\n      'Props with type Object/Array must use a factory function ' +\n      'to return the default value.',\n      vm\n    );\n  }\n  // the raw prop value was also undefined from previous render,\n  // return previous default value to avoid unnecessary watcher trigger\n  if (vm && vm.$options.propsData &&\n    vm.$options.propsData[key] === undefined &&\n    vm._props[key] !== undefined\n  ) {\n    return vm._props[key]\n  }\n  // call factory function for non-Function types\n  // a value is Function if its prototype is function even across different execution context\n  return typeof def === 'function' && getType(prop.type) !== 'Function'\n    ? def.call(vm)\n    : def\n}\n\n/**\n * Assert whether a prop is valid.\n */\nfunction assertProp (\n  prop,\n  name,\n  value,\n  vm,\n  absent\n) {\n  if (prop.required && absent) {\n    warn(\n      'Missing required prop: \"' + name + '\"',\n      vm\n    );\n    return\n  }\n  if (value == null && !prop.required) {\n    return\n  }\n  var type = prop.type;\n  var valid = !type || type === true;\n  var expectedTypes = [];\n  if (type) {\n    if (!Array.isArray(type)) {\n      type = [type];\n    }\n    for (var i = 0; i < type.length && !valid; i++) {\n      var assertedType = assertType(value, type[i], vm);\n      expectedTypes.push(assertedType.expectedType || '');\n      valid = assertedType.valid;\n    }\n  }\n\n  var haveExpectedTypes = expectedTypes.some(function (t) { return t; });\n  if (!valid && haveExpectedTypes) {\n    warn(\n      getInvalidTypeMessage(name, value, expectedTypes),\n      vm\n    );\n    return\n  }\n  var validator = prop.validator;\n  if (validator) {\n    if (!validator(value)) {\n      warn(\n        'Invalid prop: custom validator check failed for prop \"' + name + '\".',\n        vm\n      );\n    }\n  }\n}\n\nvar simpleCheckRE = /^(String|Number|Boolean|Function|Symbol|BigInt)$/;\n\nfunction assertType (value, type, vm) {\n  var valid;\n  var expectedType = getType(type);\n  if (simpleCheckRE.test(expectedType)) {\n    var t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    // for primitive wrapper objects\n    if (!valid && t === 'object') {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === 'Object') {\n    valid = isPlainObject(value);\n  } else if (expectedType === 'Array') {\n    valid = Array.isArray(value);\n  } else {\n    try {\n      valid = value instanceof type;\n    } catch (e) {\n      warn('Invalid prop type: \"' + String(type) + '\" is not a constructor', vm);\n      valid = false;\n    }\n  }\n  return {\n    valid: valid,\n    expectedType: expectedType\n  }\n}\n\nvar functionTypeCheckRE = /^\\s*function (\\w+)/;\n\n/**\n * Use function string name to check built-in types,\n * because a simple equality check will fail when running\n * across different vms / iframes.\n */\nfunction getType (fn) {\n  var match = fn && fn.toString().match(functionTypeCheckRE);\n  return match ? match[1] : ''\n}\n\nfunction isSameType (a, b) {\n  return getType(a) === getType(b)\n}\n\nfunction getTypeIndex (type, expectedTypes) {\n  if (!Array.isArray(expectedTypes)) {\n    return isSameType(expectedTypes, type) ? 0 : -1\n  }\n  for (var i = 0, len = expectedTypes.length; i < len; i++) {\n    if (isSameType(expectedTypes[i], type)) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction getInvalidTypeMessage (name, value, expectedTypes) {\n  var message = \"Invalid prop: type check failed for prop \\\"\" + name + \"\\\".\" +\n    \" Expected \" + (expectedTypes.map(capitalize).join(', '));\n  var expectedType = expectedTypes[0];\n  var receivedType = toRawType(value);\n  // check if we need to specify expected value\n  if (\n    expectedTypes.length === 1 &&\n    isExplicable(expectedType) &&\n    isExplicable(typeof value) &&\n    !isBoolean(expectedType, receivedType)\n  ) {\n    message += \" with value \" + (styleValue(value, expectedType));\n  }\n  message += \", got \" + receivedType + \" \";\n  // check if we need to specify received value\n  if (isExplicable(receivedType)) {\n    message += \"with value \" + (styleValue(value, receivedType)) + \".\";\n  }\n  return message\n}\n\nfunction styleValue (value, type) {\n  if (type === 'String') {\n    return (\"\\\"\" + value + \"\\\"\")\n  } else if (type === 'Number') {\n    return (\"\" + (Number(value)))\n  } else {\n    return (\"\" + value)\n  }\n}\n\nvar EXPLICABLE_TYPES = ['string', 'number', 'boolean'];\nfunction isExplicable (value) {\n  return EXPLICABLE_TYPES.some(function (elem) { return value.toLowerCase() === elem; })\n}\n\nfunction isBoolean () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  return args.some(function (elem) { return elem.toLowerCase() === 'boolean'; })\n}\n\n/*  */\n\nfunction handleError (err, vm, info) {\n  // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n  // See: https://github.com/vuejs/vuex/issues/1505\n  pushTarget();\n  try {\n    if (vm) {\n      var cur = vm;\n      while ((cur = cur.$parent)) {\n        var hooks = cur.$options.errorCaptured;\n        if (hooks) {\n          for (var i = 0; i < hooks.length; i++) {\n            try {\n              var capture = hooks[i].call(cur, err, vm, info) === false;\n              if (capture) { return }\n            } catch (e) {\n              globalHandleError(e, cur, 'errorCaptured hook');\n            }\n          }\n        }\n      }\n    }\n    globalHandleError(err, vm, info);\n  } finally {\n    popTarget();\n  }\n}\n\nfunction invokeWithErrorHandling (\n  handler,\n  context,\n  args,\n  vm,\n  info\n) {\n  var res;\n  try {\n    res = args ? handler.apply(context, args) : handler.call(context);\n    if (res && !res._isVue && isPromise(res) && !res._handled) {\n      res.catch(function (e) { return handleError(e, vm, info + \" (Promise/async)\"); });\n      // issue #9511\n      // avoid catch triggering multiple times when nested calls\n      res._handled = true;\n    }\n  } catch (e) {\n    handleError(e, vm, info);\n  }\n  return res\n}\n\nfunction globalHandleError (err, vm, info) {\n  if (config.errorHandler) {\n    try {\n      return config.errorHandler.call(null, err, vm, info)\n    } catch (e) {\n      // if the user intentionally throws the original error in the handler,\n      // do not log it twice\n      if (e !== err) {\n        logError(e, null, 'config.errorHandler');\n      }\n    }\n  }\n  logError(err, vm, info);\n}\n\nfunction logError (err, vm, info) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn((\"Error in \" + info + \": \\\"\" + (err.toString()) + \"\\\"\"), vm);\n  }\n  /* istanbul ignore else */\n  if ((inBrowser || inWeex) && typeof console !== 'undefined') {\n    console.error(err);\n  } else {\n    throw err\n  }\n}\n\n/*  */\n\nvar isUsingMicroTask = false;\n\nvar callbacks = [];\nvar pending = false;\n\nfunction flushCallbacks () {\n  pending = false;\n  var copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (var i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\n// Here we have async deferring wrappers using microtasks.\n// In 2.5 we used (macro) tasks (in combination with microtasks).\n// However, it has subtle problems when state is changed right before repaint\n// (e.g. #6813, out-in transitions).\n// Also, using (macro) tasks in event handler would cause some weird behaviors\n// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n// So we now use microtasks everywhere, again.\n// A major drawback of this tradeoff is that there are some scenarios\n// where microtasks have too high a priority and fire in between supposedly\n// sequential events (e.g. #4521, #6690, which have workarounds)\n// or even between bubbling of the same event (#6566).\nvar timerFunc;\n\n// The nextTick behavior leverages the microtask queue, which can be accessed\n// via either native Promise.then or MutationObserver.\n// MutationObserver has wider support, however it is seriously bugged in\n// UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It\n// completely stops working after triggering a few times... so, if native\n// Promise is available, we will use it:\n/* istanbul ignore next, $flow-disable-line */\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\n  var p = Promise.resolve();\n  timerFunc = function () {\n    p.then(flushCallbacks);\n    // In problematic UIWebViews, Promise.then doesn't completely break, but\n    // it can get stuck in a weird state where callbacks are pushed into the\n    // microtask queue but the queue isn't being flushed, until the browser\n    // needs to do some other work, e.g. handle a timer. Therefore we can\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\n    if (isIOS) { setTimeout(noop); }\n  };\n  isUsingMicroTask = true;\n} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n  isNative(MutationObserver) ||\n  // PhantomJS and iOS 7.x\n  MutationObserver.toString() === '[object MutationObserverConstructor]'\n)) {\n  // Use MutationObserver where native Promise is not available,\n  // e.g. PhantomJS, iOS7, Android 4.4\n  // (#6466 MutationObserver is unreliable in IE11)\n  var counter = 1;\n  var observer = new MutationObserver(flushCallbacks);\n  var textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true\n  });\n  timerFunc = function () {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n  isUsingMicroTask = true;\n} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n  // Fallback to setImmediate.\n  // Technically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = function () {\n    setImmediate(flushCallbacks);\n  };\n} else {\n  // Fallback to setTimeout.\n  timerFunc = function () {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n\nfunction nextTick (cb, ctx) {\n  var _resolve;\n  callbacks.push(function () {\n    if (cb) {\n      try {\n        cb.call(ctx);\n      } catch (e) {\n        handleError(e, ctx, 'nextTick');\n      }\n    } else if (_resolve) {\n      _resolve(ctx);\n    }\n  });\n  if (!pending) {\n    pending = true;\n    timerFunc();\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve) {\n      _resolve = resolve;\n    })\n  }\n}\n\n/*  */\n\n/* not type checking this file because flow doesn't play well with Proxy */\n\nvar initProxy;\n\nif (process.env.NODE_ENV !== 'production') {\n  var allowedGlobals = makeMap(\n    'Infinity,undefined,NaN,isFinite,isNaN,' +\n    'parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,' +\n    'require' // for Webpack/Browserify\n  );\n\n  var warnNonPresent = function (target, key) {\n    warn(\n      \"Property or method \\\"\" + key + \"\\\" is not defined on the instance but \" +\n      'referenced during render. Make sure that this property is reactive, ' +\n      'either in the data option, or for class-based components, by ' +\n      'initializing the property. ' +\n      'See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',\n      target\n    );\n  };\n\n  var warnReservedPrefix = function (target, key) {\n    warn(\n      \"Property \\\"\" + key + \"\\\" must be accessed with \\\"$data.\" + key + \"\\\" because \" +\n      'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n      'prevent conflicts with Vue internals. ' +\n      'See: https://vuejs.org/v2/api/#data',\n      target\n    );\n  };\n\n  var hasProxy =\n    typeof Proxy !== 'undefined' && isNative(Proxy);\n\n  if (hasProxy) {\n    var isBuiltInModifier = makeMap('stop,prevent,self,ctrl,shift,alt,meta,exact');\n    config.keyCodes = new Proxy(config.keyCodes, {\n      set: function set (target, key, value) {\n        if (isBuiltInModifier(key)) {\n          warn((\"Avoid overwriting built-in modifier in config.keyCodes: .\" + key));\n          return false\n        } else {\n          target[key] = value;\n          return true\n        }\n      }\n    });\n  }\n\n  var hasHandler = {\n    has: function has (target, key) {\n      var has = key in target;\n      var isAllowed = allowedGlobals(key) ||\n        (typeof key === 'string' && key.charAt(0) === '_' && !(key in target.$data));\n      if (!has && !isAllowed) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return has || !isAllowed\n    }\n  };\n\n  var getHandler = {\n    get: function get (target, key) {\n      if (typeof key === 'string' && !(key in target)) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return target[key]\n    }\n  };\n\n  initProxy = function initProxy (vm) {\n    if (hasProxy) {\n      // determine which proxy handler to use\n      var options = vm.$options;\n      var handlers = options.render && options.render._withStripped\n        ? getHandler\n        : hasHandler;\n      vm._renderProxy = new Proxy(vm, handlers);\n    } else {\n      vm._renderProxy = vm;\n    }\n  };\n}\n\n/*  */\n\nvar seenObjects = new _Set();\n\n/**\n * Recursively traverse an object to evoke all converted\n * getters, so that every nested property inside the object\n * is collected as a \"deep\" dependency.\n */\nfunction traverse (val) {\n  _traverse(val, seenObjects);\n  seenObjects.clear();\n}\n\nfunction _traverse (val, seen) {\n  var i, keys;\n  var isA = Array.isArray(val);\n  if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {\n    return\n  }\n  if (val.__ob__) {\n    var depId = val.__ob__.dep.id;\n    if (seen.has(depId)) {\n      return\n    }\n    seen.add(depId);\n  }\n  if (isA) {\n    i = val.length;\n    while (i--) { _traverse(val[i], seen); }\n  } else {\n    keys = Object.keys(val);\n    i = keys.length;\n    while (i--) { _traverse(val[keys[i]], seen); }\n  }\n}\n\nvar mark;\nvar measure;\n\nif (process.env.NODE_ENV !== 'production') {\n  var perf = inBrowser && window.performance;\n  /* istanbul ignore if */\n  if (\n    perf &&\n    perf.mark &&\n    perf.measure &&\n    perf.clearMarks &&\n    perf.clearMeasures\n  ) {\n    mark = function (tag) { return perf.mark(tag); };\n    measure = function (name, startTag, endTag) {\n      perf.measure(name, startTag, endTag);\n      perf.clearMarks(startTag);\n      perf.clearMarks(endTag);\n      // perf.clearMeasures(name)\n    };\n  }\n}\n\n/*  */\n\nvar normalizeEvent = cached(function (name) {\n  var passive = name.charAt(0) === '&';\n  name = passive ? name.slice(1) : name;\n  var once$$1 = name.charAt(0) === '~'; // Prefixed last, checked first\n  name = once$$1 ? name.slice(1) : name;\n  var capture = name.charAt(0) === '!';\n  name = capture ? name.slice(1) : name;\n  return {\n    name: name,\n    once: once$$1,\n    capture: capture,\n    passive: passive\n  }\n});\n\nfunction createFnInvoker (fns, vm) {\n  function invoker () {\n    var arguments$1 = arguments;\n\n    var fns = invoker.fns;\n    if (Array.isArray(fns)) {\n      var cloned = fns.slice();\n      for (var i = 0; i < cloned.length; i++) {\n        invokeWithErrorHandling(cloned[i], null, arguments$1, vm, \"v-on handler\");\n      }\n    } else {\n      // return handler return value for single handlers\n      return invokeWithErrorHandling(fns, null, arguments, vm, \"v-on handler\")\n    }\n  }\n  invoker.fns = fns;\n  return invoker\n}\n\nfunction updateListeners (\n  on,\n  oldOn,\n  add,\n  remove$$1,\n  createOnceHandler,\n  vm\n) {\n  var name, def$$1, cur, old, event;\n  for (name in on) {\n    def$$1 = cur = on[name];\n    old = oldOn[name];\n    event = normalizeEvent(name);\n    if (isUndef(cur)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Invalid handler for event \\\"\" + (event.name) + \"\\\": got \" + String(cur),\n        vm\n      );\n    } else if (isUndef(old)) {\n      if (isUndef(cur.fns)) {\n        cur = on[name] = createFnInvoker(cur, vm);\n      }\n      if (isTrue(event.once)) {\n        cur = on[name] = createOnceHandler(event.name, cur, event.capture);\n      }\n      add(event.name, cur, event.capture, event.passive, event.params);\n    } else if (cur !== old) {\n      old.fns = cur;\n      on[name] = old;\n    }\n  }\n  for (name in oldOn) {\n    if (isUndef(on[name])) {\n      event = normalizeEvent(name);\n      remove$$1(event.name, oldOn[name], event.capture);\n    }\n  }\n}\n\n/*  */\n\nfunction mergeVNodeHook (def, hookKey, hook) {\n  if (def instanceof VNode) {\n    def = def.data.hook || (def.data.hook = {});\n  }\n  var invoker;\n  var oldHook = def[hookKey];\n\n  function wrappedHook () {\n    hook.apply(this, arguments);\n    // important: remove merged hook to ensure it's called only once\n    // and prevent memory leak\n    remove(invoker.fns, wrappedHook);\n  }\n\n  if (isUndef(oldHook)) {\n    // no existing hook\n    invoker = createFnInvoker([wrappedHook]);\n  } else {\n    /* istanbul ignore if */\n    if (isDef(oldHook.fns) && isTrue(oldHook.merged)) {\n      // already a merged invoker\n      invoker = oldHook;\n      invoker.fns.push(wrappedHook);\n    } else {\n      // existing plain hook\n      invoker = createFnInvoker([oldHook, wrappedHook]);\n    }\n  }\n\n  invoker.merged = true;\n  def[hookKey] = invoker;\n}\n\n/*  */\n\nfunction extractPropsFromVNodeData (\n  data,\n  Ctor,\n  tag\n) {\n  // we are only extracting raw values here.\n  // validation and default values are handled in the child\n  // component itself.\n  var propOptions = Ctor.options.props;\n  if (isUndef(propOptions)) {\n    return\n  }\n  var res = {};\n  var attrs = data.attrs;\n  var props = data.props;\n  if (isDef(attrs) || isDef(props)) {\n    for (var key in propOptions) {\n      var altKey = hyphenate(key);\n      if (process.env.NODE_ENV !== 'production') {\n        var keyInLowerCase = key.toLowerCase();\n        if (\n          key !== keyInLowerCase &&\n          attrs && hasOwn(attrs, keyInLowerCase)\n        ) {\n          tip(\n            \"Prop \\\"\" + keyInLowerCase + \"\\\" is passed to component \" +\n            (formatComponentName(tag || Ctor)) + \", but the declared prop name is\" +\n            \" \\\"\" + key + \"\\\". \" +\n            \"Note that HTML attributes are case-insensitive and camelCased \" +\n            \"props need to use their kebab-case equivalents when using in-DOM \" +\n            \"templates. You should probably use \\\"\" + altKey + \"\\\" instead of \\\"\" + key + \"\\\".\"\n          );\n        }\n      }\n      checkProp(res, props, key, altKey, true) ||\n      checkProp(res, attrs, key, altKey, false);\n    }\n  }\n  return res\n}\n\nfunction checkProp (\n  res,\n  hash,\n  key,\n  altKey,\n  preserve\n) {\n  if (isDef(hash)) {\n    if (hasOwn(hash, key)) {\n      res[key] = hash[key];\n      if (!preserve) {\n        delete hash[key];\n      }\n      return true\n    } else if (hasOwn(hash, altKey)) {\n      res[key] = hash[altKey];\n      if (!preserve) {\n        delete hash[altKey];\n      }\n      return true\n    }\n  }\n  return false\n}\n\n/*  */\n\n// The template compiler attempts to minimize the need for normalization by\n// statically analyzing the template at compile time.\n//\n// For plain HTML markup, normalization can be completely skipped because the\n// generated render function is guaranteed to return Array<VNode>. There are\n// two cases where extra normalization is needed:\n\n// 1. When the children contains components - because a functional component\n// may return an Array instead of a single root. In this case, just a simple\n// normalization is needed - if any child is an Array, we flatten the whole\n// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n// because functional components already normalize their own children.\nfunction simpleNormalizeChildren (children) {\n  for (var i = 0; i < children.length; i++) {\n    if (Array.isArray(children[i])) {\n      return Array.prototype.concat.apply([], children)\n    }\n  }\n  return children\n}\n\n// 2. When the children contains constructs that always generated nested Arrays,\n// e.g. <template>, <slot>, v-for, or when the children is provided by user\n// with hand-written render functions / JSX. In such cases a full normalization\n// is needed to cater to all possible types of children values.\nfunction normalizeChildren (children) {\n  return isPrimitive(children)\n    ? [createTextVNode(children)]\n    : Array.isArray(children)\n      ? normalizeArrayChildren(children)\n      : undefined\n}\n\nfunction isTextNode (node) {\n  return isDef(node) && isDef(node.text) && isFalse(node.isComment)\n}\n\nfunction normalizeArrayChildren (children, nestedIndex) {\n  var res = [];\n  var i, c, lastIndex, last;\n  for (i = 0; i < children.length; i++) {\n    c = children[i];\n    if (isUndef(c) || typeof c === 'boolean') { continue }\n    lastIndex = res.length - 1;\n    last = res[lastIndex];\n    //  nested\n    if (Array.isArray(c)) {\n      if (c.length > 0) {\n        c = normalizeArrayChildren(c, ((nestedIndex || '') + \"_\" + i));\n        // merge adjacent text nodes\n        if (isTextNode(c[0]) && isTextNode(last)) {\n          res[lastIndex] = createTextVNode(last.text + (c[0]).text);\n          c.shift();\n        }\n        res.push.apply(res, c);\n      }\n    } else if (isPrimitive(c)) {\n      if (isTextNode(last)) {\n        // merge adjacent text nodes\n        // this is necessary for SSR hydration because text nodes are\n        // essentially merged when rendered to HTML strings\n        res[lastIndex] = createTextVNode(last.text + c);\n      } else if (c !== '') {\n        // convert primitive to vnode\n        res.push(createTextVNode(c));\n      }\n    } else {\n      if (isTextNode(c) && isTextNode(last)) {\n        // merge adjacent text nodes\n        res[lastIndex] = createTextVNode(last.text + c.text);\n      } else {\n        // default key for nested array children (likely generated by v-for)\n        if (isTrue(children._isVList) &&\n          isDef(c.tag) &&\n          isUndef(c.key) &&\n          isDef(nestedIndex)) {\n          c.key = \"__vlist\" + nestedIndex + \"_\" + i + \"__\";\n        }\n        res.push(c);\n      }\n    }\n  }\n  return res\n}\n\n/*  */\n\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n\nfunction resolveInject (inject, vm) {\n  if (inject) {\n    // inject is :any because flow is not smart enough to figure out cached\n    var result = Object.create(null);\n    var keys = hasSymbol\n      ? Reflect.ownKeys(inject)\n      : Object.keys(inject);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      // #6574 in case the inject object is observed...\n      if (key === '__ob__') { continue }\n      var provideKey = inject[key].from;\n      var source = vm;\n      while (source) {\n        if (source._provided && hasOwn(source._provided, provideKey)) {\n          result[key] = source._provided[provideKey];\n          break\n        }\n        source = source.$parent;\n      }\n      if (!source) {\n        if ('default' in inject[key]) {\n          var provideDefault = inject[key].default;\n          result[key] = typeof provideDefault === 'function'\n            ? provideDefault.call(vm)\n            : provideDefault;\n        } else if (process.env.NODE_ENV !== 'production') {\n          warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n        }\n      }\n    }\n    return result\n  }\n}\n\n/*  */\n\n\n\n/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */\nfunction resolveSlots (\n  children,\n  context\n) {\n  if (!children || !children.length) {\n    return {}\n  }\n  var slots = {};\n  for (var i = 0, l = children.length; i < l; i++) {\n    var child = children[i];\n    var data = child.data;\n    // remove slot attribute if the node is resolved as a Vue slot node\n    if (data && data.attrs && data.attrs.slot) {\n      delete data.attrs.slot;\n    }\n    // named slots should only be respected if the vnode was rendered in the\n    // same context.\n    if ((child.context === context || child.fnContext === context) &&\n      data && data.slot != null\n    ) {\n      var name = data.slot;\n      var slot = (slots[name] || (slots[name] = []));\n      if (child.tag === 'template') {\n        slot.push.apply(slot, child.children || []);\n      } else {\n        slot.push(child);\n      }\n    } else {\n      (slots.default || (slots.default = [])).push(child);\n    }\n  }\n  // ignore slots that contains only whitespace\n  for (var name$1 in slots) {\n    if (slots[name$1].every(isWhitespace)) {\n      delete slots[name$1];\n    }\n  }\n  return slots\n}\n\nfunction isWhitespace (node) {\n  return (node.isComment && !node.asyncFactory) || node.text === ' '\n}\n\n/*  */\n\nfunction isAsyncPlaceholder (node) {\n  return node.isComment && node.asyncFactory\n}\n\n/*  */\n\nfunction normalizeScopedSlots (\n  slots,\n  normalSlots,\n  prevSlots\n) {\n  var res;\n  var hasNormalSlots = Object.keys(normalSlots).length > 0;\n  var isStable = slots ? !!slots.$stable : !hasNormalSlots;\n  var key = slots && slots.$key;\n  if (!slots) {\n    res = {};\n  } else if (slots._normalized) {\n    // fast path 1: child component re-render only, parent did not change\n    return slots._normalized\n  } else if (\n    isStable &&\n    prevSlots &&\n    prevSlots !== emptyObject &&\n    key === prevSlots.$key &&\n    !hasNormalSlots &&\n    !prevSlots.$hasNormal\n  ) {\n    // fast path 2: stable scoped slots w/ no normal slots to proxy,\n    // only need to normalize once\n    return prevSlots\n  } else {\n    res = {};\n    for (var key$1 in slots) {\n      if (slots[key$1] && key$1[0] !== '$') {\n        res[key$1] = normalizeScopedSlot(normalSlots, key$1, slots[key$1]);\n      }\n    }\n  }\n  // expose normal slots on scopedSlots\n  for (var key$2 in normalSlots) {\n    if (!(key$2 in res)) {\n      res[key$2] = proxyNormalSlot(normalSlots, key$2);\n    }\n  }\n  // avoriaz seems to mock a non-extensible $scopedSlots object\n  // and when that is passed down this would cause an error\n  if (slots && Object.isExtensible(slots)) {\n    (slots)._normalized = res;\n  }\n  def(res, '$stable', isStable);\n  def(res, '$key', key);\n  def(res, '$hasNormal', hasNormalSlots);\n  return res\n}\n\nfunction normalizeScopedSlot(normalSlots, key, fn) {\n  var normalized = function () {\n    var res = arguments.length ? fn.apply(null, arguments) : fn({});\n    res = res && typeof res === 'object' && !Array.isArray(res)\n      ? [res] // single vnode\n      : normalizeChildren(res);\n    var vnode = res && res[0];\n    return res && (\n      !vnode ||\n      (res.length === 1 && vnode.isComment && !isAsyncPlaceholder(vnode)) // #9658, #10391\n    ) ? undefined\n      : res\n  };\n  // this is a slot using the new v-slot syntax without scope. although it is\n  // compiled as a scoped slot, render fn users would expect it to be present\n  // on this.$slots because the usage is semantically a normal slot.\n  if (fn.proxy) {\n    Object.defineProperty(normalSlots, key, {\n      get: normalized,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  return normalized\n}\n\nfunction proxyNormalSlot(slots, key) {\n  return function () { return slots[key]; }\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering v-for lists.\n */\nfunction renderList (\n  val,\n  render\n) {\n  var ret, i, l, keys, key;\n  if (Array.isArray(val) || typeof val === 'string') {\n    ret = new Array(val.length);\n    for (i = 0, l = val.length; i < l; i++) {\n      ret[i] = render(val[i], i);\n    }\n  } else if (typeof val === 'number') {\n    ret = new Array(val);\n    for (i = 0; i < val; i++) {\n      ret[i] = render(i + 1, i);\n    }\n  } else if (isObject(val)) {\n    if (hasSymbol && val[Symbol.iterator]) {\n      ret = [];\n      var iterator = val[Symbol.iterator]();\n      var result = iterator.next();\n      while (!result.done) {\n        ret.push(render(result.value, ret.length));\n        result = iterator.next();\n      }\n    } else {\n      keys = Object.keys(val);\n      ret = new Array(keys.length);\n      for (i = 0, l = keys.length; i < l; i++) {\n        key = keys[i];\n        ret[i] = render(val[key], key, i);\n      }\n    }\n  }\n  if (!isDef(ret)) {\n    ret = [];\n  }\n  (ret)._isVList = true;\n  return ret\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering <slot>\n */\nfunction renderSlot (\n  name,\n  fallbackRender,\n  props,\n  bindObject\n) {\n  var scopedSlotFn = this.$scopedSlots[name];\n  var nodes;\n  if (scopedSlotFn) {\n    // scoped slot\n    props = props || {};\n    if (bindObject) {\n      if (process.env.NODE_ENV !== 'production' && !isObject(bindObject)) {\n        warn('slot v-bind without argument expects an Object', this);\n      }\n      props = extend(extend({}, bindObject), props);\n    }\n    nodes =\n      scopedSlotFn(props) ||\n      (typeof fallbackRender === 'function' ? fallbackRender() : fallbackRender);\n  } else {\n    nodes =\n      this.$slots[name] ||\n      (typeof fallbackRender === 'function' ? fallbackRender() : fallbackRender);\n  }\n\n  var target = props && props.slot;\n  if (target) {\n    return this.$createElement('template', { slot: target }, nodes)\n  } else {\n    return nodes\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for resolving filters\n */\nfunction resolveFilter (id) {\n  return resolveAsset(this.$options, 'filters', id, true) || identity\n}\n\n/*  */\n\nfunction isKeyNotMatch (expect, actual) {\n  if (Array.isArray(expect)) {\n    return expect.indexOf(actual) === -1\n  } else {\n    return expect !== actual\n  }\n}\n\n/**\n * Runtime helper for checking keyCodes from config.\n * exposed as Vue.prototype._k\n * passing in eventKeyName as last argument separately for backwards compat\n */\nfunction checkKeyCodes (\n  eventKeyCode,\n  key,\n  builtInKeyCode,\n  eventKeyName,\n  builtInKeyName\n) {\n  var mappedKeyCode = config.keyCodes[key] || builtInKeyCode;\n  if (builtInKeyName && eventKeyName && !config.keyCodes[key]) {\n    return isKeyNotMatch(builtInKeyName, eventKeyName)\n  } else if (mappedKeyCode) {\n    return isKeyNotMatch(mappedKeyCode, eventKeyCode)\n  } else if (eventKeyName) {\n    return hyphenate(eventKeyName) !== key\n  }\n  return eventKeyCode === undefined\n}\n\n/*  */\n\n/**\n * Runtime helper for merging v-bind=\"object\" into a VNode's data.\n */\nfunction bindObjectProps (\n  data,\n  tag,\n  value,\n  asProp,\n  isSync\n) {\n  if (value) {\n    if (!isObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-bind without argument expects an Object or Array value',\n        this\n      );\n    } else {\n      if (Array.isArray(value)) {\n        value = toObject(value);\n      }\n      var hash;\n      var loop = function ( key ) {\n        if (\n          key === 'class' ||\n          key === 'style' ||\n          isReservedAttribute(key)\n        ) {\n          hash = data;\n        } else {\n          var type = data.attrs && data.attrs.type;\n          hash = asProp || config.mustUseProp(tag, type, key)\n            ? data.domProps || (data.domProps = {})\n            : data.attrs || (data.attrs = {});\n        }\n        var camelizedKey = camelize(key);\n        var hyphenatedKey = hyphenate(key);\n        if (!(camelizedKey in hash) && !(hyphenatedKey in hash)) {\n          hash[key] = value[key];\n\n          if (isSync) {\n            var on = data.on || (data.on = {});\n            on[(\"update:\" + key)] = function ($event) {\n              value[key] = $event;\n            };\n          }\n        }\n      };\n\n      for (var key in value) loop( key );\n    }\n  }\n  return data\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering static trees.\n */\nfunction renderStatic (\n  index,\n  isInFor\n) {\n  var cached = this._staticTrees || (this._staticTrees = []);\n  var tree = cached[index];\n  // if has already-rendered static tree and not inside v-for,\n  // we can reuse the same tree.\n  if (tree && !isInFor) {\n    return tree\n  }\n  // otherwise, render a fresh tree.\n  tree = cached[index] = this.$options.staticRenderFns[index].call(\n    this._renderProxy,\n    null,\n    this // for render fns generated for functional component templates\n  );\n  markStatic(tree, (\"__static__\" + index), false);\n  return tree\n}\n\n/**\n * Runtime helper for v-once.\n * Effectively it means marking the node as static with a unique key.\n */\nfunction markOnce (\n  tree,\n  index,\n  key\n) {\n  markStatic(tree, (\"__once__\" + index + (key ? (\"_\" + key) : \"\")), true);\n  return tree\n}\n\nfunction markStatic (\n  tree,\n  key,\n  isOnce\n) {\n  if (Array.isArray(tree)) {\n    for (var i = 0; i < tree.length; i++) {\n      if (tree[i] && typeof tree[i] !== 'string') {\n        markStaticNode(tree[i], (key + \"_\" + i), isOnce);\n      }\n    }\n  } else {\n    markStaticNode(tree, key, isOnce);\n  }\n}\n\nfunction markStaticNode (node, key, isOnce) {\n  node.isStatic = true;\n  node.key = key;\n  node.isOnce = isOnce;\n}\n\n/*  */\n\nfunction bindObjectListeners (data, value) {\n  if (value) {\n    if (!isPlainObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-on without argument expects an Object value',\n        this\n      );\n    } else {\n      var on = data.on = data.on ? extend({}, data.on) : {};\n      for (var key in value) {\n        var existing = on[key];\n        var ours = value[key];\n        on[key] = existing ? [].concat(existing, ours) : ours;\n      }\n    }\n  }\n  return data\n}\n\n/*  */\n\nfunction resolveScopedSlots (\n  fns, // see flow/vnode\n  res,\n  // the following are added in 2.6\n  hasDynamicKeys,\n  contentHashKey\n) {\n  res = res || { $stable: !hasDynamicKeys };\n  for (var i = 0; i < fns.length; i++) {\n    var slot = fns[i];\n    if (Array.isArray(slot)) {\n      resolveScopedSlots(slot, res, hasDynamicKeys);\n    } else if (slot) {\n      // marker for reverse proxying v-slot without scope on this.$slots\n      if (slot.proxy) {\n        slot.fn.proxy = true;\n      }\n      res[slot.key] = slot.fn;\n    }\n  }\n  if (contentHashKey) {\n    (res).$key = contentHashKey;\n  }\n  return res\n}\n\n/*  */\n\nfunction bindDynamicKeys (baseObj, values) {\n  for (var i = 0; i < values.length; i += 2) {\n    var key = values[i];\n    if (typeof key === 'string' && key) {\n      baseObj[values[i]] = values[i + 1];\n    } else if (process.env.NODE_ENV !== 'production' && key !== '' && key !== null) {\n      // null is a special value for explicitly removing a binding\n      warn(\n        (\"Invalid value for dynamic directive argument (expected string or null): \" + key),\n        this\n      );\n    }\n  }\n  return baseObj\n}\n\n// helper to dynamically append modifier runtime markers to event names.\n// ensure only append when value is already string, otherwise it will be cast\n// to string and cause the type check to miss.\nfunction prependModifier (value, symbol) {\n  return typeof value === 'string' ? symbol + value : value\n}\n\n/*  */\n\nfunction installRenderHelpers (target) {\n  target._o = markOnce;\n  target._n = toNumber;\n  target._s = toString;\n  target._l = renderList;\n  target._t = renderSlot;\n  target._q = looseEqual;\n  target._i = looseIndexOf;\n  target._m = renderStatic;\n  target._f = resolveFilter;\n  target._k = checkKeyCodes;\n  target._b = bindObjectProps;\n  target._v = createTextVNode;\n  target._e = createEmptyVNode;\n  target._u = resolveScopedSlots;\n  target._g = bindObjectListeners;\n  target._d = bindDynamicKeys;\n  target._p = prependModifier;\n}\n\n/*  */\n\nfunction FunctionalRenderContext (\n  data,\n  props,\n  children,\n  parent,\n  Ctor\n) {\n  var this$1 = this;\n\n  var options = Ctor.options;\n  // ensure the createElement function in functional components\n  // gets a unique context - this is necessary for correct named slot check\n  var contextVm;\n  if (hasOwn(parent, '_uid')) {\n    contextVm = Object.create(parent);\n    // $flow-disable-line\n    contextVm._original = parent;\n  } else {\n    // the context vm passed in is a functional context as well.\n    // in this case we want to make sure we are able to get a hold to the\n    // real context instance.\n    contextVm = parent;\n    // $flow-disable-line\n    parent = parent._original;\n  }\n  var isCompiled = isTrue(options._compiled);\n  var needNormalization = !isCompiled;\n\n  this.data = data;\n  this.props = props;\n  this.children = children;\n  this.parent = parent;\n  this.listeners = data.on || emptyObject;\n  this.injections = resolveInject(options.inject, parent);\n  this.slots = function () {\n    if (!this$1.$slots) {\n      normalizeScopedSlots(\n        data.scopedSlots,\n        this$1.$slots = resolveSlots(children, parent)\n      );\n    }\n    return this$1.$slots\n  };\n\n  Object.defineProperty(this, 'scopedSlots', ({\n    enumerable: true,\n    get: function get () {\n      return normalizeScopedSlots(data.scopedSlots, this.slots())\n    }\n  }));\n\n  // support for compiled functional template\n  if (isCompiled) {\n    // exposing $options for renderStatic()\n    this.$options = options;\n    // pre-resolve slots for renderSlot()\n    this.$slots = this.slots();\n    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots, this.$slots);\n  }\n\n  if (options._scopeId) {\n    this._c = function (a, b, c, d) {\n      var vnode = createElement(contextVm, a, b, c, d, needNormalization);\n      if (vnode && !Array.isArray(vnode)) {\n        vnode.fnScopeId = options._scopeId;\n        vnode.fnContext = parent;\n      }\n      return vnode\n    };\n  } else {\n    this._c = function (a, b, c, d) { return createElement(contextVm, a, b, c, d, needNormalization); };\n  }\n}\n\ninstallRenderHelpers(FunctionalRenderContext.prototype);\n\nfunction createFunctionalComponent (\n  Ctor,\n  propsData,\n  data,\n  contextVm,\n  children\n) {\n  var options = Ctor.options;\n  var props = {};\n  var propOptions = options.props;\n  if (isDef(propOptions)) {\n    for (var key in propOptions) {\n      props[key] = validateProp(key, propOptions, propsData || emptyObject);\n    }\n  } else {\n    if (isDef(data.attrs)) { mergeProps(props, data.attrs); }\n    if (isDef(data.props)) { mergeProps(props, data.props); }\n  }\n\n  var renderContext = new FunctionalRenderContext(\n    data,\n    props,\n    children,\n    contextVm,\n    Ctor\n  );\n\n  var vnode = options.render.call(null, renderContext._c, renderContext);\n\n  if (vnode instanceof VNode) {\n    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options, renderContext)\n  } else if (Array.isArray(vnode)) {\n    var vnodes = normalizeChildren(vnode) || [];\n    var res = new Array(vnodes.length);\n    for (var i = 0; i < vnodes.length; i++) {\n      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options, renderContext);\n    }\n    return res\n  }\n}\n\nfunction cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderContext) {\n  // #7817 clone node before setting fnContext, otherwise if the node is reused\n  // (e.g. it was from a cached normal slot) the fnContext causes named slots\n  // that should not be matched to match.\n  var clone = cloneVNode(vnode);\n  clone.fnContext = contextVm;\n  clone.fnOptions = options;\n  if (process.env.NODE_ENV !== 'production') {\n    (clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext;\n  }\n  if (data.slot) {\n    (clone.data || (clone.data = {})).slot = data.slot;\n  }\n  return clone\n}\n\nfunction mergeProps (to, from) {\n  for (var key in from) {\n    to[camelize(key)] = from[key];\n  }\n}\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// inline hooks to be invoked on component VNodes during patch\nvar componentVNodeHooks = {\n  init: function init (vnode, hydrating) {\n    if (\n      vnode.componentInstance &&\n      !vnode.componentInstance._isDestroyed &&\n      vnode.data.keepAlive\n    ) {\n      // kept-alive components, treat as a patch\n      var mountedNode = vnode; // work around flow\n      componentVNodeHooks.prepatch(mountedNode, mountedNode);\n    } else {\n      var child = vnode.componentInstance = createComponentInstanceForVnode(\n        vnode,\n        activeInstance\n      );\n      child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n    }\n  },\n\n  prepatch: function prepatch (oldVnode, vnode) {\n    var options = vnode.componentOptions;\n    var child = vnode.componentInstance = oldVnode.componentInstance;\n    updateChildComponent(\n      child,\n      options.propsData, // updated props\n      options.listeners, // updated listeners\n      vnode, // new parent vnode\n      options.children // new children\n    );\n  },\n\n  insert: function insert (vnode) {\n    var context = vnode.context;\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isMounted) {\n      componentInstance._isMounted = true;\n      callHook(componentInstance, 'mounted');\n    }\n    if (vnode.data.keepAlive) {\n      if (context._isMounted) {\n        // vue-router#1212\n        // During updates, a kept-alive component's child components may\n        // change, so directly walking the tree here may call activated hooks\n        // on incorrect children. Instead we push them into a queue which will\n        // be processed after the whole patch process ended.\n        queueActivatedComponent(componentInstance);\n      } else {\n        activateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  },\n\n  destroy: function destroy (vnode) {\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isDestroyed) {\n      if (!vnode.data.keepAlive) {\n        componentInstance.$destroy();\n      } else {\n        deactivateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  }\n};\n\nvar hooksToMerge = Object.keys(componentVNodeHooks);\n\nfunction createComponent (\n  Ctor,\n  data,\n  context,\n  children,\n  tag\n) {\n  if (isUndef(Ctor)) {\n    return\n  }\n\n  var baseCtor = context.$options._base;\n\n  // plain options object: turn it into a constructor\n  if (isObject(Ctor)) {\n    Ctor = baseCtor.extend(Ctor);\n  }\n\n  // if at this stage it's not a constructor or an async component factory,\n  // reject.\n  if (typeof Ctor !== 'function') {\n    if (process.env.NODE_ENV !== 'production') {\n      warn((\"Invalid Component definition: \" + (String(Ctor))), context);\n    }\n    return\n  }\n\n  // async component\n  var asyncFactory;\n  if (isUndef(Ctor.cid)) {\n    asyncFactory = Ctor;\n    Ctor = resolveAsyncComponent(asyncFactory, baseCtor);\n    if (Ctor === undefined) {\n      // return a placeholder node for async component, which is rendered\n      // as a comment node but preserves all the raw information for the node.\n      // the information will be used for async server-rendering and hydration.\n      return createAsyncPlaceholder(\n        asyncFactory,\n        data,\n        context,\n        children,\n        tag\n      )\n    }\n  }\n\n  data = data || {};\n\n  // resolve constructor options in case global mixins are applied after\n  // component constructor creation\n  resolveConstructorOptions(Ctor);\n\n  // transform component v-model data into props & events\n  if (isDef(data.model)) {\n    transformModel(Ctor.options, data);\n  }\n\n  // extract props\n  var propsData = extractPropsFromVNodeData(data, Ctor, tag);\n\n  // functional component\n  if (isTrue(Ctor.options.functional)) {\n    return createFunctionalComponent(Ctor, propsData, data, context, children)\n  }\n\n  // extract listeners, since these needs to be treated as\n  // child component listeners instead of DOM listeners\n  var listeners = data.on;\n  // replace with listeners with .native modifier\n  // so it gets processed during parent component patch.\n  data.on = data.nativeOn;\n\n  if (isTrue(Ctor.options.abstract)) {\n    // abstract components do not keep anything\n    // other than props & listeners & slot\n\n    // work around flow\n    var slot = data.slot;\n    data = {};\n    if (slot) {\n      data.slot = slot;\n    }\n  }\n\n  // install component management hooks onto the placeholder node\n  installComponentHooks(data);\n\n  // return a placeholder vnode\n  var name = Ctor.options.name || tag;\n  var vnode = new VNode(\n    (\"vue-component-\" + (Ctor.cid) + (name ? (\"-\" + name) : '')),\n    data, undefined, undefined, undefined, context,\n    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },\n    asyncFactory\n  );\n\n  return vnode\n}\n\nfunction createComponentInstanceForVnode (\n  // we know it's MountedComponentVNode but flow doesn't\n  vnode,\n  // activeInstance in lifecycle state\n  parent\n) {\n  var options = {\n    _isComponent: true,\n    _parentVnode: vnode,\n    parent: parent\n  };\n  // check inline-template render functions\n  var inlineTemplate = vnode.data.inlineTemplate;\n  if (isDef(inlineTemplate)) {\n    options.render = inlineTemplate.render;\n    options.staticRenderFns = inlineTemplate.staticRenderFns;\n  }\n  return new vnode.componentOptions.Ctor(options)\n}\n\nfunction installComponentHooks (data) {\n  var hooks = data.hook || (data.hook = {});\n  for (var i = 0; i < hooksToMerge.length; i++) {\n    var key = hooksToMerge[i];\n    var existing = hooks[key];\n    var toMerge = componentVNodeHooks[key];\n    if (existing !== toMerge && !(existing && existing._merged)) {\n      hooks[key] = existing ? mergeHook$1(toMerge, existing) : toMerge;\n    }\n  }\n}\n\nfunction mergeHook$1 (f1, f2) {\n  var merged = function (a, b) {\n    // flow complains about extra args which is why we use any\n    f1(a, b);\n    f2(a, b);\n  };\n  merged._merged = true;\n  return merged\n}\n\n// transform component v-model info (value and callback) into\n// prop and event handler respectively.\nfunction transformModel (options, data) {\n  var prop = (options.model && options.model.prop) || 'value';\n  var event = (options.model && options.model.event) || 'input'\n  ;(data.attrs || (data.attrs = {}))[prop] = data.model.value;\n  var on = data.on || (data.on = {});\n  var existing = on[event];\n  var callback = data.model.callback;\n  if (isDef(existing)) {\n    if (\n      Array.isArray(existing)\n        ? existing.indexOf(callback) === -1\n        : existing !== callback\n    ) {\n      on[event] = [callback].concat(existing);\n    }\n  } else {\n    on[event] = callback;\n  }\n}\n\n/*  */\n\nvar SIMPLE_NORMALIZE = 1;\nvar ALWAYS_NORMALIZE = 2;\n\n// wrapper function for providing a more flexible interface\n// without getting yelled at by flow\nfunction createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType,\n  alwaysNormalize\n) {\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  if (isTrue(alwaysNormalize)) {\n    normalizationType = ALWAYS_NORMALIZE;\n  }\n  return _createElement(context, tag, data, children, normalizationType)\n}\n\nfunction _createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType\n) {\n  if (isDef(data) && isDef((data).__ob__)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Avoid using observed data object as vnode data: \" + (JSON.stringify(data)) + \"\\n\" +\n      'Always create fresh vnode data objects in each render!',\n      context\n    );\n    return createEmptyVNode()\n  }\n  // object syntax in v-bind\n  if (isDef(data) && isDef(data.is)) {\n    tag = data.is;\n  }\n  if (!tag) {\n    // in case of component :is set to falsy value\n    return createEmptyVNode()\n  }\n  // warn against non-primitive key\n  if (process.env.NODE_ENV !== 'production' &&\n    isDef(data) && isDef(data.key) && !isPrimitive(data.key)\n  ) {\n    {\n      warn(\n        'Avoid using non-primitive value as key, ' +\n        'use string/number value instead.',\n        context\n      );\n    }\n  }\n  // support single function children as default scoped slot\n  if (Array.isArray(children) &&\n    typeof children[0] === 'function'\n  ) {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  var vnode, ns;\n  if (typeof tag === 'string') {\n    var Ctor;\n    ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag);\n    if (config.isReservedTag(tag)) {\n      // platform built-in elements\n      if (process.env.NODE_ENV !== 'production' && isDef(data) && isDef(data.nativeOn) && data.tag !== 'component') {\n        warn(\n          (\"The .native modifier for v-on is only valid on components but it was used on <\" + tag + \">.\"),\n          context\n        );\n      }\n      vnode = new VNode(\n        config.parsePlatformTagName(tag), data, children,\n        undefined, undefined, context\n      );\n    } else if ((!data || !data.pre) && isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n      // component\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(\n        tag, data, children,\n        undefined, undefined, context\n      );\n    }\n  } else {\n    // direct component options / constructor\n    vnode = createComponent(tag, data, context, children);\n  }\n  if (Array.isArray(vnode)) {\n    return vnode\n  } else if (isDef(vnode)) {\n    if (isDef(ns)) { applyNS(vnode, ns); }\n    if (isDef(data)) { registerDeepBindings(data); }\n    return vnode\n  } else {\n    return createEmptyVNode()\n  }\n}\n\nfunction applyNS (vnode, ns, force) {\n  vnode.ns = ns;\n  if (vnode.tag === 'foreignObject') {\n    // use default namespace inside foreignObject\n    ns = undefined;\n    force = true;\n  }\n  if (isDef(vnode.children)) {\n    for (var i = 0, l = vnode.children.length; i < l; i++) {\n      var child = vnode.children[i];\n      if (isDef(child.tag) && (\n        isUndef(child.ns) || (isTrue(force) && child.tag !== 'svg'))) {\n        applyNS(child, ns, force);\n      }\n    }\n  }\n}\n\n// ref #5318\n// necessary to ensure parent re-render when deep bindings like :style and\n// :class are used on slot nodes\nfunction registerDeepBindings (data) {\n  if (isObject(data.style)) {\n    traverse(data.style);\n  }\n  if (isObject(data.class)) {\n    traverse(data.class);\n  }\n}\n\n/*  */\n\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n\nvar currentRenderingInstance = null;\n\nfunction renderMixin (Vue) {\n  // install runtime convenience helpers\n  installRenderHelpers(Vue.prototype);\n\n  Vue.prototype.$nextTick = function (fn) {\n    return nextTick(fn, this)\n  };\n\n  Vue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n      vm.$scopedSlots = normalizeScopedSlots(\n        _parentVnode.data.scopedSlots,\n        vm.$slots,\n        vm.$scopedSlots\n      );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n      // There's no need to maintain a stack because all render fns are called\n      // separately from one another. Nested component's render fns are called\n      // when parent component is patched.\n      currentRenderingInstance = vm;\n      vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n      handleError(e, vm, \"render\");\n      // return error render result,\n      // or previous vnode to prevent render error causing blank component\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n        try {\n          vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n        } catch (e) {\n          handleError(e, vm, \"renderError\");\n          vnode = vm._vnode;\n        }\n      } else {\n        vnode = vm._vnode;\n      }\n    } finally {\n      currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n      vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n      if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n        warn(\n          'Multiple root nodes returned from render function. Render function ' +\n          'should return a single root node.',\n          vm\n        );\n      }\n      vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n  };\n}\n\n/*  */\n\nfunction ensureCtor (comp, base) {\n  if (\n    comp.__esModule ||\n    (hasSymbol && comp[Symbol.toStringTag] === 'Module')\n  ) {\n    comp = comp.default;\n  }\n  return isObject(comp)\n    ? base.extend(comp)\n    : comp\n}\n\nfunction createAsyncPlaceholder (\n  factory,\n  data,\n  context,\n  children,\n  tag\n) {\n  var node = createEmptyVNode();\n  node.asyncFactory = factory;\n  node.asyncMeta = { data: data, context: context, children: children, tag: tag };\n  return node\n}\n\nfunction resolveAsyncComponent (\n  factory,\n  baseCtor\n) {\n  if (isTrue(factory.error) && isDef(factory.errorComp)) {\n    return factory.errorComp\n  }\n\n  if (isDef(factory.resolved)) {\n    return factory.resolved\n  }\n\n  var owner = currentRenderingInstance;\n  if (owner && isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n    // already pending\n    factory.owners.push(owner);\n  }\n\n  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n    return factory.loadingComp\n  }\n\n  if (owner && !isDef(factory.owners)) {\n    var owners = factory.owners = [owner];\n    var sync = true;\n    var timerLoading = null;\n    var timerTimeout = null\n\n    ;(owner).$on('hook:destroyed', function () { return remove(owners, owner); });\n\n    var forceRender = function (renderCompleted) {\n      for (var i = 0, l = owners.length; i < l; i++) {\n        (owners[i]).$forceUpdate();\n      }\n\n      if (renderCompleted) {\n        owners.length = 0;\n        if (timerLoading !== null) {\n          clearTimeout(timerLoading);\n          timerLoading = null;\n        }\n        if (timerTimeout !== null) {\n          clearTimeout(timerTimeout);\n          timerTimeout = null;\n        }\n      }\n    };\n\n    var resolve = once(function (res) {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor);\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync) {\n        forceRender(true);\n      } else {\n        owners.length = 0;\n      }\n    });\n\n    var reject = once(function (reason) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed to resolve async component: \" + (String(factory)) +\n        (reason ? (\"\\nReason: \" + reason) : '')\n      );\n      if (isDef(factory.errorComp)) {\n        factory.error = true;\n        forceRender(true);\n      }\n    });\n\n    var res = factory(resolve, reject);\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // () => Promise\n        if (isUndef(factory.resolved)) {\n          res.then(resolve, reject);\n        }\n      } else if (isPromise(res.component)) {\n        res.component.then(resolve, reject);\n\n        if (isDef(res.error)) {\n          factory.errorComp = ensureCtor(res.error, baseCtor);\n        }\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor);\n          if (res.delay === 0) {\n            factory.loading = true;\n          } else {\n            timerLoading = setTimeout(function () {\n              timerLoading = null;\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true;\n                forceRender(false);\n              }\n            }, res.delay || 200);\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          timerTimeout = setTimeout(function () {\n            timerTimeout = null;\n            if (isUndef(factory.resolved)) {\n              reject(\n                process.env.NODE_ENV !== 'production'\n                  ? (\"timeout (\" + (res.timeout) + \"ms)\")\n                  : null\n              );\n            }\n          }, res.timeout);\n        }\n      }\n    }\n\n    sync = false;\n    // return in case resolved synchronously\n    return factory.loading\n      ? factory.loadingComp\n      : factory.resolved\n  }\n}\n\n/*  */\n\nfunction getFirstComponentChild (children) {\n  if (Array.isArray(children)) {\n    for (var i = 0; i < children.length; i++) {\n      var c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c\n      }\n    }\n  }\n}\n\n/*  */\n\n/*  */\n\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n\nvar target;\n\nfunction add (event, fn) {\n  target.$on(event, fn);\n}\n\nfunction remove$1 (event, fn) {\n  target.$off(event, fn);\n}\n\nfunction createOnceHandler (event, fn) {\n  var _target = target;\n  return function onceHandler () {\n    var res = fn.apply(null, arguments);\n    if (res !== null) {\n      _target.$off(event, onceHandler);\n    }\n  }\n}\n\nfunction updateComponentListeners (\n  vm,\n  listeners,\n  oldListeners\n) {\n  target = vm;\n  updateListeners(listeners, oldListeners || {}, add, remove$1, createOnceHandler, vm);\n  target = undefined;\n}\n\nfunction eventsMixin (Vue) {\n  var hookRE = /^hook:/;\n  Vue.prototype.$on = function (event, fn) {\n    var vm = this;\n    if (Array.isArray(event)) {\n      for (var i = 0, l = event.length; i < l; i++) {\n        vm.$on(event[i], fn);\n      }\n    } else {\n      (vm._events[event] || (vm._events[event] = [])).push(fn);\n      // optimize hook:event cost by using a boolean flag marked at registration\n      // instead of a hash lookup\n      if (hookRE.test(event)) {\n        vm._hasHookEvent = true;\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$once = function (event, fn) {\n    var vm = this;\n    function on () {\n      vm.$off(event, on);\n      fn.apply(vm, arguments);\n    }\n    on.fn = fn;\n    vm.$on(event, on);\n    return vm\n  };\n\n  Vue.prototype.$off = function (event, fn) {\n    var vm = this;\n    // all\n    if (!arguments.length) {\n      vm._events = Object.create(null);\n      return vm\n    }\n    // array of events\n    if (Array.isArray(event)) {\n      for (var i$1 = 0, l = event.length; i$1 < l; i$1++) {\n        vm.$off(event[i$1], fn);\n      }\n      return vm\n    }\n    // specific event\n    var cbs = vm._events[event];\n    if (!cbs) {\n      return vm\n    }\n    if (!fn) {\n      vm._events[event] = null;\n      return vm\n    }\n    // specific handler\n    var cb;\n    var i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn || cb.fn === fn) {\n        cbs.splice(i, 1);\n        break\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$emit = function (event) {\n    var vm = this;\n    if (process.env.NODE_ENV !== 'production') {\n      var lowerCaseEvent = event.toLowerCase();\n      if (lowerCaseEvent !== event && vm._events[lowerCaseEvent]) {\n        tip(\n          \"Event \\\"\" + lowerCaseEvent + \"\\\" is emitted in component \" +\n          (formatComponentName(vm)) + \" but the handler is registered for \\\"\" + event + \"\\\". \" +\n          \"Note that HTML attributes are case-insensitive and you cannot use \" +\n          \"v-on to listen to camelCase events when using in-DOM templates. \" +\n          \"You should probably use \\\"\" + (hyphenate(event)) + \"\\\" instead of \\\"\" + event + \"\\\".\"\n        );\n      }\n    }\n    var cbs = vm._events[event];\n    if (cbs) {\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs;\n      var args = toArray(arguments, 1);\n      var info = \"event handler for \\\"\" + event + \"\\\"\";\n      for (var i = 0, l = cbs.length; i < l; i++) {\n        invokeWithErrorHandling(cbs[i], vm, args, vm, info);\n      }\n    }\n    return vm\n  };\n}\n\n/*  */\n\nvar activeInstance = null;\nvar isUpdatingChildComponent = false;\n\nfunction setActiveInstance(vm) {\n  var prevActiveInstance = activeInstance;\n  activeInstance = vm;\n  return function () {\n    activeInstance = prevActiveInstance;\n  }\n}\n\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm;\n\n  vm.$children = [];\n  vm.$refs = {};\n\n  vm._watcher = null;\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n\nfunction lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n\n  Vue.prototype.$forceUpdate = function () {\n    var vm = this;\n    if (vm._watcher) {\n      vm._watcher.update();\n    }\n  };\n\n  Vue.prototype.$destroy = function () {\n    var vm = this;\n    if (vm._isBeingDestroyed) {\n      return\n    }\n    callHook(vm, 'beforeDestroy');\n    vm._isBeingDestroyed = true;\n    // remove self from parent\n    var parent = vm.$parent;\n    if (parent && !parent._isBeingDestroyed && !vm.$options.abstract) {\n      remove(parent.$children, vm);\n    }\n    // teardown watchers\n    if (vm._watcher) {\n      vm._watcher.teardown();\n    }\n    var i = vm._watchers.length;\n    while (i--) {\n      vm._watchers[i].teardown();\n    }\n    // remove reference from data ob\n    // frozen object may not have observer.\n    if (vm._data.__ob__) {\n      vm._data.__ob__.vmCount--;\n    }\n    // call the last hook...\n    vm._isDestroyed = true;\n    // invoke destroy hooks on current rendered tree\n    vm.__patch__(vm._vnode, null);\n    // fire destroyed hook\n    callHook(vm, 'destroyed');\n    // turn off all instance listeners.\n    vm.$off();\n    // remove __vue__ reference\n    if (vm.$el) {\n      vm.$el.__vue__ = null;\n    }\n    // release circular reference (#6759)\n    if (vm.$vnode) {\n      vm.$vnode.parent = null;\n    }\n  };\n}\n\nfunction mountComponent (\n  vm,\n  el,\n  hydrating\n) {\n  vm.$el = el;\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  callHook(vm, 'beforeMount');\n\n  var updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = function () {\n      var name = vm._name;\n      var id = vm._uid;\n      var startTag = \"vue-perf-start:\" + id;\n      var endTag = \"vue-perf-end:\" + id;\n\n      mark(startTag);\n      var vnode = vm._render();\n      mark(endTag);\n      measure((\"vue \" + name + \" render\"), startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure((\"vue \" + name + \" patch\"), startTag, endTag);\n    };\n  } else {\n    updateComponent = function () {\n      vm._update(vm._render(), hydrating);\n    };\n  }\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm\n}\n\nfunction updateChildComponent (\n  vm,\n  propsData,\n  listeners,\n  parentVnode,\n  renderChildren\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = true;\n  }\n\n  // determine whether component has slot children\n  // we need to do this before overwriting $options._renderChildren.\n\n  // check if there are dynamic scopedSlots (hand-written or compiled but with\n  // dynamic slot names). Static scoped slots compiled from template has the\n  // \"$stable\" marker.\n  var newScopedSlots = parentVnode.data.scopedSlots;\n  var oldScopedSlots = vm.$scopedSlots;\n  var hasDynamicScopedSlot = !!(\n    (newScopedSlots && !newScopedSlots.$stable) ||\n    (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key) ||\n    (!newScopedSlots && vm.$scopedSlots.$key)\n  );\n\n  // Any static slot children from the parent may have changed during parent's\n  // update. Dynamic scoped slots may also have changed. In such cases, a forced\n  // update is necessary to ensure correctness.\n  var needsForceUpdate = !!(\n    renderChildren ||               // has new static slots\n    vm.$options._renderChildren ||  // has old static slots\n    hasDynamicScopedSlot\n  );\n\n  vm.$options._parentVnode = parentVnode;\n  vm.$vnode = parentVnode; // update vm's placeholder node without re-render\n\n  if (vm._vnode) { // update child tree's parent\n    vm._vnode.parent = parentVnode;\n  }\n  vm.$options._renderChildren = renderChildren;\n\n  // update $attrs and $listeners hash\n  // these are also reactive so they may trigger child update if the child\n  // used them during render\n  vm.$attrs = parentVnode.data.attrs || emptyObject;\n  vm.$listeners = listeners || emptyObject;\n\n  // update props\n  if (propsData && vm.$options.props) {\n    toggleObserving(false);\n    var props = vm._props;\n    var propKeys = vm.$options._propKeys || [];\n    for (var i = 0; i < propKeys.length; i++) {\n      var key = propKeys[i];\n      var propOptions = vm.$options.props; // wtf flow?\n      props[key] = validateProp(key, propOptions, propsData, vm);\n    }\n    toggleObserving(true);\n    // keep a copy of raw propsData\n    vm.$options.propsData = propsData;\n  }\n\n  // update listeners\n  listeners = listeners || emptyObject;\n  var oldListeners = vm.$options._parentListeners;\n  vm.$options._parentListeners = listeners;\n  updateComponentListeners(vm, listeners, oldListeners);\n\n  // resolve slots + force update if has children\n  if (needsForceUpdate) {\n    vm.$slots = resolveSlots(renderChildren, parentVnode.context);\n    vm.$forceUpdate();\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = false;\n  }\n}\n\nfunction isInInactiveTree (vm) {\n  while (vm && (vm = vm.$parent)) {\n    if (vm._inactive) { return true }\n  }\n  return false\n}\n\nfunction activateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = false;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  } else if (vm._directInactive) {\n    return\n  }\n  if (vm._inactive || vm._inactive === null) {\n    vm._inactive = false;\n    for (var i = 0; i < vm.$children.length; i++) {\n      activateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'activated');\n  }\n}\n\nfunction deactivateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = true;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  }\n  if (!vm._inactive) {\n    vm._inactive = true;\n    for (var i = 0; i < vm.$children.length; i++) {\n      deactivateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'deactivated');\n  }\n}\n\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n\n/*  */\n\nvar MAX_UPDATE_COUNT = 100;\n\nvar queue = [];\nvar activatedChildren = [];\nvar has = {};\nvar circular = {};\nvar waiting = false;\nvar flushing = false;\nvar index = 0;\n\n/**\n * Reset the scheduler's state.\n */\nfunction resetSchedulerState () {\n  index = queue.length = activatedChildren.length = 0;\n  has = {};\n  if (process.env.NODE_ENV !== 'production') {\n    circular = {};\n  }\n  waiting = flushing = false;\n}\n\n// Async edge case #6566 requires saving the timestamp when event listeners are\n// attached. However, calling performance.now() has a perf overhead especially\n// if the page has thousands of event listeners. Instead, we take a timestamp\n// every time the scheduler flushes and use that for all event listeners\n// attached during that flush.\nvar currentFlushTimestamp = 0;\n\n// Async edge case fix requires storing an event listener's attach timestamp.\nvar getNow = Date.now;\n\n// Determine what event timestamp the browser is using. Annoyingly, the\n// timestamp can either be hi-res (relative to page load) or low-res\n// (relative to UNIX epoch), so in order to compare time we have to use the\n// same timestamp type when saving the flush timestamp.\n// All IE versions use low-res event timestamps, and have problematic clock\n// implementations (#9632)\nif (inBrowser && !isIE) {\n  var performance = window.performance;\n  if (\n    performance &&\n    typeof performance.now === 'function' &&\n    getNow() > document.createEvent('Event').timeStamp\n  ) {\n    // if the event timestamp, although evaluated AFTER the Date.now(), is\n    // smaller than it, it means the event is using a hi-res timestamp,\n    // and we need to use the hi-res version for event listener timestamps as\n    // well.\n    getNow = function () { return performance.now(); };\n  }\n}\n\n/**\n * Flush both queues and run the watchers.\n */\nfunction flushSchedulerQueue () {\n  currentFlushTimestamp = getNow();\n  flushing = true;\n  var watcher, id;\n\n  // Sort queue before flush.\n  // This ensures that:\n  // 1. Components are updated from parent to child. (because parent is always\n  //    created before the child)\n  // 2. A component's user watchers are run before its render watcher (because\n  //    user watchers are created before the render watcher)\n  // 3. If a component is destroyed during a parent component's watcher run,\n  //    its watchers can be skipped.\n  queue.sort(function (a, b) { return a.id - b.id; });\n\n  // do not cache length because more watchers might be pushed\n  // as we run existing watchers\n  for (index = 0; index < queue.length; index++) {\n    watcher = queue[index];\n    if (watcher.before) {\n      watcher.before();\n    }\n    id = watcher.id;\n    has[id] = null;\n    watcher.run();\n    // in dev build, check and stop circular updates.\n    if (process.env.NODE_ENV !== 'production' && has[id] != null) {\n      circular[id] = (circular[id] || 0) + 1;\n      if (circular[id] > MAX_UPDATE_COUNT) {\n        warn(\n          'You may have an infinite update loop ' + (\n            watcher.user\n              ? (\"in watcher with expression \\\"\" + (watcher.expression) + \"\\\"\")\n              : \"in a component render function.\"\n          ),\n          watcher.vm\n        );\n        break\n      }\n    }\n  }\n\n  // keep copies of post queues before resetting state\n  var activatedQueue = activatedChildren.slice();\n  var updatedQueue = queue.slice();\n\n  resetSchedulerState();\n\n  // call component updated and activated hooks\n  callActivatedHooks(activatedQueue);\n  callUpdatedHooks(updatedQueue);\n\n  // devtool hook\n  /* istanbul ignore if */\n  if (devtools && config.devtools) {\n    devtools.emit('flush');\n  }\n}\n\nfunction callUpdatedHooks (queue) {\n  var i = queue.length;\n  while (i--) {\n    var watcher = queue[i];\n    var vm = watcher.vm;\n    if (vm._watcher === watcher && vm._isMounted && !vm._isDestroyed) {\n      callHook(vm, 'updated');\n    }\n  }\n}\n\n/**\n * Queue a kept-alive component that was activated during patch.\n * The queue will be processed after the entire tree has been patched.\n */\nfunction queueActivatedComponent (vm) {\n  // setting _inactive to false here so that a render function can\n  // rely on checking whether it's in an inactive tree (e.g. router-view)\n  vm._inactive = false;\n  activatedChildren.push(vm);\n}\n\nfunction callActivatedHooks (queue) {\n  for (var i = 0; i < queue.length; i++) {\n    queue[i]._inactive = true;\n    activateChildComponent(queue[i], true /* true */);\n  }\n}\n\n/**\n * Push a watcher into the watcher queue.\n * Jobs with duplicate IDs will be skipped unless it's\n * pushed when the queue is being flushed.\n */\nfunction queueWatcher (watcher) {\n  var id = watcher.id;\n  if (has[id] == null) {\n    has[id] = true;\n    if (!flushing) {\n      queue.push(watcher);\n    } else {\n      // if already flushing, splice the watcher based on its id\n      // if already past its id, it will be run next immediately.\n      var i = queue.length - 1;\n      while (i > index && queue[i].id > watcher.id) {\n        i--;\n      }\n      queue.splice(i + 1, 0, watcher);\n    }\n    // queue the flush\n    if (!waiting) {\n      waiting = true;\n\n      if (process.env.NODE_ENV !== 'production' && !config.async) {\n        flushSchedulerQueue();\n        return\n      }\n      nextTick(flushSchedulerQueue);\n    }\n  }\n}\n\n/*  */\n\n\n\nvar uid$2 = 0;\n\n/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the $watch() api and directives.\n */\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n\n/**\n * Evaluate the getter, and re-collect dependencies.\n */\nWatcher.prototype.get = function get () {\n  pushTarget(this);\n  var value;\n  var vm = this.vm;\n  try {\n    value = this.getter.call(vm, vm);\n  } catch (e) {\n    if (this.user) {\n      handleError(e, vm, (\"getter for watcher \\\"\" + (this.expression) + \"\\\"\"));\n    } else {\n      throw e\n    }\n  } finally {\n    // \"touch\" every property so they are all tracked as\n    // dependencies for deep watching\n    if (this.deep) {\n      traverse(value);\n    }\n    popTarget();\n    this.cleanupDeps();\n  }\n  return value\n};\n\n/**\n * Add a dependency to this directive.\n */\nWatcher.prototype.addDep = function addDep (dep) {\n  var id = dep.id;\n  if (!this.newDepIds.has(id)) {\n    this.newDepIds.add(id);\n    this.newDeps.push(dep);\n    if (!this.depIds.has(id)) {\n      dep.addSub(this);\n    }\n  }\n};\n\n/**\n * Clean up for dependency collection.\n */\nWatcher.prototype.cleanupDeps = function cleanupDeps () {\n  var i = this.deps.length;\n  while (i--) {\n    var dep = this.deps[i];\n    if (!this.newDepIds.has(dep.id)) {\n      dep.removeSub(this);\n    }\n  }\n  var tmp = this.depIds;\n  this.depIds = this.newDepIds;\n  this.newDepIds = tmp;\n  this.newDepIds.clear();\n  tmp = this.deps;\n  this.deps = this.newDeps;\n  this.newDeps = tmp;\n  this.newDeps.length = 0;\n};\n\n/**\n * Subscriber interface.\n * Will be called when a dependency changes.\n */\nWatcher.prototype.update = function update () {\n  /* istanbul ignore else */\n  if (this.lazy) {\n    this.dirty = true;\n  } else if (this.sync) {\n    this.run();\n  } else {\n    queueWatcher(this);\n  }\n};\n\n/**\n * Scheduler job interface.\n * Will be called by the scheduler.\n */\nWatcher.prototype.run = function run () {\n  if (this.active) {\n    var value = this.get();\n    if (\n      value !== this.value ||\n      // Deep watchers and watchers on Object/Arrays should fire even\n      // when the value is the same, because the value may\n      // have mutated.\n      isObject(value) ||\n      this.deep\n    ) {\n      // set new value\n      var oldValue = this.value;\n      this.value = value;\n      if (this.user) {\n        var info = \"callback for watcher \\\"\" + (this.expression) + \"\\\"\";\n        invokeWithErrorHandling(this.cb, this.vm, [value, oldValue], this.vm, info);\n      } else {\n        this.cb.call(this.vm, value, oldValue);\n      }\n    }\n  }\n};\n\n/**\n * Evaluate the value of the watcher.\n * This only gets called for lazy watchers.\n */\nWatcher.prototype.evaluate = function evaluate () {\n  this.value = this.get();\n  this.dirty = false;\n};\n\n/**\n * Depend on all deps collected by this watcher.\n */\nWatcher.prototype.depend = function depend () {\n  var i = this.deps.length;\n  while (i--) {\n    this.deps[i].depend();\n  }\n};\n\n/**\n * Remove self from all dependencies' subscriber list.\n */\nWatcher.prototype.teardown = function teardown () {\n  if (this.active) {\n    // remove self from vm's watcher list\n    // this is a somewhat expensive operation so we skip it\n    // if the vm is being destroyed.\n    if (!this.vm._isBeingDestroyed) {\n      remove(this.vm._watchers, this);\n    }\n    var i = this.deps.length;\n    while (i--) {\n      this.deps[i].removeSub(this);\n    }\n    this.active = false;\n  }\n};\n\n/*  */\n\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\n\nfunction proxy (target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  };\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val;\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n\nfunction getData (data, vm) {\n  // #7573 disable dep collection when invoking data getters\n  pushTarget();\n  try {\n    return data.call(vm, vm)\n  } catch (e) {\n    handleError(e, vm, \"data()\");\n    return {}\n  } finally {\n    popTarget();\n  }\n}\n\nvar computedWatcherOptions = { lazy: true };\n\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      } else if (vm.$options.methods && key in vm.$options.methods) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a method.\"), vm);\n      }\n    }\n  }\n}\n\nfunction defineComputed (\n  target,\n  key,\n  userDef\n) {\n  var shouldCache = !isServerRendering();\n  if (typeof userDef === 'function') {\n    sharedPropertyDefinition.get = shouldCache\n      ? createComputedGetter(key)\n      : createGetterInvoker(userDef);\n    sharedPropertyDefinition.set = noop;\n  } else {\n    sharedPropertyDefinition.get = userDef.get\n      ? shouldCache && userDef.cache !== false\n        ? createComputedGetter(key)\n        : createGetterInvoker(userDef.get)\n      : noop;\n    sharedPropertyDefinition.set = userDef.set || noop;\n  }\n  if (process.env.NODE_ENV !== 'production' &&\n      sharedPropertyDefinition.set === noop) {\n    sharedPropertyDefinition.set = function () {\n      warn(\n        (\"Computed property \\\"\" + key + \"\\\" was assigned to but it has no setter.\"),\n        this\n      );\n    };\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction createComputedGetter (key) {\n  return function computedGetter () {\n    var watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n      if (Dep.target) {\n        watcher.depend();\n      }\n      return watcher.value\n    }\n  }\n}\n\nfunction createGetterInvoker(fn) {\n  return function computedGetter () {\n    return fn.call(this, this)\n  }\n}\n\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher (\n  vm,\n  expOrFn,\n  handler,\n  options\n) {\n  if (isPlainObject(handler)) {\n    options = handler;\n    handler = handler.handler;\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler];\n  }\n  return vm.$watch(expOrFn, handler, options)\n}\n\nfunction stateMixin (Vue) {\n  // flow somehow has problems with directly declared definition object\n  // when using Object.defineProperty, so we have to procedurally build up\n  // the object here.\n  var dataDef = {};\n  dataDef.get = function () { return this._data };\n  var propsDef = {};\n  propsDef.get = function () { return this._props };\n  if (process.env.NODE_ENV !== 'production') {\n    dataDef.set = function () {\n      warn(\n        'Avoid replacing instance root $data. ' +\n        'Use nested data properties instead.',\n        this\n      );\n    };\n    propsDef.set = function () {\n      warn(\"$props is readonly.\", this);\n    };\n  }\n  Object.defineProperty(Vue.prototype, '$data', dataDef);\n  Object.defineProperty(Vue.prototype, '$props', propsDef);\n\n  Vue.prototype.$set = set;\n  Vue.prototype.$delete = del;\n\n  Vue.prototype.$watch = function (\n    expOrFn,\n    cb,\n    options\n  ) {\n    var vm = this;\n    if (isPlainObject(cb)) {\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {};\n    options.user = true;\n    var watcher = new Watcher(vm, expOrFn, cb, options);\n    if (options.immediate) {\n      var info = \"callback for immediate watcher \\\"\" + (watcher.expression) + \"\\\"\";\n      pushTarget();\n      invokeWithErrorHandling(cb, vm, [watcher.value], vm, info);\n      popTarget();\n    }\n    return function unwatchFn () {\n      watcher.teardown();\n    }\n  };\n}\n\n/*  */\n\nvar uid$3 = 0;\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    var vm = this;\n    // a uid\n    vm._uid = uid$3++;\n\n    var startTag, endTag;\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      startTag = \"vue-perf-start:\" + (vm._uid);\n      endTag = \"vue-perf-end:\" + (vm._uid);\n      mark(startTag);\n    }\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options);\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      );\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm);\n    } else {\n      vm._renderProxy = vm;\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    initInjections(vm); // resolve injections before data/props\n    initState(vm);\n    initProvide(vm); // resolve provide after data/props\n    callHook(vm, 'created');\n\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      vm._name = formatComponentName(vm, false);\n      mark(endTag);\n      measure((\"vue \" + (vm._name) + \" init\"), startTag, endTag);\n    }\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n}\n\nfunction initInternalComponent (vm, options) {\n  var opts = vm.$options = Object.create(vm.constructor.options);\n  // doing this because it's faster than dynamic enumeration.\n  var parentVnode = options._parentVnode;\n  opts.parent = options.parent;\n  opts._parentVnode = parentVnode;\n\n  var vnodeComponentOptions = parentVnode.componentOptions;\n  opts.propsData = vnodeComponentOptions.propsData;\n  opts._parentListeners = vnodeComponentOptions.listeners;\n  opts._renderChildren = vnodeComponentOptions.children;\n  opts._componentTag = vnodeComponentOptions.tag;\n\n  if (options.render) {\n    opts.render = options.render;\n    opts.staticRenderFns = options.staticRenderFns;\n  }\n}\n\nfunction resolveConstructorOptions (Ctor) {\n  var options = Ctor.options;\n  if (Ctor.super) {\n    var superOptions = resolveConstructorOptions(Ctor.super);\n    var cachedSuperOptions = Ctor.superOptions;\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed,\n      // need to resolve new options.\n      Ctor.superOptions = superOptions;\n      // check if there are any late-modified/attached options (#4976)\n      var modifiedOptions = resolveModifiedOptions(Ctor);\n      // update base extend options\n      if (modifiedOptions) {\n        extend(Ctor.extendOptions, modifiedOptions);\n      }\n      options = Ctor.options = mergeOptions(superOptions, Ctor.extendOptions);\n      if (options.name) {\n        options.components[options.name] = Ctor;\n      }\n    }\n  }\n  return options\n}\n\nfunction resolveModifiedOptions (Ctor) {\n  var modified;\n  var latest = Ctor.options;\n  var sealed = Ctor.sealedOptions;\n  for (var key in latest) {\n    if (latest[key] !== sealed[key]) {\n      if (!modified) { modified = {}; }\n      modified[key] = latest[key];\n    }\n  }\n  return modified\n}\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n\ninitMixin(Vue);\nstateMixin(Vue);\neventsMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\n/*  */\n\nfunction initUse (Vue) {\n  Vue.use = function (plugin) {\n    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));\n    if (installedPlugins.indexOf(plugin) > -1) {\n      return this\n    }\n\n    // additional parameters\n    var args = toArray(arguments, 1);\n    args.unshift(this);\n    if (typeof plugin.install === 'function') {\n      plugin.install.apply(plugin, args);\n    } else if (typeof plugin === 'function') {\n      plugin.apply(null, args);\n    }\n    installedPlugins.push(plugin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initMixin$1 (Vue) {\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initExtend (Vue) {\n  /**\n   * Each instance constructor, including Vue, has a unique\n   * cid. This enables us to create wrapped \"child\n   * constructors\" for prototypal inheritance and cache them.\n   */\n  Vue.cid = 0;\n  var cid = 1;\n\n  /**\n   * Class inheritance\n   */\n  Vue.extend = function (extendOptions) {\n    extendOptions = extendOptions || {};\n    var Super = this;\n    var SuperId = Super.cid;\n    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});\n    if (cachedCtors[SuperId]) {\n      return cachedCtors[SuperId]\n    }\n\n    var name = extendOptions.name || Super.options.name;\n    if (process.env.NODE_ENV !== 'production' && name) {\n      validateComponentName(name);\n    }\n\n    var Sub = function VueComponent (options) {\n      this._init(options);\n    };\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.cid = cid++;\n    Sub.options = mergeOptions(\n      Super.options,\n      extendOptions\n    );\n    Sub['super'] = Super;\n\n    // For props and computed properties, we define the proxy getters on\n    // the Vue instances at extension time, on the extended prototype. This\n    // avoids Object.defineProperty calls for each instance created.\n    if (Sub.options.props) {\n      initProps$1(Sub);\n    }\n    if (Sub.options.computed) {\n      initComputed$1(Sub);\n    }\n\n    // allow further extension/mixin/plugin usage\n    Sub.extend = Super.extend;\n    Sub.mixin = Super.mixin;\n    Sub.use = Super.use;\n\n    // create asset registers, so extended classes\n    // can have their private assets too.\n    ASSET_TYPES.forEach(function (type) {\n      Sub[type] = Super[type];\n    });\n    // enable recursive self-lookup\n    if (name) {\n      Sub.options.components[name] = Sub;\n    }\n\n    // keep a reference to the super options at extension time.\n    // later at instantiation we can check if Super's options have\n    // been updated.\n    Sub.superOptions = Super.options;\n    Sub.extendOptions = extendOptions;\n    Sub.sealedOptions = extend({}, Sub.options);\n\n    // cache constructor\n    cachedCtors[SuperId] = Sub;\n    return Sub\n  };\n}\n\nfunction initProps$1 (Comp) {\n  var props = Comp.options.props;\n  for (var key in props) {\n    proxy(Comp.prototype, \"_props\", key);\n  }\n}\n\nfunction initComputed$1 (Comp) {\n  var computed = Comp.options.computed;\n  for (var key in computed) {\n    defineComputed(Comp.prototype, key, computed[key]);\n  }\n}\n\n/*  */\n\nfunction initAssetRegisters (Vue) {\n  /**\n   * Create asset registration methods.\n   */\n  ASSET_TYPES.forEach(function (type) {\n    Vue[type] = function (\n      id,\n      definition\n    ) {\n      if (!definition) {\n        return this.options[type + 's'][id]\n      } else {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV !== 'production' && type === 'component') {\n          validateComponentName(id);\n        }\n        if (type === 'component' && isPlainObject(definition)) {\n          definition.name = definition.name || id;\n          definition = this.options._base.extend(definition);\n        }\n        if (type === 'directive' && typeof definition === 'function') {\n          definition = { bind: definition, update: definition };\n        }\n        this.options[type + 's'][id] = definition;\n        return definition\n      }\n    };\n  });\n}\n\n/*  */\n\n\n\n\n\nfunction getComponentName (opts) {\n  return opts && (opts.Ctor.options.name || opts.tag)\n}\n\nfunction matches (pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name)\n  }\n  /* istanbul ignore next */\n  return false\n}\n\nfunction pruneCache (keepAliveInstance, filter) {\n  var cache = keepAliveInstance.cache;\n  var keys = keepAliveInstance.keys;\n  var _vnode = keepAliveInstance._vnode;\n  for (var key in cache) {\n    var entry = cache[key];\n    if (entry) {\n      var name = entry.name;\n      if (name && !filter(name)) {\n        pruneCacheEntry(cache, key, keys, _vnode);\n      }\n    }\n  }\n}\n\nfunction pruneCacheEntry (\n  cache,\n  key,\n  keys,\n  current\n) {\n  var entry = cache[key];\n  if (entry && (!current || entry.tag !== current.tag)) {\n    entry.componentInstance.$destroy();\n  }\n  cache[key] = null;\n  remove(keys, key);\n}\n\nvar patternTypes = [String, RegExp, Array];\n\nvar KeepAlive = {\n  name: 'keep-alive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number]\n  },\n\n  methods: {\n    cacheVNode: function cacheVNode() {\n      var ref = this;\n      var cache = ref.cache;\n      var keys = ref.keys;\n      var vnodeToCache = ref.vnodeToCache;\n      var keyToCache = ref.keyToCache;\n      if (vnodeToCache) {\n        var tag = vnodeToCache.tag;\n        var componentInstance = vnodeToCache.componentInstance;\n        var componentOptions = vnodeToCache.componentOptions;\n        cache[keyToCache] = {\n          name: getComponentName(componentOptions),\n          tag: tag,\n          componentInstance: componentInstance,\n        };\n        keys.push(keyToCache);\n        // prune oldest entry\n        if (this.max && keys.length > parseInt(this.max)) {\n          pruneCacheEntry(cache, keys[0], keys, this._vnode);\n        }\n        this.vnodeToCache = null;\n      }\n    }\n  },\n\n  created: function created () {\n    this.cache = Object.create(null);\n    this.keys = [];\n  },\n\n  destroyed: function destroyed () {\n    for (var key in this.cache) {\n      pruneCacheEntry(this.cache, key, this.keys);\n    }\n  },\n\n  mounted: function mounted () {\n    var this$1 = this;\n\n    this.cacheVNode();\n    this.$watch('include', function (val) {\n      pruneCache(this$1, function (name) { return matches(val, name); });\n    });\n    this.$watch('exclude', function (val) {\n      pruneCache(this$1, function (name) { return !matches(val, name); });\n    });\n  },\n\n  updated: function updated () {\n    this.cacheVNode();\n  },\n\n  render: function render () {\n    var slot = this.$slots.default;\n    var vnode = getFirstComponentChild(slot);\n    var componentOptions = vnode && vnode.componentOptions;\n    if (componentOptions) {\n      // check pattern\n      var name = getComponentName(componentOptions);\n      var ref = this;\n      var include = ref.include;\n      var exclude = ref.exclude;\n      if (\n        // not included\n        (include && (!name || !matches(include, name))) ||\n        // excluded\n        (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      var ref$1 = this;\n      var cache = ref$1.cache;\n      var keys = ref$1.keys;\n      var key = vnode.key == null\n        // same constructor may get registered as different local components\n        // so cid alone is not enough (#3269)\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? (\"::\" + (componentOptions.tag)) : '')\n        : vnode.key;\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance;\n        // make current key freshest\n        remove(keys, key);\n        keys.push(key);\n      } else {\n        // delay setting the cache until update\n        this.vnodeToCache = vnode;\n        this.keyToCache = key;\n      }\n\n      vnode.data.keepAlive = true;\n    }\n    return vnode || (slot && slot[0])\n  }\n};\n\nvar builtInComponents = {\n  KeepAlive: KeepAlive\n};\n\n/*  */\n\nfunction initGlobalAPI (Vue) {\n  // config\n  var configDef = {};\n  configDef.get = function () { return config; };\n  if (process.env.NODE_ENV !== 'production') {\n    configDef.set = function () {\n      warn(\n        'Do not replace the Vue.config object, set individual fields instead.'\n      );\n    };\n  }\n  Object.defineProperty(Vue, 'config', configDef);\n\n  // exposed util methods.\n  // NOTE: these are not considered part of the public API - avoid relying on\n  // them unless you are aware of the risk.\n  Vue.util = {\n    warn: warn,\n    extend: extend,\n    mergeOptions: mergeOptions,\n    defineReactive: defineReactive$$1\n  };\n\n  Vue.set = set;\n  Vue.delete = del;\n  Vue.nextTick = nextTick;\n\n  // 2.6 explicit observable API\n  Vue.observable = function (obj) {\n    observe(obj);\n    return obj\n  };\n\n  Vue.options = Object.create(null);\n  ASSET_TYPES.forEach(function (type) {\n    Vue.options[type + 's'] = Object.create(null);\n  });\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in Weex's multi-instance scenarios.\n  Vue.options._base = Vue;\n\n  extend(Vue.options.components, builtInComponents);\n\n  initUse(Vue);\n  initMixin$1(Vue);\n  initExtend(Vue);\n  initAssetRegisters(Vue);\n}\n\ninitGlobalAPI(Vue);\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n});\n\nObject.defineProperty(Vue.prototype, '$ssrContext', {\n  get: function get () {\n    /* istanbul ignore next */\n    return this.$vnode && this.$vnode.ssrContext\n  }\n});\n\n// expose FunctionalRenderContext for ssr runtime helper installation\nObject.defineProperty(Vue, 'FunctionalRenderContext', {\n  value: FunctionalRenderContext\n});\n\nVue.version = '2.6.14';\n\n/*  */\n\n// these are reserved for web because they are directly compiled away\n// during template compilation\nvar isReservedAttr = makeMap('style,class');\n\n// attributes that should be using props for binding\nvar acceptValue = makeMap('input,textarea,option,select,progress');\nvar mustUseProp = function (tag, type, attr) {\n  return (\n    (attr === 'value' && acceptValue(tag)) && type !== 'button' ||\n    (attr === 'selected' && tag === 'option') ||\n    (attr === 'checked' && tag === 'input') ||\n    (attr === 'muted' && tag === 'video')\n  )\n};\n\nvar isEnumeratedAttr = makeMap('contenteditable,draggable,spellcheck');\n\nvar isValidContentEditableValue = makeMap('events,caret,typing,plaintext-only');\n\nvar convertEnumeratedValue = function (key, value) {\n  return isFalsyAttrValue(value) || value === 'false'\n    ? 'false'\n    // allow arbitrary string value for contenteditable\n    : key === 'contenteditable' && isValidContentEditableValue(value)\n      ? value\n      : 'true'\n};\n\nvar isBooleanAttr = makeMap(\n  'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,' +\n  'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +\n  'enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,' +\n  'muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,' +\n  'required,reversed,scoped,seamless,selected,sortable,' +\n  'truespeed,typemustmatch,visible'\n);\n\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\n\nvar isXlink = function (name) {\n  return name.charAt(5) === ':' && name.slice(0, 5) === 'xlink'\n};\n\nvar getXlinkProp = function (name) {\n  return isXlink(name) ? name.slice(6, name.length) : ''\n};\n\nvar isFalsyAttrValue = function (val) {\n  return val == null || val === false\n};\n\n/*  */\n\nfunction genClassForVnode (vnode) {\n  var data = vnode.data;\n  var parentNode = vnode;\n  var childNode = vnode;\n  while (isDef(childNode.componentInstance)) {\n    childNode = childNode.componentInstance._vnode;\n    if (childNode && childNode.data) {\n      data = mergeClassData(childNode.data, data);\n    }\n  }\n  while (isDef(parentNode = parentNode.parent)) {\n    if (parentNode && parentNode.data) {\n      data = mergeClassData(data, parentNode.data);\n    }\n  }\n  return renderClass(data.staticClass, data.class)\n}\n\nfunction mergeClassData (child, parent) {\n  return {\n    staticClass: concat(child.staticClass, parent.staticClass),\n    class: isDef(child.class)\n      ? [child.class, parent.class]\n      : parent.class\n  }\n}\n\nfunction renderClass (\n  staticClass,\n  dynamicClass\n) {\n  if (isDef(staticClass) || isDef(dynamicClass)) {\n    return concat(staticClass, stringifyClass(dynamicClass))\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction concat (a, b) {\n  return a ? b ? (a + ' ' + b) : a : (b || '')\n}\n\nfunction stringifyClass (value) {\n  if (Array.isArray(value)) {\n    return stringifyArray(value)\n  }\n  if (isObject(value)) {\n    return stringifyObject(value)\n  }\n  if (typeof value === 'string') {\n    return value\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction stringifyArray (value) {\n  var res = '';\n  var stringified;\n  for (var i = 0, l = value.length; i < l; i++) {\n    if (isDef(stringified = stringifyClass(value[i])) && stringified !== '') {\n      if (res) { res += ' '; }\n      res += stringified;\n    }\n  }\n  return res\n}\n\nfunction stringifyObject (value) {\n  var res = '';\n  for (var key in value) {\n    if (value[key]) {\n      if (res) { res += ' '; }\n      res += key;\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar namespaceMap = {\n  svg: 'http://www.w3.org/2000/svg',\n  math: 'http://www.w3.org/1998/Math/MathML'\n};\n\nvar isHTMLTag = makeMap(\n  'html,body,base,head,link,meta,style,title,' +\n  'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +\n  'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,' +\n  'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,' +\n  's,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,' +\n  'embed,object,param,source,canvas,script,noscript,del,ins,' +\n  'caption,col,colgroup,table,thead,tbody,td,th,tr,' +\n  'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,' +\n  'output,progress,select,textarea,' +\n  'details,dialog,menu,menuitem,summary,' +\n  'content,element,shadow,template,blockquote,iframe,tfoot'\n);\n\n// this map is intentionally selective, only covering SVG elements that may\n// contain child elements.\nvar isSVG = makeMap(\n  'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +\n  'foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\n  'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',\n  true\n);\n\nvar isReservedTag = function (tag) {\n  return isHTMLTag(tag) || isSVG(tag)\n};\n\nfunction getTagNamespace (tag) {\n  if (isSVG(tag)) {\n    return 'svg'\n  }\n  // basic support for MathML\n  // note it doesn't support other MathML elements being component roots\n  if (tag === 'math') {\n    return 'math'\n  }\n}\n\nvar unknownElementCache = Object.create(null);\nfunction isUnknownElement (tag) {\n  /* istanbul ignore if */\n  if (!inBrowser) {\n    return true\n  }\n  if (isReservedTag(tag)) {\n    return false\n  }\n  tag = tag.toLowerCase();\n  /* istanbul ignore if */\n  if (unknownElementCache[tag] != null) {\n    return unknownElementCache[tag]\n  }\n  var el = document.createElement(tag);\n  if (tag.indexOf('-') > -1) {\n    // http://stackoverflow.com/a/28210364/1070244\n    return (unknownElementCache[tag] = (\n      el.constructor === window.HTMLUnknownElement ||\n      el.constructor === window.HTMLElement\n    ))\n  } else {\n    return (unknownElementCache[tag] = /HTMLUnknownElement/.test(el.toString()))\n  }\n}\n\nvar isTextInputType = makeMap('text,number,password,search,email,tel,url');\n\n/*  */\n\n/**\n * Query an element selector if it's not an element already.\n */\nfunction query (el) {\n  if (typeof el === 'string') {\n    var selected = document.querySelector(el);\n    if (!selected) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'Cannot find element: ' + el\n      );\n      return document.createElement('div')\n    }\n    return selected\n  } else {\n    return el\n  }\n}\n\n/*  */\n\nfunction createElement$1 (tagName, vnode) {\n  var elm = document.createElement(tagName);\n  if (tagName !== 'select') {\n    return elm\n  }\n  // false or null will remove the attribute but undefined will not\n  if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {\n    elm.setAttribute('multiple', 'multiple');\n  }\n  return elm\n}\n\nfunction createElementNS (namespace, tagName) {\n  return document.createElementNS(namespaceMap[namespace], tagName)\n}\n\nfunction createTextNode (text) {\n  return document.createTextNode(text)\n}\n\nfunction createComment (text) {\n  return document.createComment(text)\n}\n\nfunction insertBefore (parentNode, newNode, referenceNode) {\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\nfunction removeChild (node, child) {\n  node.removeChild(child);\n}\n\nfunction appendChild (node, child) {\n  node.appendChild(child);\n}\n\nfunction parentNode (node) {\n  return node.parentNode\n}\n\nfunction nextSibling (node) {\n  return node.nextSibling\n}\n\nfunction tagName (node) {\n  return node.tagName\n}\n\nfunction setTextContent (node, text) {\n  node.textContent = text;\n}\n\nfunction setStyleScope (node, scopeId) {\n  node.setAttribute(scopeId, '');\n}\n\nvar nodeOps = /*#__PURE__*/Object.freeze({\n  createElement: createElement$1,\n  createElementNS: createElementNS,\n  createTextNode: createTextNode,\n  createComment: createComment,\n  insertBefore: insertBefore,\n  removeChild: removeChild,\n  appendChild: appendChild,\n  parentNode: parentNode,\n  nextSibling: nextSibling,\n  tagName: tagName,\n  setTextContent: setTextContent,\n  setStyleScope: setStyleScope\n});\n\n/*  */\n\nvar ref = {\n  create: function create (_, vnode) {\n    registerRef(vnode);\n  },\n  update: function update (oldVnode, vnode) {\n    if (oldVnode.data.ref !== vnode.data.ref) {\n      registerRef(oldVnode, true);\n      registerRef(vnode);\n    }\n  },\n  destroy: function destroy (vnode) {\n    registerRef(vnode, true);\n  }\n};\n\nfunction registerRef (vnode, isRemoval) {\n  var key = vnode.data.ref;\n  if (!isDef(key)) { return }\n\n  var vm = vnode.context;\n  var ref = vnode.componentInstance || vnode.elm;\n  var refs = vm.$refs;\n  if (isRemoval) {\n    if (Array.isArray(refs[key])) {\n      remove(refs[key], ref);\n    } else if (refs[key] === ref) {\n      refs[key] = undefined;\n    }\n  } else {\n    if (vnode.data.refInFor) {\n      if (!Array.isArray(refs[key])) {\n        refs[key] = [ref];\n      } else if (refs[key].indexOf(ref) < 0) {\n        // $flow-disable-line\n        refs[key].push(ref);\n      }\n    } else {\n      refs[key] = ref;\n    }\n  }\n}\n\n/**\n * Virtual DOM patching algorithm based on Snabbdom by\n * Simon Friis Vindum (@paldepind)\n * Licensed under the MIT License\n * https://github.com/paldepind/snabbdom/blob/master/LICENSE\n *\n * modified by Evan You (@yyx990803)\n *\n * Not type-checking this because this file is perf-critical and the cost\n * of making flow understand it is not worth it.\n */\n\nvar emptyNode = new VNode('', {}, []);\n\nvar hooks = ['create', 'activate', 'update', 'remove', 'destroy'];\n\nfunction sameVnode (a, b) {\n  return (\n    a.key === b.key &&\n    a.asyncFactory === b.asyncFactory && (\n      (\n        a.tag === b.tag &&\n        a.isComment === b.isComment &&\n        isDef(a.data) === isDef(b.data) &&\n        sameInputType(a, b)\n      ) || (\n        isTrue(a.isAsyncPlaceholder) &&\n        isUndef(b.asyncFactory.error)\n      )\n    )\n  )\n}\n\nfunction sameInputType (a, b) {\n  if (a.tag !== 'input') { return true }\n  var i;\n  var typeA = isDef(i = a.data) && isDef(i = i.attrs) && i.type;\n  var typeB = isDef(i = b.data) && isDef(i = i.attrs) && i.type;\n  return typeA === typeB || isTextInputType(typeA) && isTextInputType(typeB)\n}\n\nfunction createKeyToOldIdx (children, beginIdx, endIdx) {\n  var i, key;\n  var map = {};\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) { map[key] = i; }\n  }\n  return map\n}\n\nfunction createPatchFunction (backend) {\n  var i, j;\n  var cbs = {};\n\n  var modules = backend.modules;\n  var nodeOps = backend.nodeOps;\n\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (isDef(modules[j][hooks[i]])) {\n        cbs[hooks[i]].push(modules[j][hooks[i]]);\n      }\n    }\n  }\n\n  function emptyNodeAt (elm) {\n    return new VNode(nodeOps.tagName(elm).toLowerCase(), {}, [], undefined, elm)\n  }\n\n  function createRmCb (childElm, listeners) {\n    function remove$$1 () {\n      if (--remove$$1.listeners === 0) {\n        removeNode(childElm);\n      }\n    }\n    remove$$1.listeners = listeners;\n    return remove$$1\n  }\n\n  function removeNode (el) {\n    var parent = nodeOps.parentNode(el);\n    // element may have already been removed due to v-html / v-text\n    if (isDef(parent)) {\n      nodeOps.removeChild(parent, el);\n    }\n  }\n\n  function isUnknownElement$$1 (vnode, inVPre) {\n    return (\n      !inVPre &&\n      !vnode.ns &&\n      !(\n        config.ignoredElements.length &&\n        config.ignoredElements.some(function (ignore) {\n          return isRegExp(ignore)\n            ? ignore.test(vnode.tag)\n            : ignore === vnode.tag\n        })\n      ) &&\n      config.isUnknownElement(vnode.tag)\n    )\n  }\n\n  var creatingElmInVPre = 0;\n\n  function createElm (\n    vnode,\n    insertedVnodeQueue,\n    parentElm,\n    refElm,\n    nested,\n    ownerArray,\n    index\n  ) {\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // This vnode was used in a previous render!\n      // now it's used as a new node, overwriting its elm would cause\n      // potential patch errors down the road when it's used as an insertion\n      // reference node. Instead, we clone the node on-demand before creating\n      // associated DOM element for it.\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    vnode.isRootInsert = !nested; // for transition enter check\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n      return\n    }\n\n    var data = vnode.data;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (data && data.pre) {\n          creatingElmInVPre++;\n        }\n        if (isUnknownElement$$1(vnode, creatingElmInVPre)) {\n          warn(\n            'Unknown custom element: <' + tag + '> - did you ' +\n            'register the component correctly? For recursive components, ' +\n            'make sure to provide the \"name\" option.',\n            vnode.context\n          );\n        }\n      }\n\n      vnode.elm = vnode.ns\n        ? nodeOps.createElementNS(vnode.ns, tag)\n        : nodeOps.createElement(tag, vnode);\n      setScope(vnode);\n\n      /* istanbul ignore if */\n      {\n        createChildren(vnode, children, insertedVnodeQueue);\n        if (isDef(data)) {\n          invokeCreateHooks(vnode, insertedVnodeQueue);\n        }\n        insert(parentElm, vnode.elm, refElm);\n      }\n\n      if (process.env.NODE_ENV !== 'production' && data && data.pre) {\n        creatingElmInVPre--;\n      }\n    } else if (isTrue(vnode.isComment)) {\n      vnode.elm = nodeOps.createComment(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    } else {\n      vnode.elm = nodeOps.createTextNode(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    }\n  }\n\n  function createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i = vnode.data;\n    if (isDef(i)) {\n      var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;\n      if (isDef(i = i.hook) && isDef(i = i.init)) {\n        i(vnode, false /* hydrating */);\n      }\n      // after calling the init hook, if the vnode is a child component\n      // it should've created a child instance and mounted it. the child\n      // component also has set the placeholder vnode's elm.\n      // in that case we can just return the element and be done.\n      if (isDef(vnode.componentInstance)) {\n        initComponent(vnode, insertedVnodeQueue);\n        insert(parentElm, vnode.elm, refElm);\n        if (isTrue(isReactivated)) {\n          reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);\n        }\n        return true\n      }\n    }\n  }\n\n  function initComponent (vnode, insertedVnodeQueue) {\n    if (isDef(vnode.data.pendingInsert)) {\n      insertedVnodeQueue.push.apply(insertedVnodeQueue, vnode.data.pendingInsert);\n      vnode.data.pendingInsert = null;\n    }\n    vnode.elm = vnode.componentInstance.$el;\n    if (isPatchable(vnode)) {\n      invokeCreateHooks(vnode, insertedVnodeQueue);\n      setScope(vnode);\n    } else {\n      // empty component root.\n      // skip all element-related modules except for ref (#3455)\n      registerRef(vnode);\n      // make sure to invoke the insert hook\n      insertedVnodeQueue.push(vnode);\n    }\n  }\n\n  function reactivateComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i;\n    // hack for #4339: a reactivated component with inner transition\n    // does not trigger because the inner node's created hooks are not called\n    // again. It's not ideal to involve module-specific logic in here but\n    // there doesn't seem to be a better way to do it.\n    var innerNode = vnode;\n    while (innerNode.componentInstance) {\n      innerNode = innerNode.componentInstance._vnode;\n      if (isDef(i = innerNode.data) && isDef(i = i.transition)) {\n        for (i = 0; i < cbs.activate.length; ++i) {\n          cbs.activate[i](emptyNode, innerNode);\n        }\n        insertedVnodeQueue.push(innerNode);\n        break\n      }\n    }\n    // unlike a newly created component,\n    // a reactivated keep-alive component doesn't insert itself\n    insert(parentElm, vnode.elm, refElm);\n  }\n\n  function insert (parent, elm, ref$$1) {\n    if (isDef(parent)) {\n      if (isDef(ref$$1)) {\n        if (nodeOps.parentNode(ref$$1) === parent) {\n          nodeOps.insertBefore(parent, elm, ref$$1);\n        }\n      } else {\n        nodeOps.appendChild(parent, elm);\n      }\n    }\n  }\n\n  function createChildren (vnode, children, insertedVnodeQueue) {\n    if (Array.isArray(children)) {\n      if (process.env.NODE_ENV !== 'production') {\n        checkDuplicateKeys(children);\n      }\n      for (var i = 0; i < children.length; ++i) {\n        createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);\n      }\n    } else if (isPrimitive(vnode.text)) {\n      nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));\n    }\n  }\n\n  function isPatchable (vnode) {\n    while (vnode.componentInstance) {\n      vnode = vnode.componentInstance._vnode;\n    }\n    return isDef(vnode.tag)\n  }\n\n  function invokeCreateHooks (vnode, insertedVnodeQueue) {\n    for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n      cbs.create[i$1](emptyNode, vnode);\n    }\n    i = vnode.data.hook; // Reuse variable\n    if (isDef(i)) {\n      if (isDef(i.create)) { i.create(emptyNode, vnode); }\n      if (isDef(i.insert)) { insertedVnodeQueue.push(vnode); }\n    }\n  }\n\n  // set scope id attribute for scoped CSS.\n  // this is implemented as a special case to avoid the overhead\n  // of going through the normal attribute patching process.\n  function setScope (vnode) {\n    var i;\n    if (isDef(i = vnode.fnScopeId)) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    } else {\n      var ancestor = vnode;\n      while (ancestor) {\n        if (isDef(i = ancestor.context) && isDef(i = i.$options._scopeId)) {\n          nodeOps.setStyleScope(vnode.elm, i);\n        }\n        ancestor = ancestor.parent;\n      }\n    }\n    // for slot content they should also get the scopeId from the host instance.\n    if (isDef(i = activeInstance) &&\n      i !== vnode.context &&\n      i !== vnode.fnContext &&\n      isDef(i = i.$options._scopeId)\n    ) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    }\n  }\n\n  function addVnodes (parentElm, refElm, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      createElm(vnodes[startIdx], insertedVnodeQueue, parentElm, refElm, false, vnodes, startIdx);\n    }\n  }\n\n  function invokeDestroyHook (vnode) {\n    var i, j;\n    var data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.destroy)) { i(vnode); }\n      for (i = 0; i < cbs.destroy.length; ++i) { cbs.destroy[i](vnode); }\n    }\n    if (isDef(i = vnode.children)) {\n      for (j = 0; j < vnode.children.length; ++j) {\n        invokeDestroyHook(vnode.children[j]);\n      }\n    }\n  }\n\n  function removeVnodes (vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.tag)) {\n          removeAndInvokeRemoveHook(ch);\n          invokeDestroyHook(ch);\n        } else { // Text node\n          removeNode(ch.elm);\n        }\n      }\n    }\n  }\n\n  function removeAndInvokeRemoveHook (vnode, rm) {\n    if (isDef(rm) || isDef(vnode.data)) {\n      var i;\n      var listeners = cbs.remove.length + 1;\n      if (isDef(rm)) {\n        // we have a recursively passed down rm callback\n        // increase the listeners count\n        rm.listeners += listeners;\n      } else {\n        // directly removing\n        rm = createRmCb(vnode.elm, listeners);\n      }\n      // recursively invoke hooks on child component root node\n      if (isDef(i = vnode.componentInstance) && isDef(i = i._vnode) && isDef(i.data)) {\n        removeAndInvokeRemoveHook(i, rm);\n      }\n      for (i = 0; i < cbs.remove.length; ++i) {\n        cbs.remove[i](vnode, rm);\n      }\n      if (isDef(i = vnode.data.hook) && isDef(i = i.remove)) {\n        i(vnode, rm);\n      } else {\n        rm();\n      }\n    } else {\n      removeNode(vnode.elm);\n    }\n  }\n\n  function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, vnodeToMove, refElm;\n\n    // removeOnly is a special flag used only by <transition-group>\n    // to ensure removed elements stay in correct relative positions\n    // during leaving transitions\n    var canMove = !removeOnly;\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkDuplicateKeys(newCh);\n    }\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) { oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx); }\n        idxInOld = isDef(newStartVnode.key)\n          ? oldKeyToIdx[newStartVnode.key]\n          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);\n        if (isUndef(idxInOld)) { // New element\n          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n        } else {\n          vnodeToMove = oldCh[idxInOld];\n          if (sameVnode(vnodeToMove, newStartVnode)) {\n            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n            oldCh[idxInOld] = undefined;\n            canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm);\n          } else {\n            // same key but different element. treat as new element\n            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n          }\n        }\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm;\n      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function checkDuplicateKeys (children) {\n    var seenKeys = {};\n    for (var i = 0; i < children.length; i++) {\n      var vnode = children[i];\n      var key = vnode.key;\n      if (isDef(key)) {\n        if (seenKeys[key]) {\n          warn(\n            (\"Duplicate keys detected: '\" + key + \"'. This may cause an update error.\"),\n            vnode.context\n          );\n        } else {\n          seenKeys[key] = true;\n        }\n      }\n    }\n  }\n\n  function findIdxInOld (node, oldCh, start, end) {\n    for (var i = start; i < end; i++) {\n      var c = oldCh[i];\n      if (isDef(c) && sameVnode(node, c)) { return i }\n    }\n  }\n\n  function patchVnode (\n    oldVnode,\n    vnode,\n    insertedVnodeQueue,\n    ownerArray,\n    index,\n    removeOnly\n  ) {\n    if (oldVnode === vnode) {\n      return\n    }\n\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // clone reused vnode\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    var elm = vnode.elm = oldVnode.elm;\n\n    if (isTrue(oldVnode.isAsyncPlaceholder)) {\n      if (isDef(vnode.asyncFactory.resolved)) {\n        hydrate(oldVnode.elm, vnode, insertedVnodeQueue);\n      } else {\n        vnode.isAsyncPlaceholder = true;\n      }\n      return\n    }\n\n    // reuse element for static trees.\n    // note we only do this if the vnode is cloned -\n    // if the new node is not cloned it means the render functions have been\n    // reset by the hot-reload-api and we need to do a proper re-render.\n    if (isTrue(vnode.isStatic) &&\n      isTrue(oldVnode.isStatic) &&\n      vnode.key === oldVnode.key &&\n      (isTrue(vnode.isCloned) || isTrue(vnode.isOnce))\n    ) {\n      vnode.componentInstance = oldVnode.componentInstance;\n      return\n    }\n\n    var i;\n    var data = vnode.data;\n    if (isDef(data) && isDef(i = data.hook) && isDef(i = i.prepatch)) {\n      i(oldVnode, vnode);\n    }\n\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (isDef(data) && isPatchable(vnode)) {\n      for (i = 0; i < cbs.update.length; ++i) { cbs.update[i](oldVnode, vnode); }\n      if (isDef(i = data.hook) && isDef(i = i.update)) { i(oldVnode, vnode); }\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) { updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly); }\n      } else if (isDef(ch)) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkDuplicateKeys(ch);\n        }\n        if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, ''); }\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        nodeOps.setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      nodeOps.setTextContent(elm, vnode.text);\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.postpatch)) { i(oldVnode, vnode); }\n    }\n  }\n\n  function invokeInsertHook (vnode, queue, initial) {\n    // delay insert hooks for component root nodes, invoke them after the\n    // element is really inserted\n    if (isTrue(initial) && isDef(vnode.parent)) {\n      vnode.parent.data.pendingInsert = queue;\n    } else {\n      for (var i = 0; i < queue.length; ++i) {\n        queue[i].data.hook.insert(queue[i]);\n      }\n    }\n  }\n\n  var hydrationBailed = false;\n  // list of modules that can skip create hook during hydration because they\n  // are already rendered on the client or has no need for initialization\n  // Note: style is excluded because it relies on initial clone for future\n  // deep updates (#7063).\n  var isRenderedModule = makeMap('attrs,class,staticClass,staticStyle,key');\n\n  // Note: this is a browser-only function so we can assume elms are DOM nodes.\n  function hydrate (elm, vnode, insertedVnodeQueue, inVPre) {\n    var i;\n    var tag = vnode.tag;\n    var data = vnode.data;\n    var children = vnode.children;\n    inVPre = inVPre || (data && data.pre);\n    vnode.elm = elm;\n\n    if (isTrue(vnode.isComment) && isDef(vnode.asyncFactory)) {\n      vnode.isAsyncPlaceholder = true;\n      return true\n    }\n    // assert node match\n    if (process.env.NODE_ENV !== 'production') {\n      if (!assertNodeMatch(elm, vnode, inVPre)) {\n        return false\n      }\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) { i(vnode, true /* hydrating */); }\n      if (isDef(i = vnode.componentInstance)) {\n        // child component. it should have hydrated its own tree.\n        initComponent(vnode, insertedVnodeQueue);\n        return true\n      }\n    }\n    if (isDef(tag)) {\n      if (isDef(children)) {\n        // empty element, allow client to pick up and populate children\n        if (!elm.hasChildNodes()) {\n          createChildren(vnode, children, insertedVnodeQueue);\n        } else {\n          // v-html and domProps: innerHTML\n          if (isDef(i = data) && isDef(i = i.domProps) && isDef(i = i.innerHTML)) {\n            if (i !== elm.innerHTML) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('server innerHTML: ', i);\n                console.warn('client innerHTML: ', elm.innerHTML);\n              }\n              return false\n            }\n          } else {\n            // iterate and compare children lists\n            var childrenMatch = true;\n            var childNode = elm.firstChild;\n            for (var i$1 = 0; i$1 < children.length; i$1++) {\n              if (!childNode || !hydrate(childNode, children[i$1], insertedVnodeQueue, inVPre)) {\n                childrenMatch = false;\n                break\n              }\n              childNode = childNode.nextSibling;\n            }\n            // if childNode is not null, it means the actual childNodes list is\n            // longer than the virtual children list.\n            if (!childrenMatch || childNode) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('Mismatching childNodes vs. VNodes: ', elm.childNodes, children);\n              }\n              return false\n            }\n          }\n        }\n      }\n      if (isDef(data)) {\n        var fullInvoke = false;\n        for (var key in data) {\n          if (!isRenderedModule(key)) {\n            fullInvoke = true;\n            invokeCreateHooks(vnode, insertedVnodeQueue);\n            break\n          }\n        }\n        if (!fullInvoke && data['class']) {\n          // ensure collecting deps for deep class bindings for future updates\n          traverse(data['class']);\n        }\n      }\n    } else if (elm.data !== vnode.text) {\n      elm.data = vnode.text;\n    }\n    return true\n  }\n\n  function assertNodeMatch (node, vnode, inVPre) {\n    if (isDef(vnode.tag)) {\n      return vnode.tag.indexOf('vue-component') === 0 || (\n        !isUnknownElement$$1(vnode, inVPre) &&\n        vnode.tag.toLowerCase() === (node.tagName && node.tagName.toLowerCase())\n      )\n    } else {\n      return node.nodeType === (vnode.isComment ? 8 : 3)\n    }\n  }\n\n  return function patch (oldVnode, vnode, hydrating, removeOnly) {\n    if (isUndef(vnode)) {\n      if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }\n      return\n    }\n\n    var isInitialPatch = false;\n    var insertedVnodeQueue = [];\n\n    if (isUndef(oldVnode)) {\n      // empty mount (likely as component), create new root element\n      isInitialPatch = true;\n      createElm(vnode, insertedVnodeQueue);\n    } else {\n      var isRealElement = isDef(oldVnode.nodeType);\n      if (!isRealElement && sameVnode(oldVnode, vnode)) {\n        // patch existing root node\n        patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly);\n      } else {\n        if (isRealElement) {\n          // mounting to a real element\n          // check if this is server-rendered content and if we can perform\n          // a successful hydration.\n          if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {\n            oldVnode.removeAttribute(SSR_ATTR);\n            hydrating = true;\n          }\n          if (isTrue(hydrating)) {\n            if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {\n              invokeInsertHook(vnode, insertedVnodeQueue, true);\n              return oldVnode\n            } else if (process.env.NODE_ENV !== 'production') {\n              warn(\n                'The client-side rendered virtual DOM tree is not matching ' +\n                'server-rendered content. This is likely caused by incorrect ' +\n                'HTML markup, for example nesting block-level elements inside ' +\n                '<p>, or missing <tbody>. Bailing hydration and performing ' +\n                'full client-side render.'\n              );\n            }\n          }\n          // either not server-rendered, or hydration failed.\n          // create an empty node and replace it\n          oldVnode = emptyNodeAt(oldVnode);\n        }\n\n        // replacing existing element\n        var oldElm = oldVnode.elm;\n        var parentElm = nodeOps.parentNode(oldElm);\n\n        // create new node\n        createElm(\n          vnode,\n          insertedVnodeQueue,\n          // extremely rare edge case: do not insert if old element is in a\n          // leaving transition. Only happens when combining transition +\n          // keep-alive + HOCs. (#4590)\n          oldElm._leaveCb ? null : parentElm,\n          nodeOps.nextSibling(oldElm)\n        );\n\n        // update parent placeholder node element, recursively\n        if (isDef(vnode.parent)) {\n          var ancestor = vnode.parent;\n          var patchable = isPatchable(vnode);\n          while (ancestor) {\n            for (var i = 0; i < cbs.destroy.length; ++i) {\n              cbs.destroy[i](ancestor);\n            }\n            ancestor.elm = vnode.elm;\n            if (patchable) {\n              for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n                cbs.create[i$1](emptyNode, ancestor);\n              }\n              // #6513\n              // invoke insert hooks that may have been merged by create hooks.\n              // e.g. for directives that uses the \"inserted\" hook.\n              var insert = ancestor.data.hook.insert;\n              if (insert.merged) {\n                // start at index 1 to avoid re-invoking component mounted hook\n                for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {\n                  insert.fns[i$2]();\n                }\n              }\n            } else {\n              registerRef(ancestor);\n            }\n            ancestor = ancestor.parent;\n          }\n        }\n\n        // destroy old node\n        if (isDef(parentElm)) {\n          removeVnodes([oldVnode], 0, 0);\n        } else if (isDef(oldVnode.tag)) {\n          invokeDestroyHook(oldVnode);\n        }\n      }\n    }\n\n    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);\n    return vnode.elm\n  }\n}\n\n/*  */\n\nvar directives = {\n  create: updateDirectives,\n  update: updateDirectives,\n  destroy: function unbindDirectives (vnode) {\n    updateDirectives(vnode, emptyNode);\n  }\n};\n\nfunction updateDirectives (oldVnode, vnode) {\n  if (oldVnode.data.directives || vnode.data.directives) {\n    _update(oldVnode, vnode);\n  }\n}\n\nfunction _update (oldVnode, vnode) {\n  var isCreate = oldVnode === emptyNode;\n  var isDestroy = vnode === emptyNode;\n  var oldDirs = normalizeDirectives$1(oldVnode.data.directives, oldVnode.context);\n  var newDirs = normalizeDirectives$1(vnode.data.directives, vnode.context);\n\n  var dirsWithInsert = [];\n  var dirsWithPostpatch = [];\n\n  var key, oldDir, dir;\n  for (key in newDirs) {\n    oldDir = oldDirs[key];\n    dir = newDirs[key];\n    if (!oldDir) {\n      // new directive, bind\n      callHook$1(dir, 'bind', vnode, oldVnode);\n      if (dir.def && dir.def.inserted) {\n        dirsWithInsert.push(dir);\n      }\n    } else {\n      // existing directive, update\n      dir.oldValue = oldDir.value;\n      dir.oldArg = oldDir.arg;\n      callHook$1(dir, 'update', vnode, oldVnode);\n      if (dir.def && dir.def.componentUpdated) {\n        dirsWithPostpatch.push(dir);\n      }\n    }\n  }\n\n  if (dirsWithInsert.length) {\n    var callInsert = function () {\n      for (var i = 0; i < dirsWithInsert.length; i++) {\n        callHook$1(dirsWithInsert[i], 'inserted', vnode, oldVnode);\n      }\n    };\n    if (isCreate) {\n      mergeVNodeHook(vnode, 'insert', callInsert);\n    } else {\n      callInsert();\n    }\n  }\n\n  if (dirsWithPostpatch.length) {\n    mergeVNodeHook(vnode, 'postpatch', function () {\n      for (var i = 0; i < dirsWithPostpatch.length; i++) {\n        callHook$1(dirsWithPostpatch[i], 'componentUpdated', vnode, oldVnode);\n      }\n    });\n  }\n\n  if (!isCreate) {\n    for (key in oldDirs) {\n      if (!newDirs[key]) {\n        // no longer present, unbind\n        callHook$1(oldDirs[key], 'unbind', oldVnode, oldVnode, isDestroy);\n      }\n    }\n  }\n}\n\nvar emptyModifiers = Object.create(null);\n\nfunction normalizeDirectives$1 (\n  dirs,\n  vm\n) {\n  var res = Object.create(null);\n  if (!dirs) {\n    // $flow-disable-line\n    return res\n  }\n  var i, dir;\n  for (i = 0; i < dirs.length; i++) {\n    dir = dirs[i];\n    if (!dir.modifiers) {\n      // $flow-disable-line\n      dir.modifiers = emptyModifiers;\n    }\n    res[getRawDirName(dir)] = dir;\n    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true);\n  }\n  // $flow-disable-line\n  return res\n}\n\nfunction getRawDirName (dir) {\n  return dir.rawName || ((dir.name) + \".\" + (Object.keys(dir.modifiers || {}).join('.')))\n}\n\nfunction callHook$1 (dir, hook, vnode, oldVnode, isDestroy) {\n  var fn = dir.def && dir.def[hook];\n  if (fn) {\n    try {\n      fn(vnode.elm, dir, vnode, oldVnode, isDestroy);\n    } catch (e) {\n      handleError(e, vnode.context, (\"directive \" + (dir.name) + \" \" + hook + \" hook\"));\n    }\n  }\n}\n\nvar baseModules = [\n  ref,\n  directives\n];\n\n/*  */\n\nfunction updateAttrs (oldVnode, vnode) {\n  var opts = vnode.componentOptions;\n  if (isDef(opts) && opts.Ctor.options.inheritAttrs === false) {\n    return\n  }\n  if (isUndef(oldVnode.data.attrs) && isUndef(vnode.data.attrs)) {\n    return\n  }\n  var key, cur, old;\n  var elm = vnode.elm;\n  var oldAttrs = oldVnode.data.attrs || {};\n  var attrs = vnode.data.attrs || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(attrs.__ob__)) {\n    attrs = vnode.data.attrs = extend({}, attrs);\n  }\n\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      setAttr(elm, key, cur, vnode.data.pre);\n    }\n  }\n  // #4391: in IE9, setting type can reset value for input[type=radio]\n  // #6666: IE/Edge forces progress value down to 1 before setting a max\n  /* istanbul ignore if */\n  if ((isIE || isEdge) && attrs.value !== oldAttrs.value) {\n    setAttr(elm, 'value', attrs.value);\n  }\n  for (key in oldAttrs) {\n    if (isUndef(attrs[key])) {\n      if (isXlink(key)) {\n        elm.removeAttributeNS(xlinkNS, getXlinkProp(key));\n      } else if (!isEnumeratedAttr(key)) {\n        elm.removeAttribute(key);\n      }\n    }\n  }\n}\n\nfunction setAttr (el, key, value, isInPre) {\n  if (isInPre || el.tagName.indexOf('-') > -1) {\n    baseSetAttr(el, key, value);\n  } else if (isBooleanAttr(key)) {\n    // set attribute for blank value\n    // e.g. <option disabled>Select one</option>\n    if (isFalsyAttrValue(value)) {\n      el.removeAttribute(key);\n    } else {\n      // technically allowfullscreen is a boolean attribute for <iframe>,\n      // but Flash expects a value of \"true\" when used on <embed> tag\n      value = key === 'allowfullscreen' && el.tagName === 'EMBED'\n        ? 'true'\n        : key;\n      el.setAttribute(key, value);\n    }\n  } else if (isEnumeratedAttr(key)) {\n    el.setAttribute(key, convertEnumeratedValue(key, value));\n  } else if (isXlink(key)) {\n    if (isFalsyAttrValue(value)) {\n      el.removeAttributeNS(xlinkNS, getXlinkProp(key));\n    } else {\n      el.setAttributeNS(xlinkNS, key, value);\n    }\n  } else {\n    baseSetAttr(el, key, value);\n  }\n}\n\nfunction baseSetAttr (el, key, value) {\n  if (isFalsyAttrValue(value)) {\n    el.removeAttribute(key);\n  } else {\n    // #7138: IE10 & 11 fires input event when setting placeholder on\n    // <textarea>... block the first input event and remove the blocker\n    // immediately.\n    /* istanbul ignore if */\n    if (\n      isIE && !isIE9 &&\n      el.tagName === 'TEXTAREA' &&\n      key === 'placeholder' && value !== '' && !el.__ieph\n    ) {\n      var blocker = function (e) {\n        e.stopImmediatePropagation();\n        el.removeEventListener('input', blocker);\n      };\n      el.addEventListener('input', blocker);\n      // $flow-disable-line\n      el.__ieph = true; /* IE placeholder patched */\n    }\n    el.setAttribute(key, value);\n  }\n}\n\nvar attrs = {\n  create: updateAttrs,\n  update: updateAttrs\n};\n\n/*  */\n\nfunction updateClass (oldVnode, vnode) {\n  var el = vnode.elm;\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n  if (\n    isUndef(data.staticClass) &&\n    isUndef(data.class) && (\n      isUndef(oldData) || (\n        isUndef(oldData.staticClass) &&\n        isUndef(oldData.class)\n      )\n    )\n  ) {\n    return\n  }\n\n  var cls = genClassForVnode(vnode);\n\n  // handle transition classes\n  var transitionClass = el._transitionClasses;\n  if (isDef(transitionClass)) {\n    cls = concat(cls, stringifyClass(transitionClass));\n  }\n\n  // set the class\n  if (cls !== el._prevClass) {\n    el.setAttribute('class', cls);\n    el._prevClass = cls;\n  }\n}\n\nvar klass = {\n  create: updateClass,\n  update: updateClass\n};\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// in some cases, the event used has to be determined at runtime\n// so we used some reserved tokens during compile.\nvar RANGE_TOKEN = '__r';\nvar CHECKBOX_RADIO_TOKEN = '__c';\n\n/*  */\n\n// normalize v-model event tokens that can only be determined at runtime.\n// it's important to place the event as the first in the array because\n// the whole point is ensuring the v-model callback gets called before\n// user-attached handlers.\nfunction normalizeEvents (on) {\n  /* istanbul ignore if */\n  if (isDef(on[RANGE_TOKEN])) {\n    // IE input[type=range] only supports `change` event\n    var event = isIE ? 'change' : 'input';\n    on[event] = [].concat(on[RANGE_TOKEN], on[event] || []);\n    delete on[RANGE_TOKEN];\n  }\n  // This was originally intended to fix #4521 but no longer necessary\n  // after 2.5. Keeping it for backwards compat with generated code from < 2.4\n  /* istanbul ignore if */\n  if (isDef(on[CHECKBOX_RADIO_TOKEN])) {\n    on.change = [].concat(on[CHECKBOX_RADIO_TOKEN], on.change || []);\n    delete on[CHECKBOX_RADIO_TOKEN];\n  }\n}\n\nvar target$1;\n\nfunction createOnceHandler$1 (event, handler, capture) {\n  var _target = target$1; // save current target element in closure\n  return function onceHandler () {\n    var res = handler.apply(null, arguments);\n    if (res !== null) {\n      remove$2(event, onceHandler, capture, _target);\n    }\n  }\n}\n\n// #9446: Firefox <= 53 (in particular, ESR 52) has incorrect Event.timeStamp\n// implementation and does not fire microtasks in between event propagation, so\n// safe to exclude.\nvar useMicrotaskFix = isUsingMicroTask && !(isFF && Number(isFF[1]) <= 53);\n\nfunction add$1 (\n  name,\n  handler,\n  capture,\n  passive\n) {\n  // async edge case #6566: inner click event triggers patch, event handler\n  // attached to outer element during patch, and triggered again. This\n  // happens because browsers fire microtask ticks between event propagation.\n  // the solution is simple: we save the timestamp when a handler is attached,\n  // and the handler would only fire if the event passed to it was fired\n  // AFTER it was attached.\n  if (useMicrotaskFix) {\n    var attachedTimestamp = currentFlushTimestamp;\n    var original = handler;\n    handler = original._wrapper = function (e) {\n      if (\n        // no bubbling, should always fire.\n        // this is just a safety net in case event.timeStamp is unreliable in\n        // certain weird environments...\n        e.target === e.currentTarget ||\n        // event is fired after handler attachment\n        e.timeStamp >= attachedTimestamp ||\n        // bail for environments that have buggy event.timeStamp implementations\n        // #9462 iOS 9 bug: event.timeStamp is 0 after history.pushState\n        // #9681 QtWebEngine event.timeStamp is negative value\n        e.timeStamp <= 0 ||\n        // #9448 bail if event is fired in another document in a multi-page\n        // electron/nw.js app, since event.timeStamp will be using a different\n        // starting reference\n        e.target.ownerDocument !== document\n      ) {\n        return original.apply(this, arguments)\n      }\n    };\n  }\n  target$1.addEventListener(\n    name,\n    handler,\n    supportsPassive\n      ? { capture: capture, passive: passive }\n      : capture\n  );\n}\n\nfunction remove$2 (\n  name,\n  handler,\n  capture,\n  _target\n) {\n  (_target || target$1).removeEventListener(\n    name,\n    handler._wrapper || handler,\n    capture\n  );\n}\n\nfunction updateDOMListeners (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {\n    return\n  }\n  var on = vnode.data.on || {};\n  var oldOn = oldVnode.data.on || {};\n  target$1 = vnode.elm;\n  normalizeEvents(on);\n  updateListeners(on, oldOn, add$1, remove$2, createOnceHandler$1, vnode.context);\n  target$1 = undefined;\n}\n\nvar events = {\n  create: updateDOMListeners,\n  update: updateDOMListeners\n};\n\n/*  */\n\nvar svgContainer;\n\nfunction updateDOMProps (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.domProps) && isUndef(vnode.data.domProps)) {\n    return\n  }\n  var key, cur;\n  var elm = vnode.elm;\n  var oldProps = oldVnode.data.domProps || {};\n  var props = vnode.data.domProps || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(props.__ob__)) {\n    props = vnode.data.domProps = extend({}, props);\n  }\n\n  for (key in oldProps) {\n    if (!(key in props)) {\n      elm[key] = '';\n    }\n  }\n\n  for (key in props) {\n    cur = props[key];\n    // ignore children if the node has textContent or innerHTML,\n    // as these will throw away existing DOM nodes and cause removal errors\n    // on subsequent patches (#3360)\n    if (key === 'textContent' || key === 'innerHTML') {\n      if (vnode.children) { vnode.children.length = 0; }\n      if (cur === oldProps[key]) { continue }\n      // #6601 work around Chrome version <= 55 bug where single textNode\n      // replaced by innerHTML/textContent retains its parentNode property\n      if (elm.childNodes.length === 1) {\n        elm.removeChild(elm.childNodes[0]);\n      }\n    }\n\n    if (key === 'value' && elm.tagName !== 'PROGRESS') {\n      // store value as _value as well since\n      // non-string values will be stringified\n      elm._value = cur;\n      // avoid resetting cursor position when value is the same\n      var strCur = isUndef(cur) ? '' : String(cur);\n      if (shouldUpdateValue(elm, strCur)) {\n        elm.value = strCur;\n      }\n    } else if (key === 'innerHTML' && isSVG(elm.tagName) && isUndef(elm.innerHTML)) {\n      // IE doesn't support innerHTML for SVG elements\n      svgContainer = svgContainer || document.createElement('div');\n      svgContainer.innerHTML = \"<svg>\" + cur + \"</svg>\";\n      var svg = svgContainer.firstChild;\n      while (elm.firstChild) {\n        elm.removeChild(elm.firstChild);\n      }\n      while (svg.firstChild) {\n        elm.appendChild(svg.firstChild);\n      }\n    } else if (\n      // skip the update if old and new VDOM state is the same.\n      // `value` is handled separately because the DOM value may be temporarily\n      // out of sync with VDOM state due to focus, composition and modifiers.\n      // This  #4521 by skipping the unnecessary `checked` update.\n      cur !== oldProps[key]\n    ) {\n      // some property updates can throw\n      // e.g. `value` on <progress> w/ non-finite value\n      try {\n        elm[key] = cur;\n      } catch (e) {}\n    }\n  }\n}\n\n// check platforms/web/util/attrs.js acceptValue\n\n\nfunction shouldUpdateValue (elm, checkVal) {\n  return (!elm.composing && (\n    elm.tagName === 'OPTION' ||\n    isNotInFocusAndDirty(elm, checkVal) ||\n    isDirtyWithModifiers(elm, checkVal)\n  ))\n}\n\nfunction isNotInFocusAndDirty (elm, checkVal) {\n  // return true when textbox (.number and .trim) loses focus and its value is\n  // not equal to the updated value\n  var notInFocus = true;\n  // #6157\n  // work around IE bug when accessing document.activeElement in an iframe\n  try { notInFocus = document.activeElement !== elm; } catch (e) {}\n  return notInFocus && elm.value !== checkVal\n}\n\nfunction isDirtyWithModifiers (elm, newVal) {\n  var value = elm.value;\n  var modifiers = elm._vModifiers; // injected by v-model runtime\n  if (isDef(modifiers)) {\n    if (modifiers.number) {\n      return toNumber(value) !== toNumber(newVal)\n    }\n    if (modifiers.trim) {\n      return value.trim() !== newVal.trim()\n    }\n  }\n  return value !== newVal\n}\n\nvar domProps = {\n  create: updateDOMProps,\n  update: updateDOMProps\n};\n\n/*  */\n\nvar parseStyleText = cached(function (cssText) {\n  var res = {};\n  var listDelimiter = /;(?![^(]*\\))/g;\n  var propertyDelimiter = /:(.+)/;\n  cssText.split(listDelimiter).forEach(function (item) {\n    if (item) {\n      var tmp = item.split(propertyDelimiter);\n      tmp.length > 1 && (res[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return res\n});\n\n// merge static and dynamic style data on the same vnode\nfunction normalizeStyleData (data) {\n  var style = normalizeStyleBinding(data.style);\n  // static style is pre-processed into an object during compilation\n  // and is always a fresh object, so it's safe to merge into it\n  return data.staticStyle\n    ? extend(data.staticStyle, style)\n    : style\n}\n\n// normalize possible array / string values into Object\nfunction normalizeStyleBinding (bindingStyle) {\n  if (Array.isArray(bindingStyle)) {\n    return toObject(bindingStyle)\n  }\n  if (typeof bindingStyle === 'string') {\n    return parseStyleText(bindingStyle)\n  }\n  return bindingStyle\n}\n\n/**\n * parent component style should be after child's\n * so that parent component's style could override it\n */\nfunction getStyle (vnode, checkChild) {\n  var res = {};\n  var styleData;\n\n  if (checkChild) {\n    var childNode = vnode;\n    while (childNode.componentInstance) {\n      childNode = childNode.componentInstance._vnode;\n      if (\n        childNode && childNode.data &&\n        (styleData = normalizeStyleData(childNode.data))\n      ) {\n        extend(res, styleData);\n      }\n    }\n  }\n\n  if ((styleData = normalizeStyleData(vnode.data))) {\n    extend(res, styleData);\n  }\n\n  var parentNode = vnode;\n  while ((parentNode = parentNode.parent)) {\n    if (parentNode.data && (styleData = normalizeStyleData(parentNode.data))) {\n      extend(res, styleData);\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar cssVarRE = /^--/;\nvar importantRE = /\\s*!important$/;\nvar setProp = function (el, name, val) {\n  /* istanbul ignore if */\n  if (cssVarRE.test(name)) {\n    el.style.setProperty(name, val);\n  } else if (importantRE.test(val)) {\n    el.style.setProperty(hyphenate(name), val.replace(importantRE, ''), 'important');\n  } else {\n    var normalizedName = normalize(name);\n    if (Array.isArray(val)) {\n      // Support values array created by autoprefixer, e.g.\n      // {display: [\"-webkit-box\", \"-ms-flexbox\", \"flex\"]}\n      // Set them one by one, and the browser will only set those it can recognize\n      for (var i = 0, len = val.length; i < len; i++) {\n        el.style[normalizedName] = val[i];\n      }\n    } else {\n      el.style[normalizedName] = val;\n    }\n  }\n};\n\nvar vendorNames = ['Webkit', 'Moz', 'ms'];\n\nvar emptyStyle;\nvar normalize = cached(function (prop) {\n  emptyStyle = emptyStyle || document.createElement('div').style;\n  prop = camelize(prop);\n  if (prop !== 'filter' && (prop in emptyStyle)) {\n    return prop\n  }\n  var capName = prop.charAt(0).toUpperCase() + prop.slice(1);\n  for (var i = 0; i < vendorNames.length; i++) {\n    var name = vendorNames[i] + capName;\n    if (name in emptyStyle) {\n      return name\n    }\n  }\n});\n\nfunction updateStyle (oldVnode, vnode) {\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n\n  if (isUndef(data.staticStyle) && isUndef(data.style) &&\n    isUndef(oldData.staticStyle) && isUndef(oldData.style)\n  ) {\n    return\n  }\n\n  var cur, name;\n  var el = vnode.elm;\n  var oldStaticStyle = oldData.staticStyle;\n  var oldStyleBinding = oldData.normalizedStyle || oldData.style || {};\n\n  // if static style exists, stylebinding already merged into it when doing normalizeStyleData\n  var oldStyle = oldStaticStyle || oldStyleBinding;\n\n  var style = normalizeStyleBinding(vnode.data.style) || {};\n\n  // store normalized style under a different key for next diff\n  // make sure to clone it if it's reactive, since the user likely wants\n  // to mutate it.\n  vnode.data.normalizedStyle = isDef(style.__ob__)\n    ? extend({}, style)\n    : style;\n\n  var newStyle = getStyle(vnode, true);\n\n  for (name in oldStyle) {\n    if (isUndef(newStyle[name])) {\n      setProp(el, name, '');\n    }\n  }\n  for (name in newStyle) {\n    cur = newStyle[name];\n    if (cur !== oldStyle[name]) {\n      // ie9 setting to null has no effect, must use empty string\n      setProp(el, name, cur == null ? '' : cur);\n    }\n  }\n}\n\nvar style = {\n  create: updateStyle,\n  update: updateStyle\n};\n\n/*  */\n\nvar whitespaceRE = /\\s+/;\n\n/**\n * Add class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction addClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.add(c); });\n    } else {\n      el.classList.add(cls);\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    if (cur.indexOf(' ' + cls + ' ') < 0) {\n      el.setAttribute('class', (cur + cls).trim());\n    }\n  }\n}\n\n/**\n * Remove class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction removeClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.remove(c); });\n    } else {\n      el.classList.remove(cls);\n    }\n    if (!el.classList.length) {\n      el.removeAttribute('class');\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    var tar = ' ' + cls + ' ';\n    while (cur.indexOf(tar) >= 0) {\n      cur = cur.replace(tar, ' ');\n    }\n    cur = cur.trim();\n    if (cur) {\n      el.setAttribute('class', cur);\n    } else {\n      el.removeAttribute('class');\n    }\n  }\n}\n\n/*  */\n\nfunction resolveTransition (def$$1) {\n  if (!def$$1) {\n    return\n  }\n  /* istanbul ignore else */\n  if (typeof def$$1 === 'object') {\n    var res = {};\n    if (def$$1.css !== false) {\n      extend(res, autoCssTransition(def$$1.name || 'v'));\n    }\n    extend(res, def$$1);\n    return res\n  } else if (typeof def$$1 === 'string') {\n    return autoCssTransition(def$$1)\n  }\n}\n\nvar autoCssTransition = cached(function (name) {\n  return {\n    enterClass: (name + \"-enter\"),\n    enterToClass: (name + \"-enter-to\"),\n    enterActiveClass: (name + \"-enter-active\"),\n    leaveClass: (name + \"-leave\"),\n    leaveToClass: (name + \"-leave-to\"),\n    leaveActiveClass: (name + \"-leave-active\")\n  }\n});\n\nvar hasTransition = inBrowser && !isIE9;\nvar TRANSITION = 'transition';\nvar ANIMATION = 'animation';\n\n// Transition property/event sniffing\nvar transitionProp = 'transition';\nvar transitionEndEvent = 'transitionend';\nvar animationProp = 'animation';\nvar animationEndEvent = 'animationend';\nif (hasTransition) {\n  /* istanbul ignore if */\n  if (window.ontransitionend === undefined &&\n    window.onwebkittransitionend !== undefined\n  ) {\n    transitionProp = 'WebkitTransition';\n    transitionEndEvent = 'webkitTransitionEnd';\n  }\n  if (window.onanimationend === undefined &&\n    window.onwebkitanimationend !== undefined\n  ) {\n    animationProp = 'WebkitAnimation';\n    animationEndEvent = 'webkitAnimationEnd';\n  }\n}\n\n// binding to window is necessary to make hot reload work in IE in strict mode\nvar raf = inBrowser\n  ? window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout\n  : /* istanbul ignore next */ function (fn) { return fn(); };\n\nfunction nextFrame (fn) {\n  raf(function () {\n    raf(fn);\n  });\n}\n\nfunction addTransitionClass (el, cls) {\n  var transitionClasses = el._transitionClasses || (el._transitionClasses = []);\n  if (transitionClasses.indexOf(cls) < 0) {\n    transitionClasses.push(cls);\n    addClass(el, cls);\n  }\n}\n\nfunction removeTransitionClass (el, cls) {\n  if (el._transitionClasses) {\n    remove(el._transitionClasses, cls);\n  }\n  removeClass(el, cls);\n}\n\nfunction whenTransitionEnds (\n  el,\n  expectedType,\n  cb\n) {\n  var ref = getTransitionInfo(el, expectedType);\n  var type = ref.type;\n  var timeout = ref.timeout;\n  var propCount = ref.propCount;\n  if (!type) { return cb() }\n  var event = type === TRANSITION ? transitionEndEvent : animationEndEvent;\n  var ended = 0;\n  var end = function () {\n    el.removeEventListener(event, onEnd);\n    cb();\n  };\n  var onEnd = function (e) {\n    if (e.target === el) {\n      if (++ended >= propCount) {\n        end();\n      }\n    }\n  };\n  setTimeout(function () {\n    if (ended < propCount) {\n      end();\n    }\n  }, timeout + 1);\n  el.addEventListener(event, onEnd);\n}\n\nvar transformRE = /\\b(transform|all)(,|$)/;\n\nfunction getTransitionInfo (el, expectedType) {\n  var styles = window.getComputedStyle(el);\n  // JSDOM may return undefined for transition properties\n  var transitionDelays = (styles[transitionProp + 'Delay'] || '').split(', ');\n  var transitionDurations = (styles[transitionProp + 'Duration'] || '').split(', ');\n  var transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  var animationDelays = (styles[animationProp + 'Delay'] || '').split(', ');\n  var animationDurations = (styles[animationProp + 'Duration'] || '').split(', ');\n  var animationTimeout = getTimeout(animationDelays, animationDurations);\n\n  var type;\n  var timeout = 0;\n  var propCount = 0;\n  /* istanbul ignore if */\n  if (expectedType === TRANSITION) {\n    if (transitionTimeout > 0) {\n      type = TRANSITION;\n      timeout = transitionTimeout;\n      propCount = transitionDurations.length;\n    }\n  } else if (expectedType === ANIMATION) {\n    if (animationTimeout > 0) {\n      type = ANIMATION;\n      timeout = animationTimeout;\n      propCount = animationDurations.length;\n    }\n  } else {\n    timeout = Math.max(transitionTimeout, animationTimeout);\n    type = timeout > 0\n      ? transitionTimeout > animationTimeout\n        ? TRANSITION\n        : ANIMATION\n      : null;\n    propCount = type\n      ? type === TRANSITION\n        ? transitionDurations.length\n        : animationDurations.length\n      : 0;\n  }\n  var hasTransform =\n    type === TRANSITION &&\n    transformRE.test(styles[transitionProp + 'Property']);\n  return {\n    type: type,\n    timeout: timeout,\n    propCount: propCount,\n    hasTransform: hasTransform\n  }\n}\n\nfunction getTimeout (delays, durations) {\n  /* istanbul ignore next */\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n\n  return Math.max.apply(null, durations.map(function (d, i) {\n    return toMs(d) + toMs(delays[i])\n  }))\n}\n\n// Old versions of Chromium (below 61.0.3163.100) formats floating pointer numbers\n// in a locale-dependent way, using a comma instead of a dot.\n// If comma is not replaced with a dot, the input will be rounded down (i.e. acting\n// as a floor function) causing unexpected behaviors\nfunction toMs (s) {\n  return Number(s.slice(0, -1).replace(',', '.')) * 1000\n}\n\n/*  */\n\nfunction enter (vnode, toggleDisplay) {\n  var el = vnode.elm;\n\n  // call leave callback now\n  if (isDef(el._leaveCb)) {\n    el._leaveCb.cancelled = true;\n    el._leaveCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data)) {\n    return\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._enterCb) || el.nodeType !== 1) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var enterClass = data.enterClass;\n  var enterToClass = data.enterToClass;\n  var enterActiveClass = data.enterActiveClass;\n  var appearClass = data.appearClass;\n  var appearToClass = data.appearToClass;\n  var appearActiveClass = data.appearActiveClass;\n  var beforeEnter = data.beforeEnter;\n  var enter = data.enter;\n  var afterEnter = data.afterEnter;\n  var enterCancelled = data.enterCancelled;\n  var beforeAppear = data.beforeAppear;\n  var appear = data.appear;\n  var afterAppear = data.afterAppear;\n  var appearCancelled = data.appearCancelled;\n  var duration = data.duration;\n\n  // activeInstance will always be the <transition> component managing this\n  // transition. One edge case to check is when the <transition> is placed\n  // as the root node of a child component. In that case we need to check\n  // <transition>'s parent for appear check.\n  var context = activeInstance;\n  var transitionNode = activeInstance.$vnode;\n  while (transitionNode && transitionNode.parent) {\n    context = transitionNode.context;\n    transitionNode = transitionNode.parent;\n  }\n\n  var isAppear = !context._isMounted || !vnode.isRootInsert;\n\n  if (isAppear && !appear && appear !== '') {\n    return\n  }\n\n  var startClass = isAppear && appearClass\n    ? appearClass\n    : enterClass;\n  var activeClass = isAppear && appearActiveClass\n    ? appearActiveClass\n    : enterActiveClass;\n  var toClass = isAppear && appearToClass\n    ? appearToClass\n    : enterToClass;\n\n  var beforeEnterHook = isAppear\n    ? (beforeAppear || beforeEnter)\n    : beforeEnter;\n  var enterHook = isAppear\n    ? (typeof appear === 'function' ? appear : enter)\n    : enter;\n  var afterEnterHook = isAppear\n    ? (afterAppear || afterEnter)\n    : afterEnter;\n  var enterCancelledHook = isAppear\n    ? (appearCancelled || enterCancelled)\n    : enterCancelled;\n\n  var explicitEnterDuration = toNumber(\n    isObject(duration)\n      ? duration.enter\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && explicitEnterDuration != null) {\n    checkDuration(explicitEnterDuration, 'enter', vnode);\n  }\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(enterHook);\n\n  var cb = el._enterCb = once(function () {\n    if (expectsCSS) {\n      removeTransitionClass(el, toClass);\n      removeTransitionClass(el, activeClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, startClass);\n      }\n      enterCancelledHook && enterCancelledHook(el);\n    } else {\n      afterEnterHook && afterEnterHook(el);\n    }\n    el._enterCb = null;\n  });\n\n  if (!vnode.data.show) {\n    // remove pending leave element on enter by injecting an insert hook\n    mergeVNodeHook(vnode, 'insert', function () {\n      var parent = el.parentNode;\n      var pendingNode = parent && parent._pending && parent._pending[vnode.key];\n      if (pendingNode &&\n        pendingNode.tag === vnode.tag &&\n        pendingNode.elm._leaveCb\n      ) {\n        pendingNode.elm._leaveCb();\n      }\n      enterHook && enterHook(el, cb);\n    });\n  }\n\n  // start enter transition\n  beforeEnterHook && beforeEnterHook(el);\n  if (expectsCSS) {\n    addTransitionClass(el, startClass);\n    addTransitionClass(el, activeClass);\n    nextFrame(function () {\n      removeTransitionClass(el, startClass);\n      if (!cb.cancelled) {\n        addTransitionClass(el, toClass);\n        if (!userWantsControl) {\n          if (isValidDuration(explicitEnterDuration)) {\n            setTimeout(cb, explicitEnterDuration);\n          } else {\n            whenTransitionEnds(el, type, cb);\n          }\n        }\n      }\n    });\n  }\n\n  if (vnode.data.show) {\n    toggleDisplay && toggleDisplay();\n    enterHook && enterHook(el, cb);\n  }\n\n  if (!expectsCSS && !userWantsControl) {\n    cb();\n  }\n}\n\nfunction leave (vnode, rm) {\n  var el = vnode.elm;\n\n  // call enter callback now\n  if (isDef(el._enterCb)) {\n    el._enterCb.cancelled = true;\n    el._enterCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data) || el.nodeType !== 1) {\n    return rm()\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._leaveCb)) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var leaveClass = data.leaveClass;\n  var leaveToClass = data.leaveToClass;\n  var leaveActiveClass = data.leaveActiveClass;\n  var beforeLeave = data.beforeLeave;\n  var leave = data.leave;\n  var afterLeave = data.afterLeave;\n  var leaveCancelled = data.leaveCancelled;\n  var delayLeave = data.delayLeave;\n  var duration = data.duration;\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(leave);\n\n  var explicitLeaveDuration = toNumber(\n    isObject(duration)\n      ? duration.leave\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && isDef(explicitLeaveDuration)) {\n    checkDuration(explicitLeaveDuration, 'leave', vnode);\n  }\n\n  var cb = el._leaveCb = once(function () {\n    if (el.parentNode && el.parentNode._pending) {\n      el.parentNode._pending[vnode.key] = null;\n    }\n    if (expectsCSS) {\n      removeTransitionClass(el, leaveToClass);\n      removeTransitionClass(el, leaveActiveClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, leaveClass);\n      }\n      leaveCancelled && leaveCancelled(el);\n    } else {\n      rm();\n      afterLeave && afterLeave(el);\n    }\n    el._leaveCb = null;\n  });\n\n  if (delayLeave) {\n    delayLeave(performLeave);\n  } else {\n    performLeave();\n  }\n\n  function performLeave () {\n    // the delayed leave may have already been cancelled\n    if (cb.cancelled) {\n      return\n    }\n    // record leaving element\n    if (!vnode.data.show && el.parentNode) {\n      (el.parentNode._pending || (el.parentNode._pending = {}))[(vnode.key)] = vnode;\n    }\n    beforeLeave && beforeLeave(el);\n    if (expectsCSS) {\n      addTransitionClass(el, leaveClass);\n      addTransitionClass(el, leaveActiveClass);\n      nextFrame(function () {\n        removeTransitionClass(el, leaveClass);\n        if (!cb.cancelled) {\n          addTransitionClass(el, leaveToClass);\n          if (!userWantsControl) {\n            if (isValidDuration(explicitLeaveDuration)) {\n              setTimeout(cb, explicitLeaveDuration);\n            } else {\n              whenTransitionEnds(el, type, cb);\n            }\n          }\n        }\n      });\n    }\n    leave && leave(el, cb);\n    if (!expectsCSS && !userWantsControl) {\n      cb();\n    }\n  }\n}\n\n// only used in dev mode\nfunction checkDuration (val, name, vnode) {\n  if (typeof val !== 'number') {\n    warn(\n      \"<transition> explicit \" + name + \" duration is not a valid number - \" +\n      \"got \" + (JSON.stringify(val)) + \".\",\n      vnode.context\n    );\n  } else if (isNaN(val)) {\n    warn(\n      \"<transition> explicit \" + name + \" duration is NaN - \" +\n      'the duration expression might be incorrect.',\n      vnode.context\n    );\n  }\n}\n\nfunction isValidDuration (val) {\n  return typeof val === 'number' && !isNaN(val)\n}\n\n/**\n * Normalize a transition hook's argument length. The hook may be:\n * - a merged hook (invoker) with the original in .fns\n * - a wrapped component method (check ._length)\n * - a plain function (.length)\n */\nfunction getHookArgumentsLength (fn) {\n  if (isUndef(fn)) {\n    return false\n  }\n  var invokerFns = fn.fns;\n  if (isDef(invokerFns)) {\n    // invoker\n    return getHookArgumentsLength(\n      Array.isArray(invokerFns)\n        ? invokerFns[0]\n        : invokerFns\n    )\n  } else {\n    return (fn._length || fn.length) > 1\n  }\n}\n\nfunction _enter (_, vnode) {\n  if (vnode.data.show !== true) {\n    enter(vnode);\n  }\n}\n\nvar transition = inBrowser ? {\n  create: _enter,\n  activate: _enter,\n  remove: function remove$$1 (vnode, rm) {\n    /* istanbul ignore else */\n    if (vnode.data.show !== true) {\n      leave(vnode, rm);\n    } else {\n      rm();\n    }\n  }\n} : {};\n\nvar platformModules = [\n  attrs,\n  klass,\n  events,\n  domProps,\n  style,\n  transition\n];\n\n/*  */\n\n// the directive module should be applied last, after all\n// built-in modules have been applied.\nvar modules = platformModules.concat(baseModules);\n\nvar patch = createPatchFunction({ nodeOps: nodeOps, modules: modules });\n\n/**\n * Not type checking this file because flow doesn't like attaching\n * properties to Elements.\n */\n\n/* istanbul ignore if */\nif (isIE9) {\n  // http://www.matts411.com/post/internet-explorer-9-oninput/\n  document.addEventListener('selectionchange', function () {\n    var el = document.activeElement;\n    if (el && el.vmodel) {\n      trigger(el, 'input');\n    }\n  });\n}\n\nvar directive = {\n  inserted: function inserted (el, binding, vnode, oldVnode) {\n    if (vnode.tag === 'select') {\n      // #6903\n      if (oldVnode.elm && !oldVnode.elm._vOptions) {\n        mergeVNodeHook(vnode, 'postpatch', function () {\n          directive.componentUpdated(el, binding, vnode);\n        });\n      } else {\n        setSelected(el, binding, vnode.context);\n      }\n      el._vOptions = [].map.call(el.options, getValue);\n    } else if (vnode.tag === 'textarea' || isTextInputType(el.type)) {\n      el._vModifiers = binding.modifiers;\n      if (!binding.modifiers.lazy) {\n        el.addEventListener('compositionstart', onCompositionStart);\n        el.addEventListener('compositionend', onCompositionEnd);\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        el.addEventListener('change', onCompositionEnd);\n        /* istanbul ignore if */\n        if (isIE9) {\n          el.vmodel = true;\n        }\n      }\n    }\n  },\n\n  componentUpdated: function componentUpdated (el, binding, vnode) {\n    if (vnode.tag === 'select') {\n      setSelected(el, binding, vnode.context);\n      // in case the options rendered by v-for have changed,\n      // it's possible that the value is out-of-sync with the rendered options.\n      // detect such cases and filter out values that no longer has a matching\n      // option in the DOM.\n      var prevOptions = el._vOptions;\n      var curOptions = el._vOptions = [].map.call(el.options, getValue);\n      if (curOptions.some(function (o, i) { return !looseEqual(o, prevOptions[i]); })) {\n        // trigger change event if\n        // no matching option found for at least one value\n        var needReset = el.multiple\n          ? binding.value.some(function (v) { return hasNoMatchingOption(v, curOptions); })\n          : binding.value !== binding.oldValue && hasNoMatchingOption(binding.value, curOptions);\n        if (needReset) {\n          trigger(el, 'change');\n        }\n      }\n    }\n  }\n};\n\nfunction setSelected (el, binding, vm) {\n  actuallySetSelected(el, binding, vm);\n  /* istanbul ignore if */\n  if (isIE || isEdge) {\n    setTimeout(function () {\n      actuallySetSelected(el, binding, vm);\n    }, 0);\n  }\n}\n\nfunction actuallySetSelected (el, binding, vm) {\n  var value = binding.value;\n  var isMultiple = el.multiple;\n  if (isMultiple && !Array.isArray(value)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"<select multiple v-model=\\\"\" + (binding.expression) + \"\\\"> \" +\n      \"expects an Array value for its binding, but got \" + (Object.prototype.toString.call(value).slice(8, -1)),\n      vm\n    );\n    return\n  }\n  var selected, option;\n  for (var i = 0, l = el.options.length; i < l; i++) {\n    option = el.options[i];\n    if (isMultiple) {\n      selected = looseIndexOf(value, getValue(option)) > -1;\n      if (option.selected !== selected) {\n        option.selected = selected;\n      }\n    } else {\n      if (looseEqual(getValue(option), value)) {\n        if (el.selectedIndex !== i) {\n          el.selectedIndex = i;\n        }\n        return\n      }\n    }\n  }\n  if (!isMultiple) {\n    el.selectedIndex = -1;\n  }\n}\n\nfunction hasNoMatchingOption (value, options) {\n  return options.every(function (o) { return !looseEqual(o, value); })\n}\n\nfunction getValue (option) {\n  return '_value' in option\n    ? option._value\n    : option.value\n}\n\nfunction onCompositionStart (e) {\n  e.target.composing = true;\n}\n\nfunction onCompositionEnd (e) {\n  // prevent triggering an input event for no reason\n  if (!e.target.composing) { return }\n  e.target.composing = false;\n  trigger(e.target, 'input');\n}\n\nfunction trigger (el, type) {\n  var e = document.createEvent('HTMLEvents');\n  e.initEvent(type, true, true);\n  el.dispatchEvent(e);\n}\n\n/*  */\n\n// recursively search for possible transition defined inside the component root\nfunction locateNode (vnode) {\n  return vnode.componentInstance && (!vnode.data || !vnode.data.transition)\n    ? locateNode(vnode.componentInstance._vnode)\n    : vnode\n}\n\nvar show = {\n  bind: function bind (el, ref, vnode) {\n    var value = ref.value;\n\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    var originalDisplay = el.__vOriginalDisplay =\n      el.style.display === 'none' ? '' : el.style.display;\n    if (value && transition$$1) {\n      vnode.data.show = true;\n      enter(vnode, function () {\n        el.style.display = originalDisplay;\n      });\n    } else {\n      el.style.display = value ? originalDisplay : 'none';\n    }\n  },\n\n  update: function update (el, ref, vnode) {\n    var value = ref.value;\n    var oldValue = ref.oldValue;\n\n    /* istanbul ignore if */\n    if (!value === !oldValue) { return }\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    if (transition$$1) {\n      vnode.data.show = true;\n      if (value) {\n        enter(vnode, function () {\n          el.style.display = el.__vOriginalDisplay;\n        });\n      } else {\n        leave(vnode, function () {\n          el.style.display = 'none';\n        });\n      }\n    } else {\n      el.style.display = value ? el.__vOriginalDisplay : 'none';\n    }\n  },\n\n  unbind: function unbind (\n    el,\n    binding,\n    vnode,\n    oldVnode,\n    isDestroy\n  ) {\n    if (!isDestroy) {\n      el.style.display = el.__vOriginalDisplay;\n    }\n  }\n};\n\nvar platformDirectives = {\n  model: directive,\n  show: show\n};\n\n/*  */\n\nvar transitionProps = {\n  name: String,\n  appear: Boolean,\n  css: Boolean,\n  mode: String,\n  type: String,\n  enterClass: String,\n  leaveClass: String,\n  enterToClass: String,\n  leaveToClass: String,\n  enterActiveClass: String,\n  leaveActiveClass: String,\n  appearClass: String,\n  appearActiveClass: String,\n  appearToClass: String,\n  duration: [Number, String, Object]\n};\n\n// in case the child is also an abstract component, e.g. <keep-alive>\n// we want to recursively retrieve the real component to be rendered\nfunction getRealChild (vnode) {\n  var compOptions = vnode && vnode.componentOptions;\n  if (compOptions && compOptions.Ctor.options.abstract) {\n    return getRealChild(getFirstComponentChild(compOptions.children))\n  } else {\n    return vnode\n  }\n}\n\nfunction extractTransitionData (comp) {\n  var data = {};\n  var options = comp.$options;\n  // props\n  for (var key in options.propsData) {\n    data[key] = comp[key];\n  }\n  // events.\n  // extract listeners and pass them directly to the transition methods\n  var listeners = options._parentListeners;\n  for (var key$1 in listeners) {\n    data[camelize(key$1)] = listeners[key$1];\n  }\n  return data\n}\n\nfunction placeholder (h, rawChild) {\n  if (/\\d-keep-alive$/.test(rawChild.tag)) {\n    return h('keep-alive', {\n      props: rawChild.componentOptions.propsData\n    })\n  }\n}\n\nfunction hasParentTransition (vnode) {\n  while ((vnode = vnode.parent)) {\n    if (vnode.data.transition) {\n      return true\n    }\n  }\n}\n\nfunction isSameChild (child, oldChild) {\n  return oldChild.key === child.key && oldChild.tag === child.tag\n}\n\nvar isNotTextNode = function (c) { return c.tag || isAsyncPlaceholder(c); };\n\nvar isVShowDirective = function (d) { return d.name === 'show'; };\n\nvar Transition = {\n  name: 'transition',\n  props: transitionProps,\n  abstract: true,\n\n  render: function render (h) {\n    var this$1 = this;\n\n    var children = this.$slots.default;\n    if (!children) {\n      return\n    }\n\n    // filter out text nodes (possible whitespaces)\n    children = children.filter(isNotTextNode);\n    /* istanbul ignore if */\n    if (!children.length) {\n      return\n    }\n\n    // warn multiple elements\n    if (process.env.NODE_ENV !== 'production' && children.length > 1) {\n      warn(\n        '<transition> can only be used on a single element. Use ' +\n        '<transition-group> for lists.',\n        this.$parent\n      );\n    }\n\n    var mode = this.mode;\n\n    // warn invalid mode\n    if (process.env.NODE_ENV !== 'production' &&\n      mode && mode !== 'in-out' && mode !== 'out-in'\n    ) {\n      warn(\n        'invalid <transition> mode: ' + mode,\n        this.$parent\n      );\n    }\n\n    var rawChild = children[0];\n\n    // if this is a component root node and the component's\n    // parent container node also has transition, skip.\n    if (hasParentTransition(this.$vnode)) {\n      return rawChild\n    }\n\n    // apply transition data to child\n    // use getRealChild() to ignore abstract components e.g. keep-alive\n    var child = getRealChild(rawChild);\n    /* istanbul ignore if */\n    if (!child) {\n      return rawChild\n    }\n\n    if (this._leaving) {\n      return placeholder(h, rawChild)\n    }\n\n    // ensure a key that is unique to the vnode type and to this transition\n    // component instance. This key will be used to remove pending leaving nodes\n    // during entering.\n    var id = \"__transition-\" + (this._uid) + \"-\";\n    child.key = child.key == null\n      ? child.isComment\n        ? id + 'comment'\n        : id + child.tag\n      : isPrimitive(child.key)\n        ? (String(child.key).indexOf(id) === 0 ? child.key : id + child.key)\n        : child.key;\n\n    var data = (child.data || (child.data = {})).transition = extractTransitionData(this);\n    var oldRawChild = this._vnode;\n    var oldChild = getRealChild(oldRawChild);\n\n    // mark v-show\n    // so that the transition module can hand over the control to the directive\n    if (child.data.directives && child.data.directives.some(isVShowDirective)) {\n      child.data.show = true;\n    }\n\n    if (\n      oldChild &&\n      oldChild.data &&\n      !isSameChild(child, oldChild) &&\n      !isAsyncPlaceholder(oldChild) &&\n      // #6687 component root is a comment node\n      !(oldChild.componentInstance && oldChild.componentInstance._vnode.isComment)\n    ) {\n      // replace old child transition data with fresh one\n      // important for dynamic transitions!\n      var oldData = oldChild.data.transition = extend({}, data);\n      // handle transition mode\n      if (mode === 'out-in') {\n        // return placeholder node and queue update when leave finishes\n        this._leaving = true;\n        mergeVNodeHook(oldData, 'afterLeave', function () {\n          this$1._leaving = false;\n          this$1.$forceUpdate();\n        });\n        return placeholder(h, rawChild)\n      } else if (mode === 'in-out') {\n        if (isAsyncPlaceholder(child)) {\n          return oldRawChild\n        }\n        var delayedLeave;\n        var performLeave = function () { delayedLeave(); };\n        mergeVNodeHook(data, 'afterEnter', performLeave);\n        mergeVNodeHook(data, 'enterCancelled', performLeave);\n        mergeVNodeHook(oldData, 'delayLeave', function (leave) { delayedLeave = leave; });\n      }\n    }\n\n    return rawChild\n  }\n};\n\n/*  */\n\nvar props = extend({\n  tag: String,\n  moveClass: String\n}, transitionProps);\n\ndelete props.mode;\n\nvar TransitionGroup = {\n  props: props,\n\n  beforeMount: function beforeMount () {\n    var this$1 = this;\n\n    var update = this._update;\n    this._update = function (vnode, hydrating) {\n      var restoreActiveInstance = setActiveInstance(this$1);\n      // force removing pass\n      this$1.__patch__(\n        this$1._vnode,\n        this$1.kept,\n        false, // hydrating\n        true // removeOnly (!important, avoids unnecessary moves)\n      );\n      this$1._vnode = this$1.kept;\n      restoreActiveInstance();\n      update.call(this$1, vnode, hydrating);\n    };\n  },\n\n  render: function render (h) {\n    var tag = this.tag || this.$vnode.data.tag || 'span';\n    var map = Object.create(null);\n    var prevChildren = this.prevChildren = this.children;\n    var rawChildren = this.$slots.default || [];\n    var children = this.children = [];\n    var transitionData = extractTransitionData(this);\n\n    for (var i = 0; i < rawChildren.length; i++) {\n      var c = rawChildren[i];\n      if (c.tag) {\n        if (c.key != null && String(c.key).indexOf('__vlist') !== 0) {\n          children.push(c);\n          map[c.key] = c\n          ;(c.data || (c.data = {})).transition = transitionData;\n        } else if (process.env.NODE_ENV !== 'production') {\n          var opts = c.componentOptions;\n          var name = opts ? (opts.Ctor.options.name || opts.tag || '') : c.tag;\n          warn((\"<transition-group> children must be keyed: <\" + name + \">\"));\n        }\n      }\n    }\n\n    if (prevChildren) {\n      var kept = [];\n      var removed = [];\n      for (var i$1 = 0; i$1 < prevChildren.length; i$1++) {\n        var c$1 = prevChildren[i$1];\n        c$1.data.transition = transitionData;\n        c$1.data.pos = c$1.elm.getBoundingClientRect();\n        if (map[c$1.key]) {\n          kept.push(c$1);\n        } else {\n          removed.push(c$1);\n        }\n      }\n      this.kept = h(tag, null, kept);\n      this.removed = removed;\n    }\n\n    return h(tag, null, children)\n  },\n\n  updated: function updated () {\n    var children = this.prevChildren;\n    var moveClass = this.moveClass || ((this.name || 'v') + '-move');\n    if (!children.length || !this.hasMove(children[0].elm, moveClass)) {\n      return\n    }\n\n    // we divide the work into three loops to avoid mixing DOM reads and writes\n    // in each iteration - which helps prevent layout thrashing.\n    children.forEach(callPendingCbs);\n    children.forEach(recordPosition);\n    children.forEach(applyTranslation);\n\n    // force reflow to put everything in position\n    // assign to this to avoid being removed in tree-shaking\n    // $flow-disable-line\n    this._reflow = document.body.offsetHeight;\n\n    children.forEach(function (c) {\n      if (c.data.moved) {\n        var el = c.elm;\n        var s = el.style;\n        addTransitionClass(el, moveClass);\n        s.transform = s.WebkitTransform = s.transitionDuration = '';\n        el.addEventListener(transitionEndEvent, el._moveCb = function cb (e) {\n          if (e && e.target !== el) {\n            return\n          }\n          if (!e || /transform$/.test(e.propertyName)) {\n            el.removeEventListener(transitionEndEvent, cb);\n            el._moveCb = null;\n            removeTransitionClass(el, moveClass);\n          }\n        });\n      }\n    });\n  },\n\n  methods: {\n    hasMove: function hasMove (el, moveClass) {\n      /* istanbul ignore if */\n      if (!hasTransition) {\n        return false\n      }\n      /* istanbul ignore if */\n      if (this._hasMove) {\n        return this._hasMove\n      }\n      // Detect whether an element with the move class applied has\n      // CSS transitions. Since the element may be inside an entering\n      // transition at this very moment, we make a clone of it and remove\n      // all other transition classes applied to ensure only the move class\n      // is applied.\n      var clone = el.cloneNode();\n      if (el._transitionClasses) {\n        el._transitionClasses.forEach(function (cls) { removeClass(clone, cls); });\n      }\n      addClass(clone, moveClass);\n      clone.style.display = 'none';\n      this.$el.appendChild(clone);\n      var info = getTransitionInfo(clone);\n      this.$el.removeChild(clone);\n      return (this._hasMove = info.hasTransform)\n    }\n  }\n};\n\nfunction callPendingCbs (c) {\n  /* istanbul ignore if */\n  if (c.elm._moveCb) {\n    c.elm._moveCb();\n  }\n  /* istanbul ignore if */\n  if (c.elm._enterCb) {\n    c.elm._enterCb();\n  }\n}\n\nfunction recordPosition (c) {\n  c.data.newPos = c.elm.getBoundingClientRect();\n}\n\nfunction applyTranslation (c) {\n  var oldPos = c.data.pos;\n  var newPos = c.data.newPos;\n  var dx = oldPos.left - newPos.left;\n  var dy = oldPos.top - newPos.top;\n  if (dx || dy) {\n    c.data.moved = true;\n    var s = c.elm.style;\n    s.transform = s.WebkitTransform = \"translate(\" + dx + \"px,\" + dy + \"px)\";\n    s.transitionDuration = '0s';\n  }\n}\n\nvar platformComponents = {\n  Transition: Transition,\n  TransitionGroup: TransitionGroup\n};\n\n/*  */\n\n// install platform specific utils\nVue.config.mustUseProp = mustUseProp;\nVue.config.isReservedTag = isReservedTag;\nVue.config.isReservedAttr = isReservedAttr;\nVue.config.getTagNamespace = getTagNamespace;\nVue.config.isUnknownElement = isUnknownElement;\n\n// install platform runtime directives & components\nextend(Vue.options.directives, platformDirectives);\nextend(Vue.options.components, platformComponents);\n\n// install platform patch function\nVue.prototype.__patch__ = inBrowser ? patch : noop;\n\n// public mount method\nVue.prototype.$mount = function (\n  el,\n  hydrating\n) {\n  el = el && inBrowser ? query(el) : undefined;\n  return mountComponent(this, el, hydrating)\n};\n\n// devtools global hook\n/* istanbul ignore next */\nif (inBrowser) {\n  setTimeout(function () {\n    if (config.devtools) {\n      if (devtools) {\n        devtools.emit('init', Vue);\n      } else if (\n        process.env.NODE_ENV !== 'production' &&\n        process.env.NODE_ENV !== 'test'\n      ) {\n        console[console.info ? 'info' : 'log'](\n          'Download the Vue Devtools extension for a better development experience:\\n' +\n          'https://github.com/vuejs/vue-devtools'\n        );\n      }\n    }\n    if (process.env.NODE_ENV !== 'production' &&\n      process.env.NODE_ENV !== 'test' &&\n      config.productionTip !== false &&\n      typeof console !== 'undefined'\n    ) {\n      console[console.info ? 'info' : 'log'](\n        \"You are running Vue in development mode.\\n\" +\n        \"Make sure to turn on production mode when deploying for production.\\n\" +\n        \"See more tips at https://vuejs.org/guide/deployment.html\"\n      );\n    }\n  }, 0);\n}\n\n/*  */\n\nexport default Vue;\n","/*!\n  * vuefire v2.2.5\n  * (c) 2020 Eduardo San Martin Morote\n  * @license MIT\n  */\n/**\r\n * Walks a path inside an object\r\n * walkGet({ a: { b: true }}), 'a.b') -> true\r\n * @param obj\r\n * @param path\r\n */\r\nfunction walkGet(obj, path) {\r\n    // TODO: development warning when target[key] does not exist\r\n    return path.split('.').reduce(function (target, key) { return target[key]; }, obj);\r\n}\r\n/**\r\n * Deeply set a property in an object with a string path\r\n * walkSet({ a: { b: true }}, 'a.b', false)\r\n * @param obj\r\n * @param path\r\n * @param value\r\n * @returns an array with the element that was replaced or the value that was set\r\n */\r\nfunction walkSet(obj, path, value) {\r\n    // path can be a number\r\n    var keys = ('' + path).split('.');\r\n    var key = keys.pop(); // split will produce at least one element array\r\n    var target = keys.reduce(function (target, key) {\r\n        // TODO: dev errors\r\n        return target[key];\r\n    }, obj);\r\n    return Array.isArray(target) ? target.splice(Number(key), 1, value) : (target[key] = value);\r\n}\r\n/**\r\n * Checks if a variable is an object\r\n * @param o\r\n */\r\nfunction isObject(o) {\r\n    return o && typeof o === 'object';\r\n}\r\n/**\r\n * Checks if a variable is a Date\r\n * @param o\r\n */\r\nfunction isTimestamp(o) {\r\n    return o.toDate;\r\n}\r\n/**\r\n * Checks if a variable is a Firestore Document Reference\r\n * @param o\r\n */\r\nfunction isDocumentRef(o) {\r\n    return o && o.onSnapshot;\r\n}\r\n/**\r\n * Wraps a function so it gets called only once\r\n * @param fn Function to be called once\r\n * @param argFn Function to compute the argument passed to fn\r\n */\r\nfunction callOnceWithArg(fn, argFn) {\r\n    /** @type {boolean | undefined} */\r\n    var called = false;\r\n    return function () {\r\n        if (!called) {\r\n            called = true;\r\n            return fn(argFn());\r\n        }\r\n    };\r\n}\n\n/**\r\n * Convert firebase RTDB snapshot into a bindable data record.\r\n *\r\n * @param snapshot\r\n * @return\r\n */\r\nfunction createRecordFromRTDBSnapshot(snapshot) {\r\n    var value = snapshot.val();\r\n    var res = isObject(value) ? value : Object.defineProperty({}, '.value', { value: value });\r\n    // if (isObject(value)) {\r\n    //   res = value\r\n    // } else {\r\n    //   res = {}\r\n    //   Object.defineProperty(res, '.value', { value })\r\n    // }\r\n    Object.defineProperty(res, '.key', { value: snapshot.key });\r\n    return res;\r\n}\r\n/**\r\n * Find the index for an object with given key.\r\n *\r\n * @param array\r\n * @param key\r\n * @return the index where the key was found\r\n */\r\nfunction indexForKey(array, key) {\r\n    for (var i = 0; i < array.length; i++) {\r\n        if (array[i]['.key'] === key)\r\n            return i;\r\n    }\r\n    return -1;\r\n}\n\nvar DEFAULT_OPTIONS = {\r\n    reset: true,\r\n    serialize: createRecordFromRTDBSnapshot,\r\n    wait: false,\r\n};\r\n/**\r\n * Binds a RTDB reference as an object\r\n * @param param0\r\n * @param options\r\n * @returns a function to be called to stop listeninng for changes\r\n */\r\nfunction rtdbBindAsObject(_a, extraOptions) {\r\n    var vm = _a.vm, key = _a.key, document = _a.document, resolve = _a.resolve, reject = _a.reject, ops = _a.ops;\r\n    if (extraOptions === void 0) { extraOptions = DEFAULT_OPTIONS; }\r\n    var options = Object.assign({}, DEFAULT_OPTIONS, extraOptions);\r\n    var listener = document.on('value', function (snapshot) {\r\n        ops.set(vm, key, options.serialize(snapshot));\r\n    }, reject);\r\n    document.once('value', resolve);\r\n    return function (reset) {\r\n        document.off('value', listener);\r\n        if (reset !== false) {\r\n            var value = typeof reset === 'function' ? reset() : null;\r\n            ops.set(vm, key, value);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Binds a RTDB reference or query as an array\r\n * @param param0\r\n * @param options\r\n * @returns a function to be called to stop listeninng for changes\r\n */\r\nfunction rtdbBindAsArray(_a, extraOptions) {\r\n    var vm = _a.vm, key = _a.key, collection = _a.collection, resolve = _a.resolve, reject = _a.reject, ops = _a.ops;\r\n    if (extraOptions === void 0) { extraOptions = DEFAULT_OPTIONS; }\r\n    var options = Object.assign({}, DEFAULT_OPTIONS, extraOptions);\r\n    var array = options.wait ? [] : ops.set(vm, key, []);\r\n    var childAdded = collection.on('child_added', function (snapshot, prevKey) {\r\n        var index = prevKey ? indexForKey(array, prevKey) + 1 : 0;\r\n        ops.add(array, index, options.serialize(snapshot));\r\n    }, reject);\r\n    var childRemoved = collection.on('child_removed', function (snapshot) {\r\n        ops.remove(array, indexForKey(array, snapshot.key));\r\n    }, reject);\r\n    var childChanged = collection.on('child_changed', function (snapshot) {\r\n        ops.set(array, indexForKey(array, snapshot.key), options.serialize(snapshot));\r\n    }, reject);\r\n    var childMoved = collection.on('child_moved', function (snapshot, prevKey) {\r\n        var index = indexForKey(array, snapshot.key);\r\n        var oldRecord = ops.remove(array, index)[0];\r\n        var newIndex = prevKey ? indexForKey(array, prevKey) + 1 : 0;\r\n        ops.add(array, newIndex, oldRecord);\r\n    }, reject);\r\n    collection.once('value', function (data) {\r\n        if (options.wait)\r\n            ops.set(vm, key, array);\r\n        resolve(data);\r\n    });\r\n    return function (reset) {\r\n        collection.off('child_added', childAdded);\r\n        collection.off('child_changed', childChanged);\r\n        collection.off('child_removed', childRemoved);\r\n        collection.off('child_moved', childMoved);\r\n        if (reset !== false) {\r\n            var value = typeof reset === 'function' ? reset() : [];\r\n            ops.set(vm, key, value);\r\n        }\r\n    };\r\n}\n\n// TODO: fix type not to be any\r\nfunction createSnapshot(doc) {\r\n    // TODO: it should create a deep copy instead because otherwise we will modify internal data\r\n    // defaults everything to false, so no need to set\r\n    return Object.defineProperty(doc.data() || {}, 'id', { value: doc.id });\r\n}\r\nfunction extractRefs(doc, oldDoc, subs) {\r\n    var dataAndRefs = [{}, {}];\r\n    var subsByPath = Object.keys(subs).reduce(function (resultSubs, subKey) {\r\n        var sub = subs[subKey];\r\n        resultSubs[sub.path] = sub.data();\r\n        return resultSubs;\r\n    }, {});\r\n    function recursiveExtract(doc, oldDoc, path, result) {\r\n        // make it easier to later on access the value\r\n        oldDoc = oldDoc || {};\r\n        var data = result[0], refs = result[1];\r\n        // Add all properties that are not enumerable (not visible in the for loop)\r\n        // getOwnPropertyDescriptors does not exist on IE\r\n        Object.getOwnPropertyNames(doc).forEach(function (propertyName) {\r\n            var descriptor = Object.getOwnPropertyDescriptor(doc, propertyName);\r\n            if (descriptor && !descriptor.enumerable) {\r\n                Object.defineProperty(data, propertyName, descriptor);\r\n            }\r\n        });\r\n        // recursively traverse doc to copy values and extract references\r\n        for (var key in doc) {\r\n            var ref = doc[key];\r\n            if (\r\n            // primitives\r\n            ref == null ||\r\n                // Firestore < 4.13\r\n                ref instanceof Date ||\r\n                isTimestamp(ref) ||\r\n                (ref.longitude && ref.latitude) // GeoPoint\r\n            ) {\r\n                data[key] = ref;\r\n            }\r\n            else if (isDocumentRef(ref)) {\r\n                // allow values to be null (like non-existant refs)\r\n                // TODO: better typing since this isObject shouldn't be necessary but it doesn't work\r\n                data[key] =\r\n                    typeof oldDoc === 'object' &&\r\n                        key in oldDoc &&\r\n                        // only copy refs if they were refs before\r\n                        // https://github.com/vuejs/vuefire/issues/831\r\n                        typeof oldDoc[key] != 'string'\r\n                        ? oldDoc[key]\r\n                        : ref.path;\r\n                // TODO: handle subpathes?\r\n                refs[path + key] = ref;\r\n            }\r\n            else if (Array.isArray(ref)) {\r\n                data[key] = Array(ref.length);\r\n                // fill existing refs into data but leave the rest empty\r\n                for (var i = 0; i < ref.length; i++) {\r\n                    var newRef = ref[i];\r\n                    // TODO: this only works with array of primitives but not with nested properties like objects with References\r\n                    if (newRef && newRef.path in subsByPath)\r\n                        data[key][i] = subsByPath[newRef.path];\r\n                }\r\n                // the oldArray is in this case the same array with holes unless the array already existed\r\n                recursiveExtract(ref, oldDoc[key] || data[key], path + key + '.', [data[key], refs]);\r\n            }\r\n            else if (isObject(ref)) {\r\n                data[key] = {};\r\n                recursiveExtract(ref, oldDoc[key], path + key + '.', [data[key], refs]);\r\n            }\r\n            else {\r\n                data[key] = ref;\r\n            }\r\n        }\r\n    }\r\n    recursiveExtract(doc, oldDoc, '', dataAndRefs);\r\n    return dataAndRefs;\r\n}\n\nvar DEFAULT_OPTIONS$1 = {\r\n    maxRefDepth: 2,\r\n    reset: true,\r\n    serialize: createSnapshot,\r\n    wait: false,\r\n};\r\nfunction unsubscribeAll(subs) {\r\n    for (var sub in subs) {\r\n        subs[sub].unsub();\r\n    }\r\n}\r\nfunction updateDataFromDocumentSnapshot(options, target, path, snapshot, subs, ops, depth, resolve) {\r\n    var _a = extractRefs(options.serialize(snapshot), walkGet(target, path), subs), data = _a[0], refs = _a[1];\r\n    ops.set(target, path, data);\r\n    subscribeToRefs(options, target, path, subs, refs, ops, depth, resolve);\r\n}\r\nfunction subscribeToDocument(_a, options) {\r\n    var ref = _a.ref, target = _a.target, path = _a.path, depth = _a.depth, resolve = _a.resolve, ops = _a.ops;\r\n    var subs = Object.create(null);\r\n    var unbind = ref.onSnapshot(function (snapshot) {\r\n        if (snapshot.exists) {\r\n            updateDataFromDocumentSnapshot(options, target, path, snapshot, subs, ops, depth, resolve);\r\n        }\r\n        else {\r\n            ops.set(target, path, null);\r\n            resolve();\r\n        }\r\n    });\r\n    return function () {\r\n        unbind();\r\n        unsubscribeAll(subs);\r\n    };\r\n}\r\n// NOTE: not convinced by the naming of subscribeToRefs and subscribeToDocument\r\n// first one is calling the other on every ref and subscribeToDocument may call\r\n// updateDataFromDocumentSnapshot which may call subscribeToRefs as well\r\nfunction subscribeToRefs(options, target, path, subs, refs, ops, depth, resolve) {\r\n    var refKeys = Object.keys(refs);\r\n    var missingKeys = Object.keys(subs).filter(function (refKey) { return refKeys.indexOf(refKey) < 0; });\r\n    // unbind keys that are no longer there\r\n    missingKeys.forEach(function (refKey) {\r\n        subs[refKey].unsub();\r\n        delete subs[refKey];\r\n    });\r\n    if (!refKeys.length || ++depth > options.maxRefDepth)\r\n        return resolve(path);\r\n    var resolvedCount = 0;\r\n    var totalToResolve = refKeys.length;\r\n    var validResolves = Object.create(null);\r\n    function deepResolve(key) {\r\n        if (key in validResolves) {\r\n            if (++resolvedCount >= totalToResolve)\r\n                resolve(path);\r\n        }\r\n    }\r\n    refKeys.forEach(function (refKey) {\r\n        var sub = subs[refKey];\r\n        var ref = refs[refKey];\r\n        var docPath = path + \".\" + refKey;\r\n        validResolves[docPath] = true;\r\n        // unsubscribe if bound to a different ref\r\n        if (sub) {\r\n            if (sub.path !== ref.path)\r\n                sub.unsub();\r\n            // if has already be bound and as we always walk the objects, it will work\r\n            else\r\n                return;\r\n        }\r\n        subs[refKey] = {\r\n            data: function () { return walkGet(target, docPath); },\r\n            unsub: subscribeToDocument({\r\n                ref: ref,\r\n                target: target,\r\n                path: docPath,\r\n                depth: depth,\r\n                ops: ops,\r\n                resolve: deepResolve.bind(null, docPath),\r\n            }, options),\r\n            path: ref.path,\r\n        };\r\n    });\r\n}\r\n// TODO: refactor without using an object to improve size like the other functions\r\nfunction bindCollection(_a, extraOptions) {\r\n    var vm = _a.vm, key = _a.key, collection = _a.collection, ops = _a.ops, resolve = _a.resolve, reject = _a.reject;\r\n    if (extraOptions === void 0) { extraOptions = DEFAULT_OPTIONS$1; }\r\n    var options = Object.assign({}, DEFAULT_OPTIONS$1, extraOptions); // fill default values\r\n    // TODO support pathes? nested.obj.list (walkSet)\r\n    var array = options.wait ? [] : ops.set(vm, key, []);\r\n    var originalResolve = resolve;\r\n    var isResolved;\r\n    // contain ref subscriptions of objects\r\n    // arraySubs is a mirror of array\r\n    var arraySubs = [];\r\n    var change = {\r\n        added: function (_a) {\r\n            var newIndex = _a.newIndex, doc = _a.doc;\r\n            arraySubs.splice(newIndex, 0, Object.create(null));\r\n            var subs = arraySubs[newIndex];\r\n            var _b = extractRefs(options.serialize(doc), undefined, subs), data = _b[0], refs = _b[1];\r\n            ops.add(array, newIndex, data);\r\n            subscribeToRefs(options, array, newIndex, subs, refs, ops, 0, resolve.bind(null, doc));\r\n        },\r\n        modified: function (_a) {\r\n            var oldIndex = _a.oldIndex, newIndex = _a.newIndex, doc = _a.doc;\r\n            var subs = arraySubs[oldIndex];\r\n            var oldData = array[oldIndex];\r\n            var _b = extractRefs(options.serialize(doc), oldData, subs), data = _b[0], refs = _b[1];\r\n            // only move things around after extracting refs\r\n            // only move things around after extracting refs\r\n            arraySubs.splice(newIndex, 0, subs);\r\n            ops.remove(array, oldIndex);\r\n            ops.add(array, newIndex, data);\r\n            subscribeToRefs(options, array, newIndex, subs, refs, ops, 0, resolve);\r\n        },\r\n        removed: function (_a) {\r\n            var oldIndex = _a.oldIndex;\r\n            ops.remove(array, oldIndex);\r\n            unsubscribeAll(arraySubs.splice(oldIndex, 1)[0]);\r\n        },\r\n    };\r\n    var unbind = collection.onSnapshot(function (snapshot) {\r\n        // console.log('pending', metadata.hasPendingWrites)\r\n        // docs.forEach(d => console.log('doc', d, '\\n', 'data', d.data()))\r\n        // NOTE: this will only be triggered once and it will be with all the documents\r\n        // from the query appearing as added\r\n        // (https://firebase.google.com/docs/firestore/query-data/listen#view_changes_between_snapshots)\r\n        var docChanges = \r\n        /* istanbul ignore next */\r\n        typeof snapshot.docChanges === 'function'\r\n            ? snapshot.docChanges()\r\n            : /* istanbul ignore next to support firebase < 5*/\r\n                snapshot.docChanges;\r\n        if (!isResolved && docChanges.length) {\r\n            // isResolved is only meant to make sure we do the check only once\r\n            isResolved = true;\r\n            var count_1 = 0;\r\n            var expectedItems_1 = docChanges.length;\r\n            var validDocs_1 = Object.create(null);\r\n            for (var i = 0; i < expectedItems_1; i++) {\r\n                validDocs_1[docChanges[i].doc.id] = true;\r\n            }\r\n            resolve = function (_a) {\r\n                var id = _a.id;\r\n                if (id in validDocs_1) {\r\n                    if (++count_1 >= expectedItems_1) {\r\n                        // if wait is true, finally set the array\r\n                        if (options.wait)\r\n                            ops.set(vm, key, array);\r\n                        originalResolve(vm[key]);\r\n                        // reset resolve to noop\r\n                        resolve = function () { };\r\n                    }\r\n                }\r\n            };\r\n        }\r\n        docChanges.forEach(function (c) {\r\n            change[c.type](c);\r\n        });\r\n        // resolves when array is empty\r\n        // since this can only happen once, there is no need to guard against it\r\n        // being called multiple times\r\n        if (!docChanges.length) {\r\n            if (options.wait)\r\n                ops.set(vm, key, array);\r\n            resolve(array);\r\n        }\r\n    }, reject);\r\n    return function (reset) {\r\n        unbind();\r\n        if (reset !== false) {\r\n            var value = typeof reset === 'function' ? reset() : [];\r\n            ops.set(vm, key, value);\r\n        }\r\n        arraySubs.forEach(unsubscribeAll);\r\n    };\r\n}\r\n/**\r\n * Binds a Document to a property of vm\r\n * @param param0\r\n * @param extraOptions\r\n */\r\nfunction bindDocument(_a, extraOptions) {\r\n    var vm = _a.vm, key = _a.key, document = _a.document, resolve = _a.resolve, reject = _a.reject, ops = _a.ops;\r\n    if (extraOptions === void 0) { extraOptions = DEFAULT_OPTIONS$1; }\r\n    var options = Object.assign({}, DEFAULT_OPTIONS$1, extraOptions); // fill default values\r\n    // TODO: warning check if key exists?\r\n    // const boundRefs = Object.create(null)\r\n    var subs = Object.create(null);\r\n    // bind here the function so it can be resolved anywhere\r\n    // this is specially useful for refs\r\n    resolve = callOnceWithArg(resolve, function () { return walkGet(vm, key); });\r\n    var unbind = document.onSnapshot(function (snapshot) {\r\n        if (snapshot.exists) {\r\n            updateDataFromDocumentSnapshot(options, vm, key, snapshot, subs, ops, 0, resolve);\r\n        }\r\n        else {\r\n            ops.set(vm, key, null);\r\n            resolve(null);\r\n        }\r\n    }, reject);\r\n    return function (reset) {\r\n        unbind();\r\n        if (reset !== false) {\r\n            var value = typeof reset === 'function' ? reset() : null;\r\n            ops.set(vm, key, value);\r\n        }\r\n        unsubscribeAll(subs);\r\n    };\r\n}\n\n/**\r\n * Returns the original reference of a Firebase reference or query across SDK versions.\r\n *\r\n * @param {firebase.firebase.database.Reference|firebase.firebase.database.Query} refOrQuery\r\n * @return {firebase.firebase.database.Reference}\r\n */\r\nfunction getRef(refOrQuery) {\r\n    return refOrQuery.ref;\r\n}\r\nvar ops = {\r\n    set: function (target, key, value) { return walkSet(target, key, value); },\r\n    add: function (array, index, data) { return array.splice(index, 0, data); },\r\n    remove: function (array, index) { return array.splice(index, 1); },\r\n};\r\nfunction bind(vm, key, source, options) {\r\n    return new Promise(function (resolve, reject) {\r\n        var unbind;\r\n        if (Array.isArray(vm[key])) {\r\n            unbind = rtdbBindAsArray({\r\n                vm: vm,\r\n                key: key,\r\n                collection: source,\r\n                resolve: resolve,\r\n                reject: reject,\r\n                ops: ops,\r\n            }, options);\r\n        }\r\n        else {\r\n            unbind = rtdbBindAsObject({\r\n                vm: vm,\r\n                key: key,\r\n                document: source,\r\n                resolve: resolve,\r\n                reject: reject,\r\n                ops: ops,\r\n            }, options);\r\n        }\r\n        vm._firebaseUnbinds[key] = unbind;\r\n    });\r\n}\r\nfunction unbind(vm, key, reset) {\r\n    vm._firebaseUnbinds[key](reset);\r\n    delete vm._firebaseSources[key];\r\n    delete vm._firebaseUnbinds[key];\r\n}\r\nvar defaultOptions = {\r\n    bindName: '$rtdbBind',\r\n    unbindName: '$rtdbUnbind',\r\n    serialize: DEFAULT_OPTIONS.serialize,\r\n    reset: DEFAULT_OPTIONS.reset,\r\n    wait: DEFAULT_OPTIONS.wait,\r\n};\r\nvar rtdbPlugin = function rtdbPlugin(Vue, pluginOptions) {\r\n    if (pluginOptions === void 0) { pluginOptions = defaultOptions; }\r\n    var strategies = Vue.config.optionMergeStrategies;\r\n    strategies.firebase = strategies.provide;\r\n    var globalOptions = Object.assign({}, defaultOptions, pluginOptions);\r\n    var bindName = globalOptions.bindName, unbindName = globalOptions.unbindName;\r\n    Vue.prototype[unbindName] = function rtdbUnbind(key, reset) {\r\n        unbind(this, key, reset);\r\n    };\r\n    // add $rtdbBind and $rtdbUnbind methods\r\n    Vue.prototype[bindName] = function rtdbBind(key, source, userOptions) {\r\n        var options = Object.assign({}, globalOptions, userOptions);\r\n        if (this._firebaseUnbinds[key]) {\r\n            // @ts-ignore\r\n            this[unbindName](key, \r\n            // if wait, allow overriding with a function or reset, otherwise, force reset to false\r\n            // else pass the reset option\r\n            options.wait ? (typeof options.reset === 'function' ? options.reset : false) : options.reset);\r\n        }\r\n        var promise = bind(this, key, source, options);\r\n        // @ts-ignore\r\n        this._firebaseSources[key] = source;\r\n        // @ts-ignore\r\n        this.$firebaseRefs[key] = getRef(source);\r\n        return promise;\r\n    };\r\n    // handle firebase option\r\n    Vue.mixin({\r\n        beforeCreate: function () {\r\n            this.$firebaseRefs = Object.create(null);\r\n            this._firebaseSources = Object.create(null);\r\n            this._firebaseUnbinds = Object.create(null);\r\n        },\r\n        created: function () {\r\n            var bindings = this.$options.firebase;\r\n            if (typeof bindings === 'function')\r\n                bindings =\r\n                    // @ts-ignore\r\n                    bindings.call(this);\r\n            if (!bindings)\r\n                return;\r\n            for (var key in bindings) {\r\n                // @ts-ignore\r\n                this[bindName](key, bindings[key], globalOptions);\r\n            }\r\n        },\r\n        beforeDestroy: function () {\r\n            for (var key in this._firebaseUnbinds) {\r\n                this._firebaseUnbinds[key]();\r\n            }\r\n            // @ts-ignore\r\n            this._firebaseSources = null;\r\n            // @ts-ignore\r\n            this._firebaseUnbinds = null;\r\n            // @ts-ignore\r\n            this.$firebaseRefs = null;\r\n        },\r\n    });\r\n};\n\nvar ops$1 = {\r\n    set: function (target, key, value) { return walkSet(target, key, value); },\r\n    add: function (array, index, data) { return array.splice(index, 0, data); },\r\n    remove: function (array, index) { return array.splice(index, 1); },\r\n};\r\nfunction bind$1(vm, key, ref, ops, options) {\r\n    return new Promise(function (resolve, reject) {\r\n        var unbind;\r\n        if ('where' in ref) {\r\n            unbind = bindCollection({\r\n                vm: vm,\r\n                key: key,\r\n                ops: ops,\r\n                collection: ref,\r\n                resolve: resolve,\r\n                reject: reject,\r\n            }, options);\r\n        }\r\n        else {\r\n            unbind = bindDocument({\r\n                vm: vm,\r\n                key: key,\r\n                ops: ops,\r\n                document: ref,\r\n                resolve: resolve,\r\n                reject: reject,\r\n            }, options);\r\n        }\r\n        vm._firestoreUnbinds[key] = unbind;\r\n    });\r\n}\r\nvar defaultOptions$1 = {\r\n    bindName: '$bind',\r\n    unbindName: '$unbind',\r\n    serialize: DEFAULT_OPTIONS$1.serialize,\r\n    reset: DEFAULT_OPTIONS$1.reset,\r\n    wait: DEFAULT_OPTIONS$1.wait,\r\n};\r\nvar firestorePlugin = function firestorePlugin(Vue, pluginOptions) {\r\n    if (pluginOptions === void 0) { pluginOptions = defaultOptions$1; }\r\n    var strategies = Vue.config.optionMergeStrategies;\r\n    strategies.firestore = strategies.provide;\r\n    var globalOptions = Object.assign({}, defaultOptions$1, pluginOptions);\r\n    var bindName = globalOptions.bindName, unbindName = globalOptions.unbindName;\r\n    Vue.prototype[unbindName] = function firestoreUnbind(key, reset) {\r\n        this._firestoreUnbinds[key](reset);\r\n        delete this._firestoreUnbinds[key];\r\n        delete this.$firestoreRefs[key];\r\n    };\r\n    Vue.prototype[bindName] = function firestoreBind(key, ref, userOptions) {\r\n        var options = Object.assign({}, globalOptions, userOptions);\r\n        if (this._firestoreUnbinds[key]) {\r\n            this[unbindName](key, \r\n            // if wait, allow overriding with a function or reset, otherwise, force reset to false\r\n            // else pass the reset option\r\n            options.wait ? (typeof options.reset === 'function' ? options.reset : false) : options.reset);\r\n        }\r\n        var promise = bind$1(this, key, ref, ops$1, options);\r\n        // @ts-ignore we are allowed to write it\r\n        this.$firestoreRefs[key] = ref;\r\n        return promise;\r\n    };\r\n    Vue.mixin({\r\n        beforeCreate: function () {\r\n            this._firestoreUnbinds = Object.create(null);\r\n            this.$firestoreRefs = Object.create(null);\r\n        },\r\n        created: function () {\r\n            var firestore = this.$options.firestore;\r\n            var refs = typeof firestore === 'function' ? firestore.call(this) : firestore;\r\n            if (!refs)\r\n                return;\r\n            for (var key in refs) {\r\n                // @ts-ignore\r\n                this[bindName](key, refs[key], globalOptions);\r\n            }\r\n        },\r\n        beforeDestroy: function () {\r\n            for (var subKey in this._firestoreUnbinds) {\r\n                this._firestoreUnbinds[subKey]();\r\n            }\r\n            // @ts-ignore we are allowed to write it\r\n            this._firestoreUnbinds = null;\r\n            // @ts-ignore we are allowed to write it\r\n            this.$firestoreRefs = null;\r\n        },\r\n    });\r\n};\n\nexport { firestorePlugin, rtdbPlugin };\n","// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nmodule.exports = function installComponents (component, components) {\n  var options = typeof component.exports === 'function'\n    ? component.exports.extendOptions\n    : component.options\n\n  if (typeof component.exports === 'function') {\n    options.components = component.exports.options.components\n  }\n\n  options.components = options.components || {}\n\n  for (var i in components) {\n    options.components[i] = options.components[i] || components[i]\n  }\n}\n","import { ErrorFactory, contains, deepExtend, createSubscribe, isBrowser } from '@firebase/util';\nimport { Component } from '@firebase/component';\nimport * as modularAPIs from '@firebase/app';\nimport { _addComponent, deleteApp, _DEFAULT_ENTRY_NAME, _addOrOverwriteComponent, registerVersion } from '@firebase/app';\nimport { Logger } from '@firebase/logger';\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Global context object for a collection of services using\r\n * a shared authentication state.\r\n *\r\n * marked as internal because it references internal types exported from @firebase/app\r\n * @internal\r\n */\r\nclass FirebaseAppImpl {\r\n    constructor(_delegate, firebase) {\r\n        this._delegate = _delegate;\r\n        this.firebase = firebase;\r\n        // add itself to container\r\n        _addComponent(_delegate, new Component('app-compat', () => this, \"PUBLIC\" /* PUBLIC */));\r\n        this.container = _delegate.container;\r\n    }\r\n    get automaticDataCollectionEnabled() {\r\n        return this._delegate.automaticDataCollectionEnabled;\r\n    }\r\n    set automaticDataCollectionEnabled(val) {\r\n        this._delegate.automaticDataCollectionEnabled = val;\r\n    }\r\n    get name() {\r\n        return this._delegate.name;\r\n    }\r\n    get options() {\r\n        return this._delegate.options;\r\n    }\r\n    delete() {\r\n        return new Promise(resolve => {\r\n            this._delegate.checkDestroyed();\r\n            resolve();\r\n        }).then(() => {\r\n            this.firebase.INTERNAL.removeApp(this.name);\r\n            return deleteApp(this._delegate);\r\n        });\r\n    }\r\n    /**\r\n     * Return a service instance associated with this app (creating it\r\n     * on demand), identified by the passed instanceIdentifier.\r\n     *\r\n     * NOTE: Currently storage and functions are the only ones that are leveraging this\r\n     * functionality. They invoke it by calling:\r\n     *\r\n     * ```javascript\r\n     * firebase.app().storage('STORAGE BUCKET ID')\r\n     * ```\r\n     *\r\n     * The service name is passed to this already\r\n     * @internal\r\n     */\r\n    _getService(name, instanceIdentifier = _DEFAULT_ENTRY_NAME) {\r\n        var _a;\r\n        this._delegate.checkDestroyed();\r\n        // Initialize instance if InstatiationMode is `EXPLICIT`.\r\n        const provider = this._delegate.container.getProvider(name);\r\n        if (!provider.isInitialized() &&\r\n            ((_a = provider.getComponent()) === null || _a === void 0 ? void 0 : _a.instantiationMode) === \"EXPLICIT\" /* EXPLICIT */) {\r\n            provider.initialize();\r\n        }\r\n        // getImmediate will always succeed because _getService is only called for registered components.\r\n        return provider.getImmediate({\r\n            identifier: instanceIdentifier\r\n        });\r\n    }\r\n    /**\r\n     * Remove a service instance from the cache, so we will create a new instance for this service\r\n     * when people try to get it again.\r\n     *\r\n     * NOTE: currently only firestore uses this functionality to support firestore shutdown.\r\n     *\r\n     * @param name The service name\r\n     * @param instanceIdentifier instance identifier in case multiple instances are allowed\r\n     * @internal\r\n     */\r\n    _removeServiceInstance(name, instanceIdentifier = _DEFAULT_ENTRY_NAME) {\r\n        this._delegate.container\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            .getProvider(name)\r\n            .clearInstance(instanceIdentifier);\r\n    }\r\n    /**\r\n     * @param component the component being added to this app's container\r\n     * @internal\r\n     */\r\n    _addComponent(component) {\r\n        _addComponent(this._delegate, component);\r\n    }\r\n    _addOrOverwriteComponent(component) {\r\n        _addOrOverwriteComponent(this._delegate, component);\r\n    }\r\n    toJSON() {\r\n        return {\r\n            name: this.name,\r\n            automaticDataCollectionEnabled: this.automaticDataCollectionEnabled,\r\n            options: this.options\r\n        };\r\n    }\r\n}\r\n// TODO: investigate why the following needs to be commented out\r\n// Prevent dead-code elimination of these methods w/o invalid property\r\n// copying.\r\n// (FirebaseAppImpl.prototype.name && FirebaseAppImpl.prototype.options) ||\r\n//   FirebaseAppImpl.prototype.delete ||\r\n//   console.log('dc');\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERRORS = {\r\n    [\"no-app\" /* NO_APP */]: \"No Firebase App '{$appName}' has been created - \" +\r\n        'call Firebase App.initializeApp()',\r\n    [\"invalid-app-argument\" /* INVALID_APP_ARGUMENT */]: 'firebase.{$appName}() takes either no argument or a ' +\r\n        'Firebase App instance.'\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory('app-compat', 'Firebase', ERRORS);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Because auth can't share code with other components, we attach the utility functions\r\n * in an internal namespace to share code.\r\n * This function return a firebase namespace object without\r\n * any utility functions, so it can be shared between the regular firebaseNamespace and\r\n * the lite version.\r\n */\r\nfunction createFirebaseNamespaceCore(firebaseAppImpl) {\r\n    const apps = {};\r\n    // // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    // const components = new Map<string, Component<any>>();\r\n    // A namespace is a plain JavaScript Object.\r\n    const namespace = {\r\n        // Hack to prevent Babel from modifying the object returned\r\n        // as the firebase namespace.\r\n        // @ts-ignore\r\n        __esModule: true,\r\n        initializeApp: initializeAppCompat,\r\n        // @ts-ignore\r\n        app,\r\n        registerVersion: modularAPIs.registerVersion,\r\n        setLogLevel: modularAPIs.setLogLevel,\r\n        onLog: modularAPIs.onLog,\r\n        // @ts-ignore\r\n        apps: null,\r\n        SDK_VERSION: modularAPIs.SDK_VERSION,\r\n        INTERNAL: {\r\n            registerComponent: registerComponentCompat,\r\n            removeApp,\r\n            useAsService,\r\n            modularAPIs\r\n        }\r\n    };\r\n    // Inject a circular default export to allow Babel users who were previously\r\n    // using:\r\n    //\r\n    //   import firebase from 'firebase';\r\n    //   which becomes: var firebase = require('firebase').default;\r\n    //\r\n    // instead of\r\n    //\r\n    //   import * as firebase from 'firebase';\r\n    //   which becomes: var firebase = require('firebase');\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    namespace['default'] = namespace;\r\n    // firebase.apps is a read-only getter.\r\n    Object.defineProperty(namespace, 'apps', {\r\n        get: getApps\r\n    });\r\n    /**\r\n     * Called by App.delete() - but before any services associated with the App\r\n     * are deleted.\r\n     */\r\n    function removeApp(name) {\r\n        delete apps[name];\r\n    }\r\n    /**\r\n     * Get the App object for a given name (or DEFAULT).\r\n     */\r\n    function app(name) {\r\n        name = name || modularAPIs._DEFAULT_ENTRY_NAME;\r\n        if (!contains(apps, name)) {\r\n            throw ERROR_FACTORY.create(\"no-app\" /* NO_APP */, { appName: name });\r\n        }\r\n        return apps[name];\r\n    }\r\n    // @ts-ignore\r\n    app['App'] = firebaseAppImpl;\r\n    /**\r\n     * Create a new App instance (name must be unique).\r\n     *\r\n     * This function is idempotent. It can be called more than once and return the same instance using the same options and config.\r\n     */\r\n    function initializeAppCompat(options, rawConfig = {}) {\r\n        const app = modularAPIs.initializeApp(options, rawConfig);\r\n        if (contains(apps, app.name)) {\r\n            return apps[app.name];\r\n        }\r\n        const appCompat = new firebaseAppImpl(app, namespace);\r\n        apps[app.name] = appCompat;\r\n        return appCompat;\r\n    }\r\n    /*\r\n     * Return an array of all the non-deleted FirebaseApps.\r\n     */\r\n    function getApps() {\r\n        // Make a copy so caller cannot mutate the apps list.\r\n        return Object.keys(apps).map(name => apps[name]);\r\n    }\r\n    function registerComponentCompat(component) {\r\n        const componentName = component.name;\r\n        const componentNameWithoutCompat = componentName.replace('-compat', '');\r\n        if (modularAPIs._registerComponent(component) &&\r\n            component.type === \"PUBLIC\" /* PUBLIC */) {\r\n            // create service namespace for public components\r\n            // The Service namespace is an accessor function ...\r\n            const serviceNamespace = (appArg = app()) => {\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                if (typeof appArg[componentNameWithoutCompat] !== 'function') {\r\n                    // Invalid argument.\r\n                    // This happens in the following case: firebase.storage('gs:/')\r\n                    throw ERROR_FACTORY.create(\"invalid-app-argument\" /* INVALID_APP_ARGUMENT */, {\r\n                        appName: componentName\r\n                    });\r\n                }\r\n                // Forward service instance lookup to the FirebaseApp.\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                return appArg[componentNameWithoutCompat]();\r\n            };\r\n            // ... and a container for service-level properties.\r\n            if (component.serviceProps !== undefined) {\r\n                deepExtend(serviceNamespace, component.serviceProps);\r\n            }\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            namespace[componentNameWithoutCompat] = serviceNamespace;\r\n            // Patch the FirebaseAppImpl prototype\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            firebaseAppImpl.prototype[componentNameWithoutCompat] =\r\n                // TODO: The eslint disable can be removed and the 'ignoreRestArgs'\r\n                // option added to the no-explicit-any rule when ESlint releases it.\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                function (...args) {\r\n                    const serviceFxn = this._getService.bind(this, componentName);\r\n                    return serviceFxn.apply(this, component.multipleInstances ? args : []);\r\n                };\r\n        }\r\n        return component.type === \"PUBLIC\" /* PUBLIC */\r\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                namespace[componentNameWithoutCompat]\r\n            : null;\r\n    }\r\n    // Map the requested service to a registered service name\r\n    // (used to map auth to serverAuth service when needed).\r\n    function useAsService(app, name) {\r\n        if (name === 'serverAuth') {\r\n            return null;\r\n        }\r\n        const useService = name;\r\n        return useService;\r\n    }\r\n    return namespace;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Return a firebase namespace object.\r\n *\r\n * In production, this will be called exactly once and the result\r\n * assigned to the 'firebase' global.  It may be called multiple times\r\n * in unit tests.\r\n */\r\nfunction createFirebaseNamespace() {\r\n    const namespace = createFirebaseNamespaceCore(FirebaseAppImpl);\r\n    namespace.INTERNAL = Object.assign(Object.assign({}, namespace.INTERNAL), { createFirebaseNamespace,\r\n        extendNamespace,\r\n        createSubscribe,\r\n        ErrorFactory,\r\n        deepExtend });\r\n    /**\r\n     * Patch the top-level firebase namespace with additional properties.\r\n     *\r\n     * firebase.INTERNAL.extendNamespace()\r\n     */\r\n    function extendNamespace(props) {\r\n        deepExtend(namespace, props);\r\n    }\r\n    return namespace;\r\n}\r\nconst firebase$1 = createFirebaseNamespace();\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst logger = new Logger('@firebase/app-compat');\n\nconst name = \"@firebase/app-compat\";\nconst version = \"0.1.32\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction registerCoreComponents(variant) {\r\n    // Register `app` package.\r\n    registerVersion(name, version, variant);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Firebase Lite detection\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nif (isBrowser() && self.firebase !== undefined) {\r\n    logger.warn(`\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  `);\r\n    // eslint-disable-next-line\r\n    const sdkVersion = self.firebase.SDK_VERSION;\r\n    if (sdkVersion && sdkVersion.indexOf('LITE') >= 0) {\r\n        logger.warn(`\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    `);\r\n    }\r\n}\r\nconst firebase = firebase$1;\r\nregisterCoreComponents();\n\nexport { firebase as default };\n//# sourceMappingURL=index.esm2017.js.map\n","const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction));\n        });\n    }\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking)\n            db.addEventListener('versionchange', () => blocking());\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked)\n        request.addEventListener('blocked', () => blocked());\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","import { Component, ComponentContainer } from '@firebase/component';\nimport { Logger, setUserLogHandler, setLogLevel as setLogLevel$1 } from '@firebase/logger';\nimport { ErrorFactory, deepEqual, FirebaseError, base64urlEncodeWithoutPadding, isIndexedDBAvailable, validateIndexedDBOpenable } from '@firebase/util';\nexport { FirebaseError } from '@firebase/util';\nimport { openDB } from 'idb';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass PlatformLoggerServiceImpl {\r\n    constructor(container) {\r\n        this.container = container;\r\n    }\r\n    // In initial implementation, this will be called by installations on\r\n    // auth token refresh, and installations will send this string.\r\n    getPlatformInfoString() {\r\n        const providers = this.container.getProviders();\r\n        // Loop through providers and get library/version pairs from any that are\r\n        // version components.\r\n        return providers\r\n            .map(provider => {\r\n            if (isVersionServiceProvider(provider)) {\r\n                const service = provider.getImmediate();\r\n                return `${service.library}/${service.version}`;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        })\r\n            .filter(logString => logString)\r\n            .join(' ');\r\n    }\r\n}\r\n/**\r\n *\r\n * @param provider check if this provider provides a VersionService\r\n *\r\n * NOTE: Using Provider<'app-version'> is a hack to indicate that the provider\r\n * provides VersionService. The provider is not necessarily a 'app-version'\r\n * provider.\r\n */\r\nfunction isVersionServiceProvider(provider) {\r\n    const component = provider.getComponent();\r\n    return (component === null || component === void 0 ? void 0 : component.type) === \"VERSION\" /* VERSION */;\r\n}\n\nconst name$o = \"@firebase/app\";\nconst version$1 = \"0.7.31\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst logger = new Logger('@firebase/app');\n\nconst name$n = \"@firebase/app-compat\";\n\nconst name$m = \"@firebase/analytics-compat\";\n\nconst name$l = \"@firebase/analytics\";\n\nconst name$k = \"@firebase/app-check-compat\";\n\nconst name$j = \"@firebase/app-check\";\n\nconst name$i = \"@firebase/auth\";\n\nconst name$h = \"@firebase/auth-compat\";\n\nconst name$g = \"@firebase/database\";\n\nconst name$f = \"@firebase/database-compat\";\n\nconst name$e = \"@firebase/functions\";\n\nconst name$d = \"@firebase/functions-compat\";\n\nconst name$c = \"@firebase/installations\";\n\nconst name$b = \"@firebase/installations-compat\";\n\nconst name$a = \"@firebase/messaging\";\n\nconst name$9 = \"@firebase/messaging-compat\";\n\nconst name$8 = \"@firebase/performance\";\n\nconst name$7 = \"@firebase/performance-compat\";\n\nconst name$6 = \"@firebase/remote-config\";\n\nconst name$5 = \"@firebase/remote-config-compat\";\n\nconst name$4 = \"@firebase/storage\";\n\nconst name$3 = \"@firebase/storage-compat\";\n\nconst name$2 = \"@firebase/firestore\";\n\nconst name$1 = \"@firebase/firestore-compat\";\n\nconst name = \"firebase\";\nconst version = \"9.9.3\";\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The default app name\r\n *\r\n * @internal\r\n */\r\nconst DEFAULT_ENTRY_NAME = '[DEFAULT]';\r\nconst PLATFORM_LOG_STRING = {\r\n    [name$o]: 'fire-core',\r\n    [name$n]: 'fire-core-compat',\r\n    [name$l]: 'fire-analytics',\r\n    [name$m]: 'fire-analytics-compat',\r\n    [name$j]: 'fire-app-check',\r\n    [name$k]: 'fire-app-check-compat',\r\n    [name$i]: 'fire-auth',\r\n    [name$h]: 'fire-auth-compat',\r\n    [name$g]: 'fire-rtdb',\r\n    [name$f]: 'fire-rtdb-compat',\r\n    [name$e]: 'fire-fn',\r\n    [name$d]: 'fire-fn-compat',\r\n    [name$c]: 'fire-iid',\r\n    [name$b]: 'fire-iid-compat',\r\n    [name$a]: 'fire-fcm',\r\n    [name$9]: 'fire-fcm-compat',\r\n    [name$8]: 'fire-perf',\r\n    [name$7]: 'fire-perf-compat',\r\n    [name$6]: 'fire-rc',\r\n    [name$5]: 'fire-rc-compat',\r\n    [name$4]: 'fire-gcs',\r\n    [name$3]: 'fire-gcs-compat',\r\n    [name$2]: 'fire-fst',\r\n    [name$1]: 'fire-fst-compat',\r\n    'fire-js': 'fire-js',\r\n    [name]: 'fire-js-all'\r\n};\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @internal\r\n */\r\nconst _apps = new Map();\r\n/**\r\n * Registered components.\r\n *\r\n * @internal\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nconst _components = new Map();\r\n/**\r\n * @param component - the component being added to this app's container\r\n *\r\n * @internal\r\n */\r\nfunction _addComponent(app, component) {\r\n    try {\r\n        app.container.addComponent(component);\r\n    }\r\n    catch (e) {\r\n        logger.debug(`Component ${component.name} failed to register with FirebaseApp ${app.name}`, e);\r\n    }\r\n}\r\n/**\r\n *\r\n * @internal\r\n */\r\nfunction _addOrOverwriteComponent(app, component) {\r\n    app.container.addOrOverwriteComponent(component);\r\n}\r\n/**\r\n *\r\n * @param component - the component to register\r\n * @returns whether or not the component is registered successfully\r\n *\r\n * @internal\r\n */\r\nfunction _registerComponent(component) {\r\n    const componentName = component.name;\r\n    if (_components.has(componentName)) {\r\n        logger.debug(`There were multiple attempts to register component ${componentName}.`);\r\n        return false;\r\n    }\r\n    _components.set(componentName, component);\r\n    // add the component to existing app instances\r\n    for (const app of _apps.values()) {\r\n        _addComponent(app, component);\r\n    }\r\n    return true;\r\n}\r\n/**\r\n *\r\n * @param app - FirebaseApp instance\r\n * @param name - service name\r\n *\r\n * @returns the provider for the service with the matching name\r\n *\r\n * @internal\r\n */\r\nfunction _getProvider(app, name) {\r\n    const heartbeatController = app.container\r\n        .getProvider('heartbeat')\r\n        .getImmediate({ optional: true });\r\n    if (heartbeatController) {\r\n        void heartbeatController.triggerHeartbeat();\r\n    }\r\n    return app.container.getProvider(name);\r\n}\r\n/**\r\n *\r\n * @param app - FirebaseApp instance\r\n * @param name - service name\r\n * @param instanceIdentifier - service instance identifier in case the service supports multiple instances\r\n *\r\n * @internal\r\n */\r\nfunction _removeServiceInstance(app, name, instanceIdentifier = DEFAULT_ENTRY_NAME) {\r\n    _getProvider(app, name).clearInstance(instanceIdentifier);\r\n}\r\n/**\r\n * Test only\r\n *\r\n * @internal\r\n */\r\nfunction _clearComponents() {\r\n    _components.clear();\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERRORS = {\r\n    [\"no-app\" /* NO_APP */]: \"No Firebase App '{$appName}' has been created - \" +\r\n        'call Firebase App.initializeApp()',\r\n    [\"bad-app-name\" /* BAD_APP_NAME */]: \"Illegal App name: '{$appName}\",\r\n    [\"duplicate-app\" /* DUPLICATE_APP */]: \"Firebase App named '{$appName}' already exists with different options or config\",\r\n    [\"app-deleted\" /* APP_DELETED */]: \"Firebase App named '{$appName}' already deleted\",\r\n    [\"invalid-app-argument\" /* INVALID_APP_ARGUMENT */]: 'firebase.{$appName}() takes either no argument or a ' +\r\n        'Firebase App instance.',\r\n    [\"invalid-log-argument\" /* INVALID_LOG_ARGUMENT */]: 'First argument to `onLog` must be null or a function.',\r\n    [\"idb-open\" /* IDB_OPEN */]: 'Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.',\r\n    [\"idb-get\" /* IDB_GET */]: 'Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.',\r\n    [\"idb-set\" /* IDB_WRITE */]: 'Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.',\r\n    [\"idb-delete\" /* IDB_DELETE */]: 'Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.'\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory('app', 'Firebase', ERRORS);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass FirebaseAppImpl {\r\n    constructor(options, config, container) {\r\n        this._isDeleted = false;\r\n        this._options = Object.assign({}, options);\r\n        this._config = Object.assign({}, config);\r\n        this._name = config.name;\r\n        this._automaticDataCollectionEnabled =\r\n            config.automaticDataCollectionEnabled;\r\n        this._container = container;\r\n        this.container.addComponent(new Component('app', () => this, \"PUBLIC\" /* PUBLIC */));\r\n    }\r\n    get automaticDataCollectionEnabled() {\r\n        this.checkDestroyed();\r\n        return this._automaticDataCollectionEnabled;\r\n    }\r\n    set automaticDataCollectionEnabled(val) {\r\n        this.checkDestroyed();\r\n        this._automaticDataCollectionEnabled = val;\r\n    }\r\n    get name() {\r\n        this.checkDestroyed();\r\n        return this._name;\r\n    }\r\n    get options() {\r\n        this.checkDestroyed();\r\n        return this._options;\r\n    }\r\n    get config() {\r\n        this.checkDestroyed();\r\n        return this._config;\r\n    }\r\n    get container() {\r\n        return this._container;\r\n    }\r\n    get isDeleted() {\r\n        return this._isDeleted;\r\n    }\r\n    set isDeleted(val) {\r\n        this._isDeleted = val;\r\n    }\r\n    /**\r\n     * This function will throw an Error if the App has already been deleted -\r\n     * use before performing API actions on the App.\r\n     */\r\n    checkDestroyed() {\r\n        if (this.isDeleted) {\r\n            throw ERROR_FACTORY.create(\"app-deleted\" /* APP_DELETED */, { appName: this._name });\r\n        }\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The current SDK version.\r\n *\r\n * @public\r\n */\r\nconst SDK_VERSION = version;\r\nfunction initializeApp(options, rawConfig = {}) {\r\n    if (typeof rawConfig !== 'object') {\r\n        const name = rawConfig;\r\n        rawConfig = { name };\r\n    }\r\n    const config = Object.assign({ name: DEFAULT_ENTRY_NAME, automaticDataCollectionEnabled: false }, rawConfig);\r\n    const name = config.name;\r\n    if (typeof name !== 'string' || !name) {\r\n        throw ERROR_FACTORY.create(\"bad-app-name\" /* BAD_APP_NAME */, {\r\n            appName: String(name)\r\n        });\r\n    }\r\n    const existingApp = _apps.get(name);\r\n    if (existingApp) {\r\n        // return the existing app if options and config deep equal the ones in the existing app.\r\n        if (deepEqual(options, existingApp.options) &&\r\n            deepEqual(config, existingApp.config)) {\r\n            return existingApp;\r\n        }\r\n        else {\r\n            throw ERROR_FACTORY.create(\"duplicate-app\" /* DUPLICATE_APP */, { appName: name });\r\n        }\r\n    }\r\n    const container = new ComponentContainer(name);\r\n    for (const component of _components.values()) {\r\n        container.addComponent(component);\r\n    }\r\n    const newApp = new FirebaseAppImpl(options, config, container);\r\n    _apps.set(name, newApp);\r\n    return newApp;\r\n}\r\n/**\r\n * Retrieves a {@link @firebase/app#FirebaseApp} instance.\r\n *\r\n * When called with no arguments, the default app is returned. When an app name\r\n * is provided, the app corresponding to that name is returned.\r\n *\r\n * An exception is thrown if the app being retrieved has not yet been\r\n * initialized.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Return the default app\r\n * const app = getApp();\r\n * ```\r\n *\r\n * @example\r\n * ```javascript\r\n * // Return a named app\r\n * const otherApp = getApp(\"otherApp\");\r\n * ```\r\n *\r\n * @param name - Optional name of the app to return. If no name is\r\n *   provided, the default is `\"[DEFAULT]\"`.\r\n *\r\n * @returns The app corresponding to the provided app name.\r\n *   If no app name is provided, the default app is returned.\r\n *\r\n * @public\r\n */\r\nfunction getApp(name = DEFAULT_ENTRY_NAME) {\r\n    const app = _apps.get(name);\r\n    if (!app) {\r\n        throw ERROR_FACTORY.create(\"no-app\" /* NO_APP */, { appName: name });\r\n    }\r\n    return app;\r\n}\r\n/**\r\n * A (read-only) array of all initialized apps.\r\n * @public\r\n */\r\nfunction getApps() {\r\n    return Array.from(_apps.values());\r\n}\r\n/**\r\n * Renders this app unusable and frees the resources of all associated\r\n * services.\r\n *\r\n * @example\r\n * ```javascript\r\n * deleteApp(app)\r\n *   .then(function() {\r\n *     console.log(\"App deleted successfully\");\r\n *   })\r\n *   .catch(function(error) {\r\n *     console.log(\"Error deleting app:\", error);\r\n *   });\r\n * ```\r\n *\r\n * @public\r\n */\r\nasync function deleteApp(app) {\r\n    const name = app.name;\r\n    if (_apps.has(name)) {\r\n        _apps.delete(name);\r\n        await Promise.all(app.container\r\n            .getProviders()\r\n            .map(provider => provider.delete()));\r\n        app.isDeleted = true;\r\n    }\r\n}\r\n/**\r\n * Registers a library's name and version for platform logging purposes.\r\n * @param library - Name of 1p or 3p library (e.g. firestore, angularfire)\r\n * @param version - Current version of that library.\r\n * @param variant - Bundle variant, e.g., node, rn, etc.\r\n *\r\n * @public\r\n */\r\nfunction registerVersion(libraryKeyOrName, version, variant) {\r\n    var _a;\r\n    // TODO: We can use this check to whitelist strings when/if we set up\r\n    // a good whitelist system.\r\n    let library = (_a = PLATFORM_LOG_STRING[libraryKeyOrName]) !== null && _a !== void 0 ? _a : libraryKeyOrName;\r\n    if (variant) {\r\n        library += `-${variant}`;\r\n    }\r\n    const libraryMismatch = library.match(/\\s|\\//);\r\n    const versionMismatch = version.match(/\\s|\\//);\r\n    if (libraryMismatch || versionMismatch) {\r\n        const warning = [\r\n            `Unable to register library \"${library}\" with version \"${version}\":`\r\n        ];\r\n        if (libraryMismatch) {\r\n            warning.push(`library name \"${library}\" contains illegal characters (whitespace or \"/\")`);\r\n        }\r\n        if (libraryMismatch && versionMismatch) {\r\n            warning.push('and');\r\n        }\r\n        if (versionMismatch) {\r\n            warning.push(`version name \"${version}\" contains illegal characters (whitespace or \"/\")`);\r\n        }\r\n        logger.warn(warning.join(' '));\r\n        return;\r\n    }\r\n    _registerComponent(new Component(`${library}-version`, () => ({ library, version }), \"VERSION\" /* VERSION */));\r\n}\r\n/**\r\n * Sets log handler for all Firebase SDKs.\r\n * @param logCallback - An optional custom log handler that executes user code whenever\r\n * the Firebase SDK makes a logging call.\r\n *\r\n * @public\r\n */\r\nfunction onLog(logCallback, options) {\r\n    if (logCallback !== null && typeof logCallback !== 'function') {\r\n        throw ERROR_FACTORY.create(\"invalid-log-argument\" /* INVALID_LOG_ARGUMENT */);\r\n    }\r\n    setUserLogHandler(logCallback, options);\r\n}\r\n/**\r\n * Sets log level for all Firebase SDKs.\r\n *\r\n * All of the log types above the current log level are captured (i.e. if\r\n * you set the log level to `info`, errors are logged, but `debug` and\r\n * `verbose` logs are not).\r\n *\r\n * @public\r\n */\r\nfunction setLogLevel(logLevel) {\r\n    setLogLevel$1(logLevel);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DB_NAME = 'firebase-heartbeat-database';\r\nconst DB_VERSION = 1;\r\nconst STORE_NAME = 'firebase-heartbeat-store';\r\nlet dbPromise = null;\r\nfunction getDbPromise() {\r\n    if (!dbPromise) {\r\n        dbPromise = openDB(DB_NAME, DB_VERSION, {\r\n            upgrade: (db, oldVersion) => {\r\n                // We don't use 'break' in this switch statement, the fall-through\r\n                // behavior is what we want, because if there are multiple versions between\r\n                // the old version and the current version, we want ALL the migrations\r\n                // that correspond to those versions to run, not only the last one.\r\n                // eslint-disable-next-line default-case\r\n                switch (oldVersion) {\r\n                    case 0:\r\n                        db.createObjectStore(STORE_NAME);\r\n                }\r\n            }\r\n        }).catch(e => {\r\n            throw ERROR_FACTORY.create(\"idb-open\" /* IDB_OPEN */, {\r\n                originalErrorMessage: e.message\r\n            });\r\n        });\r\n    }\r\n    return dbPromise;\r\n}\r\nasync function readHeartbeatsFromIndexedDB(app) {\r\n    var _a;\r\n    try {\r\n        const db = await getDbPromise();\r\n        return db\r\n            .transaction(STORE_NAME)\r\n            .objectStore(STORE_NAME)\r\n            .get(computeKey(app));\r\n    }\r\n    catch (e) {\r\n        if (e instanceof FirebaseError) {\r\n            logger.warn(e.message);\r\n        }\r\n        else {\r\n            const idbGetError = ERROR_FACTORY.create(\"idb-get\" /* IDB_GET */, {\r\n                originalErrorMessage: (_a = e) === null || _a === void 0 ? void 0 : _a.message\r\n            });\r\n            logger.warn(idbGetError.message);\r\n        }\r\n    }\r\n}\r\nasync function writeHeartbeatsToIndexedDB(app, heartbeatObject) {\r\n    var _a;\r\n    try {\r\n        const db = await getDbPromise();\r\n        const tx = db.transaction(STORE_NAME, 'readwrite');\r\n        const objectStore = tx.objectStore(STORE_NAME);\r\n        await objectStore.put(heartbeatObject, computeKey(app));\r\n        return tx.done;\r\n    }\r\n    catch (e) {\r\n        if (e instanceof FirebaseError) {\r\n            logger.warn(e.message);\r\n        }\r\n        else {\r\n            const idbGetError = ERROR_FACTORY.create(\"idb-set\" /* IDB_WRITE */, {\r\n                originalErrorMessage: (_a = e) === null || _a === void 0 ? void 0 : _a.message\r\n            });\r\n            logger.warn(idbGetError.message);\r\n        }\r\n    }\r\n}\r\nfunction computeKey(app) {\r\n    return `${app.name}!${app.options.appId}`;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst MAX_HEADER_BYTES = 1024;\r\n// 30 days\r\nconst STORED_HEARTBEAT_RETENTION_MAX_MILLIS = 30 * 24 * 60 * 60 * 1000;\r\nclass HeartbeatServiceImpl {\r\n    constructor(container) {\r\n        this.container = container;\r\n        /**\r\n         * In-memory cache for heartbeats, used by getHeartbeatsHeader() to generate\r\n         * the header string.\r\n         * Stores one record per date. This will be consolidated into the standard\r\n         * format of one record per user agent string before being sent as a header.\r\n         * Populated from indexedDB when the controller is instantiated and should\r\n         * be kept in sync with indexedDB.\r\n         * Leave public for easier testing.\r\n         */\r\n        this._heartbeatsCache = null;\r\n        const app = this.container.getProvider('app').getImmediate();\r\n        this._storage = new HeartbeatStorageImpl(app);\r\n        this._heartbeatsCachePromise = this._storage.read().then(result => {\r\n            this._heartbeatsCache = result;\r\n            return result;\r\n        });\r\n    }\r\n    /**\r\n     * Called to report a heartbeat. The function will generate\r\n     * a HeartbeatsByUserAgent object, update heartbeatsCache, and persist it\r\n     * to IndexedDB.\r\n     * Note that we only store one heartbeat per day. So if a heartbeat for today is\r\n     * already logged, subsequent calls to this function in the same day will be ignored.\r\n     */\r\n    async triggerHeartbeat() {\r\n        const platformLogger = this.container\r\n            .getProvider('platform-logger')\r\n            .getImmediate();\r\n        // This is the \"Firebase user agent\" string from the platform logger\r\n        // service, not the browser user agent.\r\n        const agent = platformLogger.getPlatformInfoString();\r\n        const date = getUTCDateString();\r\n        if (this._heartbeatsCache === null) {\r\n            this._heartbeatsCache = await this._heartbeatsCachePromise;\r\n        }\r\n        // Do not store a heartbeat if one is already stored for this day\r\n        // or if a header has already been sent today.\r\n        if (this._heartbeatsCache.lastSentHeartbeatDate === date ||\r\n            this._heartbeatsCache.heartbeats.some(singleDateHeartbeat => singleDateHeartbeat.date === date)) {\r\n            return;\r\n        }\r\n        else {\r\n            // There is no entry for this date. Create one.\r\n            this._heartbeatsCache.heartbeats.push({ date, agent });\r\n        }\r\n        // Remove entries older than 30 days.\r\n        this._heartbeatsCache.heartbeats = this._heartbeatsCache.heartbeats.filter(singleDateHeartbeat => {\r\n            const hbTimestamp = new Date(singleDateHeartbeat.date).valueOf();\r\n            const now = Date.now();\r\n            return now - hbTimestamp <= STORED_HEARTBEAT_RETENTION_MAX_MILLIS;\r\n        });\r\n        return this._storage.overwrite(this._heartbeatsCache);\r\n    }\r\n    /**\r\n     * Returns a base64 encoded string which can be attached to the heartbeat-specific header directly.\r\n     * It also clears all heartbeats from memory as well as in IndexedDB.\r\n     *\r\n     * NOTE: Consuming product SDKs should not send the header if this method\r\n     * returns an empty string.\r\n     */\r\n    async getHeartbeatsHeader() {\r\n        if (this._heartbeatsCache === null) {\r\n            await this._heartbeatsCachePromise;\r\n        }\r\n        // If it's still null or the array is empty, there is no data to send.\r\n        if (this._heartbeatsCache === null ||\r\n            this._heartbeatsCache.heartbeats.length === 0) {\r\n            return '';\r\n        }\r\n        const date = getUTCDateString();\r\n        // Extract as many heartbeats from the cache as will fit under the size limit.\r\n        const { heartbeatsToSend, unsentEntries } = extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats);\r\n        const headerString = base64urlEncodeWithoutPadding(JSON.stringify({ version: 2, heartbeats: heartbeatsToSend }));\r\n        // Store last sent date to prevent another being logged/sent for the same day.\r\n        this._heartbeatsCache.lastSentHeartbeatDate = date;\r\n        if (unsentEntries.length > 0) {\r\n            // Store any unsent entries if they exist.\r\n            this._heartbeatsCache.heartbeats = unsentEntries;\r\n            // This seems more likely than emptying the array (below) to lead to some odd state\r\n            // since the cache isn't empty and this will be called again on the next request,\r\n            // and is probably safest if we await it.\r\n            await this._storage.overwrite(this._heartbeatsCache);\r\n        }\r\n        else {\r\n            this._heartbeatsCache.heartbeats = [];\r\n            // Do not wait for this, to reduce latency.\r\n            void this._storage.overwrite(this._heartbeatsCache);\r\n        }\r\n        return headerString;\r\n    }\r\n}\r\nfunction getUTCDateString() {\r\n    const today = new Date();\r\n    // Returns date format 'YYYY-MM-DD'\r\n    return today.toISOString().substring(0, 10);\r\n}\r\nfunction extractHeartbeatsForHeader(heartbeatsCache, maxSize = MAX_HEADER_BYTES) {\r\n    // Heartbeats grouped by user agent in the standard format to be sent in\r\n    // the header.\r\n    const heartbeatsToSend = [];\r\n    // Single date format heartbeats that are not sent.\r\n    let unsentEntries = heartbeatsCache.slice();\r\n    for (const singleDateHeartbeat of heartbeatsCache) {\r\n        // Look for an existing entry with the same user agent.\r\n        const heartbeatEntry = heartbeatsToSend.find(hb => hb.agent === singleDateHeartbeat.agent);\r\n        if (!heartbeatEntry) {\r\n            // If no entry for this user agent exists, create one.\r\n            heartbeatsToSend.push({\r\n                agent: singleDateHeartbeat.agent,\r\n                dates: [singleDateHeartbeat.date]\r\n            });\r\n            if (countBytes(heartbeatsToSend) > maxSize) {\r\n                // If the header would exceed max size, remove the added heartbeat\r\n                // entry and stop adding to the header.\r\n                heartbeatsToSend.pop();\r\n                break;\r\n            }\r\n        }\r\n        else {\r\n            heartbeatEntry.dates.push(singleDateHeartbeat.date);\r\n            // If the header would exceed max size, remove the added date\r\n            // and stop adding to the header.\r\n            if (countBytes(heartbeatsToSend) > maxSize) {\r\n                heartbeatEntry.dates.pop();\r\n                break;\r\n            }\r\n        }\r\n        // Pop unsent entry from queue. (Skipped if adding the entry exceeded\r\n        // quota and the loop breaks early.)\r\n        unsentEntries = unsentEntries.slice(1);\r\n    }\r\n    return {\r\n        heartbeatsToSend,\r\n        unsentEntries\r\n    };\r\n}\r\nclass HeartbeatStorageImpl {\r\n    constructor(app) {\r\n        this.app = app;\r\n        this._canUseIndexedDBPromise = this.runIndexedDBEnvironmentCheck();\r\n    }\r\n    async runIndexedDBEnvironmentCheck() {\r\n        if (!isIndexedDBAvailable()) {\r\n            return false;\r\n        }\r\n        else {\r\n            return validateIndexedDBOpenable()\r\n                .then(() => true)\r\n                .catch(() => false);\r\n        }\r\n    }\r\n    /**\r\n     * Read all heartbeats.\r\n     */\r\n    async read() {\r\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\r\n        if (!canUseIndexedDB) {\r\n            return { heartbeats: [] };\r\n        }\r\n        else {\r\n            const idbHeartbeatObject = await readHeartbeatsFromIndexedDB(this.app);\r\n            return idbHeartbeatObject || { heartbeats: [] };\r\n        }\r\n    }\r\n    // overwrite the storage with the provided heartbeats\r\n    async overwrite(heartbeatsObject) {\r\n        var _a;\r\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\r\n        if (!canUseIndexedDB) {\r\n            return;\r\n        }\r\n        else {\r\n            const existingHeartbeatsObject = await this.read();\r\n            return writeHeartbeatsToIndexedDB(this.app, {\r\n                lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,\r\n                heartbeats: heartbeatsObject.heartbeats\r\n            });\r\n        }\r\n    }\r\n    // add heartbeats\r\n    async add(heartbeatsObject) {\r\n        var _a;\r\n        const canUseIndexedDB = await this._canUseIndexedDBPromise;\r\n        if (!canUseIndexedDB) {\r\n            return;\r\n        }\r\n        else {\r\n            const existingHeartbeatsObject = await this.read();\r\n            return writeHeartbeatsToIndexedDB(this.app, {\r\n                lastSentHeartbeatDate: (_a = heartbeatsObject.lastSentHeartbeatDate) !== null && _a !== void 0 ? _a : existingHeartbeatsObject.lastSentHeartbeatDate,\r\n                heartbeats: [\r\n                    ...existingHeartbeatsObject.heartbeats,\r\n                    ...heartbeatsObject.heartbeats\r\n                ]\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * Calculate bytes of a HeartbeatsByUserAgent array after being wrapped\r\n * in a platform logging header JSON object, stringified, and converted\r\n * to base 64.\r\n */\r\nfunction countBytes(heartbeatsCache) {\r\n    // base64 has a restricted set of characters, all of which should be 1 byte.\r\n    return base64urlEncodeWithoutPadding(\r\n    // heartbeatsCache wrapper properties\r\n    JSON.stringify({ version: 2, heartbeats: heartbeatsCache })).length;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction registerCoreComponents(variant) {\r\n    _registerComponent(new Component('platform-logger', container => new PlatformLoggerServiceImpl(container), \"PRIVATE\" /* PRIVATE */));\r\n    _registerComponent(new Component('heartbeat', container => new HeartbeatServiceImpl(container), \"PRIVATE\" /* PRIVATE */));\r\n    // Register `app` package.\r\n    registerVersion(name$o, version$1, variant);\r\n    // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\r\n    registerVersion(name$o, version$1, 'esm2017');\r\n    // Register platform SDK identifier (no version).\r\n    registerVersion('fire-js', '');\r\n}\n\n/**\r\n * Firebase App\r\n *\r\n * @remarks This package coordinates the communication between the different Firebase components\r\n * @packageDocumentation\r\n */\r\nregisterCoreComponents('');\n\nexport { SDK_VERSION, DEFAULT_ENTRY_NAME as _DEFAULT_ENTRY_NAME, _addComponent, _addOrOverwriteComponent, _apps, _clearComponents, _components, _getProvider, _registerComponent, _removeServiceInstance, deleteApp, getApp, getApps, initializeApp, onLog, registerVersion, setLogLevel };\n//# sourceMappingURL=index.esm2017.js.map\n","import { Deferred } from '@firebase/util';\n\n/**\r\n * Component for service name T, e.g. `auth`, `auth-internal`\r\n */\r\nclass Component {\r\n    /**\r\n     *\r\n     * @param name The public service name, e.g. app, auth, firestore, database\r\n     * @param instanceFactory Service factory responsible for creating the public interface\r\n     * @param type whether the service provided by the component is public or private\r\n     */\r\n    constructor(name, instanceFactory, type) {\r\n        this.name = name;\r\n        this.instanceFactory = instanceFactory;\r\n        this.type = type;\r\n        this.multipleInstances = false;\r\n        /**\r\n         * Properties to be added to the service namespace\r\n         */\r\n        this.serviceProps = {};\r\n        this.instantiationMode = \"LAZY\" /* LAZY */;\r\n        this.onInstanceCreated = null;\r\n    }\r\n    setInstantiationMode(mode) {\r\n        this.instantiationMode = mode;\r\n        return this;\r\n    }\r\n    setMultipleInstances(multipleInstances) {\r\n        this.multipleInstances = multipleInstances;\r\n        return this;\r\n    }\r\n    setServiceProps(props) {\r\n        this.serviceProps = props;\r\n        return this;\r\n    }\r\n    setInstanceCreatedCallback(callback) {\r\n        this.onInstanceCreated = callback;\r\n        return this;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DEFAULT_ENTRY_NAME = '[DEFAULT]';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provider for instance for service name T, e.g. 'auth', 'auth-internal'\r\n * NameServiceMapping[T] is an alias for the type of the instance\r\n */\r\nclass Provider {\r\n    constructor(name, container) {\r\n        this.name = name;\r\n        this.container = container;\r\n        this.component = null;\r\n        this.instances = new Map();\r\n        this.instancesDeferred = new Map();\r\n        this.instancesOptions = new Map();\r\n        this.onInitCallbacks = new Map();\r\n    }\r\n    /**\r\n     * @param identifier A provider can provide mulitple instances of a service\r\n     * if this.component.multipleInstances is true.\r\n     */\r\n    get(identifier) {\r\n        // if multipleInstances is not supported, use the default name\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\r\n        if (!this.instancesDeferred.has(normalizedIdentifier)) {\r\n            const deferred = new Deferred();\r\n            this.instancesDeferred.set(normalizedIdentifier, deferred);\r\n            if (this.isInitialized(normalizedIdentifier) ||\r\n                this.shouldAutoInitialize()) {\r\n                // initialize the service if it can be auto-initialized\r\n                try {\r\n                    const instance = this.getOrInitializeService({\r\n                        instanceIdentifier: normalizedIdentifier\r\n                    });\r\n                    if (instance) {\r\n                        deferred.resolve(instance);\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // when the instance factory throws an exception during get(), it should not cause\r\n                    // a fatal error. We just return the unresolved promise in this case.\r\n                }\r\n            }\r\n        }\r\n        return this.instancesDeferred.get(normalizedIdentifier).promise;\r\n    }\r\n    getImmediate(options) {\r\n        var _a;\r\n        // if multipleInstances is not supported, use the default name\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(options === null || options === void 0 ? void 0 : options.identifier);\r\n        const optional = (_a = options === null || options === void 0 ? void 0 : options.optional) !== null && _a !== void 0 ? _a : false;\r\n        if (this.isInitialized(normalizedIdentifier) ||\r\n            this.shouldAutoInitialize()) {\r\n            try {\r\n                return this.getOrInitializeService({\r\n                    instanceIdentifier: normalizedIdentifier\r\n                });\r\n            }\r\n            catch (e) {\r\n                if (optional) {\r\n                    return null;\r\n                }\r\n                else {\r\n                    throw e;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // In case a component is not initialized and should/can not be auto-initialized at the moment, return null if the optional flag is set, or throw\r\n            if (optional) {\r\n                return null;\r\n            }\r\n            else {\r\n                throw Error(`Service ${this.name} is not available`);\r\n            }\r\n        }\r\n    }\r\n    getComponent() {\r\n        return this.component;\r\n    }\r\n    setComponent(component) {\r\n        if (component.name !== this.name) {\r\n            throw Error(`Mismatching Component ${component.name} for Provider ${this.name}.`);\r\n        }\r\n        if (this.component) {\r\n            throw Error(`Component for ${this.name} has already been provided`);\r\n        }\r\n        this.component = component;\r\n        // return early without attempting to initialize the component if the component requires explicit initialization (calling `Provider.initialize()`)\r\n        if (!this.shouldAutoInitialize()) {\r\n            return;\r\n        }\r\n        // if the service is eager, initialize the default instance\r\n        if (isComponentEager(component)) {\r\n            try {\r\n                this.getOrInitializeService({ instanceIdentifier: DEFAULT_ENTRY_NAME });\r\n            }\r\n            catch (e) {\r\n                // when the instance factory for an eager Component throws an exception during the eager\r\n                // initialization, it should not cause a fatal error.\r\n                // TODO: Investigate if we need to make it configurable, because some component may want to cause\r\n                // a fatal error in this case?\r\n            }\r\n        }\r\n        // Create service instances for the pending promises and resolve them\r\n        // NOTE: if this.multipleInstances is false, only the default instance will be created\r\n        // and all promises with resolve with it regardless of the identifier.\r\n        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {\r\n            const normalizedIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\r\n            try {\r\n                // `getOrInitializeService()` should always return a valid instance since a component is guaranteed. use ! to make typescript happy.\r\n                const instance = this.getOrInitializeService({\r\n                    instanceIdentifier: normalizedIdentifier\r\n                });\r\n                instanceDeferred.resolve(instance);\r\n            }\r\n            catch (e) {\r\n                // when the instance factory throws an exception, it should not cause\r\n                // a fatal error. We just leave the promise unresolved.\r\n            }\r\n        }\r\n    }\r\n    clearInstance(identifier = DEFAULT_ENTRY_NAME) {\r\n        this.instancesDeferred.delete(identifier);\r\n        this.instancesOptions.delete(identifier);\r\n        this.instances.delete(identifier);\r\n    }\r\n    // app.delete() will call this method on every provider to delete the services\r\n    // TODO: should we mark the provider as deleted?\r\n    async delete() {\r\n        const services = Array.from(this.instances.values());\r\n        await Promise.all([\r\n            ...services\r\n                .filter(service => 'INTERNAL' in service) // legacy services\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                .map(service => service.INTERNAL.delete()),\r\n            ...services\r\n                .filter(service => '_delete' in service) // modularized services\r\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                .map(service => service._delete())\r\n        ]);\r\n    }\r\n    isComponentSet() {\r\n        return this.component != null;\r\n    }\r\n    isInitialized(identifier = DEFAULT_ENTRY_NAME) {\r\n        return this.instances.has(identifier);\r\n    }\r\n    getOptions(identifier = DEFAULT_ENTRY_NAME) {\r\n        return this.instancesOptions.get(identifier) || {};\r\n    }\r\n    initialize(opts = {}) {\r\n        const { options = {} } = opts;\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(opts.instanceIdentifier);\r\n        if (this.isInitialized(normalizedIdentifier)) {\r\n            throw Error(`${this.name}(${normalizedIdentifier}) has already been initialized`);\r\n        }\r\n        if (!this.isComponentSet()) {\r\n            throw Error(`Component ${this.name} has not been registered yet`);\r\n        }\r\n        const instance = this.getOrInitializeService({\r\n            instanceIdentifier: normalizedIdentifier,\r\n            options\r\n        });\r\n        // resolve any pending promise waiting for the service instance\r\n        for (const [instanceIdentifier, instanceDeferred] of this.instancesDeferred.entries()) {\r\n            const normalizedDeferredIdentifier = this.normalizeInstanceIdentifier(instanceIdentifier);\r\n            if (normalizedIdentifier === normalizedDeferredIdentifier) {\r\n                instanceDeferred.resolve(instance);\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n    /**\r\n     *\r\n     * @param callback - a function that will be invoked  after the provider has been initialized by calling provider.initialize().\r\n     * The function is invoked SYNCHRONOUSLY, so it should not execute any longrunning tasks in order to not block the program.\r\n     *\r\n     * @param identifier An optional instance identifier\r\n     * @returns a function to unregister the callback\r\n     */\r\n    onInit(callback, identifier) {\r\n        var _a;\r\n        const normalizedIdentifier = this.normalizeInstanceIdentifier(identifier);\r\n        const existingCallbacks = (_a = this.onInitCallbacks.get(normalizedIdentifier)) !== null && _a !== void 0 ? _a : new Set();\r\n        existingCallbacks.add(callback);\r\n        this.onInitCallbacks.set(normalizedIdentifier, existingCallbacks);\r\n        const existingInstance = this.instances.get(normalizedIdentifier);\r\n        if (existingInstance) {\r\n            callback(existingInstance, normalizedIdentifier);\r\n        }\r\n        return () => {\r\n            existingCallbacks.delete(callback);\r\n        };\r\n    }\r\n    /**\r\n     * Invoke onInit callbacks synchronously\r\n     * @param instance the service instance`\r\n     */\r\n    invokeOnInitCallbacks(instance, identifier) {\r\n        const callbacks = this.onInitCallbacks.get(identifier);\r\n        if (!callbacks) {\r\n            return;\r\n        }\r\n        for (const callback of callbacks) {\r\n            try {\r\n                callback(instance, identifier);\r\n            }\r\n            catch (_a) {\r\n                // ignore errors in the onInit callback\r\n            }\r\n        }\r\n    }\r\n    getOrInitializeService({ instanceIdentifier, options = {} }) {\r\n        let instance = this.instances.get(instanceIdentifier);\r\n        if (!instance && this.component) {\r\n            instance = this.component.instanceFactory(this.container, {\r\n                instanceIdentifier: normalizeIdentifierForFactory(instanceIdentifier),\r\n                options\r\n            });\r\n            this.instances.set(instanceIdentifier, instance);\r\n            this.instancesOptions.set(instanceIdentifier, options);\r\n            /**\r\n             * Invoke onInit listeners.\r\n             * Note this.component.onInstanceCreated is different, which is used by the component creator,\r\n             * while onInit listeners are registered by consumers of the provider.\r\n             */\r\n            this.invokeOnInitCallbacks(instance, instanceIdentifier);\r\n            /**\r\n             * Order is important\r\n             * onInstanceCreated() should be called after this.instances.set(instanceIdentifier, instance); which\r\n             * makes `isInitialized()` return true.\r\n             */\r\n            if (this.component.onInstanceCreated) {\r\n                try {\r\n                    this.component.onInstanceCreated(this.container, instanceIdentifier, instance);\r\n                }\r\n                catch (_a) {\r\n                    // ignore errors in the onInstanceCreatedCallback\r\n                }\r\n            }\r\n        }\r\n        return instance || null;\r\n    }\r\n    normalizeInstanceIdentifier(identifier = DEFAULT_ENTRY_NAME) {\r\n        if (this.component) {\r\n            return this.component.multipleInstances ? identifier : DEFAULT_ENTRY_NAME;\r\n        }\r\n        else {\r\n            return identifier; // assume multiple instances are supported before the component is provided.\r\n        }\r\n    }\r\n    shouldAutoInitialize() {\r\n        return (!!this.component &&\r\n            this.component.instantiationMode !== \"EXPLICIT\" /* EXPLICIT */);\r\n    }\r\n}\r\n// undefined should be passed to the service factory for the default instance\r\nfunction normalizeIdentifierForFactory(identifier) {\r\n    return identifier === DEFAULT_ENTRY_NAME ? undefined : identifier;\r\n}\r\nfunction isComponentEager(component) {\r\n    return component.instantiationMode === \"EAGER\" /* EAGER */;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * ComponentContainer that provides Providers for service name T, e.g. `auth`, `auth-internal`\r\n */\r\nclass ComponentContainer {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.providers = new Map();\r\n    }\r\n    /**\r\n     *\r\n     * @param component Component being added\r\n     * @param overwrite When a component with the same name has already been registered,\r\n     * if overwrite is true: overwrite the existing component with the new component and create a new\r\n     * provider with the new component. It can be useful in tests where you want to use different mocks\r\n     * for different tests.\r\n     * if overwrite is false: throw an exception\r\n     */\r\n    addComponent(component) {\r\n        const provider = this.getProvider(component.name);\r\n        if (provider.isComponentSet()) {\r\n            throw new Error(`Component ${component.name} has already been registered with ${this.name}`);\r\n        }\r\n        provider.setComponent(component);\r\n    }\r\n    addOrOverwriteComponent(component) {\r\n        const provider = this.getProvider(component.name);\r\n        if (provider.isComponentSet()) {\r\n            // delete the existing provider from the container, so we can register the new component\r\n            this.providers.delete(component.name);\r\n        }\r\n        this.addComponent(component);\r\n    }\r\n    /**\r\n     * getProvider provides a type safe interface where it can only be called with a field name\r\n     * present in NameServiceMapping interface.\r\n     *\r\n     * Firebase SDKs providing services should extend NameServiceMapping interface to register\r\n     * themselves.\r\n     */\r\n    getProvider(name) {\r\n        if (this.providers.has(name)) {\r\n            return this.providers.get(name);\r\n        }\r\n        // create a Provider for a service that hasn't registered with Firebase\r\n        const provider = new Provider(name, this);\r\n        this.providers.set(name, provider);\r\n        return provider;\r\n    }\r\n    getProviders() {\r\n        return Array.from(this.providers.values());\r\n    }\r\n}\n\nexport { Component, ComponentContainer, Provider };\n//# sourceMappingURL=index.esm2017.js.map\n","/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * A container for all of the Logger instances\r\n */\r\nconst instances = [];\r\n/**\r\n * The JS SDK supports 5 log levels and also allows a user the ability to\r\n * silence the logs altogether.\r\n *\r\n * The order is a follows:\r\n * DEBUG < VERBOSE < INFO < WARN < ERROR\r\n *\r\n * All of the log types above the current log level will be captured (i.e. if\r\n * you set the log level to `INFO`, errors will still be logged, but `DEBUG` and\r\n * `VERBOSE` logs will not)\r\n */\r\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\r\n    LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\r\n    LogLevel[LogLevel[\"INFO\"] = 2] = \"INFO\";\r\n    LogLevel[LogLevel[\"WARN\"] = 3] = \"WARN\";\r\n    LogLevel[LogLevel[\"ERROR\"] = 4] = \"ERROR\";\r\n    LogLevel[LogLevel[\"SILENT\"] = 5] = \"SILENT\";\r\n})(LogLevel || (LogLevel = {}));\r\nconst levelStringToEnum = {\r\n    'debug': LogLevel.DEBUG,\r\n    'verbose': LogLevel.VERBOSE,\r\n    'info': LogLevel.INFO,\r\n    'warn': LogLevel.WARN,\r\n    'error': LogLevel.ERROR,\r\n    'silent': LogLevel.SILENT\r\n};\r\n/**\r\n * The default log level\r\n */\r\nconst defaultLogLevel = LogLevel.INFO;\r\n/**\r\n * By default, `console.debug` is not displayed in the developer console (in\r\n * chrome). To avoid forcing users to have to opt-in to these logs twice\r\n * (i.e. once for firebase, and once in the console), we are sending `DEBUG`\r\n * logs to the `console.log` function.\r\n */\r\nconst ConsoleMethod = {\r\n    [LogLevel.DEBUG]: 'log',\r\n    [LogLevel.VERBOSE]: 'log',\r\n    [LogLevel.INFO]: 'info',\r\n    [LogLevel.WARN]: 'warn',\r\n    [LogLevel.ERROR]: 'error'\r\n};\r\n/**\r\n * The default log handler will forward DEBUG, VERBOSE, INFO, WARN, and ERROR\r\n * messages on to their corresponding console counterparts (if the log method\r\n * is supported by the current log level)\r\n */\r\nconst defaultLogHandler = (instance, logType, ...args) => {\r\n    if (logType < instance.logLevel) {\r\n        return;\r\n    }\r\n    const now = new Date().toISOString();\r\n    const method = ConsoleMethod[logType];\r\n    if (method) {\r\n        console[method](`[${now}]  ${instance.name}:`, ...args);\r\n    }\r\n    else {\r\n        throw new Error(`Attempted to log a message with an invalid logType (value: ${logType})`);\r\n    }\r\n};\r\nclass Logger {\r\n    /**\r\n     * Gives you an instance of a Logger to capture messages according to\r\n     * Firebase's logging scheme.\r\n     *\r\n     * @param name The name that the logs will be associated with\r\n     */\r\n    constructor(name) {\r\n        this.name = name;\r\n        /**\r\n         * The log level of the given Logger instance.\r\n         */\r\n        this._logLevel = defaultLogLevel;\r\n        /**\r\n         * The main (internal) log handler for the Logger instance.\r\n         * Can be set to a new function in internal package code but not by user.\r\n         */\r\n        this._logHandler = defaultLogHandler;\r\n        /**\r\n         * The optional, additional, user-defined log handler for the Logger instance.\r\n         */\r\n        this._userLogHandler = null;\r\n        /**\r\n         * Capture the current instance for later use\r\n         */\r\n        instances.push(this);\r\n    }\r\n    get logLevel() {\r\n        return this._logLevel;\r\n    }\r\n    set logLevel(val) {\r\n        if (!(val in LogLevel)) {\r\n            throw new TypeError(`Invalid value \"${val}\" assigned to \\`logLevel\\``);\r\n        }\r\n        this._logLevel = val;\r\n    }\r\n    // Workaround for setter/getter having to be the same type.\r\n    setLogLevel(val) {\r\n        this._logLevel = typeof val === 'string' ? levelStringToEnum[val] : val;\r\n    }\r\n    get logHandler() {\r\n        return this._logHandler;\r\n    }\r\n    set logHandler(val) {\r\n        if (typeof val !== 'function') {\r\n            throw new TypeError('Value assigned to `logHandler` must be a function');\r\n        }\r\n        this._logHandler = val;\r\n    }\r\n    get userLogHandler() {\r\n        return this._userLogHandler;\r\n    }\r\n    set userLogHandler(val) {\r\n        this._userLogHandler = val;\r\n    }\r\n    /**\r\n     * The functions below are all based on the `console` interface\r\n     */\r\n    debug(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.DEBUG, ...args);\r\n        this._logHandler(this, LogLevel.DEBUG, ...args);\r\n    }\r\n    log(...args) {\r\n        this._userLogHandler &&\r\n            this._userLogHandler(this, LogLevel.VERBOSE, ...args);\r\n        this._logHandler(this, LogLevel.VERBOSE, ...args);\r\n    }\r\n    info(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.INFO, ...args);\r\n        this._logHandler(this, LogLevel.INFO, ...args);\r\n    }\r\n    warn(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.WARN, ...args);\r\n        this._logHandler(this, LogLevel.WARN, ...args);\r\n    }\r\n    error(...args) {\r\n        this._userLogHandler && this._userLogHandler(this, LogLevel.ERROR, ...args);\r\n        this._logHandler(this, LogLevel.ERROR, ...args);\r\n    }\r\n}\r\nfunction setLogLevel(level) {\r\n    instances.forEach(inst => {\r\n        inst.setLogLevel(level);\r\n    });\r\n}\r\nfunction setUserLogHandler(logCallback, options) {\r\n    for (const instance of instances) {\r\n        let customLogLevel = null;\r\n        if (options && options.level) {\r\n            customLogLevel = levelStringToEnum[options.level];\r\n        }\r\n        if (logCallback === null) {\r\n            instance.userLogHandler = null;\r\n        }\r\n        else {\r\n            instance.userLogHandler = (instance, level, ...args) => {\r\n                const message = args\r\n                    .map(arg => {\r\n                    if (arg == null) {\r\n                        return null;\r\n                    }\r\n                    else if (typeof arg === 'string') {\r\n                        return arg;\r\n                    }\r\n                    else if (typeof arg === 'number' || typeof arg === 'boolean') {\r\n                        return arg.toString();\r\n                    }\r\n                    else if (arg instanceof Error) {\r\n                        return arg.message;\r\n                    }\r\n                    else {\r\n                        try {\r\n                            return JSON.stringify(arg);\r\n                        }\r\n                        catch (ignored) {\r\n                            return null;\r\n                        }\r\n                    }\r\n                })\r\n                    .filter(arg => arg)\r\n                    .join(' ');\r\n                if (level >= (customLogLevel !== null && customLogLevel !== void 0 ? customLogLevel : instance.logLevel)) {\r\n                    logCallback({\r\n                        level: LogLevel[level].toLowerCase(),\r\n                        message,\r\n                        args,\r\n                        type: instance.name\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    }\r\n}\n\nexport { LogLevel, Logger, setLogLevel, setUserLogHandler };\n//# sourceMappingURL=index.esm2017.js.map\n"],"names":["CONSTANTS","NODE_CLIENT","NODE_ADMIN","SDK_VERSION","assert","assertion","message","assertionError","Error","stringToByteArray$1","str","out","p","i","length","c","charCodeAt","byteArrayToString","bytes","pos","c1","String","fromCharCode","c2","c3","c4","u","join","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","ENCODED_VALS","this","ENCODED_VALS_WEBSAFE","HAS_NATIVE_SUPPORT","atob","encodeByteArray","input","webSafe","Array","isArray","init_","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","push","encodeString","btoa","decodeString","decodeStringToByteArray","charToByteMap","charAt","haveByte4","byte4","base64Encode","utf8Bytes","base64urlEncodeWithoutPadding","replace","base64Decode","e","console","error","deepCopy","value","deepExtend","undefined","target","source","Object","constructor","Date","dateValue","getTime","prop","hasOwnProperty","isValidKey","key","Deferred","reject","resolve","promise","Promise","wrapCallback","callback","catch","createMockUserToken","token","projectId","uid","header","alg","type","project","iat","sub","user_id","payload","assign","iss","aud","exp","auth_time","firebase","sign_in_provider","identities","signature","JSON","stringify","getUA","navigator","isMobileCordova","window","test","isBrowser","self","isReactNative","isNodeSdk","isIndexedDBAvailable","indexedDB","validateIndexedDBOpenable","preExist","DB_CHECK_NAME","request","open","onsuccess","result","close","deleteDatabase","onupgradeneeded","onerror","_a","ERROR_NAME","FirebaseError","code","customData","super","name","setPrototypeOf","prototype","captureStackTrace","ErrorFactory","create","service","serviceName","errors","data","fullCode","template","replaceTemplate","fullMessage","PATTERN","_","jsonEval","parse","decode","claims","parts","split","isValidFormat","decoded","isAdmin","contains","obj","call","safeGet","isEmpty","map","fn","contextObj","res","deepEqual","a","b","aKeys","keys","bKeys","k","includes","aProp","bProp","isObject","thing","querystring","querystringParams","params","entries","forEach","arrayVal","encodeURIComponent","Sha1","chain_","buf_","W_","pad_","inbuf_","total_","blockSize","reset","compress_","buf","offset","W","t","f","d","update","lengthMinusBlock","n","inbuf","digest","totalBits","j","createSubscribe","executor","onNoObservers","proxy","ObserverProxy","subscribe","bind","observers","unsubscribes","observerCount","task","finalized","then","next","forEachObserver","observer","complete","nextOrObserver","implementsAnyMethods","noop","unsub","unsubscribeOne","finalError","sendOne","err","methods","method","validateArgCount","fnName","minCount","maxCount","argCount","argError","errorPrefix","argName","validateCallback","argumentName","optional","validateContextObject","context","stringToByteArray","high","low","stringLength","getModularInstance","_delegate","normalizeComponent","scriptExports","render","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","options","_compiled","functional","_scopeId","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","h","existing","beforeCreate","concat","exports","global","isCallable","tryToString","TypeError","module","argument","wellKnownSymbol","definePropertyModule","UNSCOPABLES","ArrayPrototype","configurable","toIndexedObject","toAbsoluteIndex","lengthOfArrayLike","createMethod","IS_INCLUDES","$this","el","fromIndex","O","index","indexOf","uncurryThis","toString","stringSlice","slice","it","TO_STRING_TAG_SUPPORT","classofRaw","TO_STRING_TAG","CORRECT_ARGUMENTS","arguments","tryGet","tag","callee","$Error","TEST","arg","stack","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","hasOwn","ownKeys","getOwnPropertyDescriptorModule","exceptions","defineProperty","getOwnPropertyDescriptor","DESCRIPTORS","createPropertyDescriptor","object","bitmap","enumerable","writable","createNonEnumerableProperty","makeBuiltIn","setGlobal","unsafe","simple","noTargetGet","fails","get","document","EXISTS","createElement","getBuiltIn","match","version","userAgent","process","Deno","versions","v8","defineBuiltIn","copyConstructorProperties","isForced","FORCED","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","forced","sham","exec","NATIVE_BIND","FunctionPrototype","Function","apply","Reflect","getDescriptor","PROPER","CONFIGURABLE","aFunction","namespace","aCallable","V","P","func","check","Math","globalThis","g","toObject","classof","propertyIsEnumerable","dummy","Wrapper","NewTarget","NewTargetPrototype","store","functionToString","inspectSource","cause","set","has","NATIVE_WEAK_MAP","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","WeakMap","enforce","getterFor","TYPE","state","wmget","wmhas","wmset","metadata","facade","STATE","replacement","feature","detection","normalize","POLYFILL","NATIVE","string","toLowerCase","isPrototypeOf","USE_SYMBOL_AS_UID","$Symbol","toLength","CONFIGURABLE_FUNCTION_NAME","InternalStateModule","enforceInternalState","getInternalState","CONFIGURABLE_LENGTH","TEMPLATE","getter","setter","arity","V8_VERSION","getOwnPropertySymbols","symbol","Symbol","$default","activeXDocument","anObject","definePropertiesModule","enumBugKeys","html","documentCreateElement","GT","LT","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","content","NullProtoObjectViaActiveX","write","temp","parentWindow","NullProtoObjectViaIFrame","iframeDocument","iframe","JS","style","display","appendChild","src","contentWindow","F","NullProtoObject","ActiveXObject","domain","Properties","V8_PROTOTYPE_DEFINE_BUG","objectKeys","defineProperties","props","IE8_DOM_DEFINE","toPropertyKey","$defineProperty","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","Attributes","current","propertyIsEnumerableModule","internalObjectKeys","getOwnPropertyNames","names","$propertyIsEnumerable","NASHORN_BUG","aPossiblePrototype","CORRECT_SETTER","proto","__proto__","pref","val","valueOf","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","Target","Source","SHARED","IS_PURE","mode","copyright","license","toIntegerOrInfinity","max","min","integer","IndexedObject","requireObjectCoercible","ceil","floor","number","isSymbol","getMethod","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","toPrimitive","id","postfix","random","NATIVE_SYMBOL","iterator","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","description","proxyAccessor","inheritIfRequired","normalizeStringArgument","installErrorCause","clearErrorStack","ERROR_STACK_INSTALLABLE","FULL_NAME","wrapper","IS_AGGREGATE_ERROR","STACK_TRACE_LIMIT","OPTIONS_POSITION","path","OriginalError","OriginalErrorPrototype","BaseError","WrappedError","$","$includes","addToUnscopables","BROKEN_ON_SPARSE","wrapErrorConstructorWithCause","WEB_ASSEMBLY","WebAssembly","exportGlobalErrorCauseWrapper","exportWebAssemblyErrorCauseWrapper","init","setSDKVersion","DOMStorageWrapper","domStorage_","prefix_","removeItem","prefixedName_","setItem","storedVal","getItem","remove","MemoryStorage","cache_","isInMemoryStorage","createStoragefor","domStorageName","domStorage","PersistentStorage","SessionStorage","logClient","LUIDGenerator","sha1","sha1Bytes","buildLogMessage_","varArgs","logger","firstLog_","enableLogging$1","logger_","persistent","logLevel","log","logWrapper","prefix","fatal","warn","warnIfPageIsSecure","location","protocol","isInvalidJSONNumber","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","executeWhenDOMReady","readyState","called","wrappedFn","body","setTimeout","addEventListener","attachEvent","MIN_NAME","MAX_NAME","nameCompare","aAsInt","tryParseInt","bAsInt","stringCompare","requireKey","ObjectToUniqueKey","sort","splitStringBySize","segsize","len","dataSegs","substring","each","doubleToIEEE754String","v","ebits","fbits","bias","s","ln","Infinity","abs","pow","LN2","round","bits","reverse","hexByteString","hexByte","parseInt","substr","isChromeExtensionContentScript","href","isWindowsStoreApp","Windows","UI","errorForServerCode","query","reason","_path","toUpperCase","INTEGER_REGEXP_","RegExp","INTEGER_32_MIN","INTEGER_32_MAX","intVal","exceptionGuard","beingCrawled","search","setTimeoutNonBlocking","time","timeout","AppCheckTokenProvider","appName_","appCheckProvider","appCheck","getImmediate","getToken","forceRefresh","addTokenChangeListener","listener","addTokenListener","notifyForInvalidToken","FirebaseAuthTokenProvider","firebaseOptions_","authProvider_","auth_","onInit","auth","addAuthTokenListener","removeTokenChangeListener","removeAuthTokenListener","errorMessage","EmulatorTokenProvider","accessToken","OWNER","PROTOCOL_VERSION","VERSION_PARAM","TRANSPORT_SESSION_PARAM","REFERER_PARAM","FORGE_REF","FORGE_DOMAIN_RE","LAST_SESSION_PARAM","APPLICATION_ID_PARAM","APP_CHECK_TOKEN_PARAM","WEBSOCKET","LONG_POLLING","RepoInfo","host","secure","webSocketOnly","nodeAdmin","persistenceKey","includeNamespaceInQueryParams","_host","_domain","internalHost","isCacheableHost","isCustomHost","newHost","toURLString","repoInfoNeedsQueryParam","repoInfo","repoInfoConnectionURL","connURL","pairs","StatsCollection","counters_","incrementCounter","amount","collections","reporters","statsManagerGetCollection","hashString","statsManagerGetOrCreateReporter","creatorFunction","PacketReceiver","onMessage_","pendingResponses","currentResponseNum","closeAfterResponse","onClose","closeAfter","responseNum","handleResponse","requestNum","toProcess","FIREBASE_LONGPOLL_START_PARAM","FIREBASE_LONGPOLL_CLOSE_COMMAND","FIREBASE_LONGPOLL_COMMAND_CB_NAME","FIREBASE_LONGPOLL_DATA_CB_NAME","FIREBASE_LONGPOLL_ID_PARAM","FIREBASE_LONGPOLL_PW_PARAM","FIREBASE_LONGPOLL_SERIAL_PARAM","FIREBASE_LONGPOLL_CALLBACK_ID_PARAM","FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM","FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET","FIREBASE_LONGPOLL_DATA_PARAM","FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM","MAX_URL_DATA_SIZE","SEG_HEADER_SIZE","MAX_PAYLOAD_SIZE","KEEPALIVE_REQUEST_INTERVAL","LP_CONNECT_TIMEOUT","BrowserPollConnection","connId","applicationId","appCheckToken","authToken","transportSessionId","lastSessionId","bytesSent","bytesReceived","everConnected_","log_","stats_","urlFn","onMessage","onDisconnect","curSegmentNum","onDisconnect_","myPacketOrderer","isClosed_","connectTimeoutTimer_","onClosed_","scriptTagHolder","FirebaseIFrameScriptHolder","args","command","arg1","arg2","arg3","arg4","incrementIncomingBytes_","clearTimeout","password","sendNewPolls","pN","urlParams","uniqueCallbackIdentifier","hostname","connectURL","addTag","start","startLongPoll","addDisconnectPingFrame","static","forceAllow_","forceDisallow_","markConnectionHealthy","shutdown_","myDisconnFrame","removeChild","send","dataStr","base64data","enqueueSegment","pw","commandCB","onMessageCB","outstandingRequests","Set","pendingSegs","currentSerial","myIFrame","createIFrame_","script","currentDomain","iframeContents","doc","contentDocument","alive","innerHTML","myID","myPW","newRequest_","size","theURL","curDataString","nextSeg","theSeg","shift","seg","ts","addLongPollTag_","segnum","totalsegs","url","serial","doNewRequest","delete","keepaliveTimeout","readyStateCB","loadCB","doNodeLongPoll","newScript","async","onload","onreadystatechange","rstate","parentNode","WEBSOCKET_MAX_FRAME_SIZE","WEBSOCKET_KEEPALIVE_INTERVAL","WebSocketImpl","MozWebSocket","WebSocket","WebSocketConnection","keepaliveTimer","frames","totalFrames","connectionURL_","device","headers","platform","env","origin","mySock","onopen","onclose","onmessage","m","handleIncomingFrame","isOldAndroid","oldAndroidRegex","oldAndroidMatch","parseFloat","appendFrame_","fullMess","jsonMess","handleNewFrameCount_","frameCount","extractFrameCount_","isNaN","mess","resetKeepAlive","remainingData","sendString_","clearInterval","setInterval","responsesRequiredToBeHealthy","healthyTimeout","TransportManager","initTransports_","ALL_TRANSPORTS","IS_TRANSPORT_INITIALIZED","globalTransportInitialized_","isWebSocketsAvailable","isSkipPollConnection","previouslyFailed","transports_","transports","transport","initialTransport","upgradeTransport","UPGRADE_TIMEOUT","DELAY_BEFORE_SENDING_EXTRA_REQUESTS","BYTES_SENT_HEALTHY_OVERRIDE","BYTES_RECEIVED_HEALTHY_OVERRIDE","MESSAGE_TYPE","MESSAGE_DATA","CONTROL_SHUTDOWN","CONTROL_RESET","CONTROL_ERROR","CONTROL_PONG","SWITCH_ACK","END_TRANSMISSION","PING","SERVER_HELLO","Connection","repoInfo_","applicationId_","appCheckToken_","authToken_","onReady_","onKill_","connectionCount","pendingDataMessages","state_","transportManager_","start_","conn","conn_","nextTransportId_","primaryResponsesRequired_","onMessageReceived","connReceiver_","onConnectionLost","disconnReceiver_","tx_","rx_","secondaryConn_","isHealthy_","healthyTimeoutMS","healthyTimeout_","everConnected","onConnectionLost_","onSecondaryConnectionLost_","onPrimaryMessageReceived_","onSecondaryMessageReceived_","sendRequest","dataMsg","msg","sendData_","tryCleanupConnection","onSecondaryControl_","controlData","cmd","upgradeIfSecondaryHealthy_","secondaryResponsesRequired_","parsedData","layer","proceedWithUpgrade_","onControl_","onDataMessage_","onPrimaryResponse_","onHandshake_","onConnectionShutdown_","onReset_","sendPingOnPrimaryIfNecessary_","handshake","timestamp","sessionId","onConnectionEstablished_","tryStartUpgrade_","startUpgrade_","closeConnections_","ServerActions","put","pathString","onComplete","hash","merge","refreshAuthToken","refreshAppCheckToken","onDisconnectPut","onDisconnectMerge","onDisconnectCancel","reportStats","stats","EventEmitter","allowedEvents_","listeners_","trigger","eventType","listeners","on","validateEventType_","eventData","getInitialEvent","off","splice","find","et","OnlineMonitor","online_","currentlyOnline","MAX_PATH_DEPTH","MAX_PATH_LENGTH_BYTES","Path","pathOrString","pieceNum","pieces_","copyTo","pieceNum_","newEmptyPath","pathGetFront","pathGetLength","pathPopFront","pathGetBack","pathToUrlEncodedString","pathSlice","begin","pathParent","pieces","pathChild","childPathObj","childPieces","pathIsEmpty","newRelativePath","outerPath","innerPath","outer","inner","pathCompare","left","right","leftKeys","rightKeys","cmp","pathEquals","other","pathContains","ValidationPath","errorPrefix_","parts_","byteLength_","validationPathCheckValid","validationPathPush","validationPath","child","validationPathPop","last","pop","validationPathToErrorString","VisibilityMonitor","hidden","visibilityChange","visible_","visible","RECONNECT_MIN_DELAY","RECONNECT_MAX_DELAY_DEFAULT","RECONNECT_MAX_DELAY_FOR_ADMINS","RECONNECT_DELAY_MULTIPLIER","RECONNECT_DELAY_RESET_TIMEOUT","SERVER_KILL_INTERRUPT_REASON","INVALID_TOKEN_THRESHOLD","PersistentConnection","onDataUpdate_","onConnectStatus_","onServerInfoUpdate_","authTokenProvider_","appCheckTokenProvider_","authOverride_","nextPersistentConnectionId_","interruptReasons_","listens","Map","outstandingPuts_","outstandingGets_","outstandingPutCount_","outstandingGetCount_","onDisconnectRequestQueue_","connected_","reconnectDelay_","maxReconnectDelay_","securityDebugCallback_","establishConnectionTimer_","requestCBHash_","requestNumber_","realtime_","forceTokenRefresh_","invalidAuthTokenCount_","invalidAppCheckTokenCount_","firstConnection_","lastConnectionAttemptTime_","lastConnectionEstablishedTime_","getInstance","onVisible_","onOnline_","action","onResponse","curReqNum","r","initConnection_","deferred","q","_queryObject","outstandingGet","sendGet_","listen","currentHashFn","queryId","_queryIdentifier","_queryParams","isDefault","loadsAllData","listenSpec","hashFn","sendListen_","req","status","warnOnListenWarnings_","currentListenSpec","removeListen_","warnings","indexSpec","getIndex","indexPath","tryAuth","reduceReconnectDelayIfAdminCredential_","credential","isFirebaseSecret","tryAppCheck","authMethod","requestData","cred","onAuthRevoked_","onAppCheckRevoked_","unlisten","sendUnlisten_","queryObj","sendOnDisconnect_","response","putInternal","sendPut_","queued","errorReason","reqNum","onDataPush_","onListenRevoked_","onSecurityDebugPacket_","handleTimestamp_","sendConnectStats_","restoreState_","scheduleConnect_","establishConnection_","online","onRealtimeDisconnect_","cancelSentTransactions_","shouldReconnect_","timeSinceLastConnectSucceeded","timeSinceLastConnectAttempt","reconnectDelay","onDataMessage","onReady","nextConnectionId_","canceled","connection","closeFn","sendRequestFn","all","interrupt","resume","delta","serverTimeOffset","normalizedPathString","statusCode","explanation","queries","values","clientName","NamedNode","node","Index","getCompare","compare","indexedValueChanged","oldNode","newNode","oldWrapped","newWrapped","minPost","MIN","__EMPTY_NODE","KeyIndex","isDefinedOn","maxPost","makePost","indexValue","KEY_INDEX","SortedMapIterator","startKey","comparator","isReverse_","resultGenerator_","nodeStack_","getNext","hasNext","peek","LLRBNode","color","RED","SortedMap","EMPTY_NODE","copy","count","inorderTraversal","reverseTraversal","min_","minKey","maxKey","insert","fixUp_","removeMin_","isRed_","moveRedLeft_","smallest","rotateRight_","moveRedRight_","rotateLeft_","colorFlip_","nl","nr","checkMaxDepth_","blackDepth","check_","BLACK","LLRBEmptyNode","comparator_","root_","getPredecessorKey","rightParent","getIterator","resultGenerator","getIteratorFrom","getReverseIteratorFrom","getReverseIterator","NAME_ONLY_COMPARATOR","NAME_COMPARATOR","MAX_NODE$2","setMaxNode$1","priorityHashText","priority","validatePriorityNode","priorityNode","isLeafNode","getPriority","__childrenNodeConstructor","nodeFromJSON$1","MAX_NODE$1","LeafNode","value_","priorityNode_","lazyHash_","updatePriority","newPriorityNode","getImmediateChild","childName","getChild","hasChild","getPredecessorChildName","childNode","updateImmediateChild","newChildNode","updateChild","front","numChildren","forEachChild","exportFormat","getValue","toHash","compareTo","compareToLeafNode_","otherLeaf","otherLeafType","thisLeafType","otherIndex","VALUE_TYPE_ORDER","thisIndex","withIndex","isIndexed","equals","setNodeFromJSON","setMaxNode","PriorityIndex","aPriority","bPriority","indexCmp","PRIORITY_INDEX","LOG_2","Base12Num","logBase2","num","bitMask","current_","mask","bits_","nextBitIsOne","buildChildSet","childList","keyFn","mapSortFn","buildBalancedTree","namedNode","middle","buildFrom12Array","base12","root","buildPennant","chunkSize","childTree","attachPennant","pennant","isOne","_defaultIndexMap","fallbackObject","IndexMap","indexes_","indexSet_","Default","indexKey","sortedMap","hasIndex","indexDefinition","addIndex","existingChildren","sawIndexedValue","iter","Wrap","newIndex","indexName","newIndexSet","newIndexes","addToIndexes","indexedChildren","existingSnap","newChildren","removeFromIndexes","ChildrenNode","children_","indexMap_","newIndexMap","newPriority","newImmediateChild","numKeys","allIntegerKeys","array","childHash","idx","resolveIndex_","predecessor","getFirstChildName","getFirstChild","getLastChildName","getLastChild","wrappedNode","startPost","endPost","MAX_NODE","otherChildrenNode","thisIter","otherIter","thisCurrent","otherCurrent","MaxNode","MAX","USE_HINZE","nodeFromJSON","json","jsonLeaf","childData","children","childrenHavePriority","hinzeJsonObj","childSet","sortedChildSet","PathIndex","indexPath_","extractChild","snap","aChild","bChild","valueNode","ValueIndex","VALUE_INDEX","PUSH_CHARS","MIN_PUSH_CHAR","MAX_PUSH_CHAR","MAX_KEY_LEN","nextPushId","lastPushTime","lastRandChars","now","duplicateTime","timeStampChars","successor","keyAsInt","sourcePlusOne","repeat","changeValue","snapshotNode","changeChildAdded","changeChildRemoved","changeChildChanged","oldSnap","changeChildMoved","IndexedFilter","index_","newChild","affectedPath","optChangeAccumulator","oldChild","trackChildChange","updateFullNode","newSnap","filtersNodes","getIndexedFilter","RangedFilter","indexedFilter_","startPost_","getStartPost_","endPost_","getEndPost_","getStartPost","getEndPost","matches","filtered","hasStart","startName","getIndexStartName","getIndexStartValue","hasEnd","endName","getIndexEndName","getIndexEndValue","LimitedFilter","rangedFilter_","limit_","getLimit","reverse_","isViewFromLeft","fullLimitUpdateChild_","inRange","indexCompare","foundStartPost","childKey","childSnap","changeAccumulator","oldEventCache","newChildNamedNode","windowBoundary","oldChildSnap","nextChild","getChildAfterChild","compareNext","remainsInWindow","newEventCache","nextChildInRange","QueryParams","limitSet_","startSet_","startNameSet_","startAfterSet_","endSet_","endNameSet_","endBeforeSet_","viewFrom_","indexStartValue_","indexStartName_","indexEndValue_","indexEndName_","hasStartAfter","hasEndBefore","hasLimit","hasAnchoredLimit","queryParamsGetNodeFilter","queryParams","queryParamsLimitToFirst","newLimit","newParams","queryParamsLimitToLast","queryParamsStartAt","queryParamsStartAfter","queryParamsEndAt","queryParamsEndBefore","queryParamsOrderBy","queryParamsToRestQueryStringParameters","qs","orderBy","queryParamsGetQueryObject","viewFrom","ReadonlyRestClient","listens_","listenId","getListenId_","thisListen","queryStringParameters","restRequest_","xhr","XMLHttpRequest","responseText","SnapshotHolder","rootNode_","getNode","updateSnapshot","newSnapshotNode","newSparseSnapshotTree","sparseSnapshotTreeRemember","sparseSnapshotTree","clear","sparseSnapshotTreeForget","tree","safeToRemove","sparseSnapshotTreeForEachTree","prefixPath","sparseSnapshotTreeForEachChild","StatsListener","collection_","last_","newStats","FIRST_STATS_MIN_TIME","FIRST_STATS_MAX_TIME","REPORT_STATS_INTERVAL","StatsReporter","collection","server_","statsToReport_","statsListener_","reportStats_","reportedStats","haveStatsToReport","OperationType","newOperationSourceUser","fromUser","fromServer","tagged","newOperationSourceServer","newOperationSourceServerTaggedQuery","AckUserWrite","affectedTree","revert","ACK_USER_WRITE","operationForChild","subtree","ListenComplete","LISTEN_COMPLETE","Overwrite","OVERWRITE","Merge","MERGE","CacheNode","node_","fullyInitialized_","filtered_","isFullyInitialized","isFiltered","isCompleteForPath","isCompleteForChild","EventGenerator","query_","eventGeneratorGenerateEventsForChanges","eventGenerator","changes","eventCache","eventRegistrations","events","moves","change","eventGeneratorGenerateEventsForType","registrations","filteredChanges","filter","eventGeneratorCompareChanges","materializedChange","eventGeneratorMaterializeSingleChange","registration","respondsTo","createEvent","prevName","aWrapped","bWrapped","newViewCache","serverCache","viewCacheUpdateEventSnap","viewCache","eventSnap","viewCacheUpdateServerSnap","serverSnap","viewCacheGetCompleteEventSnap","viewCacheGetCompleteServerSnap","emptyChildrenSingleton","EmptyChildren","ImmutableTree","childPath","findRootMostMatchingPathAndValue","relativePath","predicate","childExistingPathAndValue","fullPath","findRootMostValueAndPath","toSet","setTree","newTree","fold","fold_","pathSoFar","accum","findOnPath","findOnPath_","pathToFollow","foreachOnPath","foreachOnPath_","currentRelativePath","foreach","foreach_","foreachChild","CompoundWrite","writeTree_","compoundWriteAddWrite","compoundWrite","rootmost","rootMostPath","newWriteTree","compoundWriteAddWrites","updates","newWrite","compoundWriteRemoveWrite","empty","compoundWriteHasCompleteWrite","compoundWriteGetCompleteNode","compoundWriteGetCompleteChildren","compoundWriteChildCompoundWrite","shadowingNode","compoundWriteIsEmpty","compoundWriteApply","applySubtreeWrite","writeTree","priorityWrite","writeTreeChildWrites","newWriteTreeRef","writeTreeAddOverwrite","writeId","lastWriteId","allWrites","visibleWrites","writeTreeAddMerge","changedChildren","writeTreeGetWrite","record","writeTreeRemoveWrite","findIndex","writeToRemove","removedWriteWasVisible","removedWriteOverlapsWithOtherWrites","currentWrite","writeTreeRecordContainsPath_","writeTreeResetTree_","writeRecord","writeTreeLayerTree_","writeTreeDefaultFilter_","writes","treeRoot","writePath","deepNode","writeTreeCalcCompleteEventCache","treePath","completeServerCache","writeIdsToExclude","includeHiddenWrites","mergeAtPath","layeredCache","subMerge","writeTreeCalcCompleteEventChildren","completeServerChildren","completeChildren","topLevelSet","writeTreeCalcEventCacheAfterServerOverwrite","existingEventSnap","existingServerSnap","childMerge","writeTreeCalcCompleteChild","writeTreeShadowingWrite","writeTreeCalcIndexedSlice","completeServerData","toIterate","nodes","writeTreeRefCalcCompleteEventCache","writeTreeRef","writeTreeRefCalcCompleteEventChildren","writeTreeRefCalcEventCacheAfterServerOverwrite","writeTreeRefShadowingWrite","writeTreeRefCalcIndexedSlice","writeTreeRefCalcCompleteChild","existingServerCache","writeTreeRefChild","ChildChangeAccumulator","changeMap","oldChange","oldType","getChanges","from","NoCompleteChildSource_","getCompleteChild","NO_COMPLETE_CHILD_SOURCE","WriteTreeCompleteChildSource","writes_","viewCache_","optCompleteServerCache_","serverNode","newViewProcessor","viewProcessorAssertIndexed","viewProcessor","viewProcessorApplyOperation","oldViewCache","operation","writesCache","completeCache","accumulator","filterServerNode","overwrite","viewProcessorApplyUserOverwrite","viewProcessorApplyServerOverwrite","viewProcessorApplyUserMerge","viewProcessorApplyServerMerge","ackUserWrite","viewProcessorRevertUserWrite","viewProcessorAckUserWrite","viewProcessorListenComplete","viewProcessorMaybeAddValueEvent","isLeafOrEmpty","oldCompleteSnap","viewProcessorGenerateEventCacheAfterServerEvent","changePath","oldEventSnap","completeEventChildren","completeNode","oldEventNode","updatedPriority","childChangePath","newEventChild","eventChildUpdate","changedSnap","oldServerSnap","newServerCache","serverFilter","newServerNode","newEventSnap","viewProcessorCacheHasChild","curViewCache","viewProcessorApplyMerge","viewMergeTree","serverChild","childMergeTree","isUnknownDeepMerge","ackPath","mergePath","serverCachePath","oldServerNode","serverChildren","View","initialViewCache","eventRegistrations_","indexFilter","processor_","initialServerCache","initialEventCache","eventGenerator_","viewGetServerCache","view","viewGetCompleteNode","viewGetCompleteServerCache","cache","viewIsEmpty","viewAddEventRegistration","eventRegistration","viewRemoveEventRegistration","cancelError","cancelEvents","maybeEvent","createCancelEvent","remaining","hasAnyCallback","viewApplyOperation","viewGenerateEventsForChanges_","viewGetInitialEvents","initialChanges","eventNode","referenceConstructor$1","referenceConstructor","SyncPoint","views","syncPointSetReferenceConstructor","syncPointGetReferenceConstructor","syncPointIsEmpty","syncPoint","syncPointApplyOperation","optCompleteServerCache","syncPointGetView","serverCacheComplete","eventCacheComplete","syncPointAddEventRegistration","syncPointRemoveEventRegistration","removed","hadCompleteView","syncPointHasCompleteView","viewQueryId","_repo","syncPointGetQueryViews","syncPointGetCompleteServerCache","syncPointViewForQuery","syncPointGetCompleteView","syncPointViewExistsForQuery","syncTreeSetReferenceConstructor","syncTreeGetReferenceConstructor","syncTreeNextQueryTag_","SyncTree","listenProvider_","syncPointTree_","pendingWriteTree_","tagToQueryMap","queryToTagMap","syncTreeApplyUserOverwrite","syncTree","newData","syncTreeApplyOperationToSyncPoints_","syncTreeApplyUserMerge","changeTree","fromObject","syncTreeAckUserWrite","needToReevaluate","syncTreeApplyServerOverwrite","syncTreeApplyServerMerge","syncTreeApplyListenComplete","syncTreeApplyTaggedListenComplete","queryKey","syncTreeQueryKeyForTag_","syncTreeParseQueryKey_","queryPath","op","syncTreeApplyTaggedOperation_","syncTreeRemoveEventRegistration","skipListenerDedup","maybeSyncPoint","removedAndEvents","removingDefault","covered","parentSyncPoint","newViews","syncTreeCollectDistinctViewsForSubTree_","newQuery","syncTreeCreateListenerForView_","startListening","syncTreeQueryForListening_","syncTreeTagForQuery","defaultTag","stopListening","queryToRemove","tagToRemove","syncTreeMakeQueryKey_","syncTreeRemoveTags_","syncTreeApplyTaggedQueryOverwrite","syncTreeApplyTaggedQueryMerge","syncTreeAddEventRegistration","skipSetupListener","foundAncestorDefaultView","pathToSyncPoint","sp","childSyncPoint","viewAlreadyExists","syncTreeGetNextQueryTag_","syncTreeSetupListener_","syncTreeCalcCompleteEventCache","includeHiddenSets","syncTreeGetServerValue","serverCacheNode","syncTreeApplyOperationHelper_","syncPointTree","syncTreeApplyOperationDescendantsHelper_","childOperation","childServerCache","childWritesCache","splitIndex","maybeChildSyncPoint","childMap","completeView","_key","childViews","removedQuery","removedQueryKey","removedQueryTag","queriesToStop","childQueries","queryToStop","ExistingValueProvider","DeferredValueProvider","syncTree_","path_","generateWithValues","resolveDeferredLeafValue","existingVal","serverValues","resolveScalarDeferredValue","resolveComplexDeferredValue","unused","existingNode","leaf","resolveDeferredValueTree","resolveDeferredValue","resolveDeferredValueSnapshot","rawPri","leafNode","childrenNode","Tree","childCount","treeSubTree","pathObj","treeGetValue","treeSetValue","treeUpdateParents","treeHasChildren","treeIsEmpty","treeForEachChild","treeForEachDescendant","includeSelf","childrenFirst","treeForEachAncestor","treeGetPath","treeUpdateChild","childEmpty","childExists","INVALID_KEY_REGEX_","INVALID_PATH_REGEX_","MAX_LEAF_SIZE_","isValidPathString","isValidRootPathString","isValidPriority","validateFirebaseDataArg","validateFirebaseData","hasDotValue","hasActualChild","validateFirebaseMergePaths","mergePaths","curPath","prevPath","validateFirebaseMergeDataArg","errorPrefix$1","validatePriority","validateKey","validatePathString","validateRootPathString","validateWritablePath","validateUrl","parsedUrl","EventQueue","eventLists_","recursionDepth_","eventQueueQueueEvents","eventQueue","eventDataList","currList","getPath","eventQueueRaiseEventsAtPath","eventQueueRaiseQueuedEventsMatchingPredicate","eventPath","eventQueueRaiseEventsForChangedPath","changedPath","sentAll","eventList","eventListRaise","eventFn","getEventRunner","INTERRUPT_REASON","MAX_TRANSACTION_RETRIES","Repo","forceRestClient_","appCheckProvider_","dataUpdateCount","eventQueue_","nextWriteId_","interceptServerDataCallback_","transactionQueueTree_","persistentConnection_","repoStart","repo","appId","authOverride","isMerge","repoOnDataUpdate","repoOnConnectStatus","connectStatus","repoOnServerInfoUpdate","statsReporter_","infoData_","infoSyncTree_","infoEvents","repoUpdateInfo","serverSyncTree_","repoServerTime","offsetNode","repoGenerateServerValues","taggedChildren","raw","taggedSnap","repoRerunTransactions","repoRunOnDisconnectEvents","repoGetNextWriteId","repoGetValue","cached","repoLog","repoSetWithPriority","newVal","newNodeUnresolved","success","clearEvents","repoCallOnCompleteCallback","repoAbortTransactions","repoUpdate","childrenToMerge","changedKey","changedValue","resolvedOnDisconnectTree","resolved","repoOnDisconnectCancel","repoOnDisconnectSet","repoOnDisconnectSetWithPriority","repoOnDisconnectUpdate","repoAddEventCallbackForQuery","repoRemoveEventCallbackForQuery","repoInterrupt","repoResume","repoStartTransaction","transactionUpdate","unwatcher","applyLocally","transaction","order","retryCount","abortReason","currentWriteId","currentInputSnapshot","currentOutputSnapshotRaw","currentOutputSnapshotResolved","currentState","repoGetLatestState","queueNode","nodeQueue","priorityForNode","currentNode","repoSendReadyTransactions","excludeSets","repoPruneCompletedTransactionsBelowNode","queue","repoBuildTransactionQueue","allRun","every","repoSendTransactionQueue","setsToIgnore","txn","latestState","snapToSend","latestHash","dataToSend","pathToSend","callbacks","rootMostTransactionNode","repoGetAncestorTransactionNode","repoRerunTransactionQueue","txnsToRerun","abortTransaction","newDataNode","hasExplicitPriority","oldWriteId","newNodeResolved","transactionNode","transactionQueue","repoAggregateTransactionQueuesForNode","to","repoAbortTransactionsOnNode","lastSent","decodePath","pathStringDecoded","piece","decodeURIComponent","decodeQuery","queryString","results","segment","kv","parseRepoInfo","dataURL","parseDatabaseURL","scheme","subdomain","port","colonInd","slashInd","questionMarkInd","hostWithoutPort","dotInd","DataEvent","snapshot","ref","getEventType","exportVal","CancelEvent","CallbackContext","snapshotCallback","cancelCallback","onValue","expDataSnapshot","previousChildName","onCancel","hasCancelCallback","userCallback","OnDisconnect","cancel","setWithPriority","QueryImpl","_orderByCalled","ReferenceImpl","isEqual","sameRepo","samePath","sameQueryIdentifier","toJSON","validateNoPreviousOrderByCall","validateQueryEndpoints","startNode","endNode","tooManyArgsError","wrongArgTypeError","validateLimit","parentPath","DataSnapshot","_node","_index","childRef","exists","hasChildren","db","_checkNotDeleted","_root","refFromURL","parsedURL","thennablePushRef","pushRef","setPriority","callbackContext","container","ValueEventRegistration","ChildEventRegistration","eventToCheck","cancelCallbackOrListenOptions","onlyOnce","onceCallback","dataSnapshot","onChildAdded","onChildChanged","onChildMoved","onChildRemoved","expCallback","QueryConstraint","QueryEndAtConstraint","_value","_apply","endAt","QueryEndBeforeConstraint","endBefore","QueryStartAtConstraint","startAt","QueryStartAfterConstraint","startAfter","QueryLimitToFirstConstraint","_limit","limitToFirst","limit","QueryLimitToLastConstraint","limitToLast","QueryOrderByChildConstraint","parsedPath","orderByChild","QueryOrderByKeyConstraint","orderByKey","QueryOrderByPriorityConstraint","orderByPriority","QueryOrderByValueConstraint","orderByValue","QueryEqualToValueConstraint","equalTo","queryConstraints","queryImpl","constraint","FIREBASE_DATABASE_EMULATOR_HOST_VAR","repos","useRestClient","repoManagerApplyEmulatorSettings","tokenProvider","repoManagerDatabaseFromApp","app","authProvider","dbUrl","databaseURL","isEmulator","dbEmulatorHost","authTokenProvider","repoManagerCreateRepo","Database","repoManagerDeleteRepo","appName","appRepos","_repoInternal","_instanceStarted","_rootInternal","_delete","apiName","checkTransportInit","forceWebSockets","forceDisallow","forceLongPolling","forceAllow","connectDatabaseEmulator","mockUserToken","goOffline","goOnline","enableLogging","registerDatabase","variant","_registerComponent","instanceIdentifier","getProvider","setMultipleInstances","registerVersion","SERVER_TIMESTAMP","serverTimestamp","increment","TransactionResult","committed","runTransaction","promiseComplete","simpleListen","echo","onEcho","validateBoolean","bool","validateEventType","objectToMerge","newObjectToMerge","_database","getRef","Reference","Query","database","cancelCallbackOrContext","ret","getCancelAndContextArgs_","valueCallback","expSnapshot","once","failureCallbackOrContext","cancelOrContext","getKey","getParent","getRoot","transactionResult","expPromise","expRef","INTERNAL","useEmulator","initStandalone","customAuthImpl","setComponent","instance","ServerValue","TIMESTAMP","freeze","registerComponent","databaseExp","identifier","setServiceProps","inserted","binding","vnode","modifiers","passive","handler","querySelector","_onScroll","_uid","unbind","_el$_onScroll","removeEventListener","Scroll","Vue","directives","scrollTarget","scrollThreshold","currentScroll","currentThreshold","isActive","isScrollingUp","previousScroll","savedScroll","computed","canScroll","computedScrollThreshold","watch","mounted","consoleWarn","onScroll","scrollTop","pageYOffset","$nextTick","thresholdMet","baseMixins","mixins","VToolbar","Scrollable","SSRBootable","Toggleable","Applicationable","extend","provide","VAppBar","clippedLeft","Boolean","clippedRight","collapseOnScroll","elevateOnScroll","fadeImgOnScroll","hideOnScroll","invertedScroll","scrollOffScreen","shrinkOnScroll","default","applicationProperty","bottom","isBooted","classes","collapse","absolute","fixed","hideShadow","scrollRatio","threshold","computedContentHeight","dense","computedOriginalHeight","computedFontSize","isProminent","computedLeft","$vuetify","application","computedMarginTop","bar","computedOpacity","height","isExtended","extensionHeight","computedRight","computedTransform","computedHeight","isCollapsed","styles","fontSize","convertToUnit","marginTop","transform","callUpdate","created","genBackground","_b","opacity","updateApplication","slots","staticClass","trim","icon","defaultSlot","VBtn","VIcon","Themeable","dark","light","isDark","theme","$slots","class","rtl","themeClasses","attrs","domProps","Colorable","intersect","button","indeterminate","rotate","width","radius","isVisible","calculatedSize","circumference","PI","normalizedValue","strokeDashArray","strokeDashOffset","strokeWidth","viewBoxSize","svgStyles","genCircle","$createElement","fill","cx","cy","genSvg","xmlns","viewBox","genInfo","onObserve","isIntersecting","setTextColor","role","$listeners","VSheet","Routable","Positionable","Sizeable","GroupableFactory","ToggleableFactory","activeClass","btnToggle","block","depressed","fab","loading","outlined","plain","retainFocusOnClick","rounded","text","tile","proxyClass","disabled","isElevated","hasBg","isRound","top","groupClasses","elevationClasses","sizeableClasses","computedElevation","Elevatable","computedRipple","defaultRipple","circle","ripple","elevation","measurableStyles","breakingProps","original","$attrs","breaking","click","detail","$el","blur","$emit","toggle","genContent","genLoader","loader","VProgressCircular","generateRouteLink","setColor","setBackgroundColor","Loadable","flat","hover","img","link","loaderHeight","raised","isClickable","background","genProgress","tabindex","VCardActions","createSimpleFunctional","VCardSubtitle","VCardText","VCardTitle","genRipple","center","prevent","preventDefault","VInput","Rippleable","Comparable","model","event","inputValue","falseValue","trueValue","multiple","label","hasColor","lazyValue","computedColor","appIsDark","isMultiple","internalValue","some","item","valueComparator","isDirty","rippleState","isDisabled","validationState","genLabel","genInput","computedId","checked","onBlur","onChange","focus","onFocus","keydown","onKeydown","onClick","isInteractive","validate","isFocused","Selectable","indeterminateIcon","offIcon","onIcon","inputIndeterminate","computedIcon","hasError","shouldValidate","hasSuccess","genCheckbox","title","checkboxAttrs","attrs$","genDefaultSlot","inset","vertical","orientation","breakpoints","breakpointProps","reduce","offsetProps","upperFirst","orderProps","propMap","col","breakpointClass","className","breakpoint","cols","alignSelf","validator","cacheKey","classList","hasColClasses","startsWith","mergeData","VGrid","Grid","fluid","ALIGNMENT","makeProps","def","alignValidator","alignProps","justifyValidator","justifyProps","alignContentValidator","alignContentProps","align","justify","alignContent","classMap","noGutters","SIZE_MAP","isFontAwesome5","iconType","isSvgPath","BindsAttrs","required","medium","hasClickListener","listeners$","getIcon","iconName","remapInternalIcon","getSize","sizes","xSmall","small","large","xLarge","explicitSize","getDefaultData","getSvgWrapperData","wrapperData","applyColors","renderFontIcon","delimiterIndex","isMaterialIcon","renderSvgIcon","svgData","renderSvgIconComponent","component","nativeOn","$_wrapperFor","textContent","Measurable","aspectRatio","contentClass","computedAspectRatio","aspectStyle","paddingBottom","__cachedSizer","getSlot","hasIntersect","VResponsive","alt","contain","eager","gradient","lazySrc","rootMargin","position","srcset","transition","currentSrc","image","isLoading","calculatedAspectRatio","naturalWidth","normalisedSrc","aspect","__cachedImage","backgroundImage","backgroundPosition","loadImage","lazyImg","Image","pollForSize","onLoad","getSrc","endsWith","naturalHeight","onError","poll","__genPlaceholder","slot","placeholder","appear","genChildren","genMessage","Validatable","inheritAttrs","appendIcon","backgroundColor","hideDetails","hideSpinButtons","hint","persistentHint","prependIcon","hasMouseDown","hasState","showDetails","isLabelActive","isReadonly","hasDetails","messagesToDisplay","hasHint","hasMessages","hasLabel","$_modelEvent","validations","validation","validationResult","genPrependSlot","genControl","genAppendSlot","genInputSlot","genMessages","genIcon","cb","extraData","eventName","kebabCase","hasListener","stopPropagation","mouseup","mousedown","onMouseDown","onMouseUp","VLabel","focused","for","VMessages","scopedSlots","genSlot","prepend","append","BaseItemGroup","Proxyable","mandatory","internalLazyValue","items","selectedIndex","selectedItem","selectedItems","toggleMethod","selectedValues","intern","genData","updateInternalValue","register","$on","updateMandatory","updateItem","unregister","_isDestroyed","valueIndex","updateItemsState","updateMultiple","updateSingle","defaultValue","isSame","itemGroup","ctx","functionalThemeClasses","isInList","list","inject","isInMenu","isInNav","expand","nav","subheader","threeLine","twoLine","groups","listClick","group","Ripple","isInGroup","listItemGroup","inactive","selectable","genAttrs","keyCode","keyCodes","$scopedSlots","active","Bootable","RegistrableInject","noAction","subGroup","$route","matchRoute","beforeDestroy","genAppendIcon","VListItemIcon","genHeader","VListItem","genPrependIcon","activator","genItems","showLazyContent","onRouteChange","VExpandTransition","filteredChild","VNode","isComment","Roundable","roundedClasses","minWidth","VAvatar","horizontal","VListItemActionText","VListItemContent","VListItemTitle","VListItemSubtitle","footer","insetFooter","paddingTop","paddingRight","paddingLeft","Dependent","Mobile","Overlayable","ClickOutside","Resize","Touch","clipped","disableResizeWatcher","disableRouteWatcher","expandOnHover","floating","miniVariant","miniVariantWidth","permanent","stateless","temporary","touchless","isMouseover","touchArea","stackMinZIndex","isMobile","isMiniVariant","computedMaxHeight","hasApp","computedTop","isBottom","computedWidth","reactsToClick","reactsToMobile","reactsToResize","reactsToRoute","showOverlay","hideOverlay","translate","maxHeight","prev","removeOverlay","genOverlay","updateMiniVariant","beforeMount","calculateTouchArea","parentRect","getBoundingClientRect","closeConditional","genAppend","genPosition","VImg","genDirectives","include","getOpenDependentElements","swipeLeft","swipeRight","genListeners","mouseenter","mouseleave","transitionend","currentTarget","resizeEvent","initUIEvent","dispatchEvent","genPrepend","genBorder","touchendX","touchstartX","clientWidth","unshift","shaped","$router","tabsBar","reverseTransition","inTransition","computedTransition","windowGroup","internalReverse","genWindowItem","onAfterTransition","transitionCount","transitionHeight","onBeforeTransition","clientHeight","onTransitionCancelled","onEnter","beforeEnter","afterEnter","enterCancelled","beforeLeave","afterLeave","leaveCancelled","enter","VWindowItem","x","sign","calculateUpdatedOffset","selectedElement","widths","currentScrollOffset","offsetLeft","totalWidth","itemOffset","additionalOffset","calculateCenteredOffset","offsetCentered","BaseSlideGroup","centerActive","nextIcon","prevIcon","showArrows","internalItemsLength","isOverflowing","resizeTimeout","startX","isSwipingHorizontal","isSwiping","scrollOffset","canTouch","__cachedNext","genTransition","__cachedPrev","hasAffixes","hasPrev","scroll","$refs","beforeUpdate","$children","updated","setWidths","scrollLeft","onFocusin","composedPath","vm","genNext","onAffixClick","focusin","onResize","upperLocation","hasAffix","genPrev","VFadeTransition","genWrapper","overflowCheck","onTouchStart","move","onTouchMove","end","onTouchEnd","calculateNewOffset","direction","newAbosluteOffset","scrollTo","setProperty","diffX","touchmoveX","diffY","touchmoveY","touchstartY","documentElement","overflowY","maxScrollOffset","removeProperty","scrollIntoView","lastItemPosition","wrapperPosition","requestAnimationFrame","slideGroup","callSlider","oldVal","newPath","oldPath","hasNew","hasOld","alignWithTitle","centered","fixedTabs","grow","hideSlider","iconsAndText","mobileBreakpoint","sliderColor","sliderSize","slider","transitionTime","isReversed","sliderStyles","activeTab","scrollHeight","offsetWidth","offsetTop","scrollWidth","genBar","VTabsBar","genSlider","VTabsItems","VTabsSlider","parseNodes","tab","componentOptions","Ctor","quiet","continuous","showArrowsOnHover","touch","changedByDelimiters","internalHeight","isReverse","axis","hasActiveItems","internalIndex","updateReverse","genContainer","genControlIcons","lang","_this$$scopedSlots$di2","icons","getNextIndex","nextIndex","getPrevIndex","prevIndex","lastIndex","itemsLength","VWindow","rootIsDark","isGreater","intersectable","Intersect","destroyed","onVisible","Intersectable","dirtyTypes","resize","appendOuterIcon","autofocus","clearable","clearIcon","counter","counterValue","filled","fullWidth","prependInnerIcon","persistentPlaceholder","singleLine","solo","soloInverted","suffix","badInput","labelWidth","prefixWidth","prependWidth","initialValue","isClearing","isSingle","isSolo","isEnclosed","computedCounterValue","hasCounter","labelPosition","labelValue","showLabel","setLabelWidth","setPrefixWidth","$watch","tryAutofocus","clearableCallback","genPrependInnerSlot","genIconSlot","genClearIcon","genCounter","maxlength","_this$$scopedSlots$co2","VCounter","genFieldset","genTextFieldSlot","genLegend","span","inputAttrs","is","readonly","onInput","onKeyDown","messagesNode","counterNode","genAffix","attachedRoot","activeElement","validity","setPrependWidth","updateValue","VTextField","autoGrow","noResize","rowHeight","rows","noResizeHandle","calculateInputHeight","_this$$refs$input","minHeight","extended","prominent","short","smAndDown","genExtension","extension","VToolbarTitle","VToolbarItems","mergeTransitions","dest","transitions","createSimpleTransition","hideOnLeave","leaveAbsolute","transformOrigin","webkitTransformOrigin","leave","offsetHeight","_transitionInitialStyles","createJavascriptTransition","functions","expandedParentClass","sizeProperty","offsetProperty","_parent","_initialStyle","overflow","initialStyle","resetStyles","VSlideXTransition","ExpandTransitionGenerator","defaultConditional","checkEvent","checkIsActive","ShadowRoot","elements","directive","_clickOutside","lastMousedownWasOutside","handleShadow","onMousedown","_el$_clickOutside","IntersectionObserver","_observe","_el$_observe","entry","observe","_el$_observe2","unobserve","_onResize","_el$_onResize","DELAY_RIPPLE","webkitTransform","isTouchEvent","isKeyboardEvent","calculate","localX","localY","touches","clientX","clientY","scale","_ripple","sqrt","centerX","centerY","y","ripples","show","enabled","animation","getComputedStyle","dataset","previousPosition","activated","performance","hide","getElementsByClassName","isHiding","diff","delay","isRippleEnabled","rippleShow","element","touched","rippleStop","isTouch","showTimerCommit","showTimer","rippleHide","rippleCancelShow","keyboardRipple","keyboardRippleShow","keyboardRippleHide","focusRippleHide","updateRipple","wasEnabled","removeListeners","oldValue","handleGesture","touchendY","dirRatio","minDistance","offsetX","offsetY","up","down","touchstart","changedTouches","touchend","touchmove","createHandlers","parentElement","handlers","_touchHandlers","install","installed","OurVue","consoleError","components","registerComponents","$_vuetify_subcomponents","$_vuetify_installed","mixin","vuetify","$ssrContext","observable","framework","hasAttribute","isHydrating","badge","dataIterator","noResultsText","loadingText","dataTable","itemsPerPageText","ariaLabel","sortDescending","sortAscending","sortNone","activateNone","activateDescending","activateAscending","sortBy","dataFooter","itemsPerPageAll","nextPage","prevPage","firstPage","lastPage","pageText","datePicker","itemsSelected","nextMonthAriaLabel","nextYearAriaLabel","prevMonthAriaLabel","prevYearAriaLabel","noDataText","carousel","delimiter","calendar","moreEvents","fileInput","counterSize","timePicker","am","pm","pagination","previous","page","currentPage","rating","preset","scrollBarWidth","thresholds","xs","sm","md","lg","iconfont","locales","en","disable","cspNonce","customProperties","minifyTheme","themeCache","variations","themes","primary","secondary","accent","info","warning","Service","Presets","parentPreset","defaultPreset","mergeDeep","Preset","userPreset","globalPreset","Application","acc","cur","Breakpoint","xl","xsOnly","smOnly","smAndUp","mdOnly","mdAndDown","mdAndUp","lgOnly","lgAndDown","lgAndUp","xlOnly","mobile","property","ssr","getClientHeight","getClientWidth","innerWidth","innerHeight","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","getOffset","totalOffset","offsetParent","getContainer","_isVue","HTMLElement","goTo","_target","_settings","settings","scrollingElement","duration","easing","appOffset","isDrawer","isClipped","startTime","targetLocation","startLocation","ease","easingPatterns","step","currentTime","timeElapsed","progress","reachBottom","Goto","checkboxOn","checkboxOff","checkboxIndeterminate","menu","subgroup","dropdown","radioOn","radioOff","edit","ratingEmpty","ratingFull","ratingHalf","first","unfold","file","plus","minus","convertToComponentDeclarations","iconSet","mdiSvg","mdi","fa","fa4","faSvg","Icons","presets","LANG_PREFIX","fallback","getTranslation","locale","usingDefault","defaultLocale","shortKey","translation","getObjectValueByPath","Lang","translator","defaultTranslator","currentLocale","srgbForwardMatrix","srgbForwardTransform","C","srgbReverseMatrix","srgbReverseTransform","fromXYZ","xyz","rgb","matrix","clamp","toXYZ","cielabForwardTransform","cbrt","cielabReverseTransform","transformedY","lab","Ln","isItem","anchor","colors","parsedTheme","colorToHex","genVariations","colorToInt","base","intToHex","genBaseColor","genVariantColor","genColorVariableName","genColorVariable","genStyles","cssVar","variablesCss","css","aColor","variants","variantValue","lighten","darken","LAB","sRGB","Theme","unwatch","vueMeta","defaults","fillVariant","isVueMeta23","applyVueMeta23","checkOrCreateStyleElement","styleEl","oldDark","applyTheme","clearCss","generatedStyles","$meta","initVueMeta","initSSR","initTheme","setTheme","resetThemes","getElementById","genStyleElement","defaultTheme","setAttribute","head","metaKeyName","getOptions","keyName","metaInfo","vuetifyStylesheet","cssText","nonce","addApp","$once","obs","deep","currentTheme","ThemeUtils","getNestedValue","Vuetify","use","services","silent","applicationable","PositionableFactory","removeApplication","deactivated","force","makeWatcher","attr","$delete","$data","$set","immediate","hasContent","isCssColor","colorName","colorModifier","searchChildren","isDependent","closeDependents","openDependents","getOpenDependents","getClickableDependentElements","overlay","factory","backgroundOpacity","bufferValue","stream","striped","__cachedBackground","backgroundStyle","__cachedBar","__cachedBarType","__cachedIndeterminate","__cachedDeterminate","__cachedBuffer","genProgressBar","__cachedStream","normalizedBuffer","reactive","VProgressLinear","maxWidth","mobileWidth","isNumber","deprecate","zIndex","__scrim","overlayColor","overlayOpacity","animationFrame","createOverlay","VOverlay","propsData","$mount","insertBefore","firstChild","hideScroll","activeZIndex","getZIndex","showScroll","addOnceEventListener","$destroy","cancelAnimationFrame","scrollListener","tagName","isContentEditable","deltaY","checkPath","hasScrollbar","nodeType","Node","ELEMENT_NODE","overflowX","shouldScroll","dir","shiftKey","deltaX","alreadyAtStart","alreadyAtEnd","scrollingUp","scrollingDown","isInside","dialog","selected","getSelection","anchorNode","addPassiveEventListener","availableProps","filterObjectOnKeys","generateWarning","defaultImpl","composite","exact","exactPath","exactActiveClass","nuxt","isLink","themeableProvide","rootThemeClasses","injections","errorCount","errorMessages","messages","rules","successMessages","validateOnBlur","errorBucket","hasFocused","hasInput","isResetting","valid","internalErrorMessages","internalSuccessMessages","externalError","validationTarget","genInternalMessages","internalMessages","form","resetValidation","rule","char","hexColor","createMessage","$parent","$_alreadyWarned","generateComponentTrace","newMessage","classifyRE","classify","formatComponentName","includeFile","cid","_componentTag","__file","currentRecursiveSequence","getRootNode","composed","passiveSupported","testListenerOpts","getPropertyValue","unit","esc","space","home","del","backspace","pageup","pagedown","iconPath","override","o","camelizeRE","camelize","wrapInArray","getSlotType","pattern","styleList","styleProp","parseStyle","styleMap","mergeTarget","mergeClasses","mergeStyles","mergeListeners","encodeReserveRE","encodeReserveReplacer","commaRE","encode","resolveQuery","extraQuery","_parseQuery","parsedQuery","parseQuery","castQueryParamValue","param","stringifyQuery","val2","trailingSlashRE","createRoute","redirectedFrom","router","clone","route","meta","getFullPath","matched","formatMatch","START","_stringifyQuery","isSameRoute","onlyPath","isObjectEqual","aVal","bKey","bVal","isIncludedRoute","queryIncludes","handleRouteEntered","instances","cbs","enteredCbs","i$1","_isBeingDestroyed","routerView","_routerViewCache","depth","_routerRoot","vnodeData","keepAlive","_directInactive","_inactive","routerViewDepth","cachedData","cachedComponent","configProps","fillPropsinData","registerRouteInstance","prepatch","componentInstance","propsToPass","resolveProps","config","resolvePath","relative","firstChar","segments","parsePath","hashIndex","queryIndex","cleanPath","isarray","arr","pathToRegexp_1","pathToRegexp","parse_1","compile_1","compile","tokensToFunction_1","tokensToFunction","tokensToRegExp_1","tokensToRegExp","PATH_REGEXP","tokens","defaultDelimiter","escaped","capture","modifier","asterisk","partial","escapeGroup","escapeString","encodeURIComponentPretty","encodeURI","encodeAsterisk","flags","opts","pretty","attachKeys","re","sensitive","regexpToRegexp","arrayToRegexp","regexp","stringToRegexp","strict","endsWithDelimiter","regexpCompileCache","fillParams","routeMsg","filler","pathMatch","normalizeLocation","_normalized","params$1","rawPath","basePath","_Vue","toTypes","eventTypes","Link","custom","ariaCurrentValue","this$1","globalActiveClass","linkActiveClass","globalExactActiveClass","linkExactActiveClass","activeClassFallback","exactActiveClassFallback","compareTarget","guardEvent","scopedSlot","$hasNormal","navigate","isExactActive","findAnchor","isStatic","aData","handler$1","event$1","aAttrs","metaKey","altKey","ctrlKey","defaultPrevented","getAttribute","isDef","registerInstance","callVal","_parentVnode","_router","util","defineReactive","history","_route","strats","optionMergeStrategies","beforeRouteEnter","beforeRouteLeave","beforeRouteUpdate","inBrowser","createRouteMap","routes","oldPathList","oldPathMap","oldNameMap","parentRoute","pathList","pathMap","nameMap","addRouteRecord","l","matchAs","pathToRegexpOptions","normalizedPath","normalizePath","caseSensitive","regex","compileRouteRegex","alias","redirect","childMatchAs","aliases","aliasRoute","createMatcher","addRoutes","addRoute","parentOrRoute","getRoutes","currentRoute","_createRoute","paramNames","record$1","originalRedirect","resolveRecordPath","resolvedPath","aliasedPath","aliasedMatch","aliasedRecord","Time","genStateKey","toFixed","getStateKey","setStateKey","positionStore","setupScroll","scrollRestoration","protocolAndPath","absolutePath","stateCopy","replaceState","handlePopState","handleScroll","isPop","behavior","scrollBehavior","getScrollPosition","scrollToPosition","saveScrollPosition","pageXOffset","getElementPosition","docEl","docRect","elRect","isValidPosition","normalizePosition","normalizeOffset","hashStartsWithNumberRE","selector","supportsPushState","ua","pushState","runQueue","NavigationFailureType","redirected","aborted","cancelled","duplicated","createNavigationRedirectedError","createRouterError","stringifyRoute","createNavigationDuplicatedError","createNavigationCancelledError","createNavigationAbortedError","_isRouter","propertiesToLog","isError","isNavigationFailure","errorType","resolveAsyncComponents","hasAsync","pending","flatMapComponents","resolvedDef","isESModule","comp","flatten","hasSymbol","toStringTag","__esModule","History","normalizeBase","ready","readyCbs","readyErrorCbs","errorCbs","baseEl","resolveQueue","extractGuards","records","guards","guard","extractGuard","extractLeaveGuards","bindGuard","extractUpdateHooks","extractEnterGuards","bindEnterGuard","errorCb","transitionTo","onAbort","confirmTransition","updateRoute","ensureURL","afterHooks","abort","lastRouteIndex","lastCurrentIndex","beforeHooks","enterGuards","resolveHooks","setupListeners","teardown","cleanupListener","HTML5History","_startLocation","getLocation","expectScroll","supportsScroll","handleRoutingEvent","go","fromRoute","getCurrentLocation","pathname","pathLowerCase","baseLowerCase","HashHistory","checkFallback","ensureSlash","getHash","replaceHash","pushHash","getUrl","AbstractHistory","targetIndex","VueRouter","apps","matcher","prototypeAccessors","registerHook","createHref","handleInitialScroll","routeOrError","beforeEach","beforeResolve","afterEach","back","forward","getMatchedComponents","normalizedTo","START_LOCATION","emptyObject","isUndef","isTrue","isFalse","isPrimitive","_toString","isPlainObject","isRegExp","isValidArrayIndex","isFinite","isPromise","toNumber","makeMap","expectsLowerCase","isReservedAttribute","hit","capitalize","hyphenateRE","hyphenate","polyfillBind","boundFn","_length","nativeBind","toArray","_from","no","identity","looseEqual","isObjectA","isObjectB","isArrayA","isArrayB","keysA","keysB","looseIndexOf","SSR_ATTR","ASSET_TYPES","LIFECYCLE_HOOKS","productionTip","devtools","errorHandler","warnHandler","ignoredElements","isReservedTag","isReservedAttr","isUnknownElement","getTagNamespace","parsePlatformTagName","mustUseProp","_lifecycleHooks","unicodeRegExp","isReserved","bailRE","_isServer","hasProto","inWeex","WXEnvironment","weexPlatform","UA","isIE","isIE9","isEdge","isIOS","isFF","nativeWatch","supportsPassive","isServerRendering","VUE_ENV","__VUE_DEVTOOLS_GLOBAL_HOOK__","isNative","_Set","Dep","subs","addSub","removeSub","depend","addDep","notify","targetStack","pushTarget","popTarget","elm","asyncFactory","ns","fnContext","fnOptions","fnScopeId","isRootInsert","isCloned","isOnce","asyncMeta","isAsyncPlaceholder","createEmptyVNode","createTextVNode","cloneVNode","cloned","arrayProto","arrayMethods","methodsToPatch","ob","__ob__","observeArray","dep","arrayKeys","shouldObserve","toggleObserving","Observer","vmCount","protoAugment","copyAugment","walk","asRootData","isExtensible","defineReactive$$1","customSetter","shallow","childOb","dependArray","toVal","fromVal","mergeDataOrFn","parentVal","childVal","instanceData","defaultData","mergeHook","dedupeHooks","hooks","mergeAssets","key$1","defaultStrat","normalizeProps","normalizeInject","normalized","normalizeDirectives","dirs","def$$1","mergeOptions","_base","extends","mergeField","strat","resolveAsset","warnMissing","assets","camelizedId","PascalCaseId","validateProp","propOptions","absent","booleanIndex","getTypeIndex","stringIndex","getPropDefaultValue","prevShouldObserve","_props","getType","functionTypeCheckRE","isSameType","expectedTypes","handleError","errorCaptured","globalHandleError","invokeWithErrorHandling","_handled","logError","timerFunc","isUsingMicroTask","flushCallbacks","copies","MutationObserver","setImmediate","textNode","createTextNode","characterData","nextTick","_resolve","seenObjects","traverse","_traverse","seen","isA","isFrozen","depId","normalizeEvent","once$$1","createFnInvoker","fns","invoker","arguments$1","updateListeners","oldOn","remove$$1","createOnceHandler","old","mergeVNodeHook","hookKey","oldHook","wrappedHook","merged","extractPropsFromVNodeData","checkProp","preserve","simpleNormalizeChildren","normalizeChildren","normalizeArrayChildren","isTextNode","nestedIndex","_isVList","initProvide","_provided","initInjections","resolveInject","provideKey","provideDefault","resolveSlots","name$1","isWhitespace","normalizeScopedSlots","normalSlots","prevSlots","hasNormalSlots","isStable","$stable","$key","normalizeScopedSlot","key$2","proxyNormalSlot","renderList","done","renderSlot","fallbackRender","bindObject","scopedSlotFn","resolveFilter","isKeyNotMatch","expect","actual","checkKeyCodes","eventKeyCode","builtInKeyCode","eventKeyName","builtInKeyName","mappedKeyCode","bindObjectProps","asProp","isSync","loop","camelizedKey","hyphenatedKey","$event","renderStatic","isInFor","_staticTrees","_renderProxy","markStatic","markOnce","markStaticNode","bindObjectListeners","ours","resolveScopedSlots","hasDynamicKeys","contentHashKey","bindDynamicKeys","baseObj","prependModifier","installRenderHelpers","_o","_n","_s","_l","_t","_q","_i","_m","_f","_k","_v","_e","_u","_g","_d","_p","FunctionalRenderContext","contextVm","_original","isCompiled","needNormalization","_c","createFunctionalComponent","mergeProps","renderContext","cloneAndMarkFunctionalResult","vnodes","componentVNodeHooks","hydrating","mountedNode","createComponentInstanceForVnode","activeInstance","oldVnode","updateChildComponent","_isMounted","callHook","queueActivatedComponent","activateChildComponent","destroy","deactivateChildComponent","hooksToMerge","createComponent","baseCtor","resolveAsyncComponent","createAsyncPlaceholder","resolveConstructorOptions","transformModel","abstract","installComponentHooks","_isComponent","inlineTemplate","toMerge","_merged","mergeHook$1","f1","f2","SIMPLE_NORMALIZE","ALWAYS_NORMALIZE","normalizationType","alwaysNormalize","_createElement","pre","applyNS","registerDeepBindings","initRender","_vnode","parentVnode","_renderChildren","parentData","_parentListeners","currentRenderingInstance","renderMixin","_render","ensureCtor","errorComp","owner","owners","loadingComp","sync","timerLoading","timerTimeout","forceRender","renderCompleted","$forceUpdate","getFirstComponentChild","initEvents","_events","_hasHookEvent","updateComponentListeners","remove$1","$off","onceHandler","oldListeners","eventsMixin","hookRE","setActiveInstance","prevActiveInstance","initLifecycle","_watcher","lifecycleMixin","_update","prevEl","prevVnode","restoreActiveInstance","__patch__","__vue__","_watchers","_data","mountComponent","updateComponent","Watcher","before","renderChildren","newScopedSlots","oldScopedSlots","hasDynamicScopedSlot","needsForceUpdate","propKeys","_propKeys","isInInactiveTree","direct","activatedChildren","waiting","flushing","resetSchedulerState","currentFlushTimestamp","getNow","timeStamp","flushSchedulerQueue","watcher","run","activatedQueue","updatedQueue","callActivatedHooks","callUpdatedHooks","emit","queueWatcher","uid$2","expOrFn","isRenderWatcher","user","lazy","dirty","deps","newDeps","depIds","newDepIds","expression","cleanupDeps","tmp","evaluate","sharedPropertyDefinition","sourceKey","initState","initProps","initMethods","initData","initComputed","initWatch","propsOptions","isRoot","getData","computedWatcherOptions","watchers","_computedWatchers","isSSR","userDef","defineComputed","shouldCache","createComputedGetter","createGetterInvoker","createWatcher","stateMixin","dataDef","propsDef","uid$3","initMixin","_init","initInternalComponent","_self","vnodeComponentOptions","superOptions","cachedSuperOptions","modifiedOptions","resolveModifiedOptions","extendOptions","modified","latest","sealed","sealedOptions","initUse","plugin","installedPlugins","_installedPlugins","initMixin$1","initExtend","Super","SuperId","cachedCtors","_Ctor","Sub","initProps$1","initComputed$1","Comp","initAssetRegisters","definition","getComponentName","pruneCache","keepAliveInstance","pruneCacheEntry","patternTypes","KeepAlive","exclude","cacheVNode","vnodeToCache","keyToCache","ref$1","builtInComponents","initGlobalAPI","configDef","acceptValue","isEnumeratedAttr","isValidContentEditableValue","convertEnumeratedValue","isFalsyAttrValue","isBooleanAttr","xlinkNS","isXlink","getXlinkProp","genClassForVnode","mergeClassData","renderClass","dynamicClass","stringifyClass","stringifyArray","stringifyObject","stringified","namespaceMap","svg","math","isHTMLTag","isSVG","unknownElementCache","HTMLUnknownElement","isTextInputType","createElement$1","createElementNS","createComment","referenceNode","nextSibling","setTextContent","setStyleScope","nodeOps","registerRef","isRemoval","refs","refInFor","emptyNode","sameVnode","sameInputType","typeA","typeB","createKeyToOldIdx","beginIdx","endIdx","createPatchFunction","backend","modules","emptyNodeAt","createRmCb","childElm","removeNode","createElm","insertedVnodeQueue","parentElm","refElm","nested","ownerArray","setScope","createChildren","invokeCreateHooks","isReactivated","initComponent","reactivateComponent","pendingInsert","isPatchable","innerNode","activate","ref$$1","ancestor","addVnodes","startIdx","invokeDestroyHook","removeVnodes","ch","removeAndInvokeRemoveHook","rm","updateChildren","oldCh","newCh","removeOnly","oldKeyToIdx","idxInOld","vnodeToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","canMove","patchVnode","findIdxInOld","hydrate","postpatch","invokeInsertHook","initial","isRenderedModule","inVPre","hasChildNodes","childrenMatch","fullInvoke","isInitialPatch","isRealElement","removeAttribute","oldElm","_leaveCb","patchable","i$2","updateDirectives","oldDir","isCreate","isDestroy","oldDirs","normalizeDirectives$1","newDirs","dirsWithInsert","dirsWithPostpatch","oldArg","callHook$1","componentUpdated","callInsert","emptyModifiers","getRawDirName","rawName","baseModules","updateAttrs","oldAttrs","setAttr","removeAttributeNS","isInPre","baseSetAttr","setAttributeNS","__ieph","blocker","stopImmediatePropagation","updateClass","oldData","cls","transitionClass","_transitionClasses","_prevClass","target$1","klass","RANGE_TOKEN","CHECKBOX_RADIO_TOKEN","normalizeEvents","createOnceHandler$1","remove$2","useMicrotaskFix","add$1","attachedTimestamp","_wrapper","ownerDocument","updateDOMListeners","svgContainer","updateDOMProps","oldProps","childNodes","strCur","shouldUpdateValue","checkVal","composing","isNotInFocusAndDirty","isDirtyWithModifiers","notInFocus","_vModifiers","parseStyleText","listDelimiter","propertyDelimiter","normalizeStyleData","normalizeStyleBinding","staticStyle","bindingStyle","getStyle","checkChild","styleData","emptyStyle","cssVarRE","importantRE","setProp","normalizedName","vendorNames","capName","updateStyle","oldStaticStyle","oldStyleBinding","normalizedStyle","oldStyle","newStyle","whitespaceRE","addClass","removeClass","tar","resolveTransition","autoCssTransition","enterClass","enterToClass","enterActiveClass","leaveClass","leaveToClass","leaveActiveClass","hasTransition","TRANSITION","ANIMATION","transitionProp","transitionEndEvent","animationProp","animationEndEvent","ontransitionend","onwebkittransitionend","onanimationend","onwebkitanimationend","raf","nextFrame","addTransitionClass","transitionClasses","removeTransitionClass","whenTransitionEnds","expectedType","getTransitionInfo","propCount","ended","onEnd","transformRE","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","hasTransform","delays","durations","toMs","toggleDisplay","_enterCb","appearClass","appearToClass","appearActiveClass","beforeAppear","afterAppear","appearCancelled","transitionNode","isAppear","startClass","toClass","beforeEnterHook","enterHook","afterEnterHook","enterCancelledHook","explicitEnterDuration","expectsCSS","userWantsControl","getHookArgumentsLength","pendingNode","_pending","isValidDuration","delayLeave","explicitLeaveDuration","performLeave","invokerFns","_enter","platformModules","patch","vmodel","_vOptions","setSelected","onCompositionStart","onCompositionEnd","prevOptions","curOptions","needReset","hasNoMatchingOption","actuallySetSelected","option","initEvent","locateNode","transition$$1","originalDisplay","__vOriginalDisplay","platformDirectives","transitionProps","getRealChild","compOptions","extractTransitionData","rawChild","hasParentTransition","isSameChild","isNotTextNode","isVShowDirective","Transition","_leaving","oldRawChild","delayedLeave","moveClass","TransitionGroup","kept","prevChildren","rawChildren","transitionData","c$1","hasMove","callPendingCbs","recordPosition","applyTranslation","_reflow","moved","WebkitTransform","transitionDuration","_moveCb","propertyName","_hasMove","cloneNode","newPos","oldPos","dx","dy","platformComponents","walkSet","createRecordFromRTDBSnapshot","indexForKey","DEFAULT_OPTIONS","serialize","wait","rtdbBindAsObject","extraOptions","ops","rtdbBindAsArray","childAdded","prevKey","childRemoved","childChanged","childMoved","oldRecord","createSnapshot","DEFAULT_OPTIONS$1","maxRefDepth","refOrQuery","_firebaseUnbinds","_firebaseSources","defaultOptions","bindName","unbindName","rtdbPlugin","pluginOptions","strategies","globalOptions","userOptions","$firebaseRefs","bindings","FirebaseAppImpl","_addComponent","automaticDataCollectionEnabled","checkDestroyed","removeApp","deleteApp","_getService","_DEFAULT_ENTRY_NAME","provider","isInitialized","getComponent","instantiationMode","initialize","_removeServiceInstance","clearInstance","_addOrOverwriteComponent","ERRORS","ERROR_FACTORY","createFirebaseNamespaceCore","firebaseAppImpl","initializeApp","initializeAppCompat","setLogLevel","onLog","registerComponentCompat","useAsService","modularAPIs","rawConfig","appCompat","getApps","componentName","componentNameWithoutCompat","serviceNamespace","appArg","serviceProps","serviceFxn","multipleInstances","useService","createFirebaseNamespace","extendNamespace","firebase$1","registerCoreComponents","sdkVersion","instanceOfAny","constructors","idbProxyableTypes","cursorAdvanceMethods","getIdbProxyableTypes","IDBDatabase","IDBObjectStore","IDBIndex","IDBCursor","IDBTransaction","getCursorAdvanceMethods","advance","continue","continuePrimaryKey","cursorRequestMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","promisifyRequest","cacheDonePromiseForTransaction","tx","DOMException","idbProxyTraps","receiver","objectStoreNames","objectStore","replaceTraps","wrapFunction","unwrap","storeNames","transformCachableValue","Proxy","IDBRequest","newValue","openDB","blocked","upgrade","blocking","terminated","openPromise","oldVersion","newVersion","readMethods","writeMethods","cachedMethods","targetFuncName","useIndex","isWrite","storeName","oldTraps","PlatformLoggerServiceImpl","getPlatformInfoString","providers","getProviders","isVersionServiceProvider","library","logString","name$o","version$1","name$n","name$m","name$l","name$k","name$j","name$i","name$h","name$g","name$f","name$e","name$d","name$c","name$b","name$a","name$9","name$8","name$7","name$6","name$5","name$4","name$3","name$2","DEFAULT_ENTRY_NAME","PLATFORM_LOG_STRING","_apps","_components","addComponent","debug","addOrOverwriteComponent","_getProvider","heartbeatController","triggerHeartbeat","_clearComponents","_isDeleted","_options","_config","_name","_automaticDataCollectionEnabled","_container","isDeleted","existingApp","newApp","getApp","libraryKeyOrName","libraryMismatch","versionMismatch","logCallback","DB_NAME","DB_VERSION","STORE_NAME","dbPromise","getDbPromise","createObjectStore","originalErrorMessage","readHeartbeatsFromIndexedDB","computeKey","idbGetError","writeHeartbeatsToIndexedDB","heartbeatObject","MAX_HEADER_BYTES","STORED_HEARTBEAT_RETENTION_MAX_MILLIS","HeartbeatServiceImpl","_heartbeatsCache","_storage","HeartbeatStorageImpl","_heartbeatsCachePromise","read","platformLogger","agent","date","getUTCDateString","lastSentHeartbeatDate","heartbeats","singleDateHeartbeat","hbTimestamp","heartbeatsToSend","unsentEntries","extractHeartbeatsForHeader","headerString","today","toISOString","heartbeatsCache","maxSize","heartbeatEntry","hb","dates","countBytes","_canUseIndexedDBPromise","runIndexedDBEnvironmentCheck","canUseIndexedDB","idbHeartbeatObject","heartbeatsObject","existingHeartbeatsObject","Component","instanceFactory","onInstanceCreated","setInstantiationMode","setInstanceCreatedCallback","Provider","instancesDeferred","instancesOptions","onInitCallbacks","normalizedIdentifier","normalizeInstanceIdentifier","shouldAutoInitialize","getOrInitializeService","isComponentEager","instanceDeferred","isComponentSet","normalizedDeferredIdentifier","existingCallbacks","existingInstance","invokeOnInitCallbacks","normalizeIdentifierForFactory","ComponentContainer","LogLevel","levelStringToEnum","DEBUG","VERBOSE","INFO","WARN","ERROR","SILENT","defaultLogLevel","ConsoleMethod","defaultLogHandler","logType","Logger","_logLevel","_logHandler","_userLogHandler","logHandler","userLogHandler","level","inst","setUserLogHandler","customLogLevel","ignored"],"sourceRoot":""}